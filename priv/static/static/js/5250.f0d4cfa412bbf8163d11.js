(self.webpackChunkpleroma_fe=self.webpackChunkpleroma_fe||[]).push([[5250],{28583:(e,t,n)=>{var a=n(34865),i=n(98363),o=n(21463),r=n(98612),l=n(25726),s=n(3674),c=Object.prototype.hasOwnProperty,d=o((function(e,t){if(l(t)||r(t))i(t,s(t),e);else for(var n in t)c.call(t,n)&&a(e,n,t[n])}));e.exports=d},57128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Jt});var a=n(66252),i=n(3577),o=["label"],r=["label"],l={class:"setting-item"},s={href:"https://docs-develop.pleroma.social/backend/configuration/howto_database_config/",target:"_blank"},c=(0,a._)("code",null,"config :pleroma, configurable_from_database",-1),d=(0,a._)("code",null,"true",-1),u=["label"],p=["label"],m=["label"],h=["label"],f=n(79354),_=["label"],b={class:"setting-item"},k={class:"setting-list"},g={key:0},w={class:"setting-item"},v={class:"setting-list"},j={class:"setting-list suboptions"},y={class:"setting-list suboptions"},P={class:"setting-list"},$={class:"setting-list suboptions"},D={key:0},S={class:"setting-list"},O={class:"setting-item"},z={class:"setting-list"},W={key:0},E={class:"setting-list"},M={class:"setting-list"},C={class:"setting-list"},U={class:"setting-list"},F=n(4942),I=n(59236),N=n(77218),L=n(87449),Z={key:0,class:"StringSetting"},q=["for"],x=["id","disabled","value"],A=n(93257);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const V=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A.Z);var B=n(83744);const T=(0,B.Z)(V,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("ModifiedIndicator"),c=(0,a.up)("ProfileSettingIndicator"),d=(0,a.up)("DraftButtons");return e.matchesExpertLevel?((0,a.wg)(),(0,a.iD)("label",Z,[(0,a._)("label",{for:e.path,class:(0,i.C_)({faint:e.shouldBeDisabled})},[e.backendDescriptionLabel?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,i.zw)(e.backendDescriptionLabel+" "),1)],64)):"admin"===e.source?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)(" MISSING LABEL FOR "+(0,i.zw)(e.path),1)],64)):(0,a.WI)(e.$slots,"default",{key:2})],10,q),(0,a._)("input",{id:e.path,class:"input string-input",disabled:e.shouldBeDisabled,value:e.realDraftMode?e.draft:e.state,onChange:t[0]||(t[0]=function(){return e.update&&e.update.apply(e,arguments)})},null,40,x),(0,a.Uk)(" "+(0,i.zw)(" ")+" "),(0,a.Wm)(s,{changed:e.isChanged,onclick:e.reset},null,8,["changed","onclick"]),(0,a.Wm)(c,{"is-profile":e.isProfileSetting},null,8,["is-profile"]),(0,a.Wm)(d),e.backendDescriptionDescription?((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,i.C_)(["setting-description",{faint:e.shouldBeDisabled}])},(0,i.zw)(e.backendDescriptionDescription+" "),3)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}]]);var Y={key:0,class:"GroupSetting"},H=n(18446),K=n.n(H);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const J=X(X({},A.Z),{},{computed:X(X({},A.Z.computed),{},{isDirty:function(){return!K()(this.state,this.draft)}})}),Q=(0,B.Z)(J,[["render",function(e,t,n,i,o,r){var l=(0,a.up)("ModifiedIndicator"),s=(0,a.up)("ProfileSettingIndicator"),c=(0,a.up)("DraftButtons");return e.matchesExpertLevel?((0,a.wg)(),(0,a.iD)("span",Y,[(0,a.Wm)(l,{changed:e.isChanged,onclick:e.reset},null,8,["changed","onclick"]),(0,a.Wm)(s,{"is-profile":e.isProfileSetting},null,8,["is-profile"]),(0,a.Wm)(c)])):(0,a.kq)("",!0)}]]);var ee=["for"],te={class:"attachment-input"},ne={class:"controls control-field"},ae={for:"path"},ie=["id","disabled","value"],oe={key:0},re={class:"controls control-upload"},le=n(58394),se=n(89261),ce=n(88230);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pe=ue(ue({},A.Z),{},{props:ue(ue({},A.Z.props),{},{compact:Boolean,acceptTypes:{type:String,required:!1,default:"image/*"}}),components:ue(ue({},A.Z.components),{},{MediaUpload:se.Z,Attachment:ce.Z}),computed:ue(ue({},A.Z.computed),{},{attachment:function(){var e=this.realDraftMode?this.draft:this.state,t=e.includes("://")?e:this.$store.state.instance.server+e;return{mimetype:(0,le.iL)(t),url:t}}}),methods:ue(ue({},A.Z.methods),{},{setMediaFile:function(e){this.realDraftMode?this.draft=e.url:this.configSink(this.path,e.url)}})}),me=(0,B.Z)(pe,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("ModifiedIndicator"),c=(0,a.up)("ProfileSettingIndicator"),d=(0,a.up)("Attachment"),u=(0,a.up)("MediaUpload"),p=(0,a.up)("DraftButtons");return e.matchesExpertLevel?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,i.C_)(["AttachmentSetting",{"-compact":e.compact}])},[(0,a._)("label",{for:e.path,class:(0,i.C_)({faint:e.shouldBeDisabled})},[e.backendDescriptionLabel?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,i.zw)(e.backendDescriptionLabel+" "),1)],64)):"admin"===e.source?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)(" MISSING LABEL FOR "+(0,i.zw)(e.path),1)],64)):(0,a.WI)(e.$slots,"default",{key:2})],10,ee),e.backendDescriptionDescription?((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,i.C_)(["setting-description",{faint:e.shouldBeDisabled}])},(0,i.zw)(e.backendDescriptionDescription+" "),3)):(0,a.kq)("",!0),(0,a._)("div",te,[(0,a._)("div",ne,[(0,a._)("label",ae,(0,i.zw)(e.$t("settings.url")),1),(0,a._)("input",{id:e.path,class:"input string-input",disabled:e.shouldBeDisabled,value:e.realDraftMode?e.draft:e.state,onChange:t[0]||(t[0]=function(){return e.update&&e.update.apply(e,arguments)})},null,40,ie),(0,a.Uk)(" "+(0,i.zw)(" ")+" "),(0,a.Wm)(s,{changed:e.isChanged,onclick:e.reset},null,8,["changed","onclick"]),(0,a.Wm)(c,{"is-profile":e.isProfileSetting},null,8,["is-profile"])]),e.compact?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",oe,(0,i.zw)(e.$t("settings.preview")),1)),(0,a.Wm)(d,{class:"attachment",compact:e.compact,attachment:e.attachment,size:"small","hide-description":"",onSetMedia:e.onMedia,onNaturalSizeLoad:e.onNaturalSizeLoad},null,8,["compact","attachment","onSetMedia","onNaturalSizeLoad"]),(0,a._)("div",re,[(0,a.Wm)(u,{ref:"mediaUpload",class:"media-upload-icon","drop-files":e.dropFiles,"normal-button":"","accept-types":e.acceptTypes,onUploaded:e.setMediaFile,onUploadFailed:e.uploadFailed},null,8,["drop-files","accept-types","onUploaded","onUploadFailed"])])]),(0,a.Wm)(p)],2)):(0,a.kq)("",!0)}]]);var he=n(76875),fe=n(9382),_e=n(84131);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}fe.vI.add(_e.g4A);const ke={provide:function(){return{defaultDraftMode:!0,defaultSource:"admin"}},components:{BooleanSetting:I.Z,ChoiceSetting:N.Z,IntegerSetting:L.Z,StringSetting:T,AttachmentSetting:me,GroupSetting:Q},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,he.Z)())},ge=(0,B.Z)(ke,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("StringSetting"),c=(0,a.up)("AttachmentSetting"),d=(0,a.up)("BooleanSetting"),u=(0,a.up)("IntegerSetting"),p=(0,a.up)("ChoiceSetting"),m=(0,a.up)("GroupSetting");return(0,a.wg)(),(0,a.iD)("div",{label:e.$t("admin_dash.tabs.instance")},[(0,a._)("div",b,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.instance.instance")),1),(0,a._)("ul",k,[(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:instance.:name"})]),void 0!==e.adminDraft[":pleroma"][":instance"][":favicon"]?((0,a.wg)(),(0,a.iD)("li",g,[(0,a.Wm)(c,{compact:"",path:":pleroma.:instance.:favicon"})])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:instance.:email"})]),(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:instance.:description"})]),(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:instance.:short_description"})]),(0,a._)("li",null,[(0,a.Wm)(c,{compact:"",path:":pleroma.:instance.:instance_thumbnail"})]),(0,a._)("li",null,[(0,a.Wm)(c,{path:":pleroma.:instance.:background_image"})])])]),(0,a._)("div",w,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.instance.registrations")),1),(0,a._)("ul",v,[(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:instance.:registrations_open"}),(0,a._)("ul",j,[(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:instance.:invites_enabled","parent-path":":pleroma.:instance.:registrations_open","parent-invert":""})])])]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:instance.:birthday_required"}),(0,a._)("ul",y,[(0,a._)("li",null,[(0,a.Wm)(u,{path:":pleroma.:instance.:birthday_min_age","parent-path":":pleroma.:instance.:birthday_required"})])])]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:instance.:account_activation_required"})]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:instance.:account_approval_required"})]),(0,a._)("li",null,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.instance.captcha_header")),1),(0,a._)("ul",P,[(0,a._)("li",null,[(0,a.Wm)(d,{path:[":pleroma","Pleroma.Captcha",":enabled"]},null,8,["path"]),(0,a._)("ul",$,[(0,a._)("li",null,[(0,a.Wm)(p,{path:[":pleroma","Pleroma.Captcha",":method"],"parent-path":[":pleroma","Pleroma.Captcha",":enabled"],"option-label-map":{"Pleroma.Captcha.Native":e.$t("admin_dash.captcha.native"),"Pleroma.Captcha.Kocaptcha":e.$t("admin_dash.captcha.kocaptcha")}},null,8,["path","parent-path","option-label-map"]),(0,a.Wm)(u,{path:[":pleroma","Pleroma.Captcha",":seconds_valid"],"parent-path":[":pleroma","Pleroma.Captcha",":enabled"]},null,8,["path","parent-path"])]),e.adminDraft[":pleroma"]["Pleroma.Captcha"][":enabled"]&&"Pleroma.Captcha.Kocaptcha"===e.adminDraft[":pleroma"]["Pleroma.Captcha"][":method"]?((0,a.wg)(),(0,a.iD)("li",D,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.instance.kocaptcha")),1),(0,a._)("ul",S,[(0,a._)("li",null,[(0,a.Wm)(s,{path:[":pleroma","Pleroma.Captcha.Kocaptcha",":endpoint"]},null,8,["path"])])])])):(0,a.kq)("",!0)])])])])])]),(0,a._)("div",O,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.instance.access")),1),(0,a._)("ul",z,[(0,a._)("li",null,[(0,a.Wm)(d,{"override-backend-description":"","override-backend-description-label":"",path:":pleroma.:instance.:public"})]),(0,a._)("li",null,[(0,a.Wm)(p,{"override-backend-description":"","override-backend-description-label":"",path:":pleroma.:instance.:limit_to_local_content"})]),e.expertLevel?((0,a.wg)(),(0,a.iD)("li",W,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.instance.restrict.header")),1),(0,a._)("p",null,(0,i.zw)(e.$t("admin_dash.instance.restrict.description")),1),(0,a._)("ul",E,[(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.instance.restrict.timelines")),1),(0,a._)("ul",M,[(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:timelines.:local","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:timelines.:federated","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(m,{path:":pleroma.:restrict_unauthenticated.:timelines"})])])]),(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.instance.restrict.profiles")),1),(0,a._)("ul",C,[(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:profiles.:local","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:profiles.:remote","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(m,{path:":pleroma.:restrict_unauthenticated.:profiles"})])])]),(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.instance.restrict.activities")),1),(0,a._)("ul",U,[(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:activities.:local","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(d,{path:":pleroma.:restrict_unauthenticated.:activities.:remote","indeterminate-state":":if_instance_is_private","swap-description-and-label":"","hide-description":""})]),(0,a._)("li",null,[(0,a.Wm)(m,{path:":pleroma.:restrict_unauthenticated.:activities"})])])])])])):(0,a.kq)("",!0)])])],8,_)}]]);var we=["label"],ve={class:"setting-item"},je={class:"setting-list"},ye={class:"setting-list"},Pe={class:"setting-list"},$e={class:"setting-list"},De={class:"setting-list"},Se={class:"setting-list"};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}fe.vI.add(_e.g4A);const ze={data:function(){},components:{BooleanSetting:I.Z,ChoiceSetting:N.Z,IntegerSetting:L.Z,StringSetting:T},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,he.Z)())},We=(0,B.Z)(ze,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("IntegerSetting");return(0,a.wg)(),(0,a.iD)("div",{label:e.$t("admin_dash.tabs.limits")},[(0,a._)("div",ve,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.limits.arbitrary_limits")),1),(0,a._)("ul",je,[(0,a._)("li",null,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.limits.posts")),1),(0,a._)("ul",ye,[(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:limit","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:remote_limit",expert:"1","draft-mode":""})])])]),(0,a._)("li",null,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.limits.uploads")),1),(0,a._)("ul",Pe,[(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:description_limit","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:upload_limit","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:max_media_attachments","draft-mode":""})])])]),(0,a._)("li",null,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.limits.users")),1),(0,a._)("ul",$e,[(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:max_pinned_statuses","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:user_bio_length","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:user_name_length","draft-mode":""})]),(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.limits.profile_fields")),1),(0,a._)("ul",De,[(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:max_account_fields","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:max_remote_account_fields","draft-mode":"",expert:"1"})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:account_field_name_length","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:account_field_value_length","draft-mode":""})])])]),(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.limits.user_uploads")),1),(0,a._)("ul",Se,[(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:avatar_upload_limit","draft-mode":""})]),(0,a._)("li",null,[(0,a.Wm)(s,{source:"admin",path:":pleroma.:instance.:banner_upload_limit","draft-mode":""})])])])])])])])],8,we)}]]);var Ee=n(49963),Me=["label"],Ce={class:"setting-item"},Ue={key:0,class:"setting-list"},Fe={class:"setting-list"},Ie={key:1,class:"setting-list"},Ne={class:"setting-list relative"},Le={class:"cards-list"},Ze={key:0},qe=["href"],xe={key:1},Ae={key:2},Re=["href"],Ve={class:"btn-group"},Be=["onClick"],Te={class:"dropdown-menu"},Ye=["onClick"],He=["title"],Ke={key:0,class:"btn-group"},Ge=["disabled","onClick"],Xe={class:"dropdown-menu"},Je=["onClick"],Qe=["title"],et=n(15861),tt=n(64687),nt=n.n(tt),at=n(67943),it=n(30727);function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}fe.vI.add(_e.g4A);const rt={provide:function(){return{defaultDraftMode:!0,defaultSource:"admin"}},data:function(){return{working:!1}},components:{BooleanSetting:I.Z,ChoiceSetting:N.Z,IntegerSetting:L.Z,StringSetting:T,GroupSetting:Q,PanelLoading:it.Z,Popover:at.default},created:function(){this.user.rights.admin&&this.$store.dispatch("loadFrontendsStuff")},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({frontends:function(){return this.$store.state.adminSettings.frontends}},(0,he.Z)()),methods:{canInstall:function(e){var t=this.frontends.find((function(t){return t.name===e.name}));return!!t&&t.refs.includes(e.ref)},getSuggestedRef:function(e){if(this.adminDraft){var t=this.adminDraft[":pleroma"][":frontends"][":primary"];return(null==t?void 0:t.name)===e.name&&this.canInstall(t)?t.ref:e.refs[0]}return e.refs[0]},update:function(e,t){var n=this,a=t||this.getSuggestedRef(e),i=e.name,o={name:i,ref:a};this.working=!0,this.$store.state.api.backendInteractor.installFrontend({payload:o}).finally((function(){n.working=!1})).then(function(){var e=(0,et.Z)(nt().mark((function e(t){var o;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$store.dispatch("loadFrontendsStuff"),!t.error){e.next=8;break}return e.next=4,t.error.json();case 4:o=e.sent,n.$store.dispatch("pushGlobalNotice",{level:"error",messageKey:"admin_dash.frontend.failure_installing_frontend",messageArgs:{version:i+"/"+a,reason:o.error},timeout:5e3}),e.next=9;break;case 8:n.$store.dispatch("pushGlobalNotice",{level:"success",messageKey:"admin_dash.frontend.success_installing_frontend",messageArgs:{version:i+"/"+a},timeout:2e3});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setDefault:function(e,t){var n=t||this.getSuggestedRef(e),a=e.name;this.$store.commit("updateAdminDraft",{path:[":pleroma",":frontends",":primary"],value:{name:a,ref:n}})}}},lt=(0,B.Z)(rt,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("StringSetting"),c=(0,a.up)("GroupSetting"),d=(0,a.up)("PanelLoading"),u=(0,a.up)("i18n-t"),p=(0,a.up)("FAIcon"),m=(0,a.up)("Popover");return(0,a.wg)(),(0,a.iD)("div",{class:"frontends-tab",label:e.$t("admin_dash.tabs.frontends")},[(0,a._)("div",Ce,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.tabs.frontends")),1),(0,a._)("p",null,(0,i.zw)(e.$t("admin_dash.frontend.wip_notice")),1),e.adminDraft?((0,a.wg)(),(0,a.iD)("ul",Ue,[(0,a._)("li",null,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.frontend.default_frontend")),1),(0,a._)("p",null,(0,i.zw)(e.$t("admin_dash.frontend.default_frontend_tip")),1),(0,a._)("ul",Fe,[(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:frontends.:primary.name"})]),(0,a._)("li",null,[(0,a.Wm)(s,{path:":pleroma.:frontends.:primary.ref"})]),(0,a._)("li",null,[(0,a.Wm)(c,{path:":pleroma.:frontends.:primary"})])])])])):((0,a.wg)(),(0,a.iD)("div",Ie,(0,i.zw)(e.$t("admin_dash.frontend.default_frontend_unavail")),1)),(0,a._)("div",Ne,[e.working?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"overlay"})):(0,a.kq)("",!0),(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.frontend.available_frontends")),1),(0,a._)("ul",Le,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.frontends,(function(t){var n,o,r,l;return(0,a.wg)(),(0,a.iD)("li",{key:t.name},[(0,a._)("strong",null,(0,i.zw)(t.name),1),(0,a.Uk)(" "+(0,i.zw)(" ")+" "),e.adminDraft&&(null===(n=e.adminDraft[":pleroma"][":frontends"][":primary"])||void 0===n?void 0:n.name)===t.name?((0,a.wg)(),(0,a.iD)("span",Ze,[e.adminDraft&&(null===(o=e.adminDraft[":pleroma"][":frontends"][":primary"])||void 0===o?void 0:o.ref)===t.refs[0]?((0,a.wg)(),(0,a.j4)(u,{key:0,keypath:"admin_dash.frontend.is_default"})):((0,a.wg)(),(0,a.j4)(u,{key:1,keypath:"admin_dash.frontend.is_default_custom"},{version:(0,a.w5)((function(){return[(0,a._)("code",null,(0,i.zw)(e.adminDraft&&e.adminDraft[":pleroma"][":frontends"][":primary"].ref),1)]})),_:1}))])):(0,a.kq)("",!0),(0,a._)("dl",null,[(0,a._)("dt",null,(0,i.zw)(e.$t("admin_dash.frontend.repository")),1),(0,a._)("dd",null,[(0,a._)("a",{href:t.git,target:"_blank"},(0,i.zw)(t.git),9,qe)]),e.expertLevel?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("dt",null,(0,i.zw)(e.$t("admin_dash.frontend.versions")),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.refs,(function(e){return(0,a.wg)(),(0,a.iD)("dd",{key:e},[(0,a._)("code",null,(0,i.zw)(e),1)])})),128))],64)):(0,a.kq)("",!0),e.expertLevel?((0,a.wg)(),(0,a.iD)("dt",xe,(0,i.zw)(e.$t("admin_dash.frontend.build_url")),1)):(0,a.kq)("",!0),e.expertLevel?((0,a.wg)(),(0,a.iD)("dd",Ae,[(0,a._)("a",{href:t.build_url,target:"_blank"},(0,i.zw)(t.build_url),9,Re)])):(0,a.kq)("",!0)]),(0,a._)("div",null,[(0,a._)("span",Ve,[(0,a._)("button",{class:"button button-default btn",type:"button",onClick:function(n){return e.update(t)}},[(0,a.Uk)((0,i.zw)(t.installed?e.$t("admin_dash.frontend.reinstall"):e.$t("admin_dash.frontend.install"))+" ",1),(0,a._)("code",null,(0,i.zw)(e.getSuggestedRef(t)),1)],8,Be),t.refs.length>1?((0,a.wg)(),(0,a.j4)(m,{key:0,trigger:"click",class:"button-dropdown",placement:"bottom"},{content:(0,a.w5)((function(n){var o=n.close;return[(0,a._)("div",Te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.refs,(function(n){return(0,a.wg)(),(0,a.iD)("button",{key:n,class:"menu-item dropdown-item",onClick:[(0,Ee.iM)((function(a){return e.update(t,n)}),["prevent"]),o]},[(0,a.Wm)(u,{keypath:"admin_dash.frontend.install_version"},{version:(0,a.w5)((function(){return[(0,a._)("code",null,(0,i.zw)(n),1)]})),_:2},1024)],8,Ye)})),128))])]})),trigger:(0,a.w5)((function(){return[(0,a._)("button",{class:"button button-default btn dropdown-button",type:"button",title:e.$t("admin_dash.frontend.more_install_options")},[(0,a.Wm)(p,{icon:"chevron-down"})],8,He)]})),_:2},1024)):(0,a.kq)("",!0)]),t.installed&&"admin-fe"!==t.name?((0,a.wg)(),(0,a.iD)("span",Ke,[(0,a._)("button",{class:"button button-default btn",type:"button",disabled:!e.adminDraft||(null===(r=e.adminDraft[":pleroma"][":frontends"][":primary"])||void 0===r?void 0:r.name)===t.name&&(null===(l=e.adminDraft[":pleroma"][":frontends"][":primary"])||void 0===l?void 0:l.ref)===t.refs[0],onClick:function(n){return e.setDefault(t)}},[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.frontend.set_default"))+" ",1),(0,a._)("code",null,(0,i.zw)(e.getSuggestedRef(t)),1)],8,Ge),(0,a.Uk)(" "+(0,i.zw)(" ")+" "),t.refs.length>1?((0,a.wg)(),(0,a.j4)(m,{key:0,trigger:"click",class:"button-dropdown",placement:"bottom"},{content:(0,a.w5)((function(n){var o=n.close;return[(0,a._)("div",Xe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.installedRefs||t.refs,(function(n){return(0,a.wg)(),(0,a.iD)("button",{key:n,class:"menu-item dropdown-item",onClick:[(0,Ee.iM)((function(a){return e.setDefault(t,n)}),["prevent"]),o]},[(0,a.Wm)(u,{keypath:"admin_dash.frontend.set_default_version"},{version:(0,a.w5)((function(){return[(0,a._)("code",null,(0,i.zw)(n),1)]})),_:2},1024)],8,Je)})),128))])]})),trigger:(0,a.w5)((function(){return[(0,a._)("button",{class:"button button-default btn dropdown-button",type:"button",title:e.$t("admin_dash.frontend.more_default_options")},[(0,a.Wm)(p,{icon:"chevron-down"})],8,Qe)]})),_:2},1024)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])})),128))])])])],8,Me)}]]);var st=["label"],ct={class:"setting-item"},dt={class:"setting-list"},ut={class:"btn-group setting-item"},pt={class:"btn-group setting-item"},mt={class:"emoji-tab-popover-input"},ht=["placeholder"],ft={value:"",disabled:"",hidden:""},_t=["label"],bt={class:"emoji-tab-popover-input"},kt=["placeholder"],gt={key:0},wt={class:"pack-info-wrapper"},vt={class:"setting-list"},jt=["disabled"],yt=["disabled"],Pt=["disabled"],$t={class:"btn-group"},Dt={class:"emoji-tab-popover-input"},St=["placeholder"],Ot={key:0,class:"warning"},zt={class:"setting-list"},Wt={key:0,class:"emoji-list"},Et=n(28583),Mt=n.n(Et),Ct=n(66678),Ut=n.n(Ct),Ft=n(65365),It=n(60466),Nt=n(32826),Lt=n(1447),Zt=n(90339),qt={key:1,class:"emoji"},xt={key:2,class:"emoji-tab-popover-input"},At={class:"emoji-tab-popover-input"},Rt=["placeholder"],Vt={class:"emoji-tab-popover-input"},Bt=["placeholder"],Tt=["disabled"];const Yt={components:{Popover:at.default,ConfirmModal:Lt.Z,StillImage:It.Z},inject:["emojiAddr"],props:{placement:String,disabled:{type:Boolean,default:!1},newUpload:Boolean,title:String,packName:String,shortcode:{type:String,default:""},file:{type:String,default:""}},emits:["updatePackFiles","displayError"],data:function(){return{uploadFile:[],editedShortcode:this.shortcode,editedFile:this.file,deleteModalVisible:!1}},computed:{emojiPreview:function(){return this.newUpload&&this.uploadFile.length>0?URL.createObjectURL(this.uploadFile[0]):this.newUpload?null:this.emojiAddr(this.file)},isEdited:function(){return!this.newUpload&&(this.editedShortcode!==this.shortcode||this.editedFile!==this.file)}},methods:{saveEditedEmoji:function(){var e=this;this.isEdited&&this.$store.state.api.backendInteractor.updateEmojiFile({packName:this.packName,shortcode:this.shortcode,newShortcode:this.editedShortcode,newFilename:this.editedFile,force:!1}).then((function(t){return void 0!==t.error?(e.$emit("displayError",t.error),Promise.reject(t.error)):t.json()})).then((function(t){return e.$emit("updatePackFiles",t)}))},uploadEmoji:function(){var e=this;this.$store.state.api.backendInteractor.addNewEmojiFile({packName:this.packName,file:this.uploadFile[0],shortcode:this.editedShortcode,filename:this.editedFile}).then((function(e){return e.json()})).then((function(t){void 0===t.error?(e.$emit("updatePackFiles",t),e.$refs.emojiPopover.hidePopover(),e.editedFile="",e.editedShortcode="",e.uploadFile=[]):e.$emit("displayError",t.error)}))},revertEmoji:function(){this.editedFile=this.file,this.editedShortcode=this.shortcode},deleteEmoji:function(){var e=this;this.deleteModalVisible=!1,this.$store.state.api.backendInteractor.deleteEmojiFile({packName:this.packName,shortcode:this.shortcode}).then((function(e){return e.json()})).then((function(t){void 0===t.error?e.$emit("updatePackFiles",t):e.$emit("displayError",t.error)}))}}},Ht=(0,B.Z)(Yt,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("StillImage"),c=(0,a.up)("ConfirmModal"),d=(0,a.up)("Popover");return(0,a.wg)(),(0,a.j4)(d,{ref:"emojiPopover",trigger:"click",placement:n.placement,"bound-to-selector":".emoji-list","popover-class":"emoji-tab-edit-popover popover-default","bound-to":{x:"container"},offset:{y:5},disabled:n.disabled,class:(0,i.C_)({"emoji-unsaved":l.isEdited})},{trigger:(0,a.w5)((function(){return[(0,a.WI)(e.$slots,"trigger")]})),content:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,i.zw)(n.title),1),l.emojiPreview?((0,a.wg)(),(0,a.j4)(s,{key:0,class:"emoji",src:l.emojiPreview},null,8,["src"])):((0,a.wg)(),(0,a.iD)("div",qt)),n.newUpload?((0,a.wg)(),(0,a.iD)("div",xt,[(0,a._)("input",{type:"file",accept:"image/*",class:"emoji-tab-popover-file input",onChange:t[0]||(t[0]=function(e){return r.uploadFile=e.target.files})},null,32)])):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("div",At,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.shortcode"))+" ",1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.editedShortcode=e}),class:"emoji-data-input input",placeholder:e.$t("admin_dash.emoji.new_shortcode")},null,8,Rt),[[Ee.nr,r.editedShortcode]])])]),(0,a._)("div",Vt,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.filename"))+" ",1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.editedFile=e}),class:"emoji-data-input input",placeholder:e.$t("admin_dash.emoji.new_filename")},null,8,Bt),[[Ee.nr,r.editedFile]])])]),(0,a._)("button",{class:"button button-default btn",type:"button",disabled:n.newUpload?0==r.uploadFile.length:!l.isEdited,onClick:t[3]||(t[3]=function(e){return n.newUpload?l.uploadEmoji():l.saveEditedEmoji()})},(0,i.zw)(e.$t("admin_dash.emoji.save")),9,Tt),n.newUpload?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("button",{class:"button button-default btn emoji-tab-popover-button",type:"button",onClick:t[4]||(t[4]=function(e){return r.deleteModalVisible=!0})},(0,i.zw)(e.$t("admin_dash.emoji.delete")),1),(0,a._)("button",{class:"button button-default btn emoji-tab-popover-button",type:"button",onClick:t[5]||(t[5]=function(){return l.revertEmoji&&l.revertEmoji.apply(l,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.revert")),1),r.deleteModalVisible?((0,a.wg)(),(0,a.j4)(c,{key:0,title:e.$t("admin_dash.emoji.delete_title"),"cancel-text":e.$t("status.delete_confirm_cancel_button"),"confirm-text":e.$t("status.delete_confirm_accept_button"),onCancelled:t[6]||(t[6]=function(e){return r.deleteModalVisible=!1}),onAccepted:l.deleteEmoji},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.delete_confirm",[n.shortcode])),1)]})),_:1},8,["title","cancel-text","confirm-text","onAccepted"])):(0,a.kq)("",!0)],64))])]})),_:3},8,["placement","disabled","class"])}]]),Kt={components:{TabSwitcher:f.Z,StringSetting:T,Checkbox:Ft.Z,StillImage:It.Z,Select:Nt.Z,Popover:at.default,ConfirmModal:Lt.Z,ModifiedIndicator:Zt.Z,EmojiEditingPopover:Ht},data:function(){return{knownLocalPacks:{},knownRemotePacks:{},editedMetadata:{},packName:"",newPackName:"",deleteModalVisible:!1,remotePackInstance:"",remotePackDownloadAs:""}},provide:function(){return{emojiAddr:this.emojiAddr}},computed:{pack:function(){return""!==this.packName?this.knownPacks[this.packName]:void 0},packMeta:function(){return void 0===this.editedMetadata[this.packName]&&(this.editedMetadata[this.packName]=Ut()(this.pack.pack)),this.editedMetadata[this.packName]},knownPacks:function(){var e=Ut()(this.knownLocalPacks);for(var t in this.knownRemotePacks)for(var n in this.knownRemotePacks[t])e["".concat(n,"@").concat(t)]=this.knownRemotePacks[t][n];return e},downloadWillReplaceLocal:function(){return""===this.remotePackDownloadAs.trim()&&this.pack.remote&&this.pack.remote.baseName in this.knownLocalPacks||this.remotePackDownloadAs in this.knownLocalPacks}},methods:{reloadEmoji:function(){this.$store.state.api.backendInteractor.reloadEmoji()},importFromFS:function(){this.$store.state.api.backendInteractor.importEmojiFromFS()},emojiAddr:function(e){return void 0!==this.pack.remote?"".concat(this.pack.remote.instance,"/emoji/").concat(encodeURIComponent(this.pack.remote.baseName),"/").concat(e):"".concat(this.$store.state.instance.server,"/emoji/").concat(encodeURIComponent(this.packName),"/").concat(e)},createEmojiPack:function(){var e=this;this.$store.state.api.backendInteractor.createEmojiPack({name:this.newPackName}).then((function(e){return e.json()})).then((function(t){return"ok"===t?e.refreshPackList():(e.displayError(t.error),Promise.reject(t))})).then((function(t){e.$refs.createPackPopover.hidePopover(),e.packName=e.newPackName,e.newPackName=""}))},deleteEmojiPack:function(){var e=this;this.$store.state.api.backendInteractor.deleteEmojiPack({name:this.packName}).then((function(e){return e.json()})).then((function(t){return"ok"===t?e.refreshPackList():(e.displayError(t.error),Promise.reject(t))})).then((function(t){delete e.editedMetadata[e.packName],e.deleteModalVisible=!1,e.packName=""}))},metaEdited:function(e){if(this.pack){var t=this.pack.pack[e]||"";return(this.packMeta[e]||"")!==t}},savePackMetadata:function(){var e=this;this.$store.state.api.backendInteractor.saveEmojiPackMetadata({name:this.packName,newData:this.packMeta}).then((function(e){return e.json()})).then((function(t){void 0===t.error?(e.pack.pack=t,delete e.editedMetadata[e.packName]):e.displayError(t.error)}))},updatePackFiles:function(e){this.pack.files=e,this.sortPackFiles(this.packName)},loadPacksPaginated:function(e){var t=this,n={};return e({instance:this.remotePackInstance,page:1,pageSize:0}).then((function(e){return e.json()})).then((function(a){if(void 0!==a.error)return Promise.reject(a.error);for(var i=Promise.resolve({}),o=function(a){i=i.then((function(){return e({instance:t.remotePackInstance,page:a,pageSize:25})})).then((function(e){return e.json()})).then((function(e){if(void 0!==e.error)return Promise.reject(e.error);Mt()(n,e.packs)}))},r=0;r<Math.ceil(a.count/25);r++)o(r);return i})).then((function(e){return n})).catch((function(e){t.displayError(e)}))},refreshPackList:function(){var e=this;this.loadPacksPaginated(this.$store.state.api.backendInteractor.listEmojiPacks).then((function(t){e.knownLocalPacks=t;for(var n=0,a=Object.keys(e.knownLocalPacks);n<a.length;n++){var i=a[n];e.sortPackFiles(i)}}))},listRemotePacks:function(){var e=this;this.loadPacksPaginated(this.$store.state.api.backendInteractor.listRemoteEmojiPacks).then((function(t){var n=e.remotePackInstance;n.startsWith("http")||(n="https://"+n);var a=new URL(n);for(var i in n=a.host,t)t[i].remote={baseName:i,instance:a.origin};for(var o in e.knownRemotePacks[n]=t,e.knownRemotePacks[n])e.sortPackFiles("".concat(o,"@").concat(n));e.$refs.remotePackPopover.hidePopover()})).catch((function(t){e.displayError(t)}))},downloadRemotePack:function(){var e=this;""===this.remotePackDownloadAs.trim()&&(this.remotePackDownloadAs=this.pack.remote.baseName),this.$store.state.api.backendInteractor.downloadRemoteEmojiPack({instance:this.pack.remote.instance,packName:this.pack.remote.baseName,as:this.remotePackDownloadAs}).then((function(e){return e.json()})).then((function(t){return"ok"===t?(e.$refs.dlPackPopover.hidePopover(),e.refreshPackList()):(e.displayError(t.error),Promise.reject(t))})).then((function(t){e.packName=e.remotePackDownloadAs,e.remotePackDownloadAs=""}))},displayError:function(e){this.$store.dispatch("pushGlobalNotice",{messageKey:"admin_dash.emoji.error",messageArgs:[e],level:"error"})},sortPackFiles:function(e){var t=this,n=Object.keys(this.knownPacks[e].files).sort().reduce((function(n,a){return 0===a.length||(n[a]=t.knownPacks[e].files[a]),n}),{});this.knownPacks[e].files=n}},mounted:function(){this.refreshPackList()}},Gt=(0,B.Z)(Kt,[["render",function(e,t,n,o,r,l){var s=(0,a.up)("Popover"),c=(0,a.up)("Select"),d=(0,a.up)("ModifiedIndicator"),u=(0,a.up)("Checkbox"),p=(0,a.up)("ConfirmModal"),m=(0,a.up)("FAIcon"),h=(0,a.up)("EmojiEditingPopover"),f=(0,a.up)("StillImage");return(0,a.wg)(),(0,a.iD)("div",{class:"emoji-tab",label:e.$t("admin_dash.tabs.emoji")},[(0,a._)("div",ct,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.tabs.emoji")),1),(0,a._)("ul",dt,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.emoji.global_actions")),1),(0,a._)("li",ut,[(0,a._)("button",{class:"button button-default btn",type:"button",onClick:t[0]||(t[0]=function(){return e.reloadEmoji&&e.reloadEmoji.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.reload")),1),(0,a._)("button",{class:"button button-default btn",type:"button",onClick:t[1]||(t[1]=function(){return e.importFromFS&&e.importFromFS.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.importFS")),1)]),(0,a._)("li",pt,[(0,a._)("button",{class:"button button-default btn",type:"button",onClick:t[4]||(t[4]=function(){var t;return e.$refs.remotePackPopover.showPopover&&(t=e.$refs.remotePackPopover).showPopover.apply(t,arguments)})},[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.remote_packs"))+" ",1),(0,a.Wm)(s,{ref:"remotePackPopover","popover-class":"emoji-tab-edit-popover popover-default",trigger:"click",placement:"bottom","bound-to-selector":".emoji-tab","bound-to":{x:"container"},offset:{y:5}},{content:(0,a.w5)((function(){return[(0,a._)("div",mt,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.emoji.remote_pack_instance")),1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.remotePackInstance=t}),class:"input",placeholder:e.$t("admin_dash.emoji.remote_pack_instance")},null,8,ht),[[Ee.nr,e.remotePackInstance]]),(0,a._)("button",{class:"button button-default btn emoji-tab-popover-button",type:"button",onClick:t[3]||(t[3]=function(){return e.listRemotePacks&&e.listRemotePacks.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.do_list")),1)])]})),_:1},512)])]),(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.emoji.emoji_packs")),1),(0,a._)("li",null,[(0,a._)("h4",null,(0,i.zw)(e.$t("admin_dash.emoji.edit_pack")),1),(0,a.Wm)(c,{modelValue:e.packName,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.packName=t}),class:"form-control"},{default:(0,a.w5)((function(){return[(0,a._)("option",ft,(0,i.zw)(e.$t("admin_dash.emoji.emoji_pack")),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.knownPacks,(function(e,t){return(0,a.wg)(),(0,a.iD)("option",{key:t,label:t},(0,i.zw)(t),9,_t)})),128))]})),_:1},8,["modelValue"]),(0,a._)("button",{class:"button button-default btn emoji-tab-popover-button",type:"button",onClick:t[6]||(t[6]=function(){var t;return e.$refs.createPackPopover.showPopover&&(t=e.$refs.createPackPopover).showPopover.apply(t,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.create_pack")),1),(0,a.Wm)(s,{ref:"createPackPopover","popover-class":"emoji-tab-edit-popover popover-default",trigger:"click",placement:"bottom","bound-to-selector":".emoji-tab","bound-to":{x:"container"},offset:{y:5}},{content:(0,a.w5)((function(){return[(0,a._)("div",bt,[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.emoji.new_pack_name")),1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.newPackName=t}),placeholder:e.$t("admin_dash.emoji.new_pack_name"),class:"input"},null,8,kt),[[Ee.nr,e.newPackName]]),(0,a._)("button",{class:"button button-default btn emoji-tab-popover-button",type:"button",onClick:t[8]||(t[8]=function(){return e.createEmojiPack&&e.createEmojiPack.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.create")),1)])]})),_:1},512)])]),e.pack?((0,a.wg)(),(0,a.iD)("div",gt,[(0,a._)("div",wt,[(0,a._)("ul",vt,[(0,a._)("li",null,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.description"))+" ",1),(0,a.Wm)(d,{changed:e.metaEdited("description"),"message-key":"admin_dash.emoji.metadata_changed"},null,8,["changed"]),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.packMeta.description=t}),disabled:void 0!==e.pack.remote,class:"bio resize-height input"},null,8,jt),[[Ee.nr,e.packMeta.description]])])]),(0,a._)("li",null,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.homepage"))+" ",1),(0,a.Wm)(d,{changed:e.metaEdited("homepage"),"message-key":"admin_dash.emoji.metadata_changed"},null,8,["changed"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.packMeta.homepage=t}),class:"emoji-info-input input",disabled:void 0!==e.pack.remote},null,8,yt),[[Ee.nr,e.packMeta.homepage]])])]),(0,a._)("li",null,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.fallback_src"))+" ",1),(0,a.Wm)(d,{changed:e.metaEdited("fallback-src"),"message-key":"admin_dash.emoji.metadata_changed"},null,8,["changed"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.packMeta["fallback-src"]=t}),class:"emoji-info-input input",disabled:void 0!==e.pack.remote},null,8,Pt),[[Ee.nr,e.packMeta["fallback-src"]]])])]),(0,a._)("li",null,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.fallback_sha256"))+" ",1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.packMeta["fallback-src-sha256"]=t}),disabled:!0,class:"emoji-info-input input"},null,512),[[Ee.nr,e.packMeta["fallback-src-sha256"]]])])]),(0,a._)("li",null,[(0,a.Wm)(u,{modelValue:e.packMeta["share-files"],"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.packMeta["share-files"]=t}),disabled:void 0!==e.pack.remote},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.share")),1)]})),_:1},8,["modelValue","disabled"]),(0,a.Wm)(d,{changed:e.metaEdited("share-files"),"message-key":"admin_dash.emoji.metadata_changed"},null,8,["changed"])]),(0,a._)("li",$t,[void 0===e.pack.remote?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"button button-default btn",type:"button",onClick:t[14]||(t[14]=function(){return e.savePackMetadata&&e.savePackMetadata.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.save_meta")),1)):(0,a.kq)("",!0),void 0===e.pack.remote?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"button button-default btn",type:"button",onClick:t[15]||(t[15]=function(){return e.savePackMetadata&&e.savePackMetadata.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.revert_meta")),1)):(0,a.kq)("",!0),void 0===e.pack.remote?((0,a.wg)(),(0,a.iD)("button",{key:2,class:"button button-default btn",type:"button",onClick:t[17]||(t[17]=function(t){return e.deleteModalVisible=!0})},[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.delete_pack"))+" ",1),e.deleteModalVisible?((0,a.wg)(),(0,a.j4)(p,{key:0,title:e.$t("admin_dash.emoji.delete_title"),"cancel-text":e.$t("status.delete_confirm_cancel_button"),"confirm-text":e.$t("status.delete_confirm_accept_button"),onCancelled:t[16]||(t[16]=function(t){return e.deleteModalVisible=!1}),onAccepted:e.deleteEmojiPack},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.delete_confirm",[e.packName])),1)]})),_:1},8,["title","cancel-text","confirm-text","onAccepted"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),void 0!==e.pack.remote?((0,a.wg)(),(0,a.iD)("button",{key:3,class:"button button-default btn",type:"button",onClick:t[20]||(t[20]=function(){var t;return e.$refs.dlPackPopover.showPopover&&(t=e.$refs.dlPackPopover).showPopover.apply(t,arguments)})},[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.download_pack"))+" ",1),(0,a.Wm)(s,{ref:"dlPackPopover",trigger:"click",placement:"bottom","bound-to-selector":".emoji-tab","popover-class":"emoji-tab-edit-popover popover-default","bound-to":{x:"container"},offset:{y:5}},{content:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,i.zw)(e.$t("admin_dash.emoji.downloading_pack",[e.packName])),1),(0,a._)("div",null,[(0,a._)("div",null,[(0,a._)("div",Dt,[(0,a._)("label",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.download_as_name"))+" ",1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.remotePackDownloadAs=t}),class:"emoji-data-input input",placeholder:e.$t("admin_dash.emoji.download_as_name_full")},null,8,St),[[Ee.nr,e.remotePackDownloadAs]])]),e.downloadWillReplaceLocal?((0,a.wg)(),(0,a.iD)("div",Ot,[(0,a._)("em",null,(0,i.zw)(e.$t("admin_dash.emoji.replace_warning")),1)])):(0,a.kq)("",!0)]),(0,a._)("button",{class:"button button-default btn",type:"button",onClick:t[19]||(t[19]=function(){return e.downloadRemotePack&&e.downloadRemotePack.apply(e,arguments)})},(0,i.zw)(e.$t("admin_dash.emoji.download")),1)])])]})),_:1},512)])):(0,a.kq)("",!0)])])]),(0,a._)("ul",zt,[(0,a._)("h4",null,[(0,a.Uk)((0,i.zw)(e.$t("admin_dash.emoji.files"))+" ",1),e.pack?((0,a.wg)(),(0,a.j4)(d,{key:0,changed:e.$refs.emojiPopovers&&e.$refs.emojiPopovers.some((function(e){return e.isEdited})),"message-key":"admin_dash.emoji.emoji_changed"},null,8,["changed"])):(0,a.kq)("",!0)]),e.pack?((0,a.wg)(),(0,a.iD)("div",Wt,[void 0===e.pack.remote?((0,a.wg)(),(0,a.j4)(h,{key:0,placement:"bottom","new-upload":"",title:e.$t("admin_dash.emoji.adding_new"),"pack-name":e.packName,onUpdatePackFiles:e.updatePackFiles,onDisplayError:e.displayError},{trigger:(0,a.w5)((function(){return[(0,a.Wm)(m,{icon:"plus",size:"2x",title:e.$t("admin_dash.emoji.add_file")},null,8,["title"])]})),_:1},8,["title","pack-name","onUpdatePackFiles","onDisplayError"])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pack.files,(function(t,n){return(0,a.wg)(),(0,a.j4)(h,{ref_for:!0,ref:"emojiPopovers",key:n,placement:"top",title:e.$t("admin_dash.emoji.editing",[n]),disabled:void 0!==e.pack.remote,shortcode:n,file:t,"pack-name":e.packName,onUpdatePackFiles:e.updatePackFiles,onDisplayError:e.displayError},{trigger:(0,a.w5)((function(){return[(0,a.Wm)(f,{class:"emoji",src:e.emojiAddr(t),title:":".concat(n,":"),alt:":".concat(n,":")},null,8,["src","title","alt"])]})),_:2},1032,["title","disabled","shortcode","file","pack-name","onUpdatePackFiles","onDisplayError"])})),128))])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)])],8,st)}]]);fe.vI.add(_e.klh,_e.ioV,_e.py1,_e.XsY,_e.qmU,_e.q7m,_e.Aq,_e.YHc);const Xt={components:{TabSwitcher:f.Z,InstanceTab:ge,LimitsTab:We,FrontendsTab:lt,EmojiTab:Gt},computed:{user:function(){return this.$store.state.users.currentUser},isLoggedIn:function(){return!!this.$store.state.users.currentUser},open:function(){return"hidden"!==this.$store.state.interface.settingsModalState},bodyLock:function(){return"visible"===this.$store.state.interface.settingsModalState},adminDbLoaded:function(){return this.$store.state.adminSettings.loaded},adminDescriptionsLoaded:function(){return null!==this.$store.state.adminSettings.descriptions},noDb:function(){return!1===this.$store.state.adminSettings.dbConfigEnabled}},created:function(){this.user.rights.admin&&this.$store.dispatch("loadAdminStuff")},methods:{onOpen:function(){var e=this.$store.state.interface.settingsModalTargetTab;if(e){var t=this.$refs.tabSwitcher.$slots.default().findIndex((function(t){return t.props&&t.props["data-tab-name"]===e}));t>=0&&this.$refs.tabSwitcher.setTab(t)}this.$store.dispatch("clearSettingsModalTargetTab")}},mounted:function(){this.onOpen()},watch:{open:function(e){e&&this.onOpen()}}},Jt=(0,B.Z)(Xt,[["render",function(e,t,n,f,_,b){var k=(0,a.up)("i18n-t"),g=(0,a.up)("InstanceTab"),w=(0,a.up)("LimitsTab"),v=(0,a.up)("FrontendsTab"),j=(0,a.up)("EmojiTab"),y=(0,a.up)("tab-switcher");return e.adminDescriptionsLoaded&&(e.noDb||e.adminDbLoaded)?((0,a.wg)(),(0,a.j4)(y,{key:0,ref:"tabSwitcher",class:"settings_tab-switcher","side-tab-bar":!0,"scrollable-tabs":!0,"render-only-focused":!0,"body-scroll-lock":e.bodyLock},{default:(0,a.w5)((function(){return[e.noDb?((0,a.wg)(),(0,a.iD)("div",{key:0,label:e.$t("admin_dash.tabs.nodb"),icon:"exclamation-triangle","data-tab-name":"nodb-notice"},[(0,a._)("div",{label:e.$t("admin_dash.tabs.nodb")},[(0,a._)("div",l,[(0,a._)("h2",null,(0,i.zw)(e.$t("admin_dash.nodb.heading")),1),(0,a.Wm)(k,{keypath:"admin_dash.nodb.text"},{documentation:(0,a.w5)((function(){return[(0,a._)("a",s,(0,i.zw)(e.$t("admin_dash.nodb.documentation")),1)]})),property:(0,a.w5)((function(){return[c]})),value:(0,a.w5)((function(){return[d]})),_:1}),(0,a._)("p",null,(0,i.zw)(e.$t("admin_dash.nodb.text2")),1)])],8,r)],8,o)):(0,a.kq)("",!0),e.adminDbLoaded?((0,a.wg)(),(0,a.iD)("div",{key:1,label:e.$t("admin_dash.tabs.instance"),icon:"wrench","data-tab-name":"general"},[(0,a.Wm)(g)],8,u)):(0,a.kq)("",!0),e.adminDbLoaded?((0,a.wg)(),(0,a.iD)("div",{key:2,label:e.$t("admin_dash.tabs.limits"),icon:"hand","data-tab-name":"limits"},[(0,a.Wm)(w)],8,p)):(0,a.kq)("",!0),(0,a._)("div",{label:e.$t("admin_dash.tabs.frontends"),icon:"laptop-code","data-tab-name":"frontends"},[(0,a.Wm)(v)],8,m),(0,a._)("div",{label:e.$t("admin_dash.tabs.emoji"),icon:"face-smile-beam","data-tab-name":"emoji"},[(0,a.Wm)(j)],8,h)]})),_:1},8,["body-scroll-lock"])):(0,a.kq)("",!0)}]])}}]);
//# sourceMappingURL=5250.f0d4cfa412bbf8163d11.js.map