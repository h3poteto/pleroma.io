{"version":3,"file":"static/js/6464.eb9c90a1c948cde554e9.js","mappings":"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","sources":["webpack://pleroma_fe/./src/components/update_notification/update_notification.vue","webpack://pleroma_fe/./src/components/update_notification/update_notification.js","webpack://pleroma_fe/./src/components/update_notification/update_notification.vue?27aa"],"sourcesContent":["<template>\n  <Modal\n    :is-open=\"!!shouldShow\"\n    class=\"UpdateNotification\"\n    :no-background=\"true\"\n  >\n    <div\n      class=\"UpdateNotificationModal panel\"\n      :class=\"{ '-peek': !showingMore }\"\n    >\n      <div class=\"panel-heading\">\n        <span class=\"title\">\n          {{ $t('update.big_update_title') }}\n        </span>\n      </div>\n      <div class=\"panel-body\">\n        <div\n          class=\"content\"\n          :class=\"{ '-noImage': !showingImage }\"\n        >\n          <img\n            v-if=\"showingImage\"\n            class=\"pleroma-tan\"\n            :src=\"pleromaTanVariant\"\n            :style=\"pleromaTanStyles\"\n          >\n          <div class=\"spacer-top\" />\n          <div class=\"text\">\n            <p>\n              {{ $t('update.big_update_content') }}\n            </p>\n            <div\n              ref=\"animatedText\"\n              class=\"extra-info-group\"\n            >\n              <i18n-t\n                keypath=\"update.update_bugs\"\n                tag=\"p\"\n              >\n                <template #pleromaGitlab>\n                  <a\n                    target=\"_blank\"\n                    href=\"https://git.pleroma.social/\"\n                  >{{ $t('update.update_bugs_gitlab') }}</a>\n                </template>\n              </i18n-t>\n              <i18n-t\n                keypath=\"update.update_changelog\"\n                tag=\"p\"\n              >\n                <template #theFullChangelog>\n                  <a\n                    target=\"_blank\"\n                    href=\"https://pleroma.social/announcements/\"\n                  >{{ $t('update.update_changelog_here') }}</a>\n                </template>\n              </i18n-t>\n              <p class=\"art-credit\">\n                <i18n-t\n                  keypath=\"update.art_by\"\n                  tag=\"small\"\n                >\n                  <template #linkToArtist>\n                    <a\n                      target=\"_blank\"\n                      href=\"https://post.ebin.club/users/pipivovott\"\n                    >pipivovott</a>\n                  </template>\n                </i18n-t>\n              </p>\n            </div>\n          </div>\n          <div class=\"spacer-bottom\" />\n        </div>\n      </div>\n      <div class=\"panel-footer\">\n        <button\n          class=\"button-default\"\n          @click.prevent=\"neverShowAgain\"\n        >\n          {{ $t(\"general.never_show_again\") }}\n        </button>\n        <button\n          v-if=\"!showingMore\"\n          class=\"button-default\"\n          @click.prevent=\"toggleShow\"\n        >\n          {{ $t(\"general.show_more\") }}\n        </button>\n        <button\n          class=\"button-default\"\n          @click.prevent=\"dismiss\"\n        >\n          {{ $t(\"general.dismiss\") }}\n        </button>\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script src=\"./update_notification.js\"></script>\n\n<style src=\"./update_notification.scss\" lang=\"scss\"></style>\n","import Modal from 'src/components/modal/modal.vue'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport pleromaTan from 'src/assets/pleromatan_apology.png'\nimport pleromaTanFox from 'src/assets/pleromatan_apology_fox.png'\nimport pleromaTanMask from 'src/assets/pleromatan_apology_mask.png'\nimport pleromaTanFoxMask from 'src/assets/pleromatan_apology_fox_mask.png'\n\nimport {\n  faTimes\n} from '@fortawesome/free-solid-svg-icons'\nlibrary.add(\n  faTimes\n)\n\nexport const CURRENT_UPDATE_COUNTER = 1\n\nconst UpdateNotification = {\n  data () {\n    return {\n      showingImage: false,\n      pleromaTanVariant: Math.random() > 0.5 ? pleromaTan : pleromaTanFox,\n      showingMore: false\n    }\n  },\n  components: {\n    Modal\n  },\n  computed: {\n    pleromaTanStyles () {\n      const mask = this.pleromaTanVariant === pleromaTan ? pleromaTanMask : pleromaTanFoxMask\n      return {\n        'shape-outside': 'url(' + mask + ')'\n      }\n    },\n    shouldShow () {\n      return !this.$store.state.instance.disableUpdateNotification &&\n        this.$store.state.users.currentUser &&\n        this.$store.state.serverSideStorage.flagStorage.updateCounter < CURRENT_UPDATE_COUNTER &&\n        !this.$store.state.serverSideStorage.prefsStorage.simple.dontShowUpdateNotifs\n    }\n  },\n  methods: {\n    toggleShow () {\n      this.showingMore = !this.showingMore\n    },\n    neverShowAgain () {\n      this.toggleShow()\n      this.$store.commit('setFlag', { flag: 'updateCounter', value: CURRENT_UPDATE_COUNTER })\n      this.$store.commit('setPreference', { path: 'simple.dontShowUpdateNotifs', value: true })\n      this.$store.dispatch('pushServerSideStorage')\n    },\n    dismiss () {\n      this.$store.commit('setFlag', { flag: 'updateCounter', value: CURRENT_UPDATE_COUNTER })\n      this.$store.dispatch('pushServerSideStorage')\n    }\n  },\n  mounted () {\n    this.contentHeightNoImage = this.$refs.animatedText.scrollHeight\n\n    // Workaround to get the text height only after mask loaded. A bit hacky.\n    const newImg = new Image()\n    newImg.onload = () => {\n      setTimeout(() => { this.showingImage = true }, 100)\n    }\n    newImg.src = this.pleromaTanVariant === pleromaTan ? pleromaTanMask : pleromaTanFoxMask\n  }\n}\n\nexport default UpdateNotification\n","import { render } from \"./update_notification.vue?vue&type=template&id=653a2178\"\nimport script from \"./update_notification.js?vue&type=script&lang=js\"\nexport * from \"./update_notification.js?vue&type=script&lang=js\"\n\nimport \"./update_notification.scss?vue&type=style&index=0&lang=scss\"\n\nimport exportComponent from \"/builds/pleroma/pleroma-fe/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","ref","target","href","library","faTimes","CURRENT_UPDATE_COUNTER","data","showingImage","pleromaTanVariant","Math","random","pleromaTan","pleromaTanFox","showingMore","components","Modal","computed","pleromaTanStyles","this","pleromaTanMask","pleromaTanFoxMask","shouldShow","$store","state","instance","disableUpdateNotification","users","currentUser","serverSideStorage","flagStorage","updateCounter","prefsStorage","simple","dontShowUpdateNotifs","methods","toggleShow","neverShowAgain","commit","flag","value","path","dispatch","dismiss","mounted","_this","contentHeightNoImage","$refs","animatedText","scrollHeight","newImg","Image","onload","setTimeout","src","_createBlock","_component_Modal","_ctx","_normalizeClass","_hoisted_1","_hoisted_2","_toDisplayString","$t","_hoisted_3","_createElementBlock","style","_normalizeStyle","_hoisted_5","_hoisted_6","_hoisted_7","_createVNode","_component_i18n_t","keypath","tag","pleromaGitlab","_withCtx","_hoisted_8","theFullChangelog","_hoisted_9","_hoisted_10","linkToArtist","_hoisted_11","_hoisted_12","_hoisted_13","onClick","_cache","_withModifiers","apply","arguments"],"sourceRoot":""}