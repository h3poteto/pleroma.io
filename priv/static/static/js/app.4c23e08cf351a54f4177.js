(()=>{var e,t,n,r,o,i,s,a={88797:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={about:{mrf:{federation:e=>{const{normalize:t}=e;return t(["Federation"])},keyword:{keyword_policies:e=>{const{normalize:t}=e;return t(["Keyword policies"])},ftl_removal:e=>{const{normalize:t}=e;return t(['Removal from "The Whole Known Network" Timeline'])},reject:e=>{const{normalize:t}=e;return t(["Reject"])},replace:e=>{const{normalize:t}=e;return t(["Replace"])},is_replaced_by:e=>{const{normalize:t}=e;return t(["→"])}},mrf_policies:e=>{const{normalize:t}=e;return t(["Enabled MRF policies"])},mrf_policies_desc:e=>{const{normalize:t}=e;return t(["MRF policies manipulate the federation behaviour of the instance.  The following policies are enabled:"])},simple:{simple_policies:e=>{const{normalize:t}=e;return t(["Instance-specific policies"])},instance:e=>{const{normalize:t}=e;return t(["Instance"])},reason:e=>{const{normalize:t}=e;return t(["Reason"])},not_applicable:e=>{const{normalize:t}=e;return t(["N/A"])},accept:e=>{const{normalize:t}=e;return t(["Accept"])},accept_desc:e=>{const{normalize:t}=e;return t(["This instance only accepts messages from the following instances:"])},reject:e=>{const{normalize:t}=e;return t(["Reject"])},reject_desc:e=>{const{normalize:t}=e;return t(["This instance will not accept messages from the following instances:"])},quarantine:e=>{const{normalize:t}=e;return t(["Quarantine"])},quarantine_desc:e=>{const{normalize:t}=e;return t(["This instance will send only public posts to the following instances:"])},ftl_removal:e=>{const{normalize:t}=e;return t(['Removal from "Known Network" Timeline'])},ftl_removal_desc:e=>{const{normalize:t}=e;return t(['This instance removes these instances from "Known Network" timeline:'])},media_removal:e=>{const{normalize:t}=e;return t(["Media Removal"])},media_removal_desc:e=>{const{normalize:t}=e;return t(["This instance removes media from posts on the following instances:"])},media_nsfw:e=>{const{normalize:t}=e;return t(["Media force-set as sensitive"])},media_nsfw_desc:e=>{const{normalize:t}=e;return t(["This instance forces media to be set sensitive in posts on the following instances:"])}}},staff:e=>{const{normalize:t}=e;return t(["Staff"])}},announcements:{page_header:e=>{const{normalize:t}=e;return t(["Announcements"])},title:e=>{const{normalize:t}=e;return t(["Announcement"])},mark_as_read_action:e=>{const{normalize:t}=e;return t(["Mark as read"])},post_form_header:e=>{const{normalize:t}=e;return t(["Post announcement"])},post_placeholder:e=>{const{normalize:t}=e;return t(["Type your announcement content here..."])},post_action:e=>{const{normalize:t}=e;return t(["Post"])},post_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error: ",n(r("error"))])},close_error:e=>{const{normalize:t}=e;return t(["Close"])},delete_action:e=>{const{normalize:t}=e;return t(["Delete"])},start_time_prompt:e=>{const{normalize:t}=e;return t(["Start time: "])},end_time_prompt:e=>{const{normalize:t}=e;return t(["End time: "])},all_day_prompt:e=>{const{normalize:t}=e;return t(["This is an all-day event"])},published_time_display:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Published at ",n(r("time"))])},start_time_display:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Starts at ",n(r("time"))])},end_time_display:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Ends at ",n(r("time"))])},edit_action:e=>{const{normalize:t}=e;return t(["Edit"])},submit_edit_action:e=>{const{normalize:t}=e;return t(["Submit"])},cancel_edit_action:e=>{const{normalize:t}=e;return t(["Cancel"])},inactive_message:e=>{const{normalize:t}=e;return t(["This announcement is inactive"])}},shoutbox:{title:e=>{const{normalize:t}=e;return t(["Shoutbox"])}},domain_mute_card:{mute:e=>{const{normalize:t}=e;return t(["Mute"])},mute_progress:e=>{const{normalize:t}=e;return t(["Muting…"])},unmute:e=>{const{normalize:t}=e;return t(["Unmute"])},unmute_progress:e=>{const{normalize:t}=e;return t(["Unmuting…"])}},exporter:{export:e=>{const{normalize:t}=e;return t(["Export"])},processing:e=>{const{normalize:t}=e;return t(["Processing, you'll soon be asked to download your file"])}},features_panel:{shout:e=>{const{normalize:t}=e;return t(["Shoutbox"])},pleroma_chat_messages:e=>{const{normalize:t}=e;return t(["Pleroma Chat"])},gopher:e=>{const{normalize:t}=e;return t(["Gopher"])},media_proxy:e=>{const{normalize:t}=e;return t(["Media proxy"])},scope_options:e=>{const{normalize:t}=e;return t(["Scope options"])},text_limit:e=>{const{normalize:t}=e;return t(["Text limit"])},title:e=>{const{normalize:t}=e;return t(["Features"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])},upload_limit:e=>{const{normalize:t}=e;return t(["Upload limit"])}},finder:{error_fetching_user:e=>{const{normalize:t}=e;return t(["Error fetching user"])},find_user:e=>{const{normalize:t}=e;return t(["Find user"])}},general:{apply:e=>{const{normalize:t}=e;return t(["Apply"])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},more:e=>{const{normalize:t}=e;return t(["More"])},loading:e=>{const{normalize:t}=e;return t(["Loading…"])},generic_error:e=>{const{normalize:t}=e;return t(["An error occured"])},generic_error_message:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["An error occured: ",n(r(0))])},error_retry:e=>{const{normalize:t}=e;return t(["Please try again"])},retry:e=>{const{normalize:t}=e;return t(["Try again"])},optional:e=>{const{normalize:t}=e;return t(["optional"])},show_more:e=>{const{normalize:t}=e;return t(["Show more"])},show_less:e=>{const{normalize:t}=e;return t(["Show less"])},never_show_again:e=>{const{normalize:t}=e;return t(["Never show again"])},dismiss:e=>{const{normalize:t}=e;return t(["Dismiss"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},disable:e=>{const{normalize:t}=e;return t(["Disable"])},enable:e=>{const{normalize:t}=e;return t(["Enable"])},confirm:e=>{const{normalize:t}=e;return t(["Confirm"])},verify:e=>{const{normalize:t}=e;return t(["Verify"])},close:e=>{const{normalize:t}=e;return t(["Close"])},undo:e=>{const{normalize:t}=e;return t(["Undo"])},yes:e=>{const{normalize:t}=e;return t(["Yes"])},no:e=>{const{normalize:t}=e;return t(["No"])},peek:e=>{const{normalize:t}=e;return t(["Peek"])},scroll_to_top:e=>{const{normalize:t}=e;return t(["Scroll to top"])},role:{admin:e=>{const{normalize:t}=e;return t(["Admin"])},moderator:e=>{const{normalize:t}=e;return t(["Moderator"])}},unpin:e=>{const{normalize:t}=e;return t(["Unpin item"])},pin:e=>{const{normalize:t}=e;return t(["Pin item"])},flash_content:e=>{const{normalize:t}=e;return t(["Click to show Flash content using Ruffle (Experimental, may not work)."])},flash_security:e=>{const{normalize:t}=e;return t(["Note that this can be potentially dangerous since Flash content is still arbitrary code."])},flash_fail:e=>{const{normalize:t}=e;return t(["Failed to load flash content, see console for details."])},scope_in_timeline:{direct:e=>{const{normalize:t}=e;return t(["Direct"])},private:e=>{const{normalize:t}=e;return t(["Followers-only"])},public:e=>{const{normalize:t}=e;return t(["Public"])},unlisted:e=>{const{normalize:t}=e;return t(["Unlisted"])}}},image_cropper:{crop_picture:e=>{const{normalize:t}=e;return t(["Crop picture"])},save:e=>{const{normalize:t}=e;return t(["Save"])},save_without_cropping:e=>{const{normalize:t}=e;return t(["Save without cropping"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])}},importer:{submit:e=>{const{normalize:t}=e;return t(["Submit"])},success:e=>{const{normalize:t}=e;return t(["Imported successfully."])},error:e=>{const{normalize:t}=e;return t(["An error occured while importing this file."])}},login:{login:e=>{const{normalize:t}=e;return t(["Log in"])},description:e=>{const{normalize:t}=e;return t(["Log in with OAuth"])},logout:e=>{const{normalize:t}=e;return t(["Log out"])},password:e=>{const{normalize:t}=e;return t(["Password"])},placeholder:e=>{const{normalize:t}=e;return t(["e.g. lain"])},register:e=>{const{normalize:t}=e;return t(["Register"])},username:e=>{const{normalize:t}=e;return t(["Username"])},hint:e=>{const{normalize:t}=e;return t(["Log in to join the discussion"])},authentication_code:e=>{const{normalize:t}=e;return t(["Authentication code"])},enter_recovery_code:e=>{const{normalize:t}=e;return t(["Enter a recovery code"])},enter_two_factor_code:e=>{const{normalize:t}=e;return t(["Enter a two-factor code"])},recovery_code:e=>{const{normalize:t}=e;return t(["Recovery code"])},heading:{totp:e=>{const{normalize:t}=e;return t(["Two-factor authentication"])},recovery:e=>{const{normalize:t}=e;return t(["Two-factor recovery"])}}},media_modal:{previous:e=>{const{normalize:t}=e;return t(["Previous"])},next:e=>{const{normalize:t}=e;return t(["Next"])},counter:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("current"))," / ",n(r("total"))])},hide:e=>{const{normalize:t}=e;return t(["Close media viewer"])}},nav:{about:e=>{const{normalize:t}=e;return t(["About"])},administration:e=>{const{normalize:t}=e;return t(["Administration"])},back:e=>{const{normalize:t}=e;return t(["Back"])},friend_requests:e=>{const{normalize:t}=e;return t(["Follow requests"])},mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},interactions:e=>{const{normalize:t}=e;return t(["Interactions"])},dms:e=>{const{normalize:t}=e;return t(["Direct messages"])},public_tl:e=>{const{normalize:t}=e;return t(["Public timeline"])},timeline:e=>{const{normalize:t}=e;return t(["Timeline"])},home_timeline:e=>{const{normalize:t}=e;return t(["Home timeline"])},twkn:e=>{const{normalize:t}=e;return t(["Known Network"])},bookmarks:e=>{const{normalize:t}=e;return t(["Bookmarks"])},user_search:e=>{const{normalize:t}=e;return t(["User Search"])},search:e=>{const{normalize:t}=e;return t(["Search"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])},preferences:e=>{const{normalize:t}=e;return t(["Preferences"])},timelines:e=>{const{normalize:t}=e;return t(["Timelines"])},chats:e=>{const{normalize:t}=e;return t(["Chats"])},lists:e=>{const{normalize:t}=e;return t(["Lists"])},edit_nav_mobile:e=>{const{normalize:t}=e;return t(["Customize navigation bar"])},edit_pinned:e=>{const{normalize:t}=e;return t(["Edit pinned items"])},edit_finish:e=>{const{normalize:t}=e;return t(["Done editing"])},mobile_sidebar:e=>{const{normalize:t}=e;return t(["Toggle mobile sidebar"])},mobile_notifications:e=>{const{normalize:t}=e;return t(["Open notifications"])},mobile_notifications:e=>{const{normalize:t}=e;return t(["Open notifications (there are unread ones)"])},mobile_notifications_close:e=>{const{normalize:t}=e;return t(["Close notifications"])},announcements:e=>{const{normalize:t}=e;return t(["Announcements"])}},notifications:{broken_favorite:e=>{const{normalize:t}=e;return t(["Unknown status, searching for it…"])},error:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Error fetching notifications: ",n(r(0))])},favorited_you:e=>{const{normalize:t}=e;return t(["favorited your status"])},followed_you:e=>{const{normalize:t}=e;return t(["followed you"])},follow_request:e=>{const{normalize:t}=e;return t(["wants to follow you"])},load_older:e=>{const{normalize:t}=e;return t(["Load older notifications"])},notifications:e=>{const{normalize:t}=e;return t(["Notifications"])},read:e=>{const{normalize:t}=e;return t(["Read!"])},repeated_you:e=>{const{normalize:t}=e;return t(["repeated your status"])},no_more_notifications:e=>{const{normalize:t}=e;return t(["No more notifications"])},migrated_to:e=>{const{normalize:t}=e;return t(["migrated to"])},reacted_with:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["reacted with ",n(r(0))])},submitted_report:e=>{const{normalize:t}=e;return t(["submitted a report"])},poll_ended:e=>{const{normalize:t}=e;return t(["poll has ended"])}},polls:{add_poll:e=>{const{normalize:t}=e;return t(["Add poll"])},add_option:e=>{const{normalize:t}=e;return t(["Add option"])},option:e=>{const{normalize:t}=e;return t(["Option"])},votes:e=>{const{normalize:t}=e;return t(["votes"])},people_voted_count:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t([n(r("count"))," person voted"]),t([n(r("count"))," people voted"])])},votes_count:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t([n(r("count"))," vote"]),t([n(r("count"))," votes"])])},vote:e=>{const{normalize:t}=e;return t(["Vote"])},type:e=>{const{normalize:t}=e;return t(["Poll type"])},single_choice:e=>{const{normalize:t}=e;return t(["Single choice"])},multiple_choices:e=>{const{normalize:t}=e;return t(["Multiple choices"])},expiry:e=>{const{normalize:t}=e;return t(["Poll age"])},expires_in:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Poll ends in ",n(r(0))])},expired:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Poll ended ",n(r(0))," ago"])},not_enough_options:e=>{const{normalize:t}=e;return t(["Too few unique options in poll"])}},emoji:{stickers:e=>{const{normalize:t}=e;return t(["Stickers"])},emoji:e=>{const{normalize:t}=e;return t(["Emoji"])},keep_open:e=>{const{normalize:t}=e;return t(["Keep picker open"])},search_emoji:e=>{const{normalize:t}=e;return t(["Search for an emoji"])},add_emoji:e=>{const{normalize:t}=e;return t(["Insert emoji"])},custom:e=>{const{normalize:t}=e;return t(["Custom emoji"])},unicode:e=>{const{normalize:t}=e;return t(["Unicode emoji"])},unicode_groups:{activities:e=>{const{normalize:t}=e;return t(["Activities"])},"animals-and-nature":e=>{const{normalize:t}=e;return t(["Animals & Nature"])},flags:e=>{const{normalize:t}=e;return t(["Flags"])},"food-and-drink":e=>{const{normalize:t}=e;return t(["Food & Drink"])},objects:e=>{const{normalize:t}=e;return t(["Objects"])},"people-and-body":e=>{const{normalize:t}=e;return t(["People & Body"])},"smileys-and-emotion":e=>{const{normalize:t}=e;return t(["Smileys & Emotion"])},symbols:e=>{const{normalize:t}=e;return t(["Symbols"])},"travel-and-places":e=>{const{normalize:t}=e;return t(["Travel & Places"])}},load_all_hint:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Loaded first ",n(r("saneAmount"))," emoji, loading all emoji may cause performance issues."])},load_all:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Loading all ",n(r("emojiAmount"))," emoji"])},regional_indicator:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Regional indicator ",n(r("letter"))])}},errors:{storage_unavailable:e=>{const{normalize:t}=e;return t(["Pleroma could not access browser storage. Your login or your local settings won't be saved and you might encounter unexpected issues. Try enabling cookies."])}},interactions:{favs_repeats:e=>{const{normalize:t}=e;return t(["Repeats and favorites"])},follows:e=>{const{normalize:t}=e;return t(["New follows"])},emoji_reactions:e=>{const{normalize:t}=e;return t(["Emoji Reactions"])},reports:e=>{const{normalize:t}=e;return t(["Reports"])},moves:e=>{const{normalize:t}=e;return t(["User migrates"])},load_older:e=>{const{normalize:t}=e;return t(["Load older interactions"])}},post_status:{edit_status:e=>{const{normalize:t}=e;return t(["Edit status"])},new_status:e=>{const{normalize:t}=e;return t(["Post new status"])},account_not_locked_warning:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Your account is not ",n(r(0)),". Anyone can follow you to view your follower-only posts."])},account_not_locked_warning_link:e=>{const{normalize:t}=e;return t(["locked"])},attachments_sensitive:e=>{const{normalize:t}=e;return t(["Mark attachments as sensitive"])},media_description:e=>{const{normalize:t}=e;return t(["Media description"])},content_type:{"text/plain":e=>{const{normalize:t}=e;return t(["Plain text"])},"text/html":e=>{const{normalize:t}=e;return t(["HTML"])},"text/markdown":e=>{const{normalize:t}=e;return t(["Markdown"])},"text/bbcode":e=>{const{normalize:t}=e;return t(["BBCode"])}},content_warning:e=>{const{normalize:t}=e;return t(["Subject (optional)"])},default:e=>{const{normalize:t}=e;return t(["Just landed in L.A."])},direct_warning_to_all:e=>{const{normalize:t}=e;return t(["This post will be visible to all the mentioned users."])},direct_warning_to_first_only:e=>{const{normalize:t}=e;return t(["This post will only be visible to the mentioned users at the beginning of the message."])},edit_remote_warning:e=>{const{normalize:t}=e;return t(["Other remote instances may not support editing and unable to receive the latest version of your post."])},edit_unsupported_warning:e=>{const{normalize:t}=e;return t(["Pleroma does not support editing mentions or polls."])},posting:e=>{const{normalize:t}=e;return t(["Posting"])},post:e=>{const{normalize:t}=e;return t(["Post"])},preview:e=>{const{normalize:t}=e;return t(["Preview"])},preview_empty:e=>{const{normalize:t}=e;return t(["Empty"])},empty_status_error:e=>{const{normalize:t}=e;return t(["Can't post an empty status with no files"])},media_description_error:e=>{const{normalize:t}=e;return t(["Failed to update media, try again"])},scope_notice:{public:e=>{const{normalize:t}=e;return t(["This post will be visible to everyone"])},private:e=>{const{normalize:t}=e;return t(["This post will be visible to your followers only"])},unlisted:e=>{const{normalize:t}=e;return t(["This post will not be visible in Public Timeline and The Whole Known Network"])}},scope:{direct:e=>{const{normalize:t}=e;return t(["Direct - post to mentioned users only"])},private:e=>{const{normalize:t}=e;return t(["Followers-only - post to followers only"])},public:e=>{const{normalize:t}=e;return t(["Public - post to public timelines"])},unlisted:e=>{const{normalize:t}=e;return t(["Unlisted - do not post to public timelines"])}}},registration:{bio_optional:e=>{const{normalize:t}=e;return t(["Bio (optional)"])},email:e=>{const{normalize:t}=e;return t(["Email"])},email_optional:e=>{const{normalize:t}=e;return t(["Email (optional)"])},fullname:e=>{const{normalize:t}=e;return t(["Display name"])},password_confirm:e=>{const{normalize:t}=e;return t(["Password confirmation"])},registration:e=>{const{normalize:t}=e;return t(["Registration"])},token:e=>{const{normalize:t}=e;return t(["Invite token"])},captcha:e=>{const{normalize:t}=e;return t(["CAPTCHA"])},new_captcha:e=>{const{normalize:t}=e;return t(["Click the image to get a new captcha"])},username_placeholder:e=>{const{normalize:t}=e;return t(["e.g. lain"])},fullname_placeholder:e=>{const{normalize:t}=e;return t(["e.g. Lain Iwakura"])},bio_placeholder:e=>{const{normalize:t}=e;return t(["e.g.\nHi, I'm Lain.\nI’m an anime girl living in suburban Japan. You may know me from the Wired."])},reason:e=>{const{normalize:t}=e;return t(["Reason to register"])},reason_placeholder:e=>{const{normalize:t}=e;return t(["This instance approves registrations manually.\nLet the administration know why you want to register."])},register:e=>{const{normalize:t}=e;return t(["Register"])},validations:{username_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},fullname_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},email_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_confirmation_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_confirmation_match:e=>{const{normalize:t}=e;return t(["should be the same as password"])}},email_language:e=>{const{normalize:t}=e;return t(["In which language do you want to receive emails from the server?"])}},remote_user_resolver:{remote_user_resolver:e=>{const{normalize:t}=e;return t(["Remote user resolver"])},searching_for:e=>{const{normalize:t}=e;return t(["Searching for"])},error:e=>{const{normalize:t}=e;return t(["Not found."])}},report:{reporter:e=>{const{normalize:t}=e;return t(["Reporter:"])},reported_user:e=>{const{normalize:t}=e;return t(["Reported user:"])},reported_statuses:e=>{const{normalize:t}=e;return t(["Reported statuses:"])},notes:e=>{const{normalize:t}=e;return t(["Notes:"])},state:e=>{const{normalize:t}=e;return t(["State:"])},state_open:e=>{const{normalize:t}=e;return t(["Open"])},state_closed:e=>{const{normalize:t}=e;return t(["Closed"])},state_resolved:e=>{const{normalize:t}=e;return t(["Resolved"])}},selectable_list:{select_all:e=>{const{normalize:t}=e;return t(["Select all"])}},settings:{app_name:e=>{const{normalize:t}=e;return t(["App name"])},expert_mode:e=>{const{normalize:t}=e;return t(["Show advanced"])},save:e=>{const{normalize:t}=e;return t(["Save changes"])},security:e=>{const{normalize:t}=e;return t(["Security"])},setting_changed:e=>{const{normalize:t}=e;return t(["Setting is different from default"])},setting_server_side:e=>{const{normalize:t}=e;return t(["This setting is tied to your profile and affects all sessions and clients"])},enter_current_password_to_confirm:e=>{const{normalize:t}=e;return t(["Enter your current password to confirm your identity"])},post_look_feel:e=>{const{normalize:t}=e;return t(["Posts Look & Feel"])},mention_links:e=>{const{normalize:t}=e;return t(["Mention links"])},mfa:{otp:e=>{const{normalize:t}=e;return t(["OTP"])},setup_otp:e=>{const{normalize:t}=e;return t(["Setup OTP"])},wait_pre_setup_otp:e=>{const{normalize:t}=e;return t(["presetting OTP"])},confirm_and_enable:e=>{const{normalize:t}=e;return t(["Confirm & enable OTP"])},title:e=>{const{normalize:t}=e;return t(["Two-factor Authentication"])},generate_new_recovery_codes:e=>{const{normalize:t}=e;return t(["Generate new recovery codes"])},warning_of_generate_new_codes:e=>{const{normalize:t}=e;return t(["When you generate new recovery codes, your old codes won’t work anymore."])},recovery_codes:e=>{const{normalize:t}=e;return t(["Recovery codes."])},waiting_a_recovery_codes:e=>{const{normalize:t}=e;return t(["Receiving backup codes…"])},recovery_codes_warning:e=>{const{normalize:t}=e;return t(["Write the codes down or save them somewhere secure - otherwise you won't see them again. If you lose access to your 2FA app and recovery codes you'll be locked out of your account."])},authentication_methods:e=>{const{normalize:t}=e;return t(["Authentication methods"])},scan:{title:e=>{const{normalize:t}=e;return t(["Scan"])},desc:e=>{const{normalize:t}=e;return t(["Using your two-factor app, scan this QR code or enter text key:"])},secret_code:e=>{const{normalize:t}=e;return t(["Key"])}},verify:{desc:e=>{const{normalize:t}=e;return t(["To enable two-factor authentication, enter the code from your two-factor app:"])}}},lists_navigation:e=>{const{normalize:t}=e;return t(["Show lists in navigation"])},allow_following_move:e=>{const{normalize:t}=e;return t(["Allow auto-follow when following account moves"])},attachmentRadius:e=>{const{normalize:t}=e;return t(["Attachments"])},attachments:e=>{const{normalize:t}=e;return t(["Attachments"])},avatar:e=>{const{normalize:t}=e;return t(["Avatar"])},avatarAltRadius:e=>{const{normalize:t}=e;return t(["Avatars (notifications)"])},avatarRadius:e=>{const{normalize:t}=e;return t(["Avatars"])},background:e=>{const{normalize:t}=e;return t(["Background"])},bio:e=>{const{normalize:t}=e;return t(["Bio"])},email_language:e=>{const{normalize:t}=e;return t(["Language for receiving emails from the server"])},block_export:e=>{const{normalize:t}=e;return t(["Block export"])},block_export_button:e=>{const{normalize:t}=e;return t(["Export your blocks to a csv file"])},block_import:e=>{const{normalize:t}=e;return t(["Block import"])},block_import_error:e=>{const{normalize:t}=e;return t(["Error importing blocks"])},blocks_imported:e=>{const{normalize:t}=e;return t(["Blocks imported! Processing them will take a while."])},mute_export:e=>{const{normalize:t}=e;return t(["Mute export"])},mute_export_button:e=>{const{normalize:t}=e;return t(["Export your mutes to a csv file"])},mute_import:e=>{const{normalize:t}=e;return t(["Mute import"])},mute_import_error:e=>{const{normalize:t}=e;return t(["Error importing mutes"])},mutes_imported:e=>{const{normalize:t}=e;return t(["Mutes imported! Processing them will take a while."])},import_mutes_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import mutes from a csv file"])},account_backup:e=>{const{normalize:t}=e;return t(["Account backup"])},account_backup_description:e=>{const{normalize:t}=e;return t(["This allows you to download an archive of your account information and your posts, but they cannot yet be imported into a Pleroma account."])},account_backup_table_head:e=>{const{normalize:t}=e;return t(["Backup"])},download_backup:e=>{const{normalize:t}=e;return t(["Download"])},backup_not_ready:e=>{const{normalize:t}=e;return t(["This backup is not ready yet."])},remove_backup:e=>{const{normalize:t}=e;return t(["Remove"])},list_backups_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error fetching backup list: ",n(r("error"))])},add_backup:e=>{const{normalize:t}=e;return t(["Create a new backup"])},added_backup:e=>{const{normalize:t}=e;return t(["Added a new backup."])},add_backup_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error adding a new backup: ",n(r("error"))])},blocks_tab:e=>{const{normalize:t}=e;return t(["Blocks"])},bot:e=>{const{normalize:t}=e;return t(["This is a bot account"])},btnRadius:e=>{const{normalize:t}=e;return t(["Buttons"])},cBlue:e=>{const{normalize:t}=e;return t(["Blue (Reply, follow)"])},cGreen:e=>{const{normalize:t}=e;return t(["Green (Retweet)"])},cOrange:e=>{const{normalize:t}=e;return t(["Orange (Favorite)"])},cRed:e=>{const{normalize:t}=e;return t(["Red (Cancel)"])},change_email:e=>{const{normalize:t}=e;return t(["Change email"])},change_email_error:e=>{const{normalize:t}=e;return t(["There was an issue changing your email."])},changed_email:e=>{const{normalize:t}=e;return t(["Email changed successfully!"])},change_password:e=>{const{normalize:t}=e;return t(["Change password"])},change_password_error:e=>{const{normalize:t}=e;return t(["There was an issue changing your password."])},changed_password:e=>{const{normalize:t}=e;return t(["Password changed successfully!"])},chatMessageRadius:e=>{const{normalize:t}=e;return t(["Chat message"])},collapse_subject:e=>{const{normalize:t}=e;return t(["Collapse posts with subjects"])},composing:e=>{const{normalize:t}=e;return t(["Composing"])},confirm_new_password:e=>{const{normalize:t}=e;return t(["Confirm new password"])},current_password:e=>{const{normalize:t}=e;return t(["Current password"])},mutes_and_blocks:e=>{const{normalize:t}=e;return t(["Mutes and Blocks"])},data_import_export_tab:e=>{const{normalize:t}=e;return t(["Data import / export"])},default_vis:e=>{const{normalize:t}=e;return t(["Default visibility scope"])},delete_account:e=>{const{normalize:t}=e;return t(["Delete account"])},delete_account_description:e=>{const{normalize:t}=e;return t(["Permanently delete your data and deactivate your account."])},delete_account_error:e=>{const{normalize:t}=e;return t(["There was an issue deleting your account. If this persists please contact your instance administrator."])},delete_account_instructions:e=>{const{normalize:t}=e;return t(["Type your password in the input below to confirm account deletion."])},account_alias:e=>{const{normalize:t}=e;return t(["Account aliases"])},account_alias_table_head:e=>{const{normalize:t}=e;return t(["Alias"])},list_aliases_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error fetching aliases: ",n(r("error"))])},hide_list_aliases_error_action:e=>{const{normalize:t}=e;return t(["Close"])},remove_alias:e=>{const{normalize:t}=e;return t(["Remove this alias"])},new_alias_target:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Add a new alias (e.g. ",n(r("example")),")"])},added_alias:e=>{const{normalize:t}=e;return t(["Alias is added."])},add_alias_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error adding alias: ",n(r("error"))])},move_account:e=>{const{normalize:t}=e;return t(["Move account"])},move_account_notes:e=>{const{normalize:t}=e;return t(["If you want to move the account somewhere else, you must go to your target account and add an alias pointing here."])},move_account_target:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Target account (e.g. ",n(r("example")),")"])},moved_account:e=>{const{normalize:t}=e;return t(["Account is moved."])},move_account_error:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Error moving account: ",n(r("error"))])},discoverable:e=>{const{normalize:t}=e;return t(["Allow discovery of this account in search results and other services"])},domain_mutes:e=>{const{normalize:t}=e;return t(["Domains"])},avatar_size_instruction:e=>{const{normalize:t}=e;return t(["The recommended minimum size for avatar images is 150x150 pixels."])},pad_emoji:e=>{const{normalize:t}=e;return t(["Pad emoji with spaces when adding from picker"])},emoji_reactions_on_timeline:e=>{const{normalize:t}=e;return t(["Show emoji reactions on timeline"])},export_theme:e=>{const{normalize:t}=e;return t(["Save preset"])},filtering:e=>{const{normalize:t}=e;return t(["Filtering"])},wordfilter:e=>{const{normalize:t}=e;return t(["Wordfilter"])},filtering_explanation:e=>{const{normalize:t}=e;return t(["All statuses containing these words will be muted, one per line"])},word_filter_and_more:e=>{const{normalize:t}=e;return t(["Word filter and more..."])},follow_export:e=>{const{normalize:t}=e;return t(["Follow export"])},follow_export_button:e=>{const{normalize:t}=e;return t(["Export your follows to a csv file"])},follow_import:e=>{const{normalize:t}=e;return t(["Follow import"])},follow_import_error:e=>{const{normalize:t}=e;return t(["Error importing followers"])},follows_imported:e=>{const{normalize:t}=e;return t(["Follows imported! Processing them will take a while."])},accent:e=>{const{normalize:t}=e;return t(["Accent"])},foreground:e=>{const{normalize:t}=e;return t(["Foreground"])},general:e=>{const{normalize:t}=e;return t(["General"])},hide_attachments_in_convo:e=>{const{normalize:t}=e;return t(["Hide attachments in conversations"])},hide_attachments_in_tl:e=>{const{normalize:t}=e;return t(["Hide attachments in timeline"])},hide_media_previews:e=>{const{normalize:t}=e;return t(["Hide media previews"])},hide_muted_posts:e=>{const{normalize:t}=e;return t(["Hide posts of muted users"])},mute_bot_posts:e=>{const{normalize:t}=e;return t(["Mute bot posts"])},hide_bot_indication:e=>{const{normalize:t}=e;return t(["Hide bot indication in posts"])},hide_all_muted_posts:e=>{const{normalize:t}=e;return t(["Hide muted posts"])},max_thumbnails:e=>{const{normalize:t}=e;return t(["Maximum amount of thumbnails per post (empty = no limit)"])},hide_isp:e=>{const{normalize:t}=e;return t(["Hide instance-specific panel"])},hide_shoutbox:e=>{const{normalize:t}=e;return t(["Hide instance shoutbox"])},right_sidebar:e=>{const{normalize:t}=e;return t(["Reverse order of columns"])},navbar_column_stretch:e=>{const{normalize:t}=e;return t(["Stretch navbar to columns width"])},always_show_post_button:e=>{const{normalize:t}=e;return t(["Always show floating New Post button"])},hide_wallpaper:e=>{const{normalize:t}=e;return t(["Hide instance wallpaper"])},preload_images:e=>{const{normalize:t}=e;return t(["Preload images"])},use_one_click_nsfw:e=>{const{normalize:t}=e;return t(["Open NSFW attachments with just one click"])},hide_post_stats:e=>{const{normalize:t}=e;return t(["Hide post statistics (e.g. the number of favorites)"])},hide_user_stats:e=>{const{normalize:t}=e;return t(["Hide user statistics (e.g. the number of followers)"])},hide_filtered_statuses:e=>{const{normalize:t}=e;return t(["Hide all filtered posts"])},hide_wordfiltered_statuses:e=>{const{normalize:t}=e;return t(["Hide word-filtered statuses"])},hide_muted_threads:e=>{const{normalize:t}=e;return t(["Hide muted threads"])},import_blocks_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import blocks from a csv file"])},import_followers_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import follows from a csv file"])},import_theme:e=>{const{normalize:t}=e;return t(["Load preset"])},inputRadius:e=>{const{normalize:t}=e;return t(["Input fields"])},checkboxRadius:e=>{const{normalize:t}=e;return t(["Checkboxes"])},instance_default:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["(default: ",n(r("value")),")"])},instance_default_simple:e=>{const{normalize:t}=e;return t(["(default)"])},interface:e=>{const{normalize:t}=e;return t(["Interface"])},interfaceLanguage:e=>{const{normalize:t}=e;return t(["Interface language"])},invalid_theme_imported:e=>{const{normalize:t}=e;return t(["The selected file is not a supported Pleroma theme. No changes to your theme were made."])},limited_availability:e=>{const{normalize:t}=e;return t(["Unavailable in your browser"])},links:e=>{const{normalize:t}=e;return t(["Links"])},lock_account_description:e=>{const{normalize:t}=e;return t(["Restrict your account to approved followers only"])},loop_video:e=>{const{normalize:t}=e;return t(["Loop videos"])},loop_video_silent_only:e=>{const{normalize:t}=e;return t(['Loop only videos without sound (i.e. Mastodon\'s "gifs")'])},mutes_tab:e=>{const{normalize:t}=e;return t(["Mutes"])},play_videos_in_modal:e=>{const{normalize:t}=e;return t(["Play videos in a popup frame"])},file_export_import:{backup_restore:e=>{const{normalize:t}=e;return t(["Settings backup"])},backup_settings:e=>{const{normalize:t}=e;return t(["Backup settings to file"])},backup_settings_theme:e=>{const{normalize:t}=e;return t(["Backup settings and theme to file"])},restore_settings:e=>{const{normalize:t}=e;return t(["Restore settings from file"])},errors:{invalid_file:e=>{const{normalize:t}=e;return t(["The selected file is not a supported Pleroma settings backup. No changes were made."])},file_too_new:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Incompatile major version: ",n(r("fileMajor")),", this PleromaFE (settings ver ",n(r("feMajor")),") is too old to handle it"])},file_too_old:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Incompatile major version: ",n(r("fileMajor")),", file version is too old and not supported (min. set. ver. ",n(r("feMajor")),")"])},file_slightly_new:e=>{const{normalize:t}=e;return t(["File minor version is different, some settings might not load"])}}},profile_fields:{label:e=>{const{normalize:t}=e;return t(["Profile metadata"])},add_field:e=>{const{normalize:t}=e;return t(["Add field"])},name:e=>{const{normalize:t}=e;return t(["Label"])},value:e=>{const{normalize:t}=e;return t(["Content"])}},account_privacy:e=>{const{normalize:t}=e;return t(["Privacy"])},use_contain_fit:e=>{const{normalize:t}=e;return t(["Don't crop the attachment in thumbnails"])},name:e=>{const{normalize:t}=e;return t(["Name"])},name_bio:e=>{const{normalize:t}=e;return t(["Name & bio"])},new_email:e=>{const{normalize:t}=e;return t(["New email"])},new_password:e=>{const{normalize:t}=e;return t(["New password"])},posts:e=>{const{normalize:t}=e;return t(["Posts"])},user_profiles:e=>{const{normalize:t}=e;return t(["User Profiles"])},notification_visibility:e=>{const{normalize:t}=e;return t(["Types of notifications to show"])},notification_visibility_follows:e=>{const{normalize:t}=e;return t(["Follows"])},notification_visibility_likes:e=>{const{normalize:t}=e;return t(["Favorites"])},notification_visibility_mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},notification_visibility_repeats:e=>{const{normalize:t}=e;return t(["Repeats"])},notification_visibility_moves:e=>{const{normalize:t}=e;return t(["User Migrates"])},notification_visibility_emoji_reactions:e=>{const{normalize:t}=e;return t(["Reactions"])},notification_visibility_polls:e=>{const{normalize:t}=e;return t(["Ends of polls you voted in"])},no_rich_text_description:e=>{const{normalize:t}=e;return t(["Strip rich text formatting from all posts"])},no_blocks:e=>{const{normalize:t}=e;return t(["No blocks"])},no_mutes:e=>{const{normalize:t}=e;return t(["No mutes"])},hide_favorites_description:e=>{const{normalize:t}=e;return t(["Don't show list of my favorites (people still get notified)"])},hide_follows_description:e=>{const{normalize:t}=e;return t(["Don't show who I'm following"])},hide_followers_description:e=>{const{normalize:t}=e;return t(["Don't show who's following me"])},hide_follows_count_description:e=>{const{normalize:t}=e;return t(["Don't show follow count"])},hide_followers_count_description:e=>{const{normalize:t}=e;return t(["Don't show follower count"])},show_admin_badge:e=>{const{normalize:t}=e;return t(['Show "Admin" badge in my profile'])},show_moderator_badge:e=>{const{normalize:t}=e;return t(['Show "Moderator" badge in my profile'])},nsfw_clickthrough:e=>{const{normalize:t}=e;return t(["Hide sensitive/NSFW media"])},oauth_tokens:e=>{const{normalize:t}=e;return t(["OAuth tokens"])},token:e=>{const{normalize:t}=e;return t(["Token"])},refresh_token:e=>{const{normalize:t}=e;return t(["Refresh token"])},valid_until:e=>{const{normalize:t}=e;return t(["Valid until"])},revoke_token:e=>{const{normalize:t}=e;return t(["Revoke"])},panelRadius:e=>{const{normalize:t}=e;return t(["Panels"])},pause_on_unfocused:e=>{const{normalize:t}=e;return t(["Pause when tab is not focused"])},presets:e=>{const{normalize:t}=e;return t(["Presets"])},profile_background:e=>{const{normalize:t}=e;return t(["Profile background"])},profile_banner:e=>{const{normalize:t}=e;return t(["Profile banner"])},profile_tab:e=>{const{normalize:t}=e;return t(["Profile"])},radii_help:e=>{const{normalize:t}=e;return t(["Set up interface edge rounding (in pixels)"])},replies_in_timeline:e=>{const{normalize:t}=e;return t(["Replies in timeline"])},reply_visibility_all:e=>{const{normalize:t}=e;return t(["Show all replies"])},reply_visibility_following:e=>{const{normalize:t}=e;return t(["Only show replies directed at me or users I'm following"])},reply_visibility_self:e=>{const{normalize:t}=e;return t(["Only show replies directed at me"])},reply_visibility_following_short:e=>{const{normalize:t}=e;return t(["Show replies to my follows"])},reply_visibility_self_short:e=>{const{normalize:t}=e;return t(["Show replies to self only"])},autohide_floating_post_button:e=>{const{normalize:t}=e;return t(["Automatically hide New Post button (mobile)"])},saving_err:e=>{const{normalize:t}=e;return t(["Error saving settings"])},saving_ok:e=>{const{normalize:t}=e;return t(["Settings saved"])},search_user_to_block:e=>{const{normalize:t}=e;return t(["Search whom you want to block"])},search_user_to_mute:e=>{const{normalize:t}=e;return t(["Search whom you want to mute"])},security_tab:e=>{const{normalize:t}=e;return t(["Security"])},scope_copy:e=>{const{normalize:t}=e;return t(["Copy scope when replying (DMs are always copied)"])},minimal_scopes_mode:e=>{const{normalize:t}=e;return t(["Minimize post scope selection options"])},set_new_avatar:e=>{const{normalize:t}=e;return t(["Set new avatar"])},set_new_profile_background:e=>{const{normalize:t}=e;return t(["Set new profile background"])},set_new_profile_banner:e=>{const{normalize:t}=e;return t(["Set new profile banner"])},reset_avatar:e=>{const{normalize:t}=e;return t(["Reset avatar"])},reset_profile_background:e=>{const{normalize:t}=e;return t(["Reset profile background"])},reset_profile_banner:e=>{const{normalize:t}=e;return t(["Reset profile banner"])},reset_avatar_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the avatar?"])},reset_banner_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the banner?"])},reset_background_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the background?"])},settings:e=>{const{normalize:t}=e;return t(["Settings"])},subject_input_always_show:e=>{const{normalize:t}=e;return t(["Always show subject field"])},subject_line_behavior:e=>{const{normalize:t}=e;return t(["Copy subject when replying"])},subject_line_email:e=>{const{normalize:t}=e;return t(['Like email: "re: subject"'])},subject_line_mastodon:e=>{const{normalize:t}=e;return t(["Like mastodon: copy as is"])},subject_line_noop:e=>{const{normalize:t}=e;return t(["Do not copy"])},conversation_display:e=>{const{normalize:t}=e;return t(["Conversation display style"])},conversation_display_tree:e=>{const{normalize:t}=e;return t(["Tree-style"])},conversation_display_tree_quick:e=>{const{normalize:t}=e;return t(["Tree view"])},disable_sticky_headers:e=>{const{normalize:t}=e;return t(["Don't stick column headers to top of the screen"])},show_scrollbars:e=>{const{normalize:t}=e;return t(["Show side column's scrollbars"])},third_column_mode:e=>{const{normalize:t}=e;return t(["When there's enough space, show third column containing"])},third_column_mode_none:e=>{const{normalize:t}=e;return t(["Don't show third column at all"])},third_column_mode_notifications:e=>{const{normalize:t}=e;return t(["Notifications column"])},third_column_mode_postform:e=>{const{normalize:t}=e;return t(["Main post form and navigation"])},columns:e=>{const{normalize:t}=e;return t(["Columns"])},column_sizes:e=>{const{normalize:t}=e;return t(["Column sizes"])},column_sizes_sidebar:e=>{const{normalize:t}=e;return t(["Sidebar"])},column_sizes_content:e=>{const{normalize:t}=e;return t(["Content"])},column_sizes_notifs:e=>{const{normalize:t}=e;return t(["Notifications"])},tree_advanced:e=>{const{normalize:t}=e;return t(["Allow more flexible navigation in tree view"])},tree_fade_ancestors:e=>{const{normalize:t}=e;return t(["Display ancestors of the current status in faint text"])},conversation_display_linear:e=>{const{normalize:t}=e;return t(["Linear-style"])},conversation_display_linear_quick:e=>{const{normalize:t}=e;return t(["Linear view"])},conversation_other_replies_button:e=>{const{normalize:t}=e;return t(['Show the "other replies" button'])},conversation_other_replies_button_below:e=>{const{normalize:t}=e;return t(["Below statuses"])},conversation_other_replies_button_inside:e=>{const{normalize:t}=e;return t(["Inside statuses"])},max_depth_in_thread:e=>{const{normalize:t}=e;return t(["Maximum number of levels in thread to display by default"])},post_status_content_type:e=>{const{normalize:t}=e;return t(["Post status content type"])},sensitive_by_default:e=>{const{normalize:t}=e;return t(["Mark posts as sensitive by default"])},stop_gifs:e=>{const{normalize:t}=e;return t(["Pause animated images until you hover on them"])},streaming:e=>{const{normalize:t}=e;return t(["Automatically show new posts when scrolled to the top"])},auto_update:e=>{const{normalize:t}=e;return t(["Show new posts automatically"])},user_mutes:e=>{const{normalize:t}=e;return t(["Users"])},useStreamingApi:e=>{const{normalize:t}=e;return t(["Receive posts and notifications real-time"])},use_websockets:e=>{const{normalize:t}=e;return t(["Use websockets (Realtime updates)"])},text:e=>{const{normalize:t}=e;return t(["Text"])},theme:e=>{const{normalize:t}=e;return t(["Theme"])},theme_help:e=>{const{normalize:t}=e;return t(["Use hex color codes (#rrggbb) to customize your color theme."])},theme_help_v2_1:e=>{const{normalize:t}=e;return t(['You can also override certain component\'s colors and opacity by toggling the checkbox, use "Clear all" button to clear all overrides.'])},theme_help_v2_2:e=>{const{normalize:t}=e;return t(["Icons underneath some entries are background/text contrast indicators, hover over for detailed info. Please keep in mind that when using transparency contrast indicators show the worst possible case."])},tooltipRadius:e=>{const{normalize:t}=e;return t(["Tooltips/alerts"])},type_domains_to_mute:e=>{const{normalize:t}=e;return t(["Search domains to mute"])},upload_a_photo:e=>{const{normalize:t}=e;return t(["Upload a photo"])},user_settings:e=>{const{normalize:t}=e;return t(["User Settings"])},values:{false:e=>{const{normalize:t}=e;return t(["no"])},true:e=>{const{normalize:t}=e;return t(["yes"])}},virtual_scrolling:e=>{const{normalize:t}=e;return t(["Optimize timeline rendering"])},use_at_icon:e=>{const{normalize:t}=e;return t(["Display ","@"," symbol as an icon instead of text"])},mention_link_display:e=>{const{normalize:t}=e;return t(["Display mention links"])},mention_link_display_short:e=>{const{normalize:t}=e;return t(["always as short names (e.g. ","@","foo)"])},mention_link_display_full_for_remote:e=>{const{normalize:t}=e;return t(["as full names only for remote users (e.g. ","@","foo","@","example.org)"])},mention_link_display_full:e=>{const{normalize:t}=e;return t(["always as full names (e.g. ","@","foo","@","example.org)"])},mention_link_use_tooltip:e=>{const{normalize:t}=e;return t(["Show user card when clicking mention links"])},mention_link_show_avatar:e=>{const{normalize:t}=e;return t(["Show user avatar beside the link"])},mention_link_show_avatar_quick:e=>{const{normalize:t}=e;return t(["Show user avatar next to mentions"])},mention_link_fade_domain:e=>{const{normalize:t}=e;return t(["Fade domains (e.g. ","@","example.org in ","@","foo","@","example.org)"])},mention_link_bolden_you:e=>{const{normalize:t}=e;return t(["Highlight mention of you when you are mentioned"])},user_popover_avatar_action:e=>{const{normalize:t}=e;return t(["Popover avatar click action"])},user_popover_avatar_action_zoom:e=>{const{normalize:t}=e;return t(["Zoom the avatar"])},user_popover_avatar_action_close:e=>{const{normalize:t}=e;return t(["Close the popover"])},user_popover_avatar_action_open:e=>{const{normalize:t}=e;return t(["Open profile"])},user_popover_avatar_overlay:e=>{const{normalize:t}=e;return t(["Show user popover over user avatar"])},fun:e=>{const{normalize:t}=e;return t(["Fun"])},greentext:e=>{const{normalize:t}=e;return t(["Meme arrows"])},show_yous:e=>{const{normalize:t}=e;return t(["Show (You)s"])},notifications:e=>{const{normalize:t}=e;return t(["Notifications"])},notification_setting_filters:e=>{const{normalize:t}=e;return t(["Filters"])},notification_setting_block_from_strangers:e=>{const{normalize:t}=e;return t(["Block notifications from users who you do not follow"])},notification_setting_privacy:e=>{const{normalize:t}=e;return t(["Privacy"])},notification_setting_hide_notification_contents:e=>{const{normalize:t}=e;return t(["Hide the sender and contents of push notifications"])},notification_mutes:e=>{const{normalize:t}=e;return t(["To stop receiving notifications from a specific user, use a mute."])},notification_blocks:e=>{const{normalize:t}=e;return t(["Blocking a user stops all notifications as well as unsubscribes them."])},enable_web_push_notifications:e=>{const{normalize:t}=e;return t(["Enable web push notifications"])},more_settings:e=>{const{normalize:t}=e;return t(["More settings"])},style:{switcher:{keep_color:e=>{const{normalize:t}=e;return t(["Keep colors"])},keep_shadows:e=>{const{normalize:t}=e;return t(["Keep shadows"])},keep_opacity:e=>{const{normalize:t}=e;return t(["Keep opacity"])},keep_roundness:e=>{const{normalize:t}=e;return t(["Keep roundness"])},keep_fonts:e=>{const{normalize:t}=e;return t(["Keep fonts"])},save_load_hint:e=>{const{normalize:t}=e;return t(['"Keep" options preserve currently set options when selecting or loading themes, it also stores said options when exporting a theme. When all checkboxes unset, exporting theme will save everything.'])},reset:e=>{const{normalize:t}=e;return t(["Reset"])},clear_all:e=>{const{normalize:t}=e;return t(["Clear all"])},clear_opacity:e=>{const{normalize:t}=e;return t(["Clear opacity"])},load_theme:e=>{const{normalize:t}=e;return t(["Load theme"])},keep_as_is:e=>{const{normalize:t}=e;return t(["Keep as is"])},use_snapshot:e=>{const{normalize:t}=e;return t(["Old version"])},use_source:e=>{const{normalize:t}=e;return t(["New version"])},help:{upgraded_from_v2:e=>{const{normalize:t}=e;return t(["PleromaFE has been upgraded, theme could look a little bit different than you remember."])},v2_imported:e=>{const{normalize:t}=e;return t(["File you imported was made for older FE. We try to maximize compatibility but there still could be inconsistencies."])},future_version_imported:e=>{const{normalize:t}=e;return t(["File you imported was made in newer version of FE."])},older_version_imported:e=>{const{normalize:t}=e;return t(["File you imported was made in older version of FE."])},snapshot_present:e=>{const{normalize:t}=e;return t(["Theme snapshot is loaded, so all values are overriden. You can load theme's actual data instead."])},snapshot_missing:e=>{const{normalize:t}=e;return t(["No theme snapshot was in the file so it could look different than originally envisioned."])},fe_upgraded:e=>{const{normalize:t}=e;return t(["PleromaFE's theme engine upgraded after version update."])},fe_downgraded:e=>{const{normalize:t}=e;return t(["PleromaFE's version rolled back."])},migration_snapshot_ok:e=>{const{normalize:t}=e;return t(["Just to be safe, theme snapshot loaded. You can try loading theme data."])},migration_napshot_gone:e=>{const{normalize:t}=e;return t(["For whatever reason snapshot was missing, some stuff could look different than you remember."])},snapshot_source_mismatch:e=>{const{normalize:t}=e;return t(["Versions conflict: most likely FE was rolled back and updated again, if you changed theme using older version of FE you most likely want to use old version, otherwise use new version."])}}},common:{color:e=>{const{normalize:t}=e;return t(["Color"])},opacity:e=>{const{normalize:t}=e;return t(["Opacity"])},contrast:{hint:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Contrast ratio is ",n(r("ratio")),", it ",n(r("level"))," ",n(r("context"))])},level:{aa:e=>{const{normalize:t}=e;return t(["meets Level AA guideline (minimal)"])},aaa:e=>{const{normalize:t}=e;return t(["meets Level AAA guideline (recommended)"])},bad:e=>{const{normalize:t}=e;return t(["doesn't meet any accessibility guidelines"])}},context:{"18pt":e=>{const{normalize:t}=e;return t(["for large (18pt+) text"])},text:e=>{const{normalize:t}=e;return t(["for text"])}}}},common_colors:{_tab_label:e=>{const{normalize:t}=e;return t(["Common"])},main:e=>{const{normalize:t}=e;return t(["Common colors"])},foreground_hint:e=>{const{normalize:t}=e;return t(['See "Advanced" tab for more detailed control'])},rgbo:e=>{const{normalize:t}=e;return t(["Icons, accents, badges"])}},advanced_colors:{_tab_label:e=>{const{normalize:t}=e;return t(["Advanced"])},alert:e=>{const{normalize:t}=e;return t(["Alert background"])},alert_error:e=>{const{normalize:t}=e;return t(["Error"])},alert_warning:e=>{const{normalize:t}=e;return t(["Warning"])},alert_neutral:e=>{const{normalize:t}=e;return t(["Neutral"])},post:e=>{const{normalize:t}=e;return t(["Posts/User bios"])},badge:e=>{const{normalize:t}=e;return t(["Badge background"])},popover:e=>{const{normalize:t}=e;return t(["Tooltips, menus, popovers"])},badge_notification:e=>{const{normalize:t}=e;return t(["Notification"])},panel_header:e=>{const{normalize:t}=e;return t(["Panel header"])},top_bar:e=>{const{normalize:t}=e;return t(["Top bar"])},borders:e=>{const{normalize:t}=e;return t(["Borders"])},buttons:e=>{const{normalize:t}=e;return t(["Buttons"])},inputs:e=>{const{normalize:t}=e;return t(["Input fields"])},faint_text:e=>{const{normalize:t}=e;return t(["Faded text"])},underlay:e=>{const{normalize:t}=e;return t(["Underlay"])},wallpaper:e=>{const{normalize:t}=e;return t(["Wallpaper"])},poll:e=>{const{normalize:t}=e;return t(["Poll graph"])},icons:e=>{const{normalize:t}=e;return t(["Icons"])},highlight:e=>{const{normalize:t}=e;return t(["Highlighted elements"])},pressed:e=>{const{normalize:t}=e;return t(["Pressed"])},selectedPost:e=>{const{normalize:t}=e;return t(["Selected post"])},selectedMenu:e=>{const{normalize:t}=e;return t(["Selected menu item"])},disabled:e=>{const{normalize:t}=e;return t(["Disabled"])},toggled:e=>{const{normalize:t}=e;return t(["Toggled"])},tabs:e=>{const{normalize:t}=e;return t(["Tabs"])},chat:{incoming:e=>{const{normalize:t}=e;return t(["Incoming"])},outgoing:e=>{const{normalize:t}=e;return t(["Outgoing"])},border:e=>{const{normalize:t}=e;return t(["Border"])}}},radii:{_tab_label:e=>{const{normalize:t}=e;return t(["Roundness"])}},shadows:{_tab_label:e=>{const{normalize:t}=e;return t(["Shadow and lighting"])},component:e=>{const{normalize:t}=e;return t(["Component"])},override:e=>{const{normalize:t}=e;return t(["Override"])},shadow_id:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Shadow #",n(r("value"))])},blur:e=>{const{normalize:t}=e;return t(["Blur"])},spread:e=>{const{normalize:t}=e;return t(["Spread"])},inset:e=>{const{normalize:t}=e;return t(["Inset"])},hintV3:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["For shadows you can also use the ",n(r(0))," notation to use other color slot."])},filter_hint:{always_drop_shadow:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Warning, this shadow always uses ",n(r(0))," when browser supports it."])},drop_shadow_syntax:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," does not support ",n(r(1))," parameter and ",n(r(2))," keyword."])},avatar_inset:e=>{const{normalize:t}=e;return t(["Please note that combining both inset and non-inset shadows on avatars might give unexpected results with transparent avatars."])},spread_zero:e=>{const{normalize:t}=e;return t(["Shadows with spread > 0 will appear as if it was set to zero"])},inset_classic:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Inset shadows will be using ",n(r(0))])}},components:{panel:e=>{const{normalize:t}=e;return t(["Panel"])},panelHeader:e=>{const{normalize:t}=e;return t(["Panel header"])},topBar:e=>{const{normalize:t}=e;return t(["Top bar"])},avatar:e=>{const{normalize:t}=e;return t(["User avatar (in profile view)"])},avatarStatus:e=>{const{normalize:t}=e;return t(["User avatar (in post display)"])},popup:e=>{const{normalize:t}=e;return t(["Popups and tooltips"])},button:e=>{const{normalize:t}=e;return t(["Button"])},buttonHover:e=>{const{normalize:t}=e;return t(["Button (hover)"])},buttonPressed:e=>{const{normalize:t}=e;return t(["Button (pressed)"])},buttonPressedHover:e=>{const{normalize:t}=e;return t(["Button (pressed+hover)"])},input:e=>{const{normalize:t}=e;return t(["Input field"])}}},fonts:{_tab_label:e=>{const{normalize:t}=e;return t(["Fonts"])},help:e=>{const{normalize:t}=e;return t(['Select font to use for elements of UI. For "custom" you have to enter exact font name as it appears in system.'])},components:{interface:e=>{const{normalize:t}=e;return t(["Interface"])},input:e=>{const{normalize:t}=e;return t(["Input fields"])},post:e=>{const{normalize:t}=e;return t(["Post text"])},postCode:e=>{const{normalize:t}=e;return t(["Monospaced text in a post (rich text)"])}},family:e=>{const{normalize:t}=e;return t(["Font name"])},size:e=>{const{normalize:t}=e;return t(["Size (in px)"])},weight:e=>{const{normalize:t}=e;return t(["Weight (boldness)"])},custom:e=>{const{normalize:t}=e;return t(["Custom"])}},preview:{header:e=>{const{normalize:t}=e;return t(["Preview"])},content:e=>{const{normalize:t}=e;return t(["Content"])},error:e=>{const{normalize:t}=e;return t(["Example error"])},button:e=>{const{normalize:t}=e;return t(["Button"])},text:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["A bunch of more ",n(r(0))," and ",n(r(1))])},mono:e=>{const{normalize:t}=e;return t(["content"])},input:e=>{const{normalize:t}=e;return t(["Just landed in L.A."])},faint_link:e=>{const{normalize:t}=e;return t(["helpful manual"])},fine_print:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Read our ",n(r(0))," to learn nothing useful!"])},header_faint:e=>{const{normalize:t}=e;return t(["This is fine"])},checkbox:e=>{const{normalize:t}=e;return t(["I have skimmed over terms and conditions"])},link:e=>{const{normalize:t}=e;return t(["a nice lil' link"])}}},version:{title:e=>{const{normalize:t}=e;return t(["Version"])},backend_version:e=>{const{normalize:t}=e;return t(["Backend version"])},frontend_version:e=>{const{normalize:t}=e;return t(["Frontend version"])}}},time:{unit:{days:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," day"]),t([n(r(0))," days"])])},days_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"d"])},hours:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," hour"]),t([n(r(0))," hours"])])},hours_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"h"])},minutes:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," minute"]),t([n(r(0))," minutes"])])},minutes_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"min"])},months:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," month"]),t([n(r(0))," months"])])},months_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"mo"])},seconds:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," second"]),t([n(r(0))," seconds"])])},seconds_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"s"])},weeks:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," week"]),t([n(r(0))," weeks"])])},weeks_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"w"])},years:e=>{const{normalize:t,interpolate:n,list:r,plural:o}=e;return o([t([n(r(0))," year"]),t([n(r(0))," years"])])},years_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"y"])}},in_future:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["in ",n(r(0))])},in_past:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," ago"])},now:e=>{const{normalize:t}=e;return t(["just now"])},now_short:e=>{const{normalize:t}=e;return t(["now"])}},timeline:{collapse:e=>{const{normalize:t}=e;return t(["Collapse"])},conversation:e=>{const{normalize:t}=e;return t(["Conversation"])},error:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Error fetching timeline: ",n(r(0))])},load_older:e=>{const{normalize:t}=e;return t(["Load older statuses"])},no_retweet_hint:e=>{const{normalize:t}=e;return t(["Post is marked as followers-only or direct and cannot be repeated"])},repeated:e=>{const{normalize:t}=e;return t(["repeated"])},show_new:e=>{const{normalize:t}=e;return t(["Show new"])},reload:e=>{const{normalize:t}=e;return t(["Reload"])},up_to_date:e=>{const{normalize:t}=e;return t(["Up-to-date"])},no_more_statuses:e=>{const{normalize:t}=e;return t(["No more statuses"])},no_statuses:e=>{const{normalize:t}=e;return t(["No statuses"])},socket_reconnected:e=>{const{normalize:t}=e;return t(["Realtime connection established"])},socket_broke:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Realtime connection lost: CloseEvent code ",n(r(0))])},quick_view_settings:e=>{const{normalize:t}=e;return t(["Quick view settings"])},quick_filter_settings:e=>{const{normalize:t}=e;return t(["Quick filter settings"])}},status:{favorites:e=>{const{normalize:t}=e;return t(["Favorites"])},repeats:e=>{const{normalize:t}=e;return t(["Repeats"])},delete:e=>{const{normalize:t}=e;return t(["Delete status"])},edit:e=>{const{normalize:t}=e;return t(["Edit status"])},edited_at:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["(last edited ",n(r("time")),")"])},pin:e=>{const{normalize:t}=e;return t(["Pin on profile"])},unpin:e=>{const{normalize:t}=e;return t(["Unpin from profile"])},pinned:e=>{const{normalize:t}=e;return t(["Pinned"])},bookmark:e=>{const{normalize:t}=e;return t(["Bookmark"])},unbookmark:e=>{const{normalize:t}=e;return t(["Unbookmark"])},delete_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to delete this status?"])},reply_to:e=>{const{normalize:t}=e;return t(["Reply to"])},mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},replies_list:e=>{const{normalize:t}=e;return t(["Replies:"])},replies_list_with_others:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t(["Replies (+",n(r("numReplies"))," other):"]),t(["Replies (+",n(r("numReplies"))," others):"])])},mute_conversation:e=>{const{normalize:t}=e;return t(["Mute conversation"])},unmute_conversation:e=>{const{normalize:t}=e;return t(["Unmute conversation"])},status_unavailable:e=>{const{normalize:t}=e;return t(["Status unavailable"])},copy_link:e=>{const{normalize:t}=e;return t(["Copy link to status"])},external_source:e=>{const{normalize:t}=e;return t(["External source"])},thread_muted:e=>{const{normalize:t}=e;return t(["Thread muted"])},thread_muted_and_words:e=>{const{normalize:t}=e;return t([", has words:"])},show_full_subject:e=>{const{normalize:t}=e;return t(["Show full subject"])},hide_full_subject:e=>{const{normalize:t}=e;return t(["Hide full subject"])},show_content:e=>{const{normalize:t}=e;return t(["Show content"])},hide_content:e=>{const{normalize:t}=e;return t(["Hide content"])},status_deleted:e=>{const{normalize:t}=e;return t(["This post was deleted"])},nsfw:e=>{const{normalize:t}=e;return t(["NSFW"])},expand:e=>{const{normalize:t}=e;return t(["Expand"])},you:e=>{const{normalize:t}=e;return t(["(You)"])},plus_more:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["+",n(r("number"))," more"])},many_attachments:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Post has ",n(r("number"))," attachment(s)"])},collapse_attachments:e=>{const{normalize:t}=e;return t(["Collapse attachments"])},show_all_attachments:e=>{const{normalize:t}=e;return t(["Show all attachments"])},show_attachment_in_modal:e=>{const{normalize:t}=e;return t(["Show in media modal"])},show_attachment_description:e=>{const{normalize:t}=e;return t(["Preview description (open attachment for full description)"])},hide_attachment:e=>{const{normalize:t}=e;return t(["Hide attachment"])},remove_attachment:e=>{const{normalize:t}=e;return t(["Remove attachment"])},attachment_stop_flash:e=>{const{normalize:t}=e;return t(["Stop Flash player"])},move_up:e=>{const{normalize:t}=e;return t(["Shift attachment left"])},move_down:e=>{const{normalize:t}=e;return t(["Shift attachment right"])},open_gallery:e=>{const{normalize:t}=e;return t(["Open gallery"])},thread_hide:e=>{const{normalize:t}=e;return t(["Hide this thread"])},thread_show:e=>{const{normalize:t}=e;return t(["Show this thread"])},thread_show_full:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t(["Show everything under this thread (",n(r("numStatus"))," status in total, max depth ",n(r("depth")),")"]),t(["Show everything under this thread (",n(r("numStatus"))," statuses in total, max depth ",n(r("depth")),")"])])},thread_show_full_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},thread_follow:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t(["See the remaining part of this thread (",n(r("numStatus"))," status in total)"]),t(["See the remaining part of this thread (",n(r("numStatus"))," statuses in total)"])])},thread_follow_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},ancestor_follow:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t(["See ",n(r("numReplies"))," other reply under this status"]),t(["See ",n(r("numReplies"))," other replies under this status"])])},ancestor_follow_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},show_all_conversation_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},show_all_conversation:e=>{const{normalize:t,interpolate:n,named:r,plural:o}=e;return o([t(["Show full conversation (",n(r("numStatus"))," other status)"]),t(["Show full conversation (",n(r("numStatus"))," other statuses)"])])},show_only_conversation_under_this:e=>{const{normalize:t}=e;return t(["Only show replies to this status"])},status_history:e=>{const{normalize:t}=e;return t(["Status history"])}},user_card:{approve:e=>{const{normalize:t}=e;return t(["Approve"])},block:e=>{const{normalize:t}=e;return t(["Block"])},blocked:e=>{const{normalize:t}=e;return t(["Blocked!"])},deactivated:e=>{const{normalize:t}=e;return t(["Deactivated"])},deny:e=>{const{normalize:t}=e;return t(["Deny"])},edit_profile:e=>{const{normalize:t}=e;return t(["Edit profile"])},favorites:e=>{const{normalize:t}=e;return t(["Favorites"])},follow:e=>{const{normalize:t}=e;return t(["Follow"])},follow_cancel:e=>{const{normalize:t}=e;return t(["Cancel request"])},follow_sent:e=>{const{normalize:t}=e;return t(["Request sent!"])},follow_progress:e=>{const{normalize:t}=e;return t(["Requesting…"])},follow_unfollow:e=>{const{normalize:t}=e;return t(["Unfollow"])},followees:e=>{const{normalize:t}=e;return t(["Following"])},followers:e=>{const{normalize:t}=e;return t(["Followers"])},following:e=>{const{normalize:t}=e;return t(["Following!"])},follows_you:e=>{const{normalize:t}=e;return t(["Follows you!"])},hidden:e=>{const{normalize:t}=e;return t(["Hidden"])},its_you:e=>{const{normalize:t}=e;return t(["It's you!"])},media:e=>{const{normalize:t}=e;return t(["Media"])},mention:e=>{const{normalize:t}=e;return t(["Mention"])},message:e=>{const{normalize:t}=e;return t(["Message"])},mute:e=>{const{normalize:t}=e;return t(["Mute"])},muted:e=>{const{normalize:t}=e;return t(["Muted"])},per_day:e=>{const{normalize:t}=e;return t(["per day"])},remote_follow:e=>{const{normalize:t}=e;return t(["Remote follow"])},remove_follower:e=>{const{normalize:t}=e;return t(["Remove follower"])},report:e=>{const{normalize:t}=e;return t(["Report"])},statuses:e=>{const{normalize:t}=e;return t(["Statuses"])},subscribe:e=>{const{normalize:t}=e;return t(["Subscribe"])},unsubscribe:e=>{const{normalize:t}=e;return t(["Unsubscribe"])},unblock:e=>{const{normalize:t}=e;return t(["Unblock"])},unblock_progress:e=>{const{normalize:t}=e;return t(["Unblocking…"])},block_progress:e=>{const{normalize:t}=e;return t(["Blocking…"])},unmute:e=>{const{normalize:t}=e;return t(["Unmute"])},unmute_progress:e=>{const{normalize:t}=e;return t(["Unmuting…"])},mute_progress:e=>{const{normalize:t}=e;return t(["Muting…"])},hide_repeats:e=>{const{normalize:t}=e;return t(["Hide repeats"])},show_repeats:e=>{const{normalize:t}=e;return t(["Show repeats"])},bot:e=>{const{normalize:t}=e;return t(["Bot"])},admin_menu:{moderation:e=>{const{normalize:t}=e;return t(["Moderation"])},grant_admin:e=>{const{normalize:t}=e;return t(["Grant Admin"])},revoke_admin:e=>{const{normalize:t}=e;return t(["Revoke Admin"])},grant_moderator:e=>{const{normalize:t}=e;return t(["Grant Moderator"])},revoke_moderator:e=>{const{normalize:t}=e;return t(["Revoke Moderator"])},activate_account:e=>{const{normalize:t}=e;return t(["Activate account"])},deactivate_account:e=>{const{normalize:t}=e;return t(["Deactivate account"])},delete_account:e=>{const{normalize:t}=e;return t(["Delete account"])},force_nsfw:e=>{const{normalize:t}=e;return t(["Mark all posts as NSFW"])},strip_media:e=>{const{normalize:t}=e;return t(["Remove media from posts"])},force_unlisted:e=>{const{normalize:t}=e;return t(["Force posts to be unlisted"])},sandbox:e=>{const{normalize:t}=e;return t(["Force posts to be followers-only"])},disable_remote_subscription:e=>{const{normalize:t}=e;return t(["Disallow following user from remote instances"])},disable_any_subscription:e=>{const{normalize:t}=e;return t(["Disallow following user at all"])},quarantine:e=>{const{normalize:t}=e;return t(["Disallow user posts from federating"])},delete_user:e=>{const{normalize:t}=e;return t(["Delete user"])},delete_user_data_and_deactivate_confirmation:e=>{const{normalize:t}=e;return t(["This will permanently delete the data from this account and deactivate it. Are you absolutely sure?"])}},highlight:{disabled:e=>{const{normalize:t}=e;return t(["No highlight"])},solid:e=>{const{normalize:t}=e;return t(["Solid bg"])},striped:e=>{const{normalize:t}=e;return t(["Striped bg"])},side:e=>{const{normalize:t}=e;return t(["Side stripe"])}},note:e=>{const{normalize:t}=e;return t(["Note"])},note_blank:e=>{const{normalize:t}=e;return t(["(None)"])},edit_note:e=>{const{normalize:t}=e;return t(["Edit note"])},edit_note_apply:e=>{const{normalize:t}=e;return t(["Apply"])},edit_note_cancel:e=>{const{normalize:t}=e;return t(["Cancel"])}},user_profile:{timeline_title:e=>{const{normalize:t}=e;return t(["User timeline"])},profile_does_not_exist:e=>{const{normalize:t}=e;return t(["Sorry, this profile does not exist."])},profile_loading_error:e=>{const{normalize:t}=e;return t(["Sorry, there was an error loading this profile."])}},user_reporting:{title:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Reporting ",n(r(0))])},add_comment_description:e=>{const{normalize:t}=e;return t(["The report will be sent to your instance moderators. You can provide an explanation of why you are reporting this account below:"])},additional_comments:e=>{const{normalize:t}=e;return t(["Additional comments"])},forward_description:e=>{const{normalize:t}=e;return t(["The account is from another server. Send a copy of the report there as well?"])},forward_to:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Forward to ",n(r(0))])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},generic_error:e=>{const{normalize:t}=e;return t(["An error occurred while processing your request."])}},who_to_follow:{more:e=>{const{normalize:t}=e;return t(["More"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])}},tool_tip:{media_upload:e=>{const{normalize:t}=e;return t(["Upload media"])},repeat:e=>{const{normalize:t}=e;return t(["Repeat"])},reply:e=>{const{normalize:t}=e;return t(["Reply"])},favorite:e=>{const{normalize:t}=e;return t(["Favorite"])},add_reaction:e=>{const{normalize:t}=e;return t(["Add Reaction"])},user_settings:e=>{const{normalize:t}=e;return t(["User Settings"])},accept_follow_request:e=>{const{normalize:t}=e;return t(["Accept follow request"])},reject_follow_request:e=>{const{normalize:t}=e;return t(["Reject follow request"])},bookmark:e=>{const{normalize:t}=e;return t(["Bookmark"])},toggle_expand:e=>{const{normalize:t}=e;return t(["Expand or collapse notification to show post in full"])},toggle_mute:e=>{const{normalize:t}=e;return t(["Expand or collapse notification to reveal muted content"])}},upload:{error:{base:e=>{const{normalize:t}=e;return t(["Upload failed."])},message:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Upload failed: ",n(r(0))])},file_too_big:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["File too big [",n(r("filesize")),n(r("filesizeunit"))," / ",n(r("allowedsize")),n(r("allowedsizeunit")),"]"])},default:e=>{const{normalize:t}=e;return t(["Try again later"])}},file_size_units:{B:e=>{const{normalize:t}=e;return t(["B"])},KiB:e=>{const{normalize:t}=e;return t(["KiB"])},MiB:e=>{const{normalize:t}=e;return t(["MiB"])},GiB:e=>{const{normalize:t}=e;return t(["GiB"])},TiB:e=>{const{normalize:t}=e;return t(["TiB"])}}},search:{people:e=>{const{normalize:t}=e;return t(["People"])},hashtags:e=>{const{normalize:t}=e;return t(["Hashtags"])},person_talking:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("count"))," person talking"])},people_talking:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("count"))," people talking"])},no_results:e=>{const{normalize:t}=e;return t(["No results"])},no_more_results:e=>{const{normalize:t}=e;return t(["No more results"])},load_more:e=>{const{normalize:t}=e;return t(["Load more results"])}},password_reset:{forgot_password:e=>{const{normalize:t}=e;return t(["Forgot password?"])},password_reset:e=>{const{normalize:t}=e;return t(["Password reset"])},instruction:e=>{const{normalize:t}=e;return t(["Enter your email address or username. We will send you a link to reset your password."])},placeholder:e=>{const{normalize:t}=e;return t(["Your email or username"])},check_email:e=>{const{normalize:t}=e;return t(["Check your email for a link to reset your password."])},return_home:e=>{const{normalize:t}=e;return t(["Return to the home page"])},too_many_requests:e=>{const{normalize:t}=e;return t(["You have reached the limit of attempts, try again later."])},password_reset_disabled:e=>{const{normalize:t}=e;return t(["Password reset is disabled. Please contact your instance administrator."])},password_reset_required:e=>{const{normalize:t}=e;return t(["You must reset your password to log in."])},password_reset_required_but_mailer_is_disabled:e=>{const{normalize:t}=e;return t(["You must reset your password, but password reset is disabled. Please contact your instance administrator."])}},chats:{you:e=>{const{normalize:t}=e;return t(["You:"])},message_user:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Message ",n(r("nickname"))])},delete:e=>{const{normalize:t}=e;return t(["Delete"])},chats:e=>{const{normalize:t}=e;return t(["Chats"])},new:e=>{const{normalize:t}=e;return t(["New Chat"])},empty_message_error:e=>{const{normalize:t}=e;return t(["Cannot post empty message"])},more:e=>{const{normalize:t}=e;return t(["More"])},delete_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to delete this message?"])},error_loading_chat:e=>{const{normalize:t}=e;return t(["Something went wrong when loading the chat."])},error_sending_message:e=>{const{normalize:t}=e;return t(["Something went wrong when sending the message."])},empty_chat_list_placeholder:e=>{const{normalize:t}=e;return t(["You don't have any chats yet. Start a new chat!"])}},lists:{lists:e=>{const{normalize:t}=e;return t(["Lists"])},new:e=>{const{normalize:t}=e;return t(["New List"])},title:e=>{const{normalize:t}=e;return t(["List title"])},search:e=>{const{normalize:t}=e;return t(["Search users"])},create:e=>{const{normalize:t}=e;return t(["Create"])},save:e=>{const{normalize:t}=e;return t(["Save changes"])},delete:e=>{const{normalize:t}=e;return t(["Delete list"])},following_only:e=>{const{normalize:t}=e;return t(["Limit to Following"])},manage_lists:e=>{const{normalize:t}=e;return t(["Manage lists"])},manage_members:e=>{const{normalize:t}=e;return t(["Manage list members"])},add_members:e=>{const{normalize:t}=e;return t(["Search for more users"])},remove_from_list:e=>{const{normalize:t}=e;return t(["Remove from list"])},add_to_list:e=>{const{normalize:t}=e;return t(["Add to list"])},is_in_list:e=>{const{normalize:t}=e;return t(["Already in list"])},editing_list:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Editing list ",n(r("listTitle"))])},creating_list:e=>{const{normalize:t}=e;return t(["Creating new list"])},update_title:e=>{const{normalize:t}=e;return t(["Save Title"])},really_delete:e=>{const{normalize:t}=e;return t(["Really delete list?"])},error:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Error manipulating lists: ",n(r(0))])}},file_type:{audio:e=>{const{normalize:t}=e;return t(["Audio"])},video:e=>{const{normalize:t}=e;return t(["Video"])},image:e=>{const{normalize:t}=e;return t(["Image"])},file:e=>{const{normalize:t}=e;return t(["File"])}},display_date:{today:e=>{const{normalize:t}=e;return t(["Today"])}},update:{big_update_title:e=>{const{normalize:t}=e;return t(["Please bear with us"])},big_update_content:e=>{const{normalize:t}=e;return t(["We haven't had a release in a while, so things might look and feel different than what you're used to."])},update_bugs:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Please report any issues and bugs on ",n(r("pleromaGitlab")),", as we have changed a lot, and although we test thoroughly and use development versions ourselves, we may have missed some things. We welcome your feedback and suggestions on issues you might encounter, or how to improve Pleroma and Pleroma-FE."])},update_bugs_gitlab:e=>{const{normalize:t}=e;return t(["Pleroma GitLab"])},update_changelog:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["For more details on what's changed, see ",n(r("theFullChangelog")),"."])},update_changelog_here:e=>{const{normalize:t}=e;return t(["the full changelog"])},art_by:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Art by ",n(r("linkToArtist"))])}},unicode_domain_indicator:{tooltip:e=>{const{normalize:t}=e;return t(["This domain contains non-ascii characters."])}}}},1395:(e,t,n)=>{var r={"./af.json":[44919,6355],"./am.json":[53139,5119],"./ar.json":[44557,9873],"./ar_SA.json":[23450,7360],"./as.json":[44359,3377],"./ast.json":[13764,7569],"./az.json":[86459,2342],"./be.json":[50866,7304],"./bg.json":[26219,3974],"./bn.json":[69178,9064],"./br.json":[67871,6148],"./bs.json":[75340,8134],"./ca.json":[86914,4691],"./ccp.json":[73872,1162],"./ceb.json":[64478,9790],"./chr.json":[61017,6869],"./ckb.json":[56412,2656],"./cs.json":[8888,4710],"./cy.json":[25392,6272],"./da.json":[35042,1596],"./de.json":[35169,6226],"./de_CH.json":[28246,7164],"./doi.json":[59784,4209],"./dsb.json":[60634,1790],"./el.json":[98338,7879],"./en.json":[74990,5728],"./en_001.json":[62736,577],"./en_AU.json":[2597,9360],"./en_CA.json":[1516,4879],"./en_GB.json":[84830,50],"./en_IN.json":[71809,8988],"./es.json":[61148,6831],"./es_419.json":[25696,8873],"./es_MX.json":[11915,2699],"./es_US.json":[87826,3313],"./et.json":[66641,3276],"./eu.json":[6541,2992],"./fa.json":[43305,5521],"./fi.json":[40752,420],"./fil.json":[26843,1236],"./fo.json":[43032,8995],"./fr.json":[80898,2223],"./fr_CA.json":[54515,1821],"./ga.json":[66572,4571],"./gd.json":[9185,6116],"./gl.json":[23840,6126],"./gu.json":[85811,7261],"./ha.json":[91566,227],"./ha_NE.json":[3400,5304],"./he.json":[26260,5548],"./hi.json":[18136,5968],"./hi_Latn.json":[95638,3056],"./hr.json":[77435,2861],"./hsb.json":[15758,8015],"./hu.json":[2727,4902],"./hy.json":[8397,6344],"./ia.json":[49796,6936],"./id.json":[56635,9465],"./ig.json":[26406,9895],"./is.json":[51391,7300],"./it.json":[54879,8970],"./ja.json":[2971,1290],"./jv.json":[18644,2479],"./ka.json":[71255,6068],"./kab.json":[92892,9780],"./kk.json":[46419,2873],"./kl.json":[2227,2397],"./km.json":[65729,1404],"./kn.json":[65611,278],"./ko.json":[67080,2966],"./kok.json":[47209,2599],"./ku.json":[18738,2883],"./ky.json":[89690,4785],"./lb.json":[3929,4770],"./lo.json":[19778,7464],"./lt.json":[41683,7169],"./lv.json":[54873,8898],"./mai.json":[11781,1613],"./mi.json":[11569,6701],"./mk.json":[67589,9921],"./ml.json":[24415,2685],"./mn.json":[50512,4718],"./mni.json":[81597,5401],"./mr.json":[97747,1911],"./ms.json":[81588,9924],"./mt.json":[25081,9399],"./my.json":[8608,6790],"./ne.json":[8572,9377],"./nl.json":[52355,6773],"./nn.json":[52874,9414],"./no.json":[48005,9979],"./or.json":[26728,1012],"./pa.json":[15042,6946],"./pa_Arab.json":[43578,9994],"./pcm.json":[91163,5104],"./pl.json":[61335,1095],"./ps.json":[51828,678],"./pt.json":[38543,5041],"./pt_PT.json":[8063,1546],"./qu.json":[15821,8031],"./rm.json":[5014,5887],"./ro.json":[34064,9864],"./ru.json":[95222,8395],"./rw.json":[12710,346],"./sa.json":[69343,2243],"./sat.json":[51243,7855],"./sc.json":[1319,2874],"./sd.json":[67728,6826],"./si.json":[5044,4354],"./sk.json":[45626,2350],"./sl.json":[76091,1553],"./so.json":[93761,625],"./sq.json":[1230,4368],"./sr.json":[60445,3887],"./sr_Cyrl_BA.json":[38940,6060],"./sr_Latn.json":[21650,8681],"./sr_Latn_BA.json":[78328,5115],"./su.json":[54395,1959],"./sv.json":[3418,3241],"./sw.json":[11958,7585],"./sw_KE.json":[35001,3994],"./ta.json":[92930,7897],"./te.json":[8748,4786],"./tg.json":[20999,313],"./th.json":[23900,3951],"./ti.json":[368,3568],"./tk.json":[88770,1780],"./to.json":[95781,1584],"./tr.json":[92619,9978],"./tt.json":[87782,2569],"./ug.json":[19005,9757],"./uk.json":[82057,9871],"./ur.json":[13889,6797],"./uz.json":[45108,1056],"./vi.json":[97099,5224],"./wo.json":[9923,7303],"./xh.json":[29064,786],"./yo.json":[11971,8732],"./yo_BJ.json":[64533,9926],"./yue.json":[40648,1452],"./yue_Hans.json":[24800,4424],"./zh.json":[34626,457],"./zh_Hant.json":[82560,2767],"./zh_Hant_HK.json":[47677,1044],"./zu.json":[73784,9319]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n.t(o,19)))}o.keys=()=>Object.keys(r),o.id=1395,e.exports=o},19003:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u});var r=n(15861),o=n(93433),i=n(4942),s=n(64687),a=n.n(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e){var t=d(e.emoji),n=e.store&&p(e.store);return function(r,o){var i=r[0];return":"===i&&e.emoji?t(r,o):"@"===i&&n?n(r):[]}};var d=function(e){return function(t,n){var r=t.toLowerCase().substr(1);return e.map((function(e){return l(l({},e),n(e))})).filter((function(e){return e.names.concat(e.keywords).filter((function(e){return e.toLowerCase().match(r)})).length})).map((function(e){var t=0;return t+=Math.max.apply(Math,(0,o.Z)(e.names.map((function(e){return e.toLowerCase()===r?200:0}))).concat([0])),t+=e.imageUrl?100:0,t+=Math.max.apply(Math,(0,o.Z)(e.names.map((function(e){return e.toLowerCase().startsWith(r)?10:0}))).concat([0])),t-=e.displayText.length,e.score=t,e})).sort((function(e,t){var n=e.displayText>t.displayText?.5:-.5;return t.score-e.score+n}))}},p=function(e){var t=e.dispatch,n=e.state,o=[],i="",s=null,c=null,l=function(e){return c&&c(),new Promise((function(n,r){s=setTimeout((function(){(function(e){return t("searchUsers",{query:e})})(e).then(n).catch(r)}),300),c=function(){clearTimeout(s),n([])}}))};return function(){var e=(0,r.Z)(a().mark((function e(t){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.toLowerCase().substr(1),i!==r){e.next=3;break}return e.abrupt("return",o);case 3:if(o=[],i=r,r.includes("@")){e.next=8;break}return e.next=8,l(r);case 8:return s=n.users.users.filter((function(e){return e.screen_name.toLowerCase().startsWith(r)||e.name.toLowerCase().startsWith(r)})).slice(0,20).sort((function(e,t){var n=0,o=0;return n+=e.screen_name.toLowerCase().startsWith(r)?2:0,o+=t.screen_name.toLowerCase().startsWith(r)?2:0,n+=e.name.toLowerCase().startsWith(r)?1:0,10*((o+=t.name.toLowerCase().startsWith(r)?1:0)-n)+(e.name>t.name?1:-1)+(e.screen_name>t.screen_name?1:-1)})).map((function(e){return{user:e,displayText:e.screen_name_ui,detailText:e.name,imageUrl:e.profile_image_url_original,replacement:"@"+e.screen_name+" "}})),o=s||[],e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},92820:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(93433),o=n(29439),i=n(44925),s=n(42348),a=n.n(s),c=n(27955),l=n.n(c),u=n(66252);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=/(?:<\/(\w+)>|<(\w+)\s?.*?\/?>)/gi.exec(e);return t&&(t[1]||t[2])},m=function(e,t){var n=e.substring(1,e.length-1).replace(new RegExp("^"+h(e)),"").replace(/\/?$/,"").trim(),r=Array.from(n.matchAll(/([a-z0-9-]+)(?:=("[^"]+?"|'[^']+?'))?/gi)).map((function(e){var t=(0,o.Z)(e,3);return t[0],[t[1],t[2]]})).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return r?[n,r.substring(1,r.length-1)]:[n,!0]}));return Object.fromEntries(r.filter(t||function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1],i=n.toLowerCase();return"style"!==i&&("class"!==i||"greentext"===r||"cyantext"===r)}))},f=function(e,t,n){for(var r=[],o="",i=0;i<e.length;i++){var s=e[i];if(":"===s){var a,c=e.slice(i+1),l=!1,u=d(t);try{for(u.s();!(a=u.n()).done;){var p=a.value;if(c.slice(0,p.shortcode.length+1)===p.shortcode+":"){l=p;break}}}catch(e){u.e(e)}finally{u.f()}l?(r.push(o),o="",r.push(n(l)),i+=l.shortcode.length+1):o+=s}else o+=s}return o&&r.push(o),r};function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=n(19236),b=n(21268),y=n(49963),_={class:"HashtagLink"},k=["href","innerHTML"];const S={name:"HashtagLink",props:{url:{required:!0,type:String},content:{required:!0,type:String},tag:{required:!1,type:String,default:""}},methods:{onClick:function(){var e,t,n=this.tag||(e=this.url,!!(t=/tag[s]*\/(\w+)$/g.exec(e))&&t[1]);if(n){var r=this.generateTagLink(n);this.$router.push(r)}else window.open(this.url,"_blank")},generateTagLink:function(e){return"/tag/".concat(e)}}},j=(0,n(83744).Z)(S,[["render",function(e,t,n,r,o,i){return(0,u.wg)(),(0,u.iD)("span",_,[(0,u._)("a",{href:e.url,class:"original",target:"_blank",onClick:t[0]||(t[0]=(0,y.iM)((function(){return e.onClick&&e.onClick.apply(e,arguments)}),["prevent"])),innerHTML:e.content},null,8,k)])}]]);var O=["index"];const C={name:"RichContent",components:{MentionsLine:b.Z,HashtagLink:j},props:{html:{required:!0,type:String},attentions:{required:!1,default:function(){return[]}},emoji:{required:!0,type:Array},handleLinks:{required:!1,type:Boolean,default:!1},greentext:{required:!1,type:Boolean,default:!1}},render:function(){var e=this,t=z(this.html,this.greentext).newHtml,n=null,s="",a=[],c=[],d=[],p=[],g=0,v=0,y=!1,_=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),n=[],r=[["",n]],o="",i=null,s=function(){return r[r.length-1][1]},a=function(){""!==o&&(s().push(o),o="")},c=function(e){s().push([e])},u=function(e){var t=s(),n=[l()(e),[]];r.push(n),t.push(n)},d=function(e){var t=r[r.length-1];h(r[r.length-1][0])===h(e)?(t.push(e),r.pop()):s().push(e)},p=0;p<e.length;p++){var m=e[p];if("<"===m&&null===i)a(),i=m;else if(">"!==m&&null!==i)i+=m;else if(">"===m&&null!==i){var f=i+=m;i=null;var g=h(f);"/"===f[1]?d(f):t.has(g)||"/"===f[f.length-2]?c(f):u(f)}else o+=m}return i&&(o+=i),a(),n}(t).map((function t(r,i,a,l){if("string"==typeof r){var p=""===r.trim();return r.includes("\n")&&(n=null),p?(s=r,i!==a.length-1&&null!==n?r.trim():r):(n=null,r.includes(":")&&(r=["",f(r,e.emoji,(function(e){var t=e.shortcode,n=e.url;return(0,u.Wm)(w.Z,{class:"emoji img",src:n,title:":".concat(t,":"),alt:":".concat(t,":")},null)}))]),r)}if(Array.isArray(r)){var v=r,y=(0,o.Z)(v,3),_=y[0],k=y[1],S=y[2],j=h(_),O=m(_,(function(){return!0})),C=m(_),z=null===n||k&&"string"==typeof k[0]&&k[0].match(/^\s/)?"":s;switch(j){case"br":n=null;break;case"img":return["",[z,(I=_,(0,u.Wm)(w.Z,(0,u.dG)(m(I),{class:"img"}),null))],""];case"a":if(!e.handleLinks)break;if(O.class&&O.class.includes("mention"))return function(t,r){var o=P(t,r,g++);return o.notifying=e.attentions.some((function(e){return e.statusnet_profile_url===o.url})),c.push(o),null===n&&(n=[]),n.push(o),n.length>b.d&&d.push(o),1===n.length?(0,u.Wm)(b.Z,{mentions:n},null):""}(C,k);n=null;break;case"span":if(e.handleLinks&&O.class&&O.class.includes("h-card"))return["",k.map(t),""]}return void 0!==k?["",[z,[_,k.map(t),S]],""]:["",[z,r],""]}var I})),k=(0,r.Z)(_).reverse().map((function t(n,s,c,d){var f;if("string"==typeof n)return""===n.trim()?n:(y||(y=!0),l()(n));if(Array.isArray(n)){var g=(0,o.Z)(n,2),w=g[0],b=g[1],_=""===w?"":h(w);switch(_){case"a":if(!e.handleLinks)break;var k=m(w,(function(){return!0})),S=m(w,(function(){return!0}));if(k.class&&k.class.includes("hashtag")||"tag"===k.rel)return function(e,t,n){var r=P(e,t,v++),o=(r.index,(0,i.Z)(r,O));p.push(o),n||a.push(o);var s=o.url,c=o.tag,l=o.content;return(0,u.Wm)(j,{url:s,tag:c,content:l},null)}(S,b,y);S.target="_blank";var C=(0,r.Z)(b).reverse().map(t).reverse();return(0,u.Wm)("a",S,[C]);case"":return(0,r.Z)(b).reverse().map(t).reverse()}if(void 0!==b){var z=Array.isArray(b)?(0,r.Z)(b).reverse().map(t).reverse():b;return(0,u.Wm)(_,m(w),"function"==typeof(f=z)||"[object Object]"===Object.prototype.toString.call(f)&&!(0,u.lA)(f)?z:{default:function(){return[z]}})}return(0,u.Wm)(_,null,null)}return n})).reverse(),S=(0,u.Wm)("span",{class:"RichContent"},[k]),C={lastTags:a,writtenMentions:c,writtenTags:p,invisibleMentions:d};return this.$emit("parseReady",C),S}};var P=function(e,t,n){var r=t.map((function e(t){return"string"==typeof t?t:t[1].map(e).join("")})).join("");return{index:n,url:e.href,tag:e["data-tag"],content:a()(t).join(""),textContent:r}},z=function(e,t){var n=new Set(["p","div"]),o=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),o=new Set(["address","article","aside","blockquote","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"]),i=new Set(["br"]),s=new Set([].concat((0,r.Z)(o.values()),(0,r.Z)(i.values()))),a=new Set(s),c=g(n);try{for(c.s();!(e=c.n()).done;){var l=e.value;a.delete(l)}}catch(e){c.e(e)}finally{c.f()}for(var u=new Set([].concat((0,r.Z)(a.values()),(0,r.Z)(n.values()))),d=[],p=[],m="",f=null,v=function(){m.trim().length>0?d.push({level:[].concat(p),text:m}):d.push(m),m=""},w=function(e){v(),d.push(e)},b=function(e){v(),d.push(e),p.unshift(h(e))},y=function(e){p[0]===h(e)?(v(),d.push(e),p.shift()):m+=e},_=0;_<t.length;_++){var k=t[_];if("<"===k&&null===f)f=k;else if(">"!==k&&null!==f)f+=k;else if(">"===k&&null!==f){var S=f+=k;f=null;var j=h(S);u.has(j)?i.has(j)?w(S):a.has(j)?"/"===S[1]?y(S):"/"===S[S.length-2]?w(S):b(S):m+=S:m+=S}else"\n"===k?w(k):m+=k}return f&&(m+=f),v(),d}(e);return{newHtml:o.reverse().map((function(e,r,o){if(!e.text)return e;var i=e.text;if(t&&e.level.every((function(e){return n.has(e)}))&&(i.includes("&gt;")||i.includes("&lt;"))){var s=i.replace(/<[^>]+?>/gi,"").replace(/@\w+/gi,"").trim();if(s.startsWith("&gt;"))return"<span class='greentext'>".concat(i,"</span>");if(s.startsWith("&lt;"))return"<span class='cyantext'>".concat(i,"</span>")}return i})).reverse().join("")}}},79354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(4942),o=n(66252),i=n(989),s=n(57810);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(e){return e.findIndex((function(e){return e.props}))};const l={name:"TabSwitcher",props:{renderOnlyFocused:{required:!1,type:Boolean,default:!1},onSwitch:{required:!1,type:Function,default:void 0},activeTab:{required:!1,type:String,default:void 0},scrollableTabs:{required:!1,type:Boolean,default:!1},sideTabBar:{required:!1,type:Boolean,default:!1},bodyScrollLock:{required:!1,type:Boolean,default:!1}},data:function(){return{active:c(this.slots())}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeIndex:function(){var e=this;return this.activeTab?this.slots().findIndex((function(t){return t&&t.props&&e.activeTab===t.props.key})):this.active},isActive:function(){var e=this;return function(t){return e.$slots.default().findIndex((function(e){return e.props&&e.props["data-tab-name"]===t}))===e.activeIndex}},settingsModalVisible:function(){return"visible"===this.settingsModalState}},(0,i.rn)({settingsModalState:function(e){return e.interface.settingsModalState}})),beforeUpdate:function(){this.slots()[this.active].props||(this.active=c(this.slots()))},methods:{clickTab:function(e){var t=this;return function(n){n.preventDefault(),t.setTab(e)}},slots:function(){return this.$slots.default()[0].type===o.HY?this.$slots.default()[0].children:this.$slots.default()},setTab:function(e){"function"==typeof this.onSwitch&&this.onSwitch.call(null,this.slots()[e].key),this.active=e,this.scrollableTabs&&(this.$refs.contents.scrollTop=0)}},render:function(){var e=this,t=this.slots().map((function(t,n){var r=t.props;if(r){var i=["tab","button-default"],a=["tab-wrapper"];return e.activeIndex===n&&(i.push("active"),a.push("active")),r.image?(0,o.Wm)("div",{class:a.join(" ")},[(0,o.Wm)("button",{disabled:r.disabled,onClick:e.clickTab(n),class:i.join(" "),type:"button"},[(0,o.Wm)("img",{src:r.image,title:r["image-tooltip"]},null),r.label?"":r.label])]):(0,o.Wm)("div",{class:a.join(" ")},[(0,o.Wm)("button",{disabled:r.disabled,onClick:e.clickTab(n),class:i.join(" "),type:"button"},[r.icon?(0,o.Wm)(s.GN,{class:"tab-icon",size:"2x","fixed-width":!0,icon:r.icon},null):"",(0,o.Wm)("span",{class:"text"},[r.label])])])}})),n=this.slots().map((function(t,n){var r=t.props;if(r){var i=e.activeIndex===n,s=[i?"active":"hidden"];r.fullHeight&&s.push("full-height");var a=!e.renderOnlyFocused||i?t:"";return(0,o.Wm)("div",{class:s},[e.sideTabBar?(0,o.Wm)("h1",{class:"mobile-label"},[r.label]):"",a])}}));return(0,o.Wm)("div",{class:"tab-switcher "+(this.sideTabBar?"side-tabs":"top-tabs")},[(0,o.Wm)("div",{class:"tabs"},[t]),(0,o.wy)((0,o.Wm)("div",{ref:"contents",class:"contents"+(this.scrollableTabs?" scrollable-tabs":"")},[n]),[[(0,o.Q2)("body-scroll-lock"),this.bodyScrollLock]])])}}},8312:e=>{var t={ja:"ja_pedantic"};e.exports={languages:["ar","ca","cs","de","eo","en","es","et","eu","fi","fr","ga","he","hu","it","ja","ja_easy","ko","nb","nl","oc","pl","pt","ro","ru","sk","te","uk","zh","zh_Hant"],langCodeToJsonName:function(e){return t[e]||e},langCodeToCldrName:function(e){return e},ensureFinalFallback:function(e){var t=Array.isArray(e)?e:[e];return t.includes("en")?t:t.concat(["en"])}}},72617:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r,o=n(15861),i=n(64687),s=n.n(i),a=n(8312),c=function(e){return n(27650)("./".concat((0,a.langCodeToJsonName)(e),".json"))};const l={languages:a.languages,default:{en:n(88797).default},setLanguage:(r=(0,o.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n,!a.languages.includes(o)){e.next=5;break}return e.next=3,c(n);case 3:r=e.sent,t.setLocaleMessage(n,r.default);case 5:t.locale=n;case 6:case"end":return e.stop()}var o}),e)}))),function(e,t){return r.apply(this,arguments)})}},78892:(e,t,n)=>{"use strict";var r=n(15861),o=n(64687),i=n.n(o),s=n(989),a=(n(67810),n(73152));try{new EventTarget}catch(e){window.EventTarget=a.Z}const c={state:{settingsModalState:"hidden",settingsModalLoaded:!1,settingsModalTargetTab:null,settings:{currentSaveStateNotice:null,noticeClearTimeout:null,notificationPermission:null},browserSupport:{cssFilter:window.CSS&&window.CSS.supports&&(window.CSS.supports("filter","drop-shadow(0 0)")||window.CSS.supports("-webkit-filter","drop-shadow(0 0)"))},layoutType:"normal",globalNotices:[],layoutHeight:0,lastTimeline:null},mutations:{settingsSaved:function(e,t){var n=t.success,r=t.error;n?(e.noticeClearTimeout&&clearTimeout(e.noticeClearTimeout),e.settings.currentSaveStateNotice={error:!1,data:n},e.settings.noticeClearTimeout=setTimeout((function(){return delete e.settings.currentSaveStateNotice}),2e3)):e.settings.currentSaveStateNotice={error:!0,errorData:r}},setNotificationPermission:function(e,t){e.notificationPermission=t},setLayoutType:function(e,t){e.layoutType=t},closeSettingsModal:function(e){e.settingsModalState="hidden"},togglePeekSettingsModal:function(e){switch(e.settingsModalState){case"minimized":return void(e.settingsModalState="visible");case"visible":return void(e.settingsModalState="minimized");default:throw new Error("Illegal minimization state of settings modal")}},openSettingsModal:function(e){e.settingsModalState="visible",e.settingsModalLoaded||(e.settingsModalLoaded=!0)},setSettingsModalTargetTab:function(e,t){e.settingsModalTargetTab=t},pushGlobalNotice:function(e,t){e.globalNotices.push(t)},removeGlobalNotice:function(e,t){e.globalNotices=e.globalNotices.filter((function(e){return e!==t}))},setLayoutHeight:function(e,t){e.layoutHeight=t},setLayoutWidth:function(e,t){e.layoutWidth=t},setLastTimeline:function(e,t){e.lastTimeline=t}},actions:{setPageTitle:function(e){var t=e.rootState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.title="".concat(n," ").concat(t.instance.name)},settingsSaved:function(e,t){var n=e.commit;e.dispatch,n("settingsSaved",{success:t.success,error:t.error})},setNotificationPermission:function(e,t){(0,e.commit)("setNotificationPermission",t)},closeSettingsModal:function(e){(0,e.commit)("closeSettingsModal")},openSettingsModal:function(e){(0,e.commit)("openSettingsModal")},togglePeekSettingsModal:function(e){(0,e.commit)("togglePeekSettingsModal")},clearSettingsModalTargetTab:function(e){(0,e.commit)("setSettingsModalTargetTab",null)},openSettingsModalTab:function(e,t){var n=e.commit;n("setSettingsModalTargetTab",t),n("openSettingsModal")},pushGlobalNotice:function(e,t){var n=e.commit,r=e.dispatch,o=e.state,i=t.messageKey,s=t.messageArgs,a=void 0===s?{}:s,c=t.level,l=void 0===c?"error":c,u=t.timeout,d=void 0===u?0:u;n("pushGlobalNotice",{messageKey:i,messageArgs:a,level:l});var p=o.globalNotices[o.globalNotices.length-1];return d&&setTimeout((function(){return r("removeGlobalNotice",p)}),d),p},removeGlobalNotice:function(e,t){(0,e.commit)("removeGlobalNotice",t)},setLayoutHeight:function(e,t){(0,e.commit)("setLayoutHeight",t)},setLayoutWidth:function(e,t){var n=e.commit,r=e.state,o=e.rootGetters,i=e.rootState,s=t;void 0!==t?n("setLayoutWidth",t):s=r.layoutWidth;var a=s<=800?"mobile":"normal";"none"!==o.mergedConfig.thirdColumnMode&&i.users.currentUser?n("setLayoutType",s>=1300?"wide":a):n("setLayoutType",a)},setLastTimeline:function(e,t){(0,e.commit)("setLastTimeline",t)}}};var l=n(29439),u=n(93433),d=n(4942),p=n(77394),h=n(40454),m=n(77776),f=n(85565),g=n(8312);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=["smileys-and-emotion","people-and-body","animals-and-nature","food-and-drink","travel-and-places","activities","objects","symbols","flags"],y=function(){for(var e=127462,t="A".codePointAt(0),n=new Array(26),r=e;r<=127487;++r){var o=String.fromCodePoint(t+r-e);n[r-e]={replacement:String.fromCodePoint(r),imageUrl:!1,displayText:"regional_indicator_"+o,displayTextI18n:{key:"emoji.regional_indicator",args:{letter:o}}}}return n}(),_=function(e){return n(1395)("./".concat((0,g.langCodeToCldrName)(e),".json")).then((function(e){return e.default}))},k=function(e,t){var n=Object.keys(t);return w(w({},e),{},{annotations:n.reduce((function(n,r){return n[r]=t[r][e.replacement],n}),{})})};const S={state:{name:"Pleroma FE",registrationOpen:!0,server:"http://localhost:4040/",textlimit:5e3,themeData:void 0,vapidPublicKey:void 0,alwaysShowSubjectInput:!0,defaultAvatar:"/images/avi.png",defaultBanner:"/images/banner.png",background:"/static/aurora_borealis.jpg",collapseMessageWithSubject:!1,greentext:!1,useAtIcon:!1,mentionLinkDisplay:"short",mentionLinkShowTooltip:!0,mentionLinkShowAvatar:!1,mentionLinkFadeDomain:!0,mentionLinkShowYous:!1,mentionLinkBoldenYou:!0,hideFilteredStatuses:!1,hideMutedPosts:!1,hideMutedThreads:!0,hideWordFilteredPosts:!1,hidePostStats:!1,hideBotIndication:!1,hideSitename:!1,hideUserStats:!1,muteBotStatuses:!1,loginMethod:"password",logo:"/static/logo.svg",logoMargin:".2em",logoMask:!0,logoLeft:!1,disableUpdateNotification:!1,minimalScopesMode:!1,nsfwCensorImage:void 0,postContentType:"text/plain",redirectRootLogin:"/main/friends",redirectRootNoLogin:"/main/all",scopeCopy:!0,showFeaturesPanel:!0,showInstanceSpecificPanel:!1,sidebarRight:!1,subjectLineBehavior:"email",theme:"pleroma-dark",virtualScrolling:!0,sensitiveByDefault:!1,conversationDisplay:"linear",conversationTreeAdvanced:!1,conversationOtherRepliesButton:"below",conversationTreeFadeAncestors:!1,maxDepthInThread:6,customEmoji:[],customEmojiFetched:!1,emoji:{},emojiFetched:!1,unicodeEmojiAnnotations:{},pleromaBackend:!0,postFormats:[],restrictedNicknames:[],safeDM:!0,knownDomains:[],shoutAvailable:!1,pleromaChatMessagesAvailable:!1,gopherAvailable:!1,mediaProxyAvailable:!1,suggestionsEnabled:!1,suggestionsWeb:"",instanceSpecificPanelContent:"",tos:"",backendVersion:"",frontendVersion:"",pollsAvailable:!1,pollLimits:{max_options:4,max_option_chars:255,min_expiration:60,max_expiration:86400}},mutations:{setInstanceOption:function(e,t){var n=t.name,r=t.value;void 0!==r&&(e[n]=r)},setKnownDomains:function(e,t){e.knownDomains=t},setUnicodeEmojiAnnotations:function(e,t){var n=t.lang,r=t.annotations;e.unicodeEmojiAnnotations[n]=r}},getters:{instanceDefaultConfig:function(e){return f.Oi.map((function(t){return[t,e[t]]})).reduce((function(e,t){var n=(0,l.Z)(t,2),r=n[0],o=n[1];return w(w({},e),{},(0,d.Z)({},r,o))}),{})},groupedCustomEmojis:function(e){return e.customEmoji.reduce((function(e,t){return function(e){return e.tags.filter((function(e){return e.startsWith("pack:")})).map((function(e){return e.slice(5)}))}(t).forEach((function(n){var r="custom-".concat(n);e[r]||(e[r]={id:r,text:n,image:t.imageUrl,emojis:[]}),e[r].emojis.push(t)})),e}),{})},standardEmojiList:function(e){return b.map((function(t){return(e.emoji[t]||[]).map((function(t){return k(t,e.unicodeEmojiAnnotations)}))})).reduce((function(e,t){return e.concat(t)}),[])},standardEmojiGroupList:function(e){return b.map((function(t){return{id:t,emojis:(e.emoji[t]||[]).map((function(t){return k(t,e.unicodeEmojiAnnotations)}))}}))},instanceDomain:function(e){return new URL(e.server).hostname},remoteInteractionLink:function(e){var t=(e.server.endsWith("/")?e.server.slice(0,-1):e.server)+"/main/ostatus";return function(e){var n=e.statusId,r=e.nickname;return n?"".concat(t,"?status_id=").concat(n):"".concat(t,"?nickname=").concat(r)}}},actions:{setInstanceOption:function(e,t){var n=e.commit,r=e.dispatch,o=t.name,i=t.value;switch(n("setInstanceOption",{name:o,value:i}),o){case"name":r("setPageTitle");break;case"shoutAvailable":i&&r("initializeSocket");break;case"theme":r("setTheme",i)}},getStaticEmoji:function(e){return(0,r.Z)(i().mark((function t(){var r,o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,n.e(3687).then(n.t.bind(n,13315,19));case 4:o=t.sent.default,s=Object.keys(o).reduce((function(e,t){return e[t]=o[t].map((function(e){return{displayText:e.slug,imageUrl:!1,replacement:e.emoji}})),e}),{}),r("setInstanceOption",{name:"emoji",value:(i=s,a=void 0,(a=i.symbols).push.apply(a,(0,u.Z)(y)),i)}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.warn("Can't load static emoji"),console.warn(t.t0);case 13:case"end":return t.stop()}var i,a}),t,null,[[1,9]])})))()},loadUnicodeEmojiData:function(e,t){var n=e.commit,o=e.state,s=(0,g.ensureFinalFallback)(t);return Promise.all(s.map(function(){var e=(0,r.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.unicodeEmojiAnnotations[t]){e.next=5;break}return e.next=3,_(t);case 3:r=e.sent,n("setUnicodeEmojiAnnotations",{lang:t,annotations:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},getCustomEmoji:function(e){return(0,r.Z)(i().mark((function t(){var n,r,o,s,a,c,d,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,window.fetch("/api/pleroma/emoji.json");case 4:if(!(o=t.sent).ok){t.next=16;break}return t.next=8,o.json();case 8:s=t.sent,a=Array.isArray(s)?Object.assign.apply(Object,[{}].concat((0,u.Z)(s))):s,c=function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n>r?1:n<r?-1:0},d=function(e,t){var n=function(e){return(e.tags.filter((function(e){return e.startsWith("pack:")}))[0]||"").slice(5)};return c(n(e),n(t))||c(e.displayText,t.displayText)},p=Object.entries(a).map((function(e){var t=(0,l.Z)(e,2),n=t[0],o=t[1],i=o.image_url;return{displayText:n,imageUrl:i?r.server+i:o,tags:i?o.tags.sort((function(e,t){return e>t?1:0})):["utf"],replacement:":".concat(n,": ")}})).sort(d),n("setInstanceOption",{name:"customEmoji",value:p}),t.next=17;break;case 16:throw o;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(1),console.warn("Can't load custom emojis"),console.warn(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,19]])})))()},setTheme:function(e,t){var n=e.commit,r=e.rootState;n("setInstanceOption",{name:"theme",value:t}),(0,p.I3)(t).then((function(e){if(n("setInstanceOption",{name:"themeData",value:e}),!r.config.customTheme){var t=e.source;!e.theme||t&&t.themeEngineVersion===h.we?(0,p._v)(t):(0,p._v)(e.theme)}}))},fetchEmoji:function(e){var t=e.dispatch,n=e.state;n.customEmojiFetched||(n.customEmojiFetched=!0,t("getCustomEmoji")),n.emojiFetched||(n.emojiFetched=!0,t("getStaticEmoji"))},getKnownDomains:function(e){return(0,r.Z)(i().mark((function t(){var n,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootState,t.prev=1,t.next=4,m.ZP.fetchKnownDomains({credentials:r.users.currentUser.credentials});case 4:o=t.sent,n("setKnownDomains",o),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn("Can't load known domains"),console.warn(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}};var j=n(14176),O=n.n(j),C=n(1469),P=n.n(C),z=n(10928),I=n.n(z),D=n(8804),x=n.n(D),T=n(82492),$=n.n(T),U=n(22762),M=n.n(U),A=n(84753),L=n.n(A),E=n(13311),F=n.n(E),R=n(30998),N=n.n(R),q=n(66073),Z=n.n(q),W=n(12571),B=n.n(W),H=n(82729),V=n.n(H),K=n(52230);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{statuses:[],statusesObject:{},faves:[],visibleStatuses:[],visibleStatusesObject:{},newStatusCount:0,maxId:0,minId:0,minVisibleId:0,loading:!1,followers:[],friends:[],userId:e,flushMarker:0}},Q=function(){return{desktopNotificationSilence:!0,maxId:0,minId:Number.POSITIVE_INFINITY,data:[],idStore:{},loading:!1}},X=function(){return{allStatuses:[],allStatusesObject:{},conversationsObject:{},maxId:0,notifications:Q(),favorites:new Set,timelines:{mentions:J(),public:J(),user:J(),favorites:J(),media:J(),publicAndExternal:J(),friends:J(),tag:J(),dms:J(),bookmarks:J(),list:J()}}},ee=function(e,t,n){var r=t[n.id];return r?($()(r,O()(n,(function(e,t){return null===e||"user"===t}))),r.attachments.splice(r.attachments.length),{item:r,new:!1}):(function(e){e.deleted=!1,e.attachments=e.attachments||[]}(n),e.push(n),t[n.id]=n,{item:n,new:!0})},te=function(e,t){var n=Number(e.id),r=Number(t.id),o=!Number.isNaN(n),i=!Number.isNaN(r);return o&&i?n>r?-1:1:o&&!i?1:!o&&i||e.id>t.id?-1:1},ne=function(e){return e.visibleStatuses=e.visibleStatuses.sort(te),e.statuses=e.statuses.sort(te),e.minVisibleId=(I()(e.visibleStatuses)||{}).id,e},re=function(e,t){var n=ee(e.allStatuses,e.allStatusesObject,t);if(n.new){var r=n.item,o=e.conversationsObject,i=r.statusnet_conversation_id;o[i]?o[i].push(r):o[i]=[r]}return n},oe=function(e,t){e.notifications.maxId=t.id>e.notifications.maxId?t.id:e.notifications.maxId,e.notifications.minId=t.id<e.notifications.minId?t.id:e.notifications.minId},ie={addNewStatuses:function(e,t){var n=t.statuses,r=t.showImmediately,o=void 0!==r&&r,i=t.timeline,s=t.user,a=void 0===s?{}:s,c=t.noIdUpdate,l=void 0!==c&&c,u=t.userId,d=t.pagination,p=void 0===d?{}:d;if(!P()(n))return!1;var h=e.allStatuses,m=e.timelines[i],f=p.maxId||(n.length>0?M()(n,"id").id:0),g=p.minId||(n.length>0?L()(n,"id").id:0),v=i&&(g>m.maxId||0===m.maxId)&&n.length>0,w=i&&(f<m.minId||0===m.minId)&&n.length>0;if(!l&&v&&(m.maxId=g),!l&&w&&(m.minId=f),"user"!==i&&"media"!==i||m.userId===u){var b=function(t,n){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=re(e,t),c=s.item;if(s.new){if("status"===c.type&&F()(c.attentions,{id:a.id})){var l=e.timelines.mentions;m!==l&&(ee(l.statuses,l.statusesObject,c),l.newStatusCount+=1,ne(l))}if("direct"===c.visibility){var u=e.timelines.dms;ee(u.statuses,u.statusesObject,c),u.newStatusCount+=1,ne(u)}}return i&&o&&(r=ee(m.statuses,m.statusesObject,c)),i&&n?ee(m.visibleStatuses,m.visibleStatusesObject,c):i&&o&&r.new&&(m.newStatusCount+=1),c},y={status:function(e){b(e,o)},edit:function(e){b(e,o)},retweet:function(e){var t=b(e.retweeted_status,!1,!1);(i&&F()(m.statuses,(function(e){return e.retweeted_status?e.id===t.id||e.retweeted_status.id===t.id:e.id===t.id}))?b(e,!1,!1):b(e,o)).retweeted_status=t},favorite:function(t){e.favorites.has(t.id)||(e.favorites.add(t.id),function(e,t){var n=F()(h,{id:e.in_reply_to_status_id});n&&(e.user.id===a.id?n.favorited=!0:n.fave_num+=1)}(t))},deletion:function(t){var n=t.uri,r=F()(h,{uri:n});r&&(function(e,t){V()(e.allStatuses,{id:t.id}),V()(e.notifications.data,(function(e){return e.action.id===t.id}));var n=t.statusnet_conversation_id;e.conversationsObject[n]&&V()(e.conversationsObject[n],{id:t.id})}(e,r),i&&(V()(m.statuses,{uri:n}),V()(m.visibleStatuses,{uri:n})))},follow:function(e){},default:function(e){console.log("unknown status type"),console.log(e)}};Z()(n,(function(e){var t=e.type;(y[t]||y.default)(e)})),i&&"bookmarks"!==i&&ne(m)}},addNewNotifications:function(e,t){var n=t.dispatch,r=t.notifications,o=(t.older,t.visibleNotificationTypes,t.rootGetters,t.newNotificationSideEffects);Z()(r,(function(t){if(!(0,K.nU)(t))return console.error("Invalid notification:",t),void oe(e,t);(0,K.Gr)(t.type)&&(t.action=re(e,t.action).item,t.status=t.status&&re(e,t.status).item),"pleroma:report"===t.type&&n("addReport",t.report),"pleroma:emoji_reaction"===t.type&&n("fetchEmojiReactionsBy",t.status.id),e.notifications.idStore.hasOwnProperty(t.id)?t.seen&&(e.notifications.idStore[t.id].seen=!0):(oe(e,t),e.notifications.data.push(t),e.notifications.idStore[t.id]=t,o(t))}))},removeStatus:function(e,t){var n=t.timeline,r=t.userId,o=e.timelines[n];r&&(V()(o.statuses,{user:{id:r}}),V()(o.visibleStatuses,{user:{id:r}}),o.minVisibleId=o.visibleStatuses.length>0?I()(o.visibleStatuses).id:0,o.maxId=o.statuses.length>0?x()(o.statuses).id:0)},showNewStatuses:function(e,t){var n=t.timeline,r=e.timelines[n];r.newStatusCount=0,r.visibleStatuses=B()(r.statuses,0,50),r.minVisibleId=I()(r.visibleStatuses).id,r.minId=r.minVisibleId,r.visibleStatusesObject={},Z()(r.visibleStatuses,(function(e){r.visibleStatusesObject[e.id]=e}))},resetStatuses:function(e){var t=X();Object.entries(t).forEach((function(t){var n=(0,l.Z)(t,2),r=n[0],o=n[1];e[r]=o}))},clearTimeline:function(e,t){var n=t.timeline,r=t.excludeUserId,o=void 0!==r&&r?e.timelines[n].userId:void 0;e.timelines[n]=J(o)},clearNotifications:function(e){e.notifications=Q()},setFavorited:function(e,t){var n=t.status,r=t.value,o=e.allStatusesObject[n.id];o.favorited!==r&&(r?o.fave_num++:o.fave_num--),o.favorited=r},setFavoritedConfirm:function(e,t){var n=t.status,r=t.user,o=e.allStatusesObject[n.id];o.favorited=n.favorited,o.fave_num=n.fave_num;var i=N()(o.favoritedBy,{id:r.id});-1===i||o.favorited?-1===i&&o.favorited&&o.favoritedBy.push(r):o.favoritedBy.splice(i,1)},setMutedStatus:function(e,t){var n=e.allStatusesObject[t.id];n.thread_muted=t.thread_muted,void 0!==n.thread_muted&&e.conversationsObject[n.statusnet_conversation_id].forEach((function(e){e.thread_muted=n.thread_muted}))},setRetweeted:function(e,t){var n=t.status,r=t.value,o=e.allStatusesObject[n.id];o.repeated!==r&&(r?o.repeat_num++:o.repeat_num--),o.repeated=r},setRetweetedConfirm:function(e,t){var n=t.status,r=t.user,o=e.allStatusesObject[n.id];o.repeated=n.repeated,o.repeat_num=n.repeat_num;var i=N()(o.rebloggedBy,{id:r.id});-1===i||o.repeated?-1===i&&o.repeated&&o.rebloggedBy.push(r):o.rebloggedBy.splice(i,1)},setBookmarked:function(e,t){var n=t.status,r=t.value;e.allStatusesObject[n.id].bookmarked=r},setBookmarkedConfirm:function(e,t){var n=t.status;e.allStatusesObject[n.id].bookmarked=n.bookmarked},setDeleted:function(e,t){var n=t.status,r=e.allStatusesObject[n.id];r&&(r.deleted=!0)},setManyDeleted:function(e,t){Object.values(e.allStatusesObject).forEach((function(e){t(e)&&(e.deleted=!0)}))},setLoading:function(e,t){var n=t.timeline,r=t.value;e.timelines[n].loading=r},setNsfw:function(e,t){var n=t.id,r=t.nsfw;e.allStatusesObject[n].nsfw=r},setNotificationsLoading:function(e,t){var n=t.value;e.notifications.loading=n},setNotificationsSilence:function(e,t){var n=t.value;e.notifications.desktopNotificationSilence=n},markNotificationsAsSeen:function(e){Z()(e.notifications.data,(function(e){e.seen=!0}))},markSingleNotificationAsSeen:function(e,t){var n=t.id,r=F()(e.notifications.data,(function(e){return e.id===n}));r&&(r.seen=!0)},dismissNotification:function(e,t){var n=t.id;e.notifications.data=e.notifications.data.filter((function(e){return e.id!==n}))},dismissNotifications:function(e,t){var n=t.finder;e.notifications.data=e.notifications.data.filter((function(e){return n}))},updateNotification:function(e,t){var n=t.id,r=t.updater,o=F()(e.notifications.data,(function(e){return e.id===n}));o&&r(o)},queueFlush:function(e,t){var n=t.timeline,r=t.id;e.timelines[n].flushMarker=r},queueFlushAll:function(e){Object.keys(e.timelines).forEach((function(t){e.timelines[t].flushMarker=e.timelines[t].maxId}))},addRepeats:function(e,t){var n=t.id,r=t.rebloggedByUsers,o=t.currentUser,i=e.allStatusesObject[n];i.rebloggedBy=r.filter((function(e){return e})),i.repeat_num=i.rebloggedBy.length,i.repeated=!!i.rebloggedBy.find((function(e){var t=e.id;return o.id===t}))},addFavs:function(e,t){var n=t.id,r=t.favoritedByUsers,o=t.currentUser,i=e.allStatusesObject[n];i.favoritedBy=r.filter((function(e){return e})),i.fave_num=i.favoritedBy.length,i.favorited=!!i.favoritedBy.find((function(e){var t=e.id;return o.id===t}))},addEmojiReactionsBy:function(e,t){var n=t.id,r=t.emojiReactions;t.currentUser,e.allStatusesObject[n].emoji_reactions=r},addOwnReaction:function(e,t){var n=t.id,r=t.emoji,o=t.currentUser,i=e.allStatusesObject[n],s=N()(i.emoji_reactions,{name:r}),a=i.emoji_reactions[s]||{name:r,count:0,accounts:[]},c=Y(Y({},a),{},{count:a.count+1,me:!0,accounts:[].concat((0,u.Z)(a.accounts),[o])});s>=0?i.emoji_reactions[s]=c:i.emoji_reactions=[].concat((0,u.Z)(i.emoji_reactions),[c])},removeOwnReaction:function(e,t){var n=t.id,r=t.emoji,o=t.currentUser,i=e.allStatusesObject[n],s=N()(i.emoji_reactions,{name:r});if(!(s<0)){var a=i.emoji_reactions[s],c=a.accounts||[],l=Y(Y({},a),{},{count:a.count-1,me:!1,accounts:c.filter((function(e){return e.id!==o.id}))});l.count>0?i.emoji_reactions[s]=l:i.emoji_reactions=i.emoji_reactions.filter((function(e){return e.name!==r}))}},updateStatusWithPoll:function(e,t){var n=t.id,r=t.poll;e.allStatusesObject[n].poll=r},setVirtualHeight:function(e,t){var n=t.statusId,r=t.height;e.allStatusesObject[n].virtualHeight=r}},se={state:X(),actions:{addNewStatuses:function(e,t){var n=e.rootState,r=e.commit,o=t.statuses,i=t.showImmediately,s=void 0!==i&&i,a=t.timeline,c=void 0!==a&&a,l=t.noIdUpdate,u=void 0!==l&&l,d=t.userId,p=t.pagination;r("addNewStatuses",{statuses:o,showImmediately:s,timeline:c,noIdUpdate:u,user:n.users.currentUser,userId:d,pagination:p})},addNewNotifications:function(e,t){var n=t.notifications,r=t.older;(0,e.commit)("addNewNotifications",{dispatch:e.dispatch,notifications:n,older:r,rootGetters:e.rootGetters,newNotificationSideEffects:function(t){(0,K.nJ)(e,t)}})},setNotificationsLoading:function(e,t){e.rootState,(0,e.commit)("setNotificationsLoading",{value:t.value})},setNotificationsSilence:function(e,t){e.rootState,(0,e.commit)("setNotificationsSilence",{value:t.value})},fetchStatus:function(e,t){var n=e.rootState,r=e.dispatch;return n.api.backendInteractor.fetchStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},fetchStatusSource:function(e,t){var n=e.rootState;return e.dispatch,m.ZP.fetchStatusSource({id:t.id,credentials:n.users.currentUser.credentials})},fetchStatusHistory:function(e,t){return e.rootState,e.dispatch,m.ZP.fetchStatusHistory({status:t})},deleteStatus:function(e,t){var n=e.rootState;(0,e.commit)("setDeleted",{status:t}),m.ZP.deleteStatus({id:t.id,credentials:n.users.currentUser.credentials})},deleteStatusById:function(e,t){var n=e.rootState;(0,e.commit)("setDeleted",{status:n.statuses.allStatusesObject[t]})},markStatusesAsDeleted:function(e,t){(0,e.commit)("setManyDeleted",t)},favorite:function(e,t){var n=e.rootState,r=e.commit;r("setFavorited",{status:t,value:!0}),n.api.backendInteractor.favorite({id:t.id}).then((function(e){return r("setFavoritedConfirm",{status:e,user:n.users.currentUser})}))},unfavorite:function(e,t){var n=e.rootState,r=e.commit;r("setFavorited",{status:t,value:!1}),n.api.backendInteractor.unfavorite({id:t.id}).then((function(e){return r("setFavoritedConfirm",{status:e,user:n.users.currentUser})}))},fetchPinnedStatuses:function(e,t){var n=e.rootState,r=e.dispatch;n.api.backendInteractor.fetchPinnedStatuses({id:t}).then((function(e){return r("addNewStatuses",{statuses:e,timeline:"user",userId:t,showImmediately:!0,noIdUpdate:!0})}))},pinStatus:function(e,t){var n=e.rootState,r=e.dispatch;return n.api.backendInteractor.pinOwnStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},unpinStatus:function(e,t){var n=e.rootState,r=e.dispatch;n.api.backendInteractor.unpinOwnStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},muteConversation:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.muteConversation({id:t}).then((function(e){return r("setMutedStatus",e)}))},unmuteConversation:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.unmuteConversation({id:t}).then((function(e){return r("setMutedStatus",e)}))},retweet:function(e,t){var n=e.rootState,r=e.commit;r("setRetweeted",{status:t,value:!0}),n.api.backendInteractor.retweet({id:t.id}).then((function(e){return r("setRetweetedConfirm",{status:e.retweeted_status,user:n.users.currentUser})}))},unretweet:function(e,t){var n=e.rootState,r=e.commit;r("setRetweeted",{status:t,value:!1}),n.api.backendInteractor.unretweet({id:t.id}).then((function(e){return r("setRetweetedConfirm",{status:e,user:n.users.currentUser})}))},bookmark:function(e,t){var n=e.rootState,r=e.commit;r("setBookmarked",{status:t,value:!0}),n.api.backendInteractor.bookmarkStatus({id:t.id}).then((function(e){r("setBookmarkedConfirm",{status:e})}))},unbookmark:function(e,t){var n=e.rootState,r=e.commit;r("setBookmarked",{status:t,value:!1}),n.api.backendInteractor.unbookmarkStatus({id:t.id}).then((function(e){r("setBookmarkedConfirm",{status:e})}))},queueFlush:function(e,t){e.rootState,(0,e.commit)("queueFlush",{timeline:t.timeline,id:t.id})},queueFlushAll:function(e){e.rootState,(0,e.commit)("queueFlushAll")},markNotificationsAsSeen:function(e){var t=e.rootState;(0,e.commit)("markNotificationsAsSeen"),m.ZP.markNotificationsAsSeen({id:t.statuses.notifications.maxId,credentials:t.users.currentUser.credentials})},markSingleNotificationAsSeen:function(e,t){var n=e.rootState,r=e.commit,o=t.id;r("markSingleNotificationAsSeen",{id:o}),m.ZP.markNotificationsAsSeen({single:!0,id:o,credentials:n.users.currentUser.credentials})},dismissNotificationLocal:function(e,t){e.rootState,(0,e.commit)("dismissNotification",{id:t.id})},dismissNotification:function(e,t){var n=e.rootState,r=e.commit,o=t.id;r("dismissNotification",{id:o}),n.api.backendInteractor.dismissNotification({id:o})},updateNotification:function(e,t){e.rootState,(0,e.commit)("updateNotification",{id:t.id,updater:t.updater})},fetchFavsAndRepeats:function(e,t){var n=e.rootState,r=e.commit;Promise.all([n.api.backendInteractor.fetchFavoritedByUsers({id:t}),n.api.backendInteractor.fetchRebloggedByUsers({id:t})]).then((function(e){var o=(0,l.Z)(e,2),i=o[0],s=o[1];r("addFavs",{id:t,favoritedByUsers:i,currentUser:n.users.currentUser}),r("addRepeats",{id:t,rebloggedByUsers:s,currentUser:n.users.currentUser})}))},reactWithEmoji:function(e,t){var n=e.rootState,r=e.dispatch,o=e.commit,i=t.id,s=t.emoji,a=n.users.currentUser;a&&(o("addOwnReaction",{id:i,emoji:s,currentUser:a}),n.api.backendInteractor.reactWithEmoji({id:i,emoji:s}).then((function(e){r("fetchEmojiReactionsBy",i)})))},unreactWithEmoji:function(e,t){var n=e.rootState,r=e.dispatch,o=e.commit,i=t.id,s=t.emoji,a=n.users.currentUser;a&&(o("removeOwnReaction",{id:i,emoji:s,currentUser:a}),n.api.backendInteractor.unreactWithEmoji({id:i,emoji:s}).then((function(e){r("fetchEmojiReactionsBy",i)})))},fetchEmojiReactionsBy:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchEmojiReactions({id:t}).then((function(e){r("addEmojiReactionsBy",{id:t,emojiReactions:e,currentUser:n.users.currentUser})}))},fetchFavs:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchFavoritedByUsers({id:t}).then((function(e){return r("addFavs",{id:t,favoritedByUsers:e,currentUser:n.users.currentUser})}))},fetchRepeats:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchRebloggedByUsers({id:t}).then((function(e){return r("addRepeats",{id:t,rebloggedByUsers:e,currentUser:n.users.currentUser})}))},search:function(e,t){var n=t.q,r=t.resolve,o=t.limit,i=t.offset,s=t.following,a=t.type;return e.rootState.api.backendInteractor.search2({q:n,resolve:r,limit:o,offset:i,following:s,type:a}).then((function(t){return e.commit("addNewUsers",t.accounts),e.commit("addNewStatuses",{statuses:t.statuses}),t}))},setVirtualHeight:function(e,t){(0,e.commit)("setVirtualHeight",{statusId:t.statusId,height:t.height})}},mutations:ie};const ae=se;var ce={setLists:function(e,t){e.allLists=t},setList:function(e,t){var n=t.listId,r=t.title;e.allListsObject[n]||(e.allListsObject[n]={accountIds:[]}),e.allListsObject[n].title=r;var o=F()(e.allLists,{id:n});o?o.title=r:e.allLists.push({id:n,title:r})},setListAccounts:function(e,t){var n=t.listId,r=t.accountIds;e.allListsObject[n]||(e.allListsObject[n]={accountIds:[]}),e.allListsObject[n].accountIds=r},addListAccount:function(e,t){var n=t.listId,r=t.accountId;e.allListsObject[n]||(e.allListsObject[n]={accountIds:[]}),e.allListsObject[n].accountIds.push(r)},removeListAccount:function(e,t){var n=t.listId,r=t.accountId;e.allListsObject[n]||(e.allListsObject[n]={accountIds:[]});var o=e.allListsObject[n].accountIds,i=new Set(o);i.delete(r),e.allListsObject[n].accountIds=(0,u.Z)(i)},deleteList:function(e,t){var n=t.listId;delete e.allListsObject[n],V()(e.allLists,(function(e){return e.id===n}))}},le={state:{allLists:[],allListsObject:{}},mutations:ce,actions:{setLists:function(e,t){(0,e.commit)("setLists",t)},createList:function(e,t){var n=e.rootState,r=e.commit,o=t.title;return n.api.backendInteractor.createList({title:o}).then((function(e){return r("setList",{listId:e.id,title:o}),e}))},fetchList:function(e,t){var n=e.rootState,r=e.commit,o=t.listId;return n.api.backendInteractor.getList({listId:o}).then((function(e){return r("setList",{listId:e.id,title:e.title})}))},fetchListAccounts:function(e,t){var n=e.rootState,r=e.commit,o=t.listId;return n.api.backendInteractor.getListAccounts({listId:o}).then((function(e){return r("setListAccounts",{listId:o,accountIds:e})}))},setList:function(e,t){var n=e.rootState,r=e.commit,o=t.listId,i=t.title;n.api.backendInteractor.updateList({listId:o,title:i}),r("setList",{listId:o,title:i})},setListAccounts:function(e,t){var n=e.rootState,r=e.commit,o=t.listId,i=t.accountIds,s=n.lists.allListsObject[o].accountIds||[],a=i.filter((function(e){return!s.includes(e)})),c=s.filter((function(e){return!i.includes(e)}));r("setListAccounts",{listId:o,accountIds:i}),a.length>0&&n.api.backendInteractor.addAccountsToList({listId:o,accountIds:a}),c.length>0&&n.api.backendInteractor.removeAccountsFromList({listId:o,accountIds:c})},addListAccount:function(e,t){var n=e.rootState,r=e.commit,o=t.listId,i=t.accountId;return n.api.backendInteractor.addAccountsToList({listId:o,accountIds:[i]}).then((function(e){return r("addListAccount",{listId:o,accountId:i}),e}))},removeListAccount:function(e,t){var n=e.rootState,r=e.commit,o=t.listId,i=t.accountId;return n.api.backendInteractor.removeAccountsFromList({listId:o,accountIds:[i]}).then((function(e){return r("removeListAccount",{listId:o,accountId:i}),e}))},deleteList:function(e,t){var n=e.rootState,r=e.commit,o=t.listId;n.api.backendInteractor.deleteList({listId:o}),r("deleteList",{listId:o})}},getters:{findListTitle:function(e){return function(t){if(e.allListsObject[t])return e.allListsObject[t].title}},findListAccounts:function(e){return function(t){return(0,u.Z)(e.allListsObject[t].accountIds)}}}};const ue=le;var de=n(44908),pe=n.n(de),he=n(57043),me=n.n(he),fe=n(30236),ge=n.n(fe),ve=n(35161),we=n.n(ve),be=n(39693),ye=n.n(be),_e=n(68929),ke=n.n(_e),Se=n(22626),je=function(e){var t=e.store,n=e.credentials,r=e.timeline,o=void 0===r?"friends":r,i=e.older,s=void 0!==i&&i,a=e.showImmediately,c=void 0!==a&&a,l=e.userId,u=void 0!==l&&l,d=e.listId,p=void 0!==d&&d,h=e.tag,f=void 0!==h&&h,g=e.until,v=e.since,w={timeline:o,credentials:n},b=t.rootState||t.state,y=t.getters,_=b.statuses.timelines[ke()(o)],k=y.mergedConfig,S=k.hideMutedPosts,j=k.replyVisibility,O=!!b.users.currentUser;s?w.until=g||_.minId:void 0===v?w.since=_.maxId:null!==v&&(w.since=v),w.userId=u,w.listId=p,w.tag=f,w.withMuted=!S,O&&["friends","public","publicAndExternal"].includes(o)&&(w.replyVisibility=j);var C=_.statuses.length;return m.ZP.fetchTimeline(w).then((function(e){if(e.errors)throw new Error("".concat(e.status," ").concat(e.statusText));var n=e.data,r=e.pagination;return!s&&n.length>=20&&!_.loading&&C>0&&t.dispatch("queueFlush",{timeline:o,id:_.maxId}),function(e){var t=e.store,n=e.statuses,r=e.timeline,o=e.showImmediately,i=e.userId,s=e.listId,a=e.pagination,c=ke()(r);t.dispatch("addNewStatuses",{timeline:c,userId:i,listId:s,statuses:n,showImmediately:o,pagination:a})}({store:t,statuses:n,timeline:o,showImmediately:c,userId:u,listId:p,pagination:r}),{statuses:n,pagination:r}})).catch((function(e){t.dispatch("pushGlobalNotice",{level:"error",messageKey:"timeline.error",messageArgs:[e.message],timeout:5e3})}))},Oe={fetchAndUpdate:je,startFetching:function(e){var t=e.timeline,n=void 0===t?"friends":t,r=e.credentials,o=e.store,i=e.userId,s=void 0!==i&&i,a=e.listId,c=void 0!==a&&a,l=e.tag,u=void 0!==l&&l,d=(o.rootState||o.state).statuses.timelines[ke()(n)],p=0===d.visibleStatuses.length;return d.userId=s,d.listId=c,je({timeline:n,credentials:r,store:o,showImmediately:p,userId:s,listId:c,tag:u}),(0,Se.F)((function(){return je({timeline:n,credentials:r,store:o,userId:s,listId:c,tag:u})}),1e4)}};const Ce=Oe;var Pe=n(15568);const ze=function(e){var t=e.credentials,n=e.store,r=function(){return function(e){var t=e.store,n=e.credentials;return m.ZP.fetchFollowRequests({credentials:n}).then((function(e){t.commit("setFollowRequests",e),t.commit("addNewUsers",e)}),(function(){})).catch((function(){}))}({credentials:t,store:n})};return r(),(0,Se.F)(r,1e4)};var Ie={startFetching:function(e){var t=e.credentials,n=e.store,r=function(){return function(e){var t=e.store,n=e.credentials;return m.ZP.fetchLists({credentials:n}).then((function(e){t.commit("setLists",e)}),(function(){})).catch((function(){}))}({credentials:t,store:n})};return r(),(0,Se.F)(r,24e4)}};const De=Ie;function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $e=function(e){return Te(Te({startFetchingTimeline:function(t){var n=t.timeline,r=t.store,o=t.userId,i=void 0!==o&&o,s=t.listId,a=void 0!==s&&s,c=t.tag;return Ce.startFetching({timeline:n,store:r,credentials:e,userId:i,listId:a,tag:c})},fetchTimeline:function(t){return Ce.fetchAndUpdate(Te(Te({},t),{},{credentials:e}))},startFetchingNotifications:function(t){var n=t.store;return Pe.Z.startFetching({store:n,credentials:e})},fetchNotifications:function(t){return Pe.Z.fetchAndUpdate(Te(Te({},t),{},{credentials:e}))},startFetchingFollowRequests:function(t){var n=t.store;return ze({store:n,credentials:e})},startFetchingLists:function(t){var n=t.store;return De.startFetching({store:n,credentials:e})},startUserSocket:function(t){var n=t.store.rootState.instance.server.replace("http","ws")+(0,m.pR)({credentials:e,stream:"user"});return(0,m.ro)({url:n,id:"User"})}},Object.entries(m.ZP).reduce((function(t,n){var r=(0,l.Z)(n,2),o=r[0],i=r[1];return Te(Te({},t),{},(0,d.Z)({},o,(function(t){return i(Te({credentials:e},t))})))}),{})),{},{verifyCredentials:m.ZP.verifyCredentials})};var Ue=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Me=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},Ae=n(54061),Le=n.n(Ae),Ee="".concat(window.location.origin,"/oauth-callback"),Fe=function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o=e.commit;if(t&&n)return Promise.resolve({clientId:t,clientSecret:n});var i="".concat(r,"/api/v1/apps"),s=new window.FormData;return s.append("client_name","PleromaFE_".concat(window.___pleromafe_commit_hash,"_").concat((new Date).toISOString())),s.append("redirect_uris",Ee),s.append("scopes","read write follow push admin"),window.fetch(i,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){return{clientId:e.client_id,clientSecret:e.client_secret}})).then((function(e){return o("setClientData",e)||e}))},Re=function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o="".concat(r,"/oauth/token"),i=new window.FormData;return i.append("client_id",t),i.append("client_secret",n),i.append("grant_type","client_credentials"),i.append("redirect_uri","".concat(window.location.origin,"/oauth-callback")),window.fetch(o,{method:"POST",body:i}).then((function(e){return e.json()}))},Ne={login:function(e){var t=e.instance,n={response_type:"code",client_id:e.clientId,redirect_uri:Ee,scope:"read write follow push admin"},r=Le()(n,(function(e,t,n){var r="".concat(n,"=").concat(encodeURIComponent(t));return e?"".concat(e,"&").concat(r):r}),!1),o="".concat(t,"/oauth/authorize?").concat(r);window.location.href=o},getToken:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o=e.code,i="".concat(r,"/oauth/token"),s=new window.FormData;return s.append("client_id",t),s.append("client_secret",n),s.append("grant_type","authorization_code"),s.append("code",o),s.append("redirect_uri","".concat(window.location.origin,"/oauth-callback")),window.fetch(i,{method:"POST",body:s}).then((function(e){return e.json()}))},getTokenWithCredentials:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o=e.username,i=e.password,s="".concat(r,"/oauth/token"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("grant_type","password"),a.append("username",o),a.append("password",i),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))},getOrCreateApp:Fe,verifyOTPCode:function(e){var t=e.app,n=e.instance,r=e.mfaToken,o=e.code,i="".concat(n,"/oauth/mfa/challenge"),s=new window.FormData;return s.append("client_id",t.client_id),s.append("client_secret",t.client_secret),s.append("mfa_token",r),s.append("code",o),s.append("challenge_type","totp"),window.fetch(i,{method:"POST",body:s}).then((function(e){return e.json()}))},verifyRecoveryCode:function(e){var t=e.app,n=e.instance,r=e.mfaToken,o=e.code,i="".concat(n,"/oauth/mfa/challenge"),s=new window.FormData;return s.append("client_id",t.client_id),s.append("client_secret",t.client_secret),s.append("mfa_token",r),s.append("code",o),s.append("challenge_type","recovery"),window.fetch(i,{method:"POST",body:s}).then((function(e){return e.json()}))},revokeToken:function(e){var t=e.app,n=e.instance,r=e.token,o="".concat(n,"/oauth/revoke"),i=new window.FormData;return i.append("client_id",t.clientId),i.append("client_secret",t.clientSecret),i.append("token",r),window.fetch(o,{method:"POST",body:i}).then((function(e){return e.json()}))}};const qe=Ne;var Ze=n(56012),We=n.n(Ze);function Be(){return"serviceWorker"in navigator&&"PushManager"in window}function He(){return We().register().catch((function(e){return console.error("Unable to get or create a service worker.",e)}))}function Ve(e){return window.fetch("/api/v1/push/subscription/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){if(!e.ok)throw new Error("Bad status code from server.");return e}))}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function e(t,n){if(P()(t)&&P()(n))return t.length=n.length,ge()(t,n,e)},Je=function(e,t){return e.rootState.api.backendInteractor.blockUser({id:t}).then((function(n){e.commit("updateUserRelationship",[n]),e.commit("addBlockId",t),e.commit("removeStatus",{timeline:"friends",userId:t}),e.commit("removeStatus",{timeline:"public",userId:t}),e.commit("removeStatus",{timeline:"publicAndExternal",userId:t})}))},Qe=function(e,t){return e.rootState.api.backendInteractor.unblockUser({id:t}).then((function(t){return e.commit("updateUserRelationship",[t])}))},Xe=function(e,t){var n=e.state.relationships[t]||{id:t};return n.muting=!0,e.commit("updateUserRelationship",[n]),e.commit("addMuteId",t),e.rootState.api.backendInteractor.muteUser({id:t}).then((function(n){e.commit("updateUserRelationship",[n]),e.commit("addMuteId",t)}))},et=function(e,t){var n=e.state.relationships[t]||{id:t};return n.muting=!1,e.commit("updateUserRelationship",[n]),e.rootState.api.backendInteractor.unmuteUser({id:t}).then((function(t){return e.commit("updateUserRelationship",[t])}))},tt=function(e,t){return e.rootState.api.backendInteractor.muteDomain({domain:t}).then((function(){return e.commit("addDomainMute",t)}))},nt=function(e,t){return e.rootState.api.backendInteractor.unmuteDomain({domain:t}).then((function(){return e.commit("removeDomainMute",t)}))},rt={tagUser:function(e,t){var n=t.user.id,r=t.tag,o=e.usersObject[n],i=(o.tags||[]).concat([r]);o.tags=i},untagUser:function(e,t){var n=t.user.id,r=t.tag,o=e.usersObject[n],i=(o.tags||[]).filter((function(e){return e!==r}));o.tags=i},updateRight:function(e,t){var n=t.user.id,r=t.right,o=t.value,i=e.usersObject[n],s=i.rights;s[r]=o,i.rights=s},updateActivationStatus:function(e,t){var n=t.user.id,r=t.deactivated;e.usersObject[n].deactivated=r},setCurrentUser:function(e,t){e.lastLoginName=t.screen_name,e.currentUser=ge()(e.currentUser||{},t,Ye)},clearCurrentUser:function(e){e.currentUser=!1,e.lastLoginName=!1},beginLogin:function(e){e.loggingIn=!0},endLogin:function(e){e.loggingIn=!1},saveFriendIds:function(e,t){var n=t.id,r=t.friendIds,o=e.usersObject[n];o.friendIds=pe()(me()(o.friendIds||[],r))},saveFollowerIds:function(e,t){var n=t.id,r=t.followerIds,o=e.usersObject[n];o.followerIds=pe()(me()(o.followerIds||[],r))},clearFriends:function(e,t){var n=e.usersObject[t];n&&(n.friendIds=[])},clearFollowers:function(e,t){var n=e.usersObject[t];n&&(n.followerIds=[])},addNewUsers:function(e,t){Z()(t,(function(t){t.relationship&&(e.relationships[t.relationship.id]=t.relationship);var n=function(e,t,n){if(!n)return!1;var r=t[n.id];return r?(ge()(r,n,Ye),{item:r,new:!1}):(e.push(n),t[n.id]=n,{item:n,new:!0})}(e.users,e.usersObject,t),r=n.item;n.new&&r.screen_name&&!r.screen_name.includes("@")&&(e.usersByNameObject[r.screen_name.toLowerCase()]=r)}))},updateUserRelationship:function(e,t){t.forEach((function(t){e.relationships[t.id]=t}))},updateUserInLists:function(e,t){var n=t.id,r=t.inLists;e.usersObject[n].inLists=r},saveBlockIds:function(e,t){e.currentUser.blockIds=t},addBlockId:function(e,t){-1===e.currentUser.blockIds.indexOf(t)&&e.currentUser.blockIds.push(t)},saveMuteIds:function(e,t){e.currentUser.muteIds=t},addMuteId:function(e,t){-1===e.currentUser.muteIds.indexOf(t)&&e.currentUser.muteIds.push(t)},saveDomainMutes:function(e,t){e.currentUser.domainMutes=t},addDomainMute:function(e,t){-1===e.currentUser.domainMutes.indexOf(t)&&e.currentUser.domainMutes.push(t)},removeDomainMute:function(e,t){var n=e.currentUser.domainMutes.indexOf(t);-1!==n&&e.currentUser.domainMutes.splice(n,1)},setPinnedToUser:function(e,t){var n=e.usersObject[t.user.id];n.pinnedStatusIds=n.pinnedStatusIds||[];var r=n.pinnedStatusIds.indexOf(t.id);t.pinned&&-1===r?n.pinnedStatusIds.push(t.id):t.pinned||-1===r||n.pinnedStatusIds.splice(r,1)},setUserForStatus:function(e,t){t.user=e.usersObject[t.user.id]},setUserForNotification:function(e,t){"follow"!==t.type&&(t.action.user=e.usersObject[t.action.user.id]),t.from_profile=e.usersObject[t.from_profile.id]},setColor:function(e,t){var n=t.user.id,r=t.highlighted;e.usersObject[n].highlight=r},signUpPending:function(e){e.signUpPending=!0,e.signUpErrors=[]},signUpSuccess:function(e){e.signUpPending=!1},signUpFailure:function(e,t){e.signUpPending=!1,e.signUpErrors=t}},ot={state:{loggingIn:!1,lastLoginName:!1,currentUser:!1,users:[],usersObject:{},usersByNameObject:{},signUpPending:!1,signUpErrors:[],relationships:{}},mutations:rt,getters:{findUser:function(e){return function(t){return e.usersObject[t]}},findUserByName:function(e){return function(t){return e.usersByNameObject[t.toLowerCase()]}},findUserByUrl:function(e){return function(t){return e.users.find((function(e){return e.statusnet_profile_url&&e.statusnet_profile_url.toLowerCase()===t.toLowerCase()}))}},relationship:function(e){return function(t){return t&&e.relationships[t]||{id:t,loading:!0}}}},actions:{fetchUserIfMissing:function(e,t){e.getters.findUser(t)||e.dispatch("fetchUser",t)},fetchUser:function(e,t){return e.rootState.api.backendInteractor.fetchUser({id:t}).then((function(t){return e.commit("addNewUsers",[t]),t}))},fetchUserByName:function(e,t){return e.rootState.api.backendInteractor.fetchUserByName({name:t}).then((function(t){return e.commit("addNewUsers",[t]),t}))},fetchUserRelationship:function(e,t){e.state.currentUser&&e.rootState.api.backendInteractor.fetchUserRelationship({id:t}).then((function(t){return e.commit("updateUserRelationship",t)}))},fetchUserInLists:function(e,t){e.state.currentUser&&e.rootState.api.backendInteractor.fetchUserInLists({id:t}).then((function(n){return e.commit("updateUserInLists",{id:t,inLists:n})}))},fetchBlocks:function(e){return e.rootState.api.backendInteractor.fetchBlocks().then((function(t){return e.commit("saveBlockIds",we()(t,"id")),e.commit("addNewUsers",t),t}))},blockUser:function(e,t){return Je(e,t)},unblockUser:function(e,t){return Qe(e,t)},removeUserFromFollowers:function(e,t){return function(e,t){return e.rootState.api.backendInteractor.removeUserFromFollowers({id:t}).then((function(t){return e.commit("updateUserRelationship",[t])}))}(e,t)},blockUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Je(e,t)})))},unblockUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Qe(e,t)})))},editUserNote:function(e,t){return function(e,t){var n=t.id,r=t.comment;return e.rootState.api.backendInteractor.editUserNote({id:n,comment:r}).then((function(t){return e.commit("updateUserRelationship",[t])}))}(e,t)},fetchMutes:function(e){return e.rootState.api.backendInteractor.fetchMutes().then((function(t){return e.commit("saveMuteIds",we()(t,"id")),e.commit("addNewUsers",t),t}))},muteUser:function(e,t){return Xe(e,t)},unmuteUser:function(e,t){return et(e,t)},hideReblogs:function(e,t){return function(e,t){return e.rootState.api.backendInteractor.followUser({id:t,reblogs:!1}).then((function(t){e.commit("updateUserRelationship",[t])}))}(e,t)},showReblogs:function(e,t){return function(e,t){return e.rootState.api.backendInteractor.followUser({id:t,reblogs:!0}).then((function(t){return e.commit("updateUserRelationship",[t])}))}(e,t)},muteUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Xe(e,t)})))},unmuteUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return et(e,t)})))},fetchDomainMutes:function(e){return e.rootState.api.backendInteractor.fetchDomainMutes().then((function(t){return e.commit("saveDomainMutes",t),t}))},muteDomain:function(e,t){return tt(e,t)},unmuteDomain:function(e,t){return nt(e,t)},muteDomains:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return tt(e,t)})))},unmuteDomains:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return nt(e,t)})))},fetchFriends:function(e,t){var n=e.rootState,r=e.commit,o=n.users.usersObject[t],i=I()(o.friendIds);return n.api.backendInteractor.fetchFriends({id:t,maxId:i}).then((function(e){return r("addNewUsers",e),r("saveFriendIds",{id:t,friendIds:we()(e,"id")}),e}))},fetchFollowers:function(e,t){var n=e.rootState,r=e.commit,o=n.users.usersObject[t],i=I()(o.followerIds);return n.api.backendInteractor.fetchFollowers({id:t,maxId:i}).then((function(e){return r("addNewUsers",e),r("saveFollowerIds",{id:t,followerIds:we()(e,"id")}),e}))},clearFriends:function(e,t){(0,e.commit)("clearFriends",t)},clearFollowers:function(e,t){(0,e.commit)("clearFollowers",t)},subscribeUser:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.subscribeUser({id:t}).then((function(e){return r("updateUserRelationship",[e])}))},unsubscribeUser:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.unsubscribeUser({id:t}).then((function(e){return r("updateUserRelationship",[e])}))},toggleActivationStatus:function(e,t){var n=e.rootState,r=e.commit,o=t.user;(o.deactivated?n.api.backendInteractor.activateUser:n.api.backendInteractor.deactivateUser)({user:o}).then((function(e){var t=!e.is_active;r("updateActivationStatus",{user:e,deactivated:t})}))},registerPushNotifications:function(e){var t=e.state.currentUser.credentials,n=e.rootState.instance.vapidPublicKey;!function(e,t,n,r){Be()&&He().then((function(n){return function(e,t,n){if(!t)return Promise.reject(new Error("Web Push is disabled in config"));if(!n)return Promise.reject(new Error("VAPID public key is not found"));var r,o,i,s={userVisibleOnly:!0,applicationServerKey:(r=n,o=(r+"=".repeat((4-r.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(o),Uint8Array.from((0,u.Z)(i).map((function(e){return e.charCodeAt(0)}))))};return e.pushManager.subscribe(s)}(n,e,t)})).then((function(e){return function(e,t,n){return window.fetch("/api/v1/push/subscription/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({subscription:e,data:{alerts:{follow:n.follows,favourite:n.likes,mention:n.mentions,reblog:n.repeats,move:n.moves}}})}).then((function(e){if(!e.ok)throw new Error("Bad status code from server.");return e.json()})).then((function(e){if(!e.id)throw new Error("Bad response from server.");return e}))}(e,n,r)})).catch((function(e){return console.warn("Failed to setup Web Push Notifications: ".concat(e.message))}))}(e.rootState.config.webPushNotifications,n,t,e.rootState.config.notificationVisibility)},unregisterPushNotifications:function(e){var t;t=e.state.currentUser.credentials,Be()&&Promise.all([Ve(t),He().then((function(e){return function(e){return e.pushManager.getSubscription().then((function(e){if(null!==e)return e.unsubscribe()}))}(e).then((function(t){return[e,t]}))})).then((function(e){var t=(0,l.Z)(e,2),n=t[0];return t[1]||console.warn("Push subscription cancellation wasn't successful, killing SW anyway..."),n.unregister().then((function(e){e||console.warn("Failed to kill SW")}))}))]).catch((function(e){return console.warn("Failed to disable Web Push Notifications: ".concat(e.message))}))},addNewUsers:function(e,t){(0,e.commit)("addNewUsers",t)},addNewStatuses:function(e,t){var n=t.statuses,r=we()(n,"user"),o=ye()(we()(n,"retweeted_status.user"));e.commit("addNewUsers",r),e.commit("addNewUsers",o),Z()(n,(function(t){e.commit("setUserForStatus",t),e.commit("setPinnedToUser",t)})),Z()(ye()(we()(n,"retweeted_status")),(function(t){e.commit("setUserForStatus",t),e.commit("setPinnedToUser",t)}))},addNewNotifications:function(e,t){var n=t.notifications,r=we()(n,"from_profile"),o=we()(n,"target").filter((function(e){return e})),i=n.map((function(e){return e.id}));e.commit("addNewUsers",r),e.commit("addNewUsers",o);var s=e.rootState.statuses.notifications.idStore,a=Object.entries(s).filter((function(e){var t=(0,l.Z)(e,2),n=t[0];return t[1],i.includes(n)})).map((function(e){var t=(0,l.Z)(e,2);return t[0],t[1]}));Z()(a,(function(t){e.commit("setUserForNotification",t)}))},searchUsers:function(e,t){var n=e.rootState,r=e.commit,o=t.query;return n.api.backendInteractor.searchUsers({query:o}).then((function(e){return r("addNewUsers",e),e}))},signUp:function(e,t){return(0,r.Z)(i().mark((function n(){var r,o,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.commit("signUpPending"),r=e.rootState,n.prev=2,n.next=5,r.api.backendInteractor.register({params:Ge({},t)});case 5:o=n.sent,e.commit("signUpSuccess"),e.commit("setToken",o.access_token),e.dispatch("loginUser",o.access_token),n.next=16;break;case 11:throw n.prev=11,n.t0=n.catch(2),s=n.t0.message,e.commit("signUpFailure",s),n.t0;case 16:case"end":return n.stop()}}),n,null,[[2,11]])})))()},getCaptcha:function(e){return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.rootState.api.backendInteractor.getCaptcha());case 1:case"end":return t.stop()}}),t)})))()},logout:function(e){var t=e.rootState,n=t.oauth,r=t.instance,o=Ge(Ge({},n),{},{commit:e.commit,instance:r.server});return qe.getOrCreateApp(o).then((function(e){var t={app:e,instance:o.instance,token:n.userToken};return qe.revokeToken(t)})).then((function(){e.commit("clearCurrentUser"),e.dispatch("disconnectFromSocket"),e.commit("clearToken"),e.dispatch("stopFetchingTimeline","friends"),e.commit("setBackendInteractor",$e(e.getters.getToken())),e.dispatch("stopFetchingNotifications"),e.dispatch("stopFetchingLists"),e.dispatch("stopFetchingFollowRequests"),e.commit("clearNotifications"),e.commit("resetStatuses"),e.dispatch("resetChats"),e.dispatch("setLastTimeline","public-timeline"),e.dispatch("setLayoutWidth",Ue()),e.dispatch("setLayoutHeight",Me()),e.commit("clearServerSideStorage")}))},loginUser:function(e,t){return new Promise((function(n,r){var o=e.commit;o("beginLogin"),e.rootState.api.backendInteractor.verifyCredentials(t).then((function(i){if(i.error){var s=i.error;o("endLogin"),401===s.status?r(new Error("Wrong username or password")):r(new Error("An error occurred, please try again"))}else{var a=i;a.credentials=t,a.blockIds=[],a.muteIds=[],a.domainMutes=[],o("setCurrentUser",a),o("setServerSideStorage",a),o("addNewUsers",[a]),e.dispatch("fetchEmoji"),(c=window.Notification,c?"default"===c.permission?c.requestPermission():Promise.resolve(c.permission):Promise.resolve(null)).then((function(e){return o("setNotificationPermission",e)})),o("setBackendInteractor",$e(t)),e.dispatch("pushServerSideStorage"),a.token&&(e.dispatch("setWsToken",a.token),e.dispatch("initializeSocket")),e.dispatch("startFetchingLists"),a.locked&&e.dispatch("startFetchingFollowRequests"),e.getters.mergedConfig.useStreamingApi?(e.dispatch("fetchTimeline",{timeline:"friends",since:null}),e.dispatch("fetchNotifications",{since:null}),e.dispatch("enableMastoSockets",!0).catch((function(e){console.error("Failed initializing MastoAPI Streaming socket",e)})).then((function(){e.dispatch("fetchChats",{latest:!0}),setTimeout((function(){return e.dispatch("setNotificationsSilence",!1)}),1e4)}))):(e.dispatch("startFetchingTimeline",{timeline:"friends"}),e.dispatch("startFetchingNotifications"),e.dispatch("startFetchingChats")),e.dispatch("fetchMutes"),e.dispatch("setLayoutWidth",Ue()),e.dispatch("setLayoutHeight",Me()),e.rootState.api.backendInteractor.fetchFriends({id:a.id}).then((function(e){return o("addNewUsers",e)}))}var c;o("endLogin"),n()})).catch((function(e){console.log(e),o("endLogin"),r(new Error("Failed to connect to server, try again"))}))}))}}};const it=ot;var st=n(36459),at=n(87462),ct=n(44925),lt=n(64689),ut=function(e,t){if(t.lastMessage&&(e.rootState.chats.currentChatId!==t.id||document.hidden)&&e.rootState.users.currentUser.id!==t.lastMessage.account_id){var n={tag:t.lastMessage.id,title:t.account.name,icon:t.account.profile_image_url,body:t.lastMessage.content};t.lastMessage.attachment&&"image"===t.lastMessage.attachment.type&&(n.image=t.lastMessage.attachment.preview_url),(0,lt.w)(e.rootState,n)}},dt=n(90837),pt=["timeline"];function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={state:{retryMultiplier:1,backendInteractor:$e(),fetchers:{},socket:null,mastoUserSocket:null,mastoUserSocketStatus:null,followRequests:[]},getters:{followRequestCount:function(e){return e.followRequests.length}},mutations:{setBackendInteractor:function(e,t){e.backendInteractor=t},addFetcher:function(e,t){var n=t.fetcherName,r=t.fetcher;e.fetchers[n]=r},removeFetcher:function(e,t){var n=t.fetcherName;t.fetcher,e.fetchers[n].stop(),delete e.fetchers[n]},setWsToken:function(e,t){e.wsToken=t},setSocket:function(e,t){e.socket=t},setFollowRequests:function(e,t){e.followRequests=t},setMastoUserSocketStatus:function(e,t){e.mastoUserSocketStatus=t},incrementRetryMultiplier:function(e){e.retryMultiplier=Math.max(++e.retryMultiplier,3)},resetRetryMultiplier:function(e){e.retryMultiplier=1}},actions:{enableMastoSockets:function(e,t){var n=e.state,r=e.dispatch,o=e.commit;if(!n.mastoUserSocket||[WebSocket.CLOSED,WebSocket.CLOSING].includes(n.mastoUserSocket.getState()))return o("setMastoUserSocketStatus",t?m._z.STARTING_INITIAL:m._z.STARTING),r("startMastoUserSocket")},disableMastoSockets:function(e){var t=e.state,n=e.dispatch,r=e.commit;if(t.mastoUserSocket)return r("setMastoUserSocketStatus",m._z.DISABLED),n("stopMastoUserSocket")},startMastoUserSocket:function(e){return new Promise((function(t,n){try{var r=e.state,o=e.commit,i=e.dispatch,s=e.rootState.statuses.timelines.friends;r.mastoUserSocket=r.backendInteractor.startUserSocket({store:e}),r.mastoUserSocket.addEventListener("message",(function(t){var n=t.detail;n&&("notification"===n.event?i("addNewNotifications",{notifications:[n.notification],older:!1}):"update"===n.event?i("addNewStatuses",{statuses:[n.status],userId:!1,showImmediately:0===s.visibleStatuses.length,timeline:"friends"}):"status.update"===n.event?i("addNewStatuses",{statuses:[n.status],userId:!1,showImmediately:n.status.id in s.visibleStatusesObject,timeline:"friends"}):"delete"===n.event?i("deleteStatusById",n.id):"pleroma:chat_update"===n.event&&setTimeout((function(){i("addChatMessages",{chatId:n.chatUpdate.id,messages:[n.chatUpdate.lastMessage]}),i("updateChat",{chat:n.chatUpdate}),ut(e,n.chatUpdate)}),100))})),r.mastoUserSocket.addEventListener("open",(function(){r.mastoUserSocketStatus!==m._z.STARTING_INITIAL&&i("pushGlobalNotice",{level:"success",messageKey:"timeline.socket_reconnected",timeout:5e3}),new Set([m._z.ERROR,m._z.DISABLED]).has(r.mastoUserSocketStatus)&&(i("stopFetchingTimeline",{timeline:"friends"}),i("stopFetchingNotifications"),i("stopFetchingChats")),o("resetRetryMultiplier"),o("setMastoUserSocketStatus",m._z.JOINED)})),r.mastoUserSocket.addEventListener("error",(function(e){var t=e.detail;console.error("Error in MastoAPI websocket:",t),i("clearOpenedChats")})),r.mastoUserSocket.addEventListener("close",(function(e){var t=e.detail,n=new Set([1e3,1001]),s=t.code;n.has(s)?(console.debug("Not restarting socket becasue of closure code ".concat(s," is in ignore list")),o("setMastoUserSocketStatus",m._z.CLOSED)):(console.warn("MastoAPI websocket disconnected, restarting. CloseEvent code: ".concat(s)),setTimeout((function(){i("startMastoUserSocket")}),1e3*r.retryMultiplier),o("incrementRetryMultiplier"),r.mastoUserSocketStatus!==m._z.ERROR&&(i("startFetchingTimeline",{timeline:"friends"}),i("startFetchingNotifications"),i("startFetchingChats"),i("pushGlobalNotice",{level:"error",messageKey:"timeline.socket_broke",messageArgs:[s],timeout:5e3})),o("setMastoUserSocketStatus",m._z.ERROR)),i("clearOpenedChats")})),t()}catch(e){n(e)}}))},stopMastoUserSocket:function(e){var t=e.state,n=e.dispatch;n("startFetchingTimeline",{timeline:"friends"}),n("startFetchingNotifications"),n("startFetchingChats"),t.mastoUserSocket.close()},startFetchingTimeline:function(e,t){var n=t.timeline,r=void 0===n?"friends":n,o=t.tag,i=void 0!==o&&o,s=t.userId,a=void 0!==s&&s,c=t.listId,l=void 0!==c&&c;if(!e.state.fetchers[r]){var u=e.state.backendInteractor.startFetchingTimeline({timeline:r,store:e,userId:a,listId:l,tag:i});e.commit("addFetcher",{fetcherName:r,fetcher:u})}},stopFetchingTimeline:function(e,t){var n=e.state.fetchers[t];n&&e.commit("removeFetcher",{fetcherName:t,fetcher:n})},fetchTimeline:function(e,t){var n=t.timeline,r=(0,ct.Z)(t,pt);e.state.backendInteractor.fetchTimeline(mt({store:e,timeline:n},r))},startFetchingNotifications:function(e){if(!e.state.fetchers.notifications){var t=e.state.backendInteractor.startFetchingNotifications({store:e});e.commit("addFetcher",{fetcherName:"notifications",fetcher:t})}},stopFetchingNotifications:function(e){var t=e.state.fetchers.notifications;t&&e.commit("removeFetcher",{fetcherName:"notifications",fetcher:t})},fetchNotifications:function(e,t){var n=(0,at.Z)({},((0,st.Z)(t),t));e.state.backendInteractor.fetchNotifications(mt({store:e},n))},startFetchingFollowRequests:function(e){if(!e.state.fetchers.followRequests){var t=e.state.backendInteractor.startFetchingFollowRequests({store:e});e.commit("addFetcher",{fetcherName:"followRequests",fetcher:t})}},stopFetchingFollowRequests:function(e){var t=e.state.fetchers.followRequests;t&&e.commit("removeFetcher",{fetcherName:"followRequests",fetcher:t})},removeFollowRequest:function(e,t){var n=e.state.followRequests.filter((function(e){return e!==t}));e.commit("setFollowRequests",n)},startFetchingLists:function(e){if(!e.state.fetchers.lists){var t=e.state.backendInteractor.startFetchingLists({store:e});e.commit("addFetcher",{fetcherName:"lists",fetcher:t})}},stopFetchingLists:function(e){var t=e.state.fetchers.lists;t&&e.commit("removeFetcher",{fetcherName:"lists",fetcher:t})},setWsToken:function(e,t){e.commit("setWsToken",t)},initializeSocket:function(e){var t=e.dispatch,n=e.commit,r=e.state,o=e.rootState,i=r.wsToken;if(o.instance.shoutAvailable&&void 0!==i&&null===r.socket){var s=new dt.sk("/socket",{params:{token:i}});s.connect(),n("setSocket",s),t("initializeShout",s)}},disconnectFromSocket:function(e){var t=e.commit,n=e.state;n.socket&&n.socket.disconnect(),t("setSocket",null)}}};const gt=ft;var vt=n(65405),wt=n(87185),bt=n.n(wt),yt=n(69579),_t=n.n(yt),kt=n(7436),St=n.n(kt),jt=n(7739),Ot=n.n(jt),Ct=n(85564),Pt=n.n(Ct),zt=n(74691),It=n.n(zt),Dt=n(27361),xt=n.n(Dt),Tt=n(36968),$t=n.n(Tt),Ut=n(50361),Mt=n.n(Ut),At=n(18446),Lt=n.n(At),Et=n(2262),Ft=n(58312),Rt=n(9382),Nt=(n(31934),n(95326),n(43011),n(68789),n(84131));Rt.vI.add(Nt.NBC),Ft.Z;var qt=["_journal"],Zt=["_timestamp","_version"],Wt=["_timestamp","_version"];function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=new Date("2022-08-04"),Kt=1001,Gt={dirty:!1,flagStorage:{updateCounter:0,reset:0},prefsStorage:{_journal:[],simple:{dontShowUpdateNotifs:!1,collapseNav:!1},collections:{pinnedNavItems:["home","dms","chats"]}},raw:null,cache:null},Yt=Ht(Ht({},Gt.flagStorage),{},{updateCounter:1}),Jt=function(e,t,n){var r=e.indexOf(t),o=r+n,i=(0,u.Z)(e);return i.splice(r,1),i.splice(It()(o,0,i.length+1),0,t),i},Qt=function(e,t){return Ht(Ht({},e),{},{_user:t,_timestamp:Date.now(),_version:1})},Xt=function(e){return e._timestamp>0&&e._version>0},en=function(e){e.prefsStorage=e.prefsStorage||{simple:{},collections:{}},Object.entries(Gt.prefsStorage.simple).forEach((function(t){var n=(0,l.Z)(t,2),r=n[0],o=n[1];"number"!=typeof o&&"boolean"!=typeof o&&(console.warn("Preference simple.".concat(r," as invalid type, reinitializing")),$t()(e.prefsStorage.simple,r,Gt.prefsStorage.simple[r]))})),Object.entries(Gt.prefsStorage.collections).forEach((function(t){var n=(0,l.Z)(t,2),r=n[0],o=n[1];Array.isArray(o)||(console.warn("Preference collections.".concat(r," as invalid type, reinitializing")),$t()(e.prefsStorage.collections,r,Gt.prefsStorage.collections[r]))}))},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Pt()(t.map((function(e){return Array.isArray(e)?e:[]}))).filter((function(e){return Object.prototype.hasOwnProperty.call(e,"path")&&Object.prototype.hasOwnProperty.call(e,"operation")&&Object.prototype.hasOwnProperty.call(e,"args")&&Object.prototype.hasOwnProperty.call(e,"timestamp")})),o=Ot()(r,"path"),i=Object.entries(o).map((function(e){var t=(0,l.Z)(e,2),n=t[0],r=t[1];if(r.sort((function(e,t){return e.timestamp>t.timestamp?1:-1})),n.startsWith("collections")){var o,i=St()(r,(function(e){return"removeFromCollection"===e.operation}));return o=i>0?r.slice(i):r,bt()(o,(function(e,t){return e.path===t.path&&e.operation===t.operation&&"addToCollection"===e.operation&&e.args[0]===t.args[0]}))}return n.startsWith("simple")?_t()(r):r}));return Pt()(i).sort((function(e,t){return e.timestamp>t.timestamp?1:-1}))},nn={clearServerSideStorage:function(e,t){Ht({},Mt()(Gt))},setServerSideStorage:function(e,t){var n=t.storage;e.raw=n;var r=e.cache;r&&r._user!==t.fqn&&(console.warn("cache belongs to another user! reinitializing local cache!"),r=null);var o=function(e,t){var n={recent:null,stale:null,needUpload:!1},r=Xt(e||{}),o=Xt(t||{});return!o&&r?(n.needUpload=!0,console.debug("Nothing valid stored on server, assuming cache to be source of truth"),n.recent=e,n.stale=t):!r&&o?(console.debug("Valid storage on server found, no local cache found, using live as source of truth"),n.recent=t,n.stale=e):r&&o?(console.debug("Both sources have valid data, figuring things out..."),t._timestamp===e._timestamp&&t._version===e._version?(console.debug("Same version/timestamp on both source, source of truth irrelevant"),n.recent=e,n.stale=t):(console.debug("Different timestamp, figuring out which one is more recent"),t._timestamp<e._timestamp?(n.recent=e,n.stale=t):(n.recent=t,n.stale=e))):(console.debug("Both sources are invalid, start from scratch"),n.needUpload=!0),n}(r=function(e){return e?(e._version<1&&(console.debug("Local cached data has older version, seeing if there any migrations that can be applied"),console.debug("No migrations found")),e._version>1&&(console.debug("Local cached data has newer version, seeing if there any reverse migrations that can be applied"),window._PLEROMA_HOTPATCH&&window._PLEROMA_HOTPATCH.reverseMigrations)?(console.debug("Found hotpatch migration, applying"),window._PLEROMA_HOTPATCH.reverseMigrations.call({},"serverSideStorage",{from:e._version,to:1},e)):e):e}(r),n),i=o.recent,s=o.stale,a=o.needsUpload,c=t.created_at>Vt,d=c?Yt:Gt.flagStorage,p=!1;if(null===i&&(console.debug("Data is empty, initializing for ".concat(c?"new":"existing"," user")),i=Qt({flagStorage:Ht({},d),prefsStorage:Ht({},Gt.prefsStorage)})),!a&&i&&s){console.debug("Checking if data needs merging...");var h=i,m=(h._timestamp,h._version,(0,ct.Z)(h,Zt)),f=(s._timestamp,s._version,(0,ct.Z)(s,Wt));p=!Lt()(m,f),console.debug("Data ".concat(p?"needs":"doesn't need"," merging"))}var g,v,w=function(e,t){return Array.from(new Set([].concat((0,u.Z)(Object.keys((0,Et.IU)((e||{}).flagStorage||{}))),(0,u.Z)(Object.keys((0,Et.IU)((t||{}).flagStorage||{}))))))}(i,s);p?(console.debug("Merging the data..."),g=function(e,t,n){return t.flagStorage?e.flagStorage?Object.fromEntries(n.map((function(n){var r=e.flagStorage[n],o=t.flagStorage[n];return[n,Number((r>o?r:o)||0)]}))):t.flagStorage:e.flagStorage}(i,s,w),en(i),en(s),v=function(e,t,n){if(!t)return e;if(!e)return t;var r=e._journal,o=(0,ct.Z)(e,qt),i=t._journal,s=Ht({},o),a=tn(i,r);return a.forEach((function(e){var t=e.path,n=(e.timestamp,e.operation),r=(e.command,e.args);if(t.startsWith("_"))console.error("journal contains entry to edit internal (starts with _) field '".concat(t,"', something is incorrect here, ignoring."));else switch(n){case"set":$t()(s,t,r[0]);break;case"addToCollection":$t()(s,t,Array.from(new Set(xt()(s,t)).add(r[0])));break;case"removeFromCollection":var o=new Set(xt()(s,t));o.delete(r[0]),$t()(s,t,Array.from(o));break;case"reorderCollection":var i=(0,l.Z)(r,2),a=i[0],c=i[1];$t()(s,t,Jt(xt()(s,t),a,c));break;default:console.error("Unknown journal operation: '".concat(n,"', did we forget to run reverse migrations beforehand?"))}})),Ht(Ht({},s),{},{_journal:a})}(i.prefsStorage,s.prefsStorage)):(g=i.flagStorage,v=i.prefsStorage),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt.flagStorage,n=Ht({},e),r=Object.keys(e);if(e.reset>=1e3&&e.reset<=Kt){console.debug("Received command to trim the flags");var o=new Set(Object.keys(t));n={},r.forEach((function(t){o.has(t)&&(n[t]=e[t])})),e.reset===Kt&&(console.debug("Received command to reset the flags"),Object.keys(t).forEach((function(e){n[e]=0})))}else e.reset>0&&e.reset<9e3&&(console.debug("Received command to reset the flags"),r.forEach((function(e){n[e]=0})));return n.reset=0,n}(g),i.flagStorage=Ht(Ht({},d),g),i.prefsStorage=Ht(Ht({},Gt.prefsStorage),v),e.dirty=p||a,e.cache=i,s&&i&&!e.dirty&&(e.cache._timestamp=Math.min(s._timestamp,i._timestamp)),e.flagStorage=e.cache.flagStorage,e.prefsStorage=e.cache.prefsStorage},setFlag:function(e,t){var n=t.flag,r=t.value;e.flagStorage[n]=r,e.dirty=!0},setPreference:function(e,t){var n=t.path,r=t.value;n.startsWith("_")?console.error("tried to edit internal (starts with _) field '".concat(n,"', ignoring.")):($t()(e.prefsStorage,n,r),e.prefsStorage._journal=[].concat((0,u.Z)(e.prefsStorage._journal),[{operation:"set",path:n,args:[r],timestamp:Date.now()}]),e.dirty=!0)},addCollectionPreference:function(e,t){var n=t.path,r=t.value;if(n.startsWith("_"))console.error("tried to edit internal (starts with _) field '".concat(n,"', ignoring."));else{var o=new Set(xt()(e.prefsStorage,n));o.add(r),$t()(e.prefsStorage,n,(0,u.Z)(o)),e.prefsStorage._journal=[].concat((0,u.Z)(e.prefsStorage._journal),[{operation:"addToCollection",path:n,args:[r],timestamp:Date.now()}]),e.dirty=!0}},removeCollectionPreference:function(e,t){var n=t.path,r=t.value;if(n.startsWith("_"))console.error("tried to edit internal (starts with _) field '".concat(n,"', ignoring."));else{var o=new Set(xt()(e.prefsStorage,n));o.delete(r),$t()(e.prefsStorage,n,(0,u.Z)(o)),e.prefsStorage._journal=[].concat((0,u.Z)(e.prefsStorage._journal),[{operation:"removeFromCollection",path:n,args:[r],timestamp:Date.now()}]),e.dirty=!0}},reorderCollectionPreference:function(e,t){var n=t.path,r=t.value,o=t.movement;if(n.startsWith("_"))console.error("tried to edit internal (starts with _) field '".concat(n,"', ignoring."));else{var i=xt()(e.prefsStorage,n),s=Jt(i,r,o);$t()(e.prefsStorage,n,s),e.prefsStorage._journal=[].concat((0,u.Z)(e.prefsStorage._journal),[{operation:"arrangeCollection",path:n,args:[r],timestamp:Date.now()}]),e.dirty=!0}},updateCache:function(e,t){var n=t.username;e.prefsStorage._journal=tn(e.prefsStorage._journal),e.cache=Qt({flagStorage:(0,Et.IU)(e.flagStorage),prefsStorage:(0,Et.IU)(e.prefsStorage)},n)}};const rn={state:Ht({},Mt()(Gt)),mutations:nn,actions:{pushServerSideStorage:function(e){var t=e.state,n=e.rootState,r=e.commit,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.force,s=void 0!==i&&i,a=t.dirty||s;if(console.log(a),a){r("updateCache",{username:n.users.currentUser.fqn});var c={pleroma_settings_store:{"pleroma-fe":t.cache}};n.api.backendInteractor.updateProfile({params:c}).then((function(e){r("setServerSideStorage",e),t.dirty=!1}))}}}},on={state:{messages:[],channel:{state:""},joined:!1},mutations:{setChannel:function(e,t){e.channel=t},addMessage:function(e,t){e.messages.push(t),e.messages=e.messages.slice(-19,20)},setMessages:function(e,t){e.messages=t.slice(-19,20)},setJoined:function(e,t){e.joined=t}},actions:{initializeShout:function(e,t){var n=t.channel("chat:public");n.joinPush.receive("ok",(function(){e.commit("setJoined",!0)})),n.onClose((function(){e.commit("setJoined",!1)})),n.onError((function(){e.commit("setJoined",!1)})),n.on("new_msg",(function(t){e.commit("addMessage",t)})),n.on("messages",(function(t){var n=t.messages;e.commit("setMessages",n)})),n.join(),e.commit("setChannel",n)}}},sn={state:{clientId:!1,clientSecret:!1,appToken:!1,userToken:!1},mutations:{setClientData:function(e,t){var n=t.clientId,r=t.clientSecret;e.clientId=n,e.clientSecret=r},setAppToken:function(e,t){e.appToken=t},setToken:function(e,t){e.userToken=t},clearToken:function(e){e.userToken=!1,delete e.token}},getters:{getToken:function(e){return function(){return e.userToken||e.token||e.appToken}},getUserToken:function(e){return function(){return e.userToken||e.token}}}};var an="password",cn="token",ln="totp",un="recovery",dn=function(e){e.strategy=e.initStrategy,e.settings={}};const pn={namespaced:!0,state:{settings:{},strategy:an,initStrategy:an},getters:{settings:function(e,t){return e.settings},requiredPassword:function(e,t,n){return e.strategy===an},requiredToken:function(e,t,n){return e.strategy===cn},requiredTOTP:function(e,t,n){return e.strategy===ln},requiredRecovery:function(e,t,n){return e.strategy===un}},mutations:{setInitialStrategy:function(e,t){t&&(e.initStrategy=t,e.strategy=t)},requirePassword:function(e){e.strategy=an},requireToken:function(e){e.strategy=cn},requireMFA:function(e,t){var n=t.settings;e.settings=n,e.strategy=ln},requireRecovery:function(e){e.strategy=un},requireTOTP:function(e){e.strategy=ln},abortMFA:function(e){dn(e)}},actions:{login:function(e,t){return(0,r.Z)(i().mark((function n(){var r,o,s,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state,o=e.dispatch,s=e.commit,a=t.access_token,s("setToken",a,{root:!0}),n.next=5,o("loginUser",a,{root:!0});case 5:dn(r);case 6:case"end":return n.stop()}}),n)})))()}}};var hn=n(58394),mn=new Set(["image","video","audio","flash"]),fn={state:{media:[],currentIndex:0,activated:!1},mutations:{setMedia:function(e,t){e.media=t},setCurrentMedia:function(e,t){e.activated=!0,e.currentIndex=t},close:function(e){e.activated=!1}},actions:{setMedia:function(e,t){var n=e.commit,r=t.filter((function(e){var t=hn.Z.fileType(e.mimetype);return mn.has(t)}));n("setMedia",r)},setCurrentMedia:function(e,t){(0,e.commit)("setCurrentMedia",e.state.media.indexOf(t)||0)},closeMediaViewer:function(e){(0,e.commit)("close")}}};const gn=fn,vn={state:{tokens:[]},actions:{fetchTokens:function(e){var t=e.rootState,n=e.commit;t.api.backendInteractor.fetchOAuthTokens().then((function(e){n("swapTokens",e)}))},revokeToken:function(e,t){var n=e.rootState,r=e.commit,o=e.state;n.api.backendInteractor.revokeOAuthToken({id:t}).then((function(e){201===e.status&&r("swapTokens",o.tokens.filter((function(e){return e.id!==t})))}))}},mutations:{swapTokens:function(e,t){e.tokens=t}}};var wn=n(63105),bn=n.n(wn),yn={state:{reportModal:{userId:null,statuses:[],preTickedIds:[],activated:!1},reports:{}},mutations:{openUserReportingModal:function(e,t){var n=t.userId,r=t.statuses,o=t.preTickedIds;e.reportModal.userId=n,e.reportModal.statuses=r,e.reportModal.preTickedIds=o,e.reportModal.activated=!0},closeUserReportingModal:function(e){e.reportModal.activated=!1},setReportState:function(e,t){var n=t.id,r=t.state;e.reports[n].state=r},addReport:function(e,t){e.reports[t.id]=t}},actions:{openUserReportingModal:function(e,t){var n=e.rootState,r=e.commit,o=t.userId,i=t.statusIds,s=void 0===i?[]:i,a=s.map((function(e){return n.statuses.allStatusesObject[e]})),c=s,l=a.concat(bn()(n.statuses.allStatuses,(function(e){return e.user.id===o&&!c.includes(e.id)})));r("openUserReportingModal",{userId:o,statuses:l,preTickedIds:c})},closeUserReportingModal:function(e){(0,e.commit)("closeUserReportingModal")},setReportState:function(e,t){var n=e.commit,r=e.dispatch,o=e.rootState,i=t.id,s=t.state,a=o.reports.reports[i].state;n("setReportState",{id:i,state:s}),o.api.backendInteractor.setReportState({id:i,state:s}).catch((function(e){console.error("Failed to set report state",e),r("pushGlobalNotice",{level:"error",messageKey:"general.generic_error_message",messageArgs:[e.message],timeout:5e3}),n("setReportState",{id:i,state:a})}))},addReport:function(e,t){(0,e.commit)("addReport",t)}}};const _n=yn;const kn={state:{trackedPolls:{},pollsObject:{}},mutations:{mergeOrAddPoll:function(e,t){var n=e.pollsObject[t.id];t.expired=Date.now()>Date.parse(t.expires_at),e.pollsObject[t.id]=n?$()(n,t):t},trackPoll:function(e,t){var n=e.trackedPolls[t];e.trackedPolls[t]=n?n+1:1},untrackPoll:function(e,t){var n=e.trackedPolls[t];e.trackedPolls[t]=n?n-1:0}},actions:{mergeOrAddPoll:function(e,t){(0,e.commit)("mergeOrAddPoll",t)},updateTrackedPoll:function(e,t){var n=e.rootState,r=e.dispatch,o=e.commit;n.api.backendInteractor.fetchPoll({pollId:t}).then((function(e){setTimeout((function(){n.polls.trackedPolls[t]&&r("updateTrackedPoll",t)}),3e4),o("mergeOrAddPoll",e)}))},trackPoll:function(e,t){var n=e.rootState,r=e.commit,o=e.dispatch;n.polls.trackedPolls[t]||setTimeout((function(){return o("updateTrackedPoll",t)}),3e4),r("trackPoll",t)},untrackPoll:function(e,t){(0,e.commit)("untrackPoll",t)},votePoll:function(e,t){var n=e.rootState,r=e.commit,o=(t.id,t.pollId),i=t.choices;return n.api.backendInteractor.vote({pollId:o,choices:i}).then((function(e){return r("mergeOrAddPoll",e),e}))}}},Sn={state:{params:null,modalActivated:!1},mutations:{openPostStatusModal:function(e,t){e.params=t,e.modalActivated=!0},closePostStatusModal:function(e){e.modalActivated=!1}},actions:{openPostStatusModal:function(e,t){(0,e.commit)("openPostStatusModal",t)},closePostStatusModal:function(e){(0,e.commit)("closePostStatusModal")}}},jn={state:{params:null,modalActivated:!1},mutations:{openEditStatusModal:function(e,t){e.params=t,e.modalActivated=!0},closeEditStatusModal:function(e){e.modalActivated=!1}},actions:{openEditStatusModal:function(e,t){(0,e.commit)("openEditStatusModal",t)},closeEditStatusModal:function(e){(0,e.commit)("closeEditStatusModal")}}},On={state:{params:{},modalActivated:!1},mutations:{openStatusHistoryModal:function(e,t){e.params=t,e.modalActivated=!0},closeStatusHistoryModal:function(e){e.modalActivated=!1}},actions:{openStatusHistoryModal:function(e,t){(0,e.commit)("openStatusHistoryModal",t)},closeStatusHistoryModal:function(e){(0,e.commit)("closeStatusHistoryModal")}}};var Cn=n(73303),Pn=n.n(Cn),zn=n(75472),In=n.n(zn),Dn=n(71002),xn=n(73955),Tn=n.n(xn),$n=n(89734),Un=n.n($n);function Mn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?An(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln={add:function(e,t){var n=t.messages,r=t.updateMaxId,o=void 0===r||r;if(e)for(var i=function(t){var r=n[t];if(r.chat_id!==e.chatId)return{v:void 0};if(r.fakeId){var i=e.idIndex[r.fakeId];if(i)return e.idIndex[r.id]&&(delete e.idIndex[r.id],e.messages=e.messages.filter((function(e){return e.id!==r.id}))),Object.assign(i,r,{error:!1}),delete i.fakeId,e.idIndex[i.id]=i,delete e.idIndex[r.fakeId],{v:void 0}}(!e.minId||!r.pending&&r.id<e.minId)&&(e.minId=r.id),(!e.maxId||r.id>e.maxId)&&o&&(e.maxId=r.id),e.idIndex[r.id]||function(e,t){if(t.idempotency_key)return e.idempotencyKeyIndex[t.idempotency_key]}(e,r)||(e.lastSeenMessageId<r.id&&e.newMessageCount++,e.idIndex[r.id]=r,e.messages.push(e.idIndex[r.id]),e.idempotencyKeyIndex[r.idempotency_key]=!0)},s=0;s<n.length;s++){var a=i(s);if("object"===(0,Dn.Z)(a))return a.v}},empty:function(e){return{idIndex:{},idempotencyKeyIndex:{},messages:[],newMessageCount:0,lastSeenMessageId:"0",chatId:e,minId:void 0,maxId:void 0}},getView:function(e){if(!e)return[];var t,n=[],r=In()(e.messages,["pending","id"],["asc","asc"]),o=r[0],i=r[r.length-1];if(o){var s=new Date(o.created_at);s.setHours(0,0,0,0),n.push({type:"date",date:s,id:s.getTime().toString()})}for(var a=!1,c=0;c<r.length;c++){var l=r[c],u=r[c+1],d=new Date(l.created_at);d.setHours(0,0,0,0),i&&i.date<d&&(n.push({type:"date",date:d,id:d.getTime().toString()}),i.isTail=!0,t=void 0,a=!0);var p={type:"message",data:l,date:d,id:l.id,messageChainId:t};(u&&u.account_id)!==l.account_id&&(p.isTail=!0,t=void 0),((i&&i.data&&i.data.account_id)!==l.account_id||a)&&(t=Tn()(),p.isHead=!0,p.messageChainId=t),n.push(p),i=p,a=!1}return n},deleteMessage:function(e,t){if(e){if(e.messages=e.messages.filter((function(e){return e.id!==t})),delete e.idIndex[t],e.maxId===t){var n=L()(e.messages,"id");e.maxId=n.id}if(e.minId===t){var r=M()(e.messages,"id");e.minId=r.id}}},cullOlderMessages:function(e){var t=e.messages.length,n=t-50;if(!(t<=50)){e.messages=Un()(e.messages,["id"]),e.minId=e.messages[n].id;var r,o=Mn(e.messages);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.id<e.minId&&(delete e.idIndex[i.id],delete e.idempotencyKeyIndex[i.idempotency_key])}}catch(e){o.e(e)}finally{o.f()}e.messages=e.messages.slice(n,t)}},resetNewMessageCount:function(e){e&&(e.newMessageCount=0,e.lastSeenMessageId=e.maxId)},clear:function(e){var t,n=[],r=Mn(e.messages);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.error?n.push(o.id):(delete e.idIndex[o.id],delete e.idempotencyKeyIndex[o.idempotency_key])}}catch(e){r.e(e)}finally{r.f()}e.messages=e.messages.filter((function(e){return n.includes(e.id)})),e.newMessageCount=0,e.lastSeenMessageId="0",e.minId=void 0,e.maxId=void 0},handleMessageError:function(e,t,n){if(e){var r=e.idIndex[t];if(r&&(r.error=!0,r.pending=!1,!n)){var o=In()(e.messages,["pending","id"],["asc","desc"])[0];if(o){var i=r.id;r.id="".concat(o.id,"-").concat((new Date).getTime()),e.idIndex[r.id]=r,delete e.idIndex[i]}}}}};const En=Ln;var Fn=n(27742);function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qn={chatList:{data:[],idStore:{}},chatListFetcher:null,openedChats:(0,Et.qj)({}),openedChatMessageServices:(0,Et.qj)({}),fetcher:void 0,currentChatId:null,lastReadMessageId:null},Zn=function(e,t){return F()(e.chatList.data,{id:t})},Wn={state:Nn({},qn),getters:{currentChat:function(e){return e.openedChats[e.currentChatId]},currentChatMessageService:function(e){return e.openedChatMessageServices[e.currentChatId]},findOpenedChatByRecipientId:function(e){return function(t){return F()(e.openedChats,(function(e){return e.account.id===t}))}},sortedChatList:function(e){return In()(e.chatList.data,["updated_at"],["desc"])},unreadChatCount:function(e){return Pn()(e.chatList.data,"unread")}},actions:{startFetchingChats:function(e){var t=e.dispatch,n=e.commit,r=function(){return t("fetchChats",{latest:!0})};r(),n("setChatListFetcher",{fetcher:function(){return(0,Se.F)(r,5e3)}})},stopFetchingChats:function(e){(0,e.commit)("setChatListFetcher",{fetcher:void 0})},fetchChats:function(e){var t=e.dispatch,n=e.rootState;return e.commit,n.api.backendInteractor.chats().then((function(e){var n=e.chats;return t("addNewChats",{chats:n}),n}))},addNewChats:function(e,t){var n=t.chats;(0,e.commit)("addNewChats",{dispatch:e.dispatch,chats:n,rootGetters:e.rootGetters,newChatMessageSideEffects:function(t){ut(e,t)}})},updateChat:function(e,t){(0,e.commit)("updateChat",{chat:t.chat})},startFetchingCurrentChat:function(e,t){e.commit,(0,e.dispatch)("setCurrentChatFetcher",{fetcher:t.fetcher})},setCurrentChatFetcher:function(e,t){e.rootState,(0,e.commit)("setCurrentChatFetcher",{fetcher:t.fetcher})},addOpenedChat:function(e,t){e.rootState;var n=e.commit,r=e.dispatch,o=t.chat;n("addOpenedChat",{dispatch:r,chat:(0,Fn._J)(o)}),r("addNewUsers",[o.account])},addChatMessages:function(e,t){var n=e.commit;n("addChatMessages",Nn({commit:n},t))},resetChatNewMessageCount:function(e,t){(0,e.commit)("resetChatNewMessageCount",t)},clearCurrentChat:function(e,t){e.rootState;var n=e.commit;e.dispatch,n("setCurrentChatId",{chatId:void 0}),n("setCurrentChatFetcher",{fetcher:void 0})},readChat:function(e,t){var n=e.rootState,r=e.commit,o=e.dispatch,i=t.id,s=t.lastReadId,a=n.chats.lastReadMessageId!==s;o("resetChatNewMessageCount"),r("readChat",{id:i,lastReadId:s}),a&&n.api.backendInteractor.readChat({id:i,lastReadId:s})},deleteChatMessage:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.deleteChatMessage(t),r("deleteChatMessage",Nn({commit:r},t))},resetChats:function(e){var t=e.commit;(0,e.dispatch)("clearCurrentChat"),t("resetChats",{commit:t})},clearOpenedChats:function(e){e.rootState;var t=e.commit;e.dispatch,e.rootGetters,t("clearOpenedChats",{commit:t})},handleMessageError:function(e,t){var n=e.commit;n("handleMessageError",Nn({commit:n},t))},cullOlderMessages:function(e,t){(0,e.commit)("cullOlderMessages",t)}},mutations:{setChatListFetcher:function(e,t){t.commit;var n=t.fetcher,r=e.chatListFetcher;r&&r.stop(),e.chatListFetcher=n&&n()},setCurrentChatFetcher:function(e,t){var n=t.fetcher,r=e.fetcher;r&&r.stop(),e.fetcher=n&&n()},addOpenedChat:function(e,t){t._dispatch;var n=t.chat;e.currentChatId=n.id,e.openedChats[n.id]=n,e.openedChatMessageServices[n.id]||(e.openedChatMessageServices[n.id]=En.empty(n.id))},setCurrentChatId:function(e,t){var n=t.chatId;e.currentChatId=n},addNewChats:function(e,t){var n=t.chats,r=t.newChatMessageSideEffects;n.forEach((function(t){var n=Zn(e,t.id);if(n){var o=(n.lastMessage&&n.lastMessage.id)!==(t.lastMessage&&t.lastMessage.id);n.lastMessage=t.lastMessage,n.unread=t.unread,n.updated_at=t.updated_at,o&&n.unread&&r(t)}else e.chatList.data.push(t),e.chatList.idStore[t.id]=t}))},updateChat:function(e,t){t._dispatch;var n=t.chat,r=(t._rootGetters,Zn(e,n.id));r&&(r.lastMessage=n.lastMessage,r.unread=n.unread,r.updated_at=n.updated_at),r||e.chatList.data.unshift(n),e.chatList.idStore[n.id]=n},deleteChat:function(e,t){t._dispatch;var n=t.id;t._rootGetters,e.chats.data=e.chats.data.filter((function(e){return e.last_status.id!==n})),e.chats.idStore=O()(e.chats.idStore,(function(e){return e.last_status.id===n}))},resetChats:function(e,t){var n=t.commit;for(var r in e.chatList={data:[],idStore:{}},e.currentChatId=null,n("setChatListFetcher",{fetcher:void 0}),e.openedChats)En.clear(e.openedChatMessageServices[r]),delete e.openedChats[r],delete e.openedChatMessageServices[r]},setChatsLoading:function(e,t){var n=t.value;e.chats.loading=n},addChatMessages:function(e,t){var n=t.chatId,r=t.messages,o=t.updateMaxId,i=e.openedChatMessageServices[n];i&&En.add(i,{messages:r.map(Fn.UB),updateMaxId:o})},deleteChatMessage:function(e,t){var n=t.chatId,r=t.messageId,o=e.openedChatMessageServices[n];o&&En.deleteMessage(o,r)},resetChatNewMessageCount:function(e,t){var n=e.openedChatMessageServices[e.currentChatId];En.resetNewMessageCount(n)},clearOpenedChats:function(e){var t=e.currentChatId;for(var n in e.openedChats)t!==n&&(En.clear(e.openedChatMessageServices[n]),delete e.openedChats[n],delete e.openedChatMessageServices[n])},readChat:function(e,t){var n=t.id,r=t.lastReadId;e.lastReadMessageId=r;var o=Zn(e,n);o&&(o.unread=0)},handleMessageError:function(e,t){var n=t.chatId,r=t.fakeId,o=t.isRetry,i=e.openedChatMessageServices[n];En.handleMessageError(i,r,o)},cullOlderMessages:function(e,t){En.cullOlderMessages(e.openedChatMessageServices[t])}}};const Bn=Wn;const Hn={state:{announcements:[],supportsAnnouncements:!0,fetchAnnouncementsTimer:void 0},mutations:{setAnnouncements:function(e,t){e.announcements=t},setAnnouncementRead:function(e,t){var n=t.id,r=t.read,o=e.announcements.findIndex((function(e){return e.id===n}));o<0||(e.announcements[o].read=r)},setFetchAnnouncementsTimer:function(e,t){e.fetchAnnouncementsTimer=t},setSupportsAnnouncements:function(e,t){e.supportsAnnouncements=t}},getters:{unreadAnnouncementCount:function(e,t,n){return n.users.currentUser?e.announcements.filter((function(e){return!(e.inactive||e.read)})).length:0}},actions:{fetchAnnouncements:function(e){if(!e.state.supportsAnnouncements)return Promise.resolve();var t=e.rootState.users.currentUser,n=t&&"admin"===t.role,o=function(){var t=(0,r.Z)(i().mark((function t(){var r,o,s,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",e.rootState.api.backendInteractor.fetchAnnouncements());case 2:return t.next=4,e.rootState.api.backendInteractor.adminFetchAnnouncements();case 4:return r=t.sent,t.next=7,e.rootState.api.backendInteractor.fetchAnnouncements();case 7:return o=t.sent,s=o.reduce((function(e,t){return e[t.id]=t,e}),{}),a=function(e){return s[e.id]},r.forEach((function(e){var t=a(e);t?e.read=t.read:e.inactive=!0})),t.abrupt("return",r);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o().then((function(t){e.commit("setAnnouncements",t)})).catch((function(t){if(!t||404!==t.statusCode)throw t;e.commit("setSupportsAnnouncements",!1)}))},markAnnouncementAsRead:function(e,t){return e.rootState.api.backendInteractor.dismissAnnouncement({id:t}).then((function(){e.commit("setAnnouncementRead",{id:t,read:!0})}))},startFetchingAnnouncements:function(e){if(!e.state.fetchAnnouncementsTimer){var t=setInterval((function(){return e.dispatch("fetchAnnouncements")}),3e5);return e.commit("setFetchAnnouncementsTimer",t),e.dispatch("fetchAnnouncements")}},stopFetchingAnnouncements:function(e){var t=e.state.fetchAnnouncementsTimer;e.commit("setFetchAnnouncementsTimer",void 0),clearInterval(t)},postAnnouncement:function(e,t){var n=t.content,r=t.startsAt,o=t.endsAt,i=t.allDay;return e.rootState.api.backendInteractor.postAnnouncement({content:n,startsAt:r,endsAt:o,allDay:i}).then((function(){return e.dispatch("fetchAnnouncements")}))},editAnnouncement:function(e,t){var n=t.id,r=t.content,o=t.startsAt,i=t.endsAt,s=t.allDay;return e.rootState.api.backendInteractor.editAnnouncement({id:n,content:r,startsAt:o,endsAt:i,allDay:s}).then((function(){return e.dispatch("fetchAnnouncements")}))},deleteAnnouncement:function(e,t){return e.rootState.api.backendInteractor.deleteAnnouncement({id:t}).then((function(){return e.dispatch("fetchAnnouncements")}))}}};var Vn=n(90308),Kn=n(72378),Gn=n.n(Kn),Yn=n(69483),Jn=!1,Qn=function(e,t){return 0===t.length?e:t.reduce((function(t,n){return $t()(t,n,xt()(e,n)),t}),{})},Xn=["markNotificationsAsSeen","clearCurrentUser","setCurrentUser","setServerSideStorage","setHighlight","setOption","setClientData","setToken","clearToken"],er=n.n(Yn)();function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=void 0===t?"vuex-lz":t,r=e.paths,o=void 0===r?[]:r,i=e.getState,s=void 0===i?function(e,t){return t.getItem(e)}:i,a=e.setState,c=void 0===a?function(e,t,n){return Jn?n.setItem(e,t):(console.log("waiting for old state to be loaded..."),Promise.resolve())}:a,l=e.reducer,u=void 0===l?Qn:l,d=e.storage,p=void 0===d?er:d,h=e.subscriber,m=void 0===h?function(e){return function(t){return e.subscribe(t)}}:h;return s(n,p).then((function(e){return function(t){try{if(null!==e&&"object"===(0,Dn.Z)(e)){var r=e.users||{};r.usersObject={};var i=r.users||[];Z()(i,(function(e){r.usersObject[e.id]=e})),e.users=r,t.replaceState(Gn()({},t.state,e))}Jn=!0}catch(e){console.log("Couldn't load state"),console.error(e),Jn=!0}m(t)((function(e,r){try{Xn.includes(e.type)&&c(n,u(Mt()(r),o),p).then((function(n){void 0!==n&&("setOption"!==e.type&&"setCurrentUser"!==e.type||t.dispatch("settingsSaved",{success:n}))}),(function(n){"setOption"!==e.type&&"setCurrentUser"!==e.type||t.dispatch("settingsSaved",{error:n})}))}catch(e){console.log("Couldn't persist state:"),console.log(e)}}))}}))}const nr=function(e){e.subscribe((function(t,n){var r=n.instance.vapidPublicKey,o=n.config.webPushNotifications,i="granted"===n.interface.notificationPermission,s=n.users.currentUser,a="setCurrentUser"===t.type,c="setInstanceOption"===t.type&&"vapidPublicKey"===t.payload.name,l="setNotificationPermission"===t.type&&"granted"===t.payload,u="setOption"===t.type&&"webPushNotifications"===t.payload.name,d="setOption"===t.type&&"notificationVisibility"===t.payload.name;if(a||c||l||u||d){if(s&&r&&i&&o)return e.dispatch("registerPushNotifications");if(u&&!o)return e.dispatch("unregisterPushNotifications")}}))};var rr=n(72617),or=n(49963),ir=n(28339),sr=n(20425),ar=n.n(sr),cr=n(57810),lr=n(66252),ur=n(3577),dr=(0,lr._)("div",{id:"app_bg_wrapper",class:"app-bg-wrapper"},null,-1),pr=(0,lr._)("div",{class:"underlay"},null,-1),hr=(0,lr._)("div",{id:"notifs-sidebar"},null,-1),mr={key:0,class:"login-hint panel panel-default"},fr=(0,lr._)("div",{id:"modal"},null,-1),gr={class:"user-panel"},vr={key:"user-panel-signed",class:"panel panel-default signed-in"},wr={class:"login panel panel-default"},br={class:"panel-heading"},yr={class:"panel-body"},_r={class:"form-group"},kr={for:"username"},Sr=["disabled","placeholder"],jr={class:"form-group"},Or={for:"password"},Cr=["disabled"],Pr={class:"form-group"},zr={key:1,class:"form-group"},Ir={class:"form-group"},Dr={class:"login-bottom"},xr=["disabled"],Tr={key:0,class:"form-group"},$r={class:"alert error"};function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC);const Ar={data:function(){return{user:{},error:!1}},computed:Mr(Mr({isPasswordAuth:function(){return this.requiredPassword},isTokenAuth:function(){return this.requiredToken}},(0,s.rn)({registrationOpen:function(e){return e.instance.registrationOpen},instance:function(e){return e.instance},loggingIn:function(e){return e.users.loggingIn},oauth:function(e){return e.oauth}})),(0,s.Se)("authFlow",["requiredPassword","requiredToken","requiredMFA"])),methods:Mr(Mr(Mr({},(0,s.OI)("authFlow",["requireMFA"])),(0,s.nv)({login:"authFlow/login"})),{},{submit:function(){this.isTokenAuth?this.submitToken():this.submitPassword()},submitToken:function(){var e=this.oauth,t={clientId:e.clientId,clientSecret:e.clientSecret,instance:this.instance.server,commit:this.$store.commit};qe.getOrCreateApp(t).then((function(e){qe.login(Mr(Mr({},e),t))}))},submitPassword:function(){var e=this,t={clientId:this.oauth.clientId,oauth:this.oauth,instance:this.instance.server,commit:this.$store.commit};this.error=!1,qe.getOrCreateApp(t).then((function(n){qe.getTokenWithCredentials(Mr(Mr({},n),{},{instance:t.instance,username:e.user.username,password:e.user.password})).then((function(t){t.error?"mfa_required"===t.error?e.requireMFA({settings:t}):"password_reset_required"===t.identifier?e.$router.push({name:"password-reset",params:{passwordResetRequested:!0}}):(e.error=t.error,e.focusOnPasswordInput()):e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}))},clearError:function(){this.error=!1},focusOnPasswordInput:function(){var e=this.$refs.passwordInput;e.focus(),e.setSelectionRange(0,e.value.length)}})};var Lr=n(83744);const Er=(0,Lr.Z)(Ar,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link"),a=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",wr,[(0,lr._)("div",br,(0,ur.zw)(e.$t("login.login")),1),(0,lr._)("div",yr,[(0,lr._)("form",{class:"login-form",onSubmit:t[2]||(t[2]=(0,or.iM)((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[e.isPasswordAuth?((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:0},[(0,lr._)("div",_r,[(0,lr._)("label",kr,(0,ur.zw)(e.$t("login.username")),1),(0,lr.wy)((0,lr._)("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.user.username=t}),disabled:e.loggingIn,class:"form-control",placeholder:e.$t("login.placeholder")},null,8,Sr),[[or.nr,e.user.username]])]),(0,lr._)("div",jr,[(0,lr._)("label",Or,(0,ur.zw)(e.$t("login.password")),1),(0,lr.wy)((0,lr._)("input",{id:"password",ref:"passwordInput","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.password=t}),disabled:e.loggingIn,class:"form-control",type:"password"},null,8,Cr),[[or.nr,e.user.password]])]),(0,lr._)("div",Pr,[(0,lr.Wm)(s,{to:{name:"password-reset"}},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("password_reset.forgot_password")),1)]})),_:1})])],64)):(0,lr.kq)("",!0),e.isTokenAuth?((0,lr.wg)(),(0,lr.iD)("div",zr,[(0,lr._)("p",null,(0,ur.zw)(e.$t("login.description")),1)])):(0,lr.kq)("",!0),(0,lr._)("div",Ir,[(0,lr._)("div",Dr,[(0,lr._)("div",null,[e.registrationOpen?((0,lr.wg)(),(0,lr.j4)(s,{key:0,to:{name:"registration"},class:"register"},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("login.register")),1)]})),_:1})):(0,lr.kq)("",!0)]),(0,lr._)("button",{disabled:e.loggingIn,type:"submit",class:"btn button-default"},(0,ur.zw)(e.$t("login.login")),9,xr)])])],32)]),e.error?((0,lr.wg)(),(0,lr.iD)("div",Tr,[(0,lr._)("div",$r,[(0,lr.Uk)((0,ur.zw)(e.error)+" ",1),(0,lr._)("button",{class:"button-unstyled",onClick:t[3]||(t[3]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,lr.Wm)(a,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):(0,lr.kq)("",!0)])}]]);var Fr={class:"login panel panel-default"},Rr={class:"panel-heading"},Nr={class:"panel-body"},qr={class:"form-group"},Zr={for:"code"},Wr={class:"form-group"},Br={class:"login-bottom"},Hr=(0,lr._)("br",null,null,-1),Vr={type:"submit",class:"btn button-default"},Kr={key:0,class:"form-group"},Gr={class:"alert error"},Yr={verifyOTPCode:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o=e.mfaToken,i=e.code,s="".concat(r,"/oauth/mfa/challenge"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("mfa_token",o),a.append("code",i),a.append("challenge_type","totp"),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))},verifyRecoveryCode:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,o=e.mfaToken,i=e.code,s="".concat(r,"/oauth/mfa/challenge"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("mfa_token",o),a.append("code",i),a.append("challenge_type","recovery"),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))}};const Jr=Yr;function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC);const eo={data:function(){return{code:null,error:!1}},computed:Xr(Xr({},(0,s.Se)({authSettings:"authFlow/settings"})),(0,s.rn)({instance:"instance",oauth:"oauth"})),methods:Xr(Xr(Xr({},(0,s.OI)("authFlow",["requireTOTP","abortMFA"])),(0,s.nv)({login:"authFlow/login"})),{},{clearError:function(){this.error=!1},submit:function(){var e=this,t=this.oauth,n={clientId:t.clientId,clientSecret:t.clientSecret,instance:this.instance.server,mfaToken:this.authSettings.mfa_token,code:this.code};Jr.verifyRecoveryCode(n).then((function(t){if(t.error)return e.error=t.error,void(e.code=null);e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}})},to=(0,Lr.Z)(eo,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",Fr,[(0,lr._)("div",Rr,(0,ur.zw)(e.$t("login.heading.recovery")),1),(0,lr._)("div",Nr,[(0,lr._)("form",{class:"login-form",onSubmit:t[3]||(t[3]=(0,or.iM)((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[(0,lr._)("div",qr,[(0,lr._)("label",Zr,(0,ur.zw)(e.$t("login.recovery_code")),1),(0,lr.wy)((0,lr._)("input",{id:"code","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.code=t}),class:"form-control"},null,512),[[or.nr,e.code]])]),(0,lr._)("div",Wr,[(0,lr._)("div",Br,[(0,lr._)("div",null,[(0,lr._)("button",{class:"button-unstyled -link",type:"button",onClick:t[1]||(t[1]=(0,or.iM)((function(){return e.requireTOTP&&e.requireTOTP.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("login.enter_two_factor_code")),1),Hr,(0,lr._)("button",{class:"button-unstyled -link",type:"button",onClick:t[2]||(t[2]=(0,or.iM)((function(){return e.abortMFA&&e.abortMFA.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("general.cancel")),1)]),(0,lr._)("button",Vr,(0,ur.zw)(e.$t("general.verify")),1)])])],32)]),e.error?((0,lr.wg)(),(0,lr.iD)("div",Kr,[(0,lr._)("div",Gr,[(0,lr.Uk)((0,ur.zw)(e.error)+" ",1),(0,lr._)("button",{class:"button-unstyled",onClick:t[4]||(t[4]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,lr.Wm)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):(0,lr.kq)("",!0)])}]]);var no={class:"login panel panel-default"},ro={class:"panel-heading"},oo={class:"panel-body"},io={class:"form-group"},so={for:"code"},ao={class:"form-group"},co={class:"login-bottom"},lo=(0,lr._)("br",null,null,-1),uo={type:"submit",class:"btn button-default"},po={key:0,class:"form-group"},ho={class:"alert error"};function mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC);const go={data:function(){return{code:null,error:!1}},computed:fo(fo({},(0,s.Se)({authSettings:"authFlow/settings"})),(0,s.rn)({instance:"instance",oauth:"oauth"})),methods:fo(fo(fo({},(0,s.OI)("authFlow",["requireRecovery","abortMFA"])),(0,s.nv)({login:"authFlow/login"})),{},{clearError:function(){this.error=!1},submit:function(){var e=this,t=this.oauth,n={clientId:t.clientId,clientSecret:t.clientSecret,instance:this.instance.server,mfaToken:this.authSettings.mfa_token,code:this.code};Jr.verifyOTPCode(n).then((function(t){if(t.error)return e.error=t.error,void(e.code=null);e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}})},vo=(0,Lr.Z)(go,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",no,[(0,lr._)("div",ro,(0,ur.zw)(e.$t("login.heading.totp")),1),(0,lr._)("div",oo,[(0,lr._)("form",{class:"login-form",onSubmit:t[3]||(t[3]=(0,or.iM)((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[(0,lr._)("div",io,[(0,lr._)("label",so,(0,ur.zw)(e.$t("login.authentication_code")),1),(0,lr.wy)((0,lr._)("input",{id:"code","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.code=t}),class:"form-control"},null,512),[[or.nr,e.code]])]),(0,lr._)("div",ao,[(0,lr._)("div",co,[(0,lr._)("div",null,[(0,lr._)("button",{class:"button-unstyled -link",type:"button",onClick:t[1]||(t[1]=(0,or.iM)((function(){return e.requireRecovery&&e.requireRecovery.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("login.enter_recovery_code")),1),lo,(0,lr._)("button",{class:"button-unstyled -link",type:"button",onClick:t[2]||(t[2]=(0,or.iM)((function(){return e.abortMFA&&e.abortMFA.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("general.cancel")),1)]),(0,lr._)("button",uo,(0,ur.zw)(e.$t("general.verify")),1)])])],32)]),e.error?((0,lr.wg)(),(0,lr.iD)("div",po,[(0,lr._)("div",ho,[(0,lr.Uk)((0,ur.zw)(e.error)+" ",1),(0,lr._)("button",{class:"button-unstyled",onClick:t[4]||(t[4]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,lr.Wm)(s,{size:"lg",class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):(0,lr.kq)("",!0)])}]]);function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const bo={name:"AuthForm",render:function(){return(0,lr.h)((0,lr.up)(this.authForm))},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({authForm:function(){return this.requiredTOTP?"MFATOTPForm":this.requiredRecovery?"MFARecoveryForm":"LoginForm"}},(0,s.Se)("authFlow",["requiredTOTP","requiredRecovery"])),components:{MFARecoveryForm:to,MFATOTPForm:vo,LoginForm:Er}};var yo=n(33580),_o=n(27073);function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const So={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({signedIn:function(){return this.user}},(0,s.rn)({user:function(e){return e.users.currentUser}})),components:{AuthForm:bo,PostStatusForm:yo.Z,UserCard:_o.Z}},jo=(0,Lr.Z)(So,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserCard"),a=(0,lr.up)("PostStatusForm"),c=(0,lr.up)("auth-form");return(0,lr.wg)(),(0,lr.iD)("aside",gr,[e.signedIn?((0,lr.wg)(),(0,lr.iD)("div",vr,[(0,lr.Wm)(s,{"user-id":e.user.id,"hide-bio":!0,rounded:"top"},null,8,["user-id"]),(0,lr.Wm)(a)])):((0,lr.wg)(),(0,lr.j4)(c,{key:"user-panel"}))])}]]);var Oo={class:"NavPanel"},Co={class:"panel panel-default"},Po={key:0,class:"panel-heading nav-panel-heading"},zo=(0,lr._)("div",{class:"spacer"},null,-1),Io={key:1,class:"panel-body"},Do={class:"timelines-background"},xo={class:"timelines"},To={class:"timelines-background"},$o={key:0,class:"icon iconLetter fa-scale-110 menu-icon"},Uo={class:"label"},Mo={key:0,class:"badge badge-notification"},Ao=["title","aria-pressed"],Lo=new Set(["bookmarks","dms","interactions","notifications","chat","chats","user-profile"]),Eo={home:{route:"friends",icon:"home",label:"nav.home_timeline",criteria:["!private"]},public:{route:"public-timeline",anon:!0,icon:"users",label:"nav.public_tl",criteria:["!private"]},twkn:{route:"public-external-timeline",anon:!0,icon:"globe",label:"nav.twkn",criteria:["!private","federating"]},bookmarks:{route:"bookmarks",icon:"bookmark",label:"nav.bookmarks"},favorites:{routeObject:{name:"user-profile",query:{tab:"favorites"}},icon:"star",label:"user_card.favorites"},dms:{route:"dms",icon:"envelope",label:"nav.dms"}},Fo={interactions:{route:"interactions",icon:"bell",label:"nav.interactions"},chats:{route:"chats",icon:"comments",label:"nav.chats",badgeGetter:"unreadChatCount",criteria:["chats"]},friendRequests:{route:"friend-requests",icon:"user-plus",label:"nav.friend_requests",criteria:["lockedUser"],badgeGetter:"followRequestCount"},about:{route:"about",anon:!0,icon:"info-circle",label:"nav.about"},announcements:{route:"announcements",icon:"bullhorn",label:"nav.announcements",badgeGetter:"unreadAnnouncementCount",criteria:["announcements"]}};const Ro={props:["to"]},No=(0,Lr.Z)(Ro,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link");return n.to?((0,lr.wg)(),(0,lr.j4)(s,{key:0,to:n.to,custom:""},{default:(0,lr.w5)((function(t){return[(0,lr.WI)(e.$slots,"default",(0,ur.vs)((0,lr.F4)(t)))]})),_:3},8,["to"])):(0,lr.WI)(e.$slots,"default",(0,ur.vs)((0,lr.dG)({key:1},{})))}]]);function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Rt.vI.add(Nt.RP7);const Zo={props:["item","showPin"],components:{OptionalRouterLink:No},methods:{isPinned:function(e){return this.pinnedItems.has(e)},togglePin:function(e){this.isPinned(e)?this.$store.commit("removeCollectionPreference",{path:"collections.pinnedNavItems",value:e}):this.$store.commit("addCollectionPreference",{path:"collections.pinnedNavItems",value:e}),this.$store.dispatch("pushServerSideStorage")}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({routeTo:function(){return this.item.route||this.item.routeObject?(e=this.item.routeObject?this.item.routeObject:{name:this.item.anon||this.currentUser?this.item.route:this.item.anonRoute},Lo.has(e.name)&&(e.params={username:this.currentUser.screen_name,name:this.currentUser.screen_name}),e):null;var e},getters:function(){return this.$store.getters}},(0,s.rn)({currentUser:function(e){return e.users.currentUser},pinnedItems:function(e){return new Set(e.serverSideStorage.prefsStorage.collections.pinnedNavItems)}}))},Wo=(0,Lr.Z)(Zo,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("OptionalRouterLink");return(0,lr.wg)(),(0,lr.j4)(a,{ass:"ass",to:e.routeTo},{default:(0,lr.w5)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isActive,o=n.href,i=n.navigate;return[(0,lr._)("li",(0,lr.dG)({class:["NavigationEntry menu-item",{"-active":r}]},e.$attrs),[((0,lr.wg)(),(0,lr.j4)((0,lr.LL)(e.routeTo?"a":"button"),{class:"main-link button-unstyled",href:o,onClick:i},{default:(0,lr.w5)((function(){return[(0,lr._)("span",null,[e.item.icon?((0,lr.wg)(),(0,lr.j4)(s,{key:0,"fixed-width":"",class:"fa-scale-110 menu-icon",icon:e.item.icon},null,8,["icon"])):(0,lr.kq)("",!0)]),e.item.iconLetter?((0,lr.wg)(),(0,lr.iD)("span",$o,(0,ur.zw)(e.item.iconLetter),1)):(0,lr.kq)("",!0),(0,lr._)("span",Uo,(0,ur.zw)(e.item.labelRaw||e.$t(e.item.label)),1)]})),_:2},1032,["href","onClick"])),(0,lr.WI)(e.$slots,"default"),e.item.badgeGetter&&e.getters[e.item.badgeGetter]?((0,lr.wg)(),(0,lr.iD)("div",Mo,(0,ur.zw)(e.getters[e.item.badgeGetter]),1)):(0,lr.kq)("",!0),e.showPin&&e.currentUser?((0,lr.wg)(),(0,lr.iD)("button",{key:1,type:"button",class:"button-unstyled extra-button",title:e.$t(e.isPinned?"general.unpin":"general.pin"),"aria-pressed":!!e.isPinned,onClick:t[0]||(t[0]=(0,or.iM)((function(t){return e.togglePin(e.item.name)}),["stop","prevent"]))},[e.showPin&&e.currentUser?((0,lr.wg)(),(0,lr.j4)(s,{key:0,"fixed-width":"",class:(0,ur.C_)(["fa-scale-110",{veryfaint:!e.isPinned(e.item.name)}]),transform:e.isPinned(e.item.name)?"":"rotate-45",icon:"thumbtack"},null,8,["class","transform"])):(0,lr.kq)("",!0)],8,Ao)):(0,lr.kq)("",!0)],16)]})),_:3},8,["to"])}]]);var Bo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.hasChats,r=t.hasAnnouncements,o=t.isFederating,i=t.isPrivate,s=t.currentUser;return e.filter((function(e){var t=e.criteria,a=e.anon,c=e.anonRoute,l=new Set(t||[]);return!(!o&&l.has("federating")||!s&&i&&l.has("!private")||!(s||a||c)||!(s&&s.locked||!l.has("lockedUser"))||!n&&l.has("chats")||!r&&l.has("announcements"))}))},Ho=function(e){return e.lists.allLists.map((function(e){return{name:"list-"+e.id,routeObject:{name:"lists-timeline",params:{id:e.id}},labelRaw:e.title,iconLetter:e.title[0]}}))};function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ko={props:["showPin"],components:{NavigationEntry:Wo},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,s.rn)({lists:Ho,currentUser:function(e){return e.users.currentUser},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating}}))};const Go=Ko,Yo=(0,Lr.Z)(Go,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("NavigationEntry");return(0,lr.wg)(),(0,lr.iD)("ul",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.lists,(function(t){return(0,lr.wg)(),(0,lr.j4)(s,{key:t.name,"show-pin":e.showPin,item:t},null,8,["show-pin","item"])})),128))])}]]);var Jo={class:"NavigationPins"},Qo={key:1,class:"iconLetter fa-scale-110 fa-old-padding"},Xo={key:2,class:"alert-dot"};function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.FVb,Nt.g4A,Nt.xVw,Nt.FU$,Nt.lXL,Nt.qmU,Nt.sqG,Nt.aC2,Nt.Zrf);const ni={props:["limit"],methods:{getRouteTo:function(e){if(e.routeObject)return e.routeObject;var t={name:e.anon||this.currentUser?e.route:e.anonRoute};return Lo.has(t.name)&&(t.params={username:this.currentUser.screen_name}),t}},computed:ti(ti({getters:function(){return this.$store.getters}},(0,s.rn)({lists:Ho,currentUser:function(e){return e.users.currentUser},followRequestCount:function(e){return e.api.followRequests.length},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating},pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable},pinnedItems:function(e){return new Set(e.serverSideStorage.prefsStorage.collections.pinnedNavItems)}})),{},{pinnedList:function(){var e=this;return this.currentUser?Bo([].concat((0,u.Z)(Object.entries(ti({},Eo)).filter((function(t){var n=(0,l.Z)(t,1)[0];return e.pinnedItems.has(n)})).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return ti(ti({},t[1]),{},{name:n})}))),(0,u.Z)(this.lists.filter((function(t){return e.pinnedItems.has(t.name)}))),(0,u.Z)(Object.entries(ti({},Fo)).filter((function(t){var n=(0,l.Z)(t,1)[0];return e.pinnedItems.has(n)})).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return ti(ti({},t[1]),{},{name:n})})))),{hasChats:this.pleromaChatMessagesAvailable,isFederating:this.federating,isPrivate:this.privateMode,currentUser:this.currentUser}).slice(0,this.limit):Bo([ti(ti({},Eo.public),{},{name:"public"}),ti(ti({},Eo.twkn),{},{name:"twkn"}),ti(ti({},Fo.about),{},{name:"about"})],{hasChats:this.pleromaChatMessagesAvailable,isFederating:this.federating,isPrivate:this.privateMode,currentUser:this.currentUser})}})},ri=(0,Lr.Z)(ni,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("router-link");return(0,lr.wg)(),(0,lr.iD)("span",Jo,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.pinnedList,(function(t){return(0,lr.wg)(),(0,lr.j4)(a,{key:t.name,class:"pinned-item",to:e.getRouteTo(t),title:t.labelRaw||e.$t(t.label)},{default:(0,lr.w5)((function(){return[t.icon?((0,lr.wg)(),(0,lr.j4)(s,{key:0,"fixed-width":"",icon:t.icon},null,8,["icon"])):(0,lr.kq)("",!0),t.iconLetter?((0,lr.wg)(),(0,lr.iD)("span",Qo,(0,ur.zw)(t.iconLetter),1)):(0,lr.kq)("",!0),t.badgeGetter&&e.getters[t.badgeGetter]?((0,lr.wg)(),(0,lr.iD)("div",Xo)):(0,lr.kq)("",!0)]})),_:2},1032,["to","title"])})),128))])}]]);var oi=n(40151);function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.FVb,Nt.g4A,Nt.xVw,Nt.FU$,Nt.ptq,Nt.mTx,Nt.lXL,Nt.qmU,Nt.sqG,Nt.aC2,Nt.Zrf,Nt.Acd);const ai={props:["forceExpand","forceEditMode"],created:function(){},components:{ListsMenuContent:Yo,NavigationEntry:Wo,NavigationPins:ri,Checkbox:oi.Z},data:function(){return{editMode:!1,showTimelines:!1,showLists:!1,timelinesList:Object.entries(Eo).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return si(si({},t[1]),{},{name:n})})),rootList:Object.entries(Fo).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return si(si({},t[1]),{},{name:n})}))}},methods:{toggleTimelines:function(){this.showTimelines=!this.showTimelines},toggleLists:function(){this.showLists=!this.showLists},toggleEditMode:function(){this.editMode=!this.editMode},toggleCollapse:function(){this.$store.commit("setPreference",{path:"simple.collapseNav",value:!this.collapsed}),this.$store.dispatch("pushServerSideStorage")},isPinned:function(e){return this.pinnedItems.has(e)},togglePin:function(e){this.isPinned(e)?this.$store.commit("removeCollectionPreference",{path:"collections.pinnedNavItems",value:e}):this.$store.commit("addCollectionPreference",{path:"collections.pinnedNavItems",value:e}),this.$store.dispatch("pushServerSideStorage")}},computed:si(si({},(0,s.rn)({currentUser:function(e){return e.users.currentUser},followRequestCount:function(e){return e.api.followRequests.length},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating},pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable},supportsAnnouncements:function(e){return e.announcements.supportsAnnouncements},pinnedItems:function(e){return new Set(e.serverSideStorage.prefsStorage.collections.pinnedNavItems)},collapsed:function(e){return e.serverSideStorage.prefsStorage.simple.collapseNav}})),{},{timelinesItems:function(){return Bo(Object.entries(si({},Eo)).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return si(si({},t[1]),{},{name:n})})),{hasChats:this.pleromaChatMessagesAvailable,hasAnnouncements:this.supportsAnnouncements,isFederating:this.federating,isPrivate:this.privateMode,currentUser:this.currentUser})},rootItems:function(){return Bo(Object.entries(si({},Fo)).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return si(si({},t[1]),{},{name:n})})),{hasChats:this.pleromaChatMessagesAvailable,hasAnnouncements:this.supportsAnnouncements,isFederating:this.federating,isPrivate:this.privateMode,currentUser:this.currentUser})}},(0,s.Se)(["unreadChatCount","unreadAnnouncementCount"]))},ci=(0,Lr.Z)(ai,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("NavigationPins"),a=(0,lr.up)("FAIcon"),c=(0,lr.up)("NavigationEntry"),l=(0,lr.up)("router-link"),u=(0,lr.up)("ListsMenuContent");return(0,lr.wg)(),(0,lr.iD)("div",Oo,[(0,lr._)("div",Co,[e.forceExpand?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",Po,[(0,lr.Wm)(s,{limit:6}),zo,(0,lr._)("button",{class:"button-unstyled",onClick:t[0]||(t[0]=function(){return e.toggleCollapse&&e.toggleCollapse.apply(e,arguments)})},[(0,lr.Wm)(a,{class:"navigation-chevron","fixed-width":"",icon:e.collapsed?"chevron-down":"chevron-up"},null,8,["icon"])])])),!e.collapsed||e.forceExpand?((0,lr.wg)(),(0,lr.iD)("ul",Io,[e.currentUser||!e.privateMode?((0,lr.wg)(),(0,lr.j4)(c,{key:0,"show-pin":!1,item:{icon:"stream",label:"nav.timelines"},"aria-expanded":e.showTimelines?"true":"false",onClick:e.toggleTimelines},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{class:"timelines-chevron","fixed-width":"",icon:e.showTimelines?"chevron-up":"chevron-down"},null,8,["icon"])]})),_:1},8,["item","aria-expanded","onClick"])):(0,lr.kq)("",!0),(0,lr.wy)((0,lr._)("div",Do,[(0,lr._)("div",xo,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.timelinesItems,(function(t){return(0,lr.wg)(),(0,lr.j4)(c,{key:t.name,"show-pin":e.editMode||e.forceEditMode,item:t},null,8,["show-pin","item"])})),128))])],512),[[or.F8,e.showTimelines]]),e.currentUser?((0,lr.wg)(),(0,lr.j4)(c,{key:1,"show-pin":!1,item:{icon:"list",label:"nav.lists"},"aria-expanded":e.showLists?"true":"false",onClick:e.toggleLists},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(l,{title:e.$t("lists.manage_lists"),class:"extra-button",to:{name:"lists"},onClick:t[1]||(t[1]=(0,or.iM)((function(){}),["stop"]))},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{class:"extra-button","fixed-width":"",icon:"wrench"})]})),_:1},8,["title"]),(0,lr.Wm)(a,{class:"timelines-chevron","fixed-width":"",icon:e.showLists?"chevron-up":"chevron-down"},null,8,["icon"])]})),_:1},8,["item","aria-expanded","onClick"])):(0,lr.kq)("",!0),(0,lr.wy)((0,lr._)("div",To,[(0,lr.Wm)(u,{"show-pin":e.editMode||e.forceEditMode,class:"timelines"},null,8,["show-pin"])],512),[[or.F8,e.showLists]]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.rootItems,(function(t){return(0,lr.wg)(),(0,lr.j4)(c,{key:t.name,"show-pin":e.editMode||e.forceEditMode,item:t},null,8,["show-pin","item"])})),128)),!e.forceEditMode&&e.currentUser?((0,lr.wg)(),(0,lr.j4)(c,{key:2,"show-pin":!1,item:{label:e.editMode?e.$t("nav.edit_finish"):e.$t("nav.edit_pinned"),icon:e.editMode?"check":"wrench"},onClick:e.toggleEditMode},null,8,["item","onClick"])):(0,lr.kq)("",!0)])):(0,lr.kq)("",!0)])])}]]);var li={class:"instance-specific-panel"},ui={class:"panel panel-default"},di={class:"panel-body"},pi=["innerHTML"];const hi={computed:{instanceSpecificPanelContent:function(){return this.$store.state.instance.instanceSpecificPanelContent}}},mi=(0,Lr.Z)(hi,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("div",li,[(0,lr._)("div",ui,[(0,lr._)("div",di,[(0,lr._)("div",{innerHTML:e.instanceSpecificPanelContent},null,8,pi)])])])}]]);var fi={class:"features-panel"},gi={class:"panel panel-default base01-background"},vi={class:"panel-heading timeline-heading base02-background base04"},wi={class:"title"},bi={class:"panel-body features-panel"},yi={key:0},_i={key:1},ki={key:2},Si={key:3},ji={key:4},Oi=n(65079);const Ci={computed:{shout:function(){return this.$store.state.instance.shoutAvailable},pleromaChatMessages:function(){return this.$store.state.instance.pleromaChatMessagesAvailable},gopher:function(){return this.$store.state.instance.gopherAvailable},whoToFollow:function(){return this.$store.state.instance.suggestionsEnabled},mediaProxy:function(){return this.$store.state.instance.mediaProxyAvailable},minimalScopesMode:function(){return this.$store.state.instance.minimalScopesMode},textlimit:function(){return this.$store.state.instance.textlimit},uploadlimit:function(){return Oi.Z.fileSizeFormat(this.$store.state.instance.uploadlimit)}}},Pi=(0,Lr.Z)(Ci,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("div",fi,[(0,lr._)("div",gi,[(0,lr._)("div",vi,[(0,lr._)("div",wi,(0,ur.zw)(e.$t("features_panel.title")),1)]),(0,lr._)("div",bi,[(0,lr._)("ul",null,[e.shout?((0,lr.wg)(),(0,lr.iD)("li",yi,(0,ur.zw)(e.$t("features_panel.shout")),1)):(0,lr.kq)("",!0),e.pleromaChatMessages?((0,lr.wg)(),(0,lr.iD)("li",_i,(0,ur.zw)(e.$t("features_panel.pleroma_chat_messages")),1)):(0,lr.kq)("",!0),e.gopher?((0,lr.wg)(),(0,lr.iD)("li",ki,(0,ur.zw)(e.$t("features_panel.gopher")),1)):(0,lr.kq)("",!0),e.whoToFollow?((0,lr.wg)(),(0,lr.iD)("li",Si,(0,ur.zw)(e.$t("features_panel.who_to_follow")),1)):(0,lr.kq)("",!0),e.mediaProxy?((0,lr.wg)(),(0,lr.iD)("li",ji,(0,ur.zw)(e.$t("features_panel.media_proxy")),1)):(0,lr.kq)("",!0),(0,lr._)("li",null,(0,ur.zw)(e.$t("features_panel.scope_options")),1),(0,lr._)("li",null,(0,ur.zw)(e.$t("features_panel.text_limit"))+" = "+(0,ur.zw)(e.textlimit),1),(0,lr._)("li",null,(0,ur.zw)(e.$t("features_panel.upload_limit"))+" = "+(0,ur.zw)(e.uploadlimit.num)+" "+(0,ur.zw)(e.$t("upload.file_size_units."+e.uploadlimit.unit)),1)])])])])}]]);var zi={class:"who-to-follow-panel"},Ii={class:"panel panel-default base01-background"},Di={class:"panel-heading timeline-heading base02-background base04"},xi={class:"title"},Ti={class:"who-to-follow"},$i=["src"],Ui=(0,lr._)("br",null,null,-1),Mi={class:"who-to-follow-more"},Ai=n(69983),Li=n.n(Ai),Ei=n(4493);function Fi(e){var t=e.$store.state.users.currentUser.credentials;t&&(e.usersToFollow.forEach((function(e){e.name="Loading..."})),m.ZP.suggestions({credentials:t}).then((function(t){!function(e,t){var n=this,r=Li()(t);e.usersToFollow.forEach((function(t,o){var i=r[o],s=i.avatar||n.$store.state.instance.defaultAvatar,a=i.acct;t.img=s,t.name=a,e.$store.state.api.backendInteractor.fetchUser({id:a}).then((function(n){n.error||(e.$store.commit("addNewUsers",[n]),t.id=n.id)}))}))}(e,t)})))}const Ri={data:function(){return{usersToFollow:[]}},computed:{user:function(){return this.$store.state.users.currentUser.screen_name},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled}},methods:{userProfileLink:function(e,t){return(0,Ei.Z)(e,t,this.$store.state.instance.restrictedNicknames)}},watch:{user:function(e,t){this.suggestionsEnabled&&Fi(this)}},mounted:function(){var e=this;this.usersToFollow=new Array(3).fill().map((function(t){return{img:e.$store.state.instance.defaultAvatar,name:"",id:0}})),this.suggestionsEnabled&&Fi(this)}},Ni=(0,Lr.Z)(Ri,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link");return(0,lr.wg)(),(0,lr.iD)("div",zi,[(0,lr._)("div",Ii,[(0,lr._)("div",Di,[(0,lr._)("div",xi,(0,ur.zw)(e.$t("who_to_follow.who_to_follow")),1)]),(0,lr._)("div",Ti,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.usersToFollow,(function(t){return(0,lr.wg)(),(0,lr.iD)("p",{key:t.id,class:"who-to-follow-items"},[(0,lr._)("img",{src:t.img},null,8,$i),(0,lr.Wm)(s,{to:e.userProfileLink(t.id,t.name)},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(t.name),1)]})),_:2},1032,["to"]),Ui])})),128)),(0,lr._)("p",Mi,[(0,lr.Wm)(s,{to:{name:"who-to-follow"}},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("who_to_follow.more")),1)]})),_:1})])])])])}]]);var qi={key:0,class:"shout-panel"},Zi={class:"panel panel-default"},Wi={class:"title"},Bi={class:"shout-window"},Hi={class:"shout-avatar"},Vi=["src"],Ki={class:"shout-content"},Gi=(0,lr._)("br",null,null,-1),Yi={class:"shout-text"},Ji={class:"shout-input"},Qi={key:1,class:"shout-panel"},Xi={class:"panel panel-default"},es={class:"title"};Rt.vI.add(Nt.Acd,Nt.NBC);const ts={props:["floating"],data:function(){return{currentMessage:"",channel:null,collapsed:!0}},computed:{messages:function(){return this.$store.state.shout.messages}},methods:{submit:function(e){this.$store.state.shout.channel.push("new_msg",{text:e},1e4),this.currentMessage=""},togglePanel:function(){this.collapsed=!this.collapsed},userProfileLink:function(e){return(0,Ei.Z)(e.id,e.username,this.$store.state.instance.restrictedNicknames)}},watch:{messages:function(e){var t=this.$el.querySelector(".chat-window");t&&t.scrollTop+t.offsetHeight+20>t.scrollHeight&&this.$nextTick((function(){t&&(t.scrollTop=t.scrollHeight-t.offsetHeight)}))}}},ns=(0,Lr.Z)(ts,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("router-link");return e.collapsed&&e.floating?((0,lr.wg)(),(0,lr.iD)("div",Qi,[(0,lr._)("div",Xi,[(0,lr._)("div",{class:"panel-heading -stub timeline-heading shout-heading",onClick:t[3]||(t[3]=(0,or.iM)((function(){return e.togglePanel&&e.togglePanel.apply(e,arguments)}),["stop","prevent"]))},[(0,lr._)("div",es,[(0,lr.Wm)(s,{class:"icon",icon:"bullhorn"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("shoutbox.title")),1)])])])])):((0,lr.wg)(),(0,lr.iD)("div",qi,[(0,lr._)("div",Zi,[(0,lr._)("div",{class:(0,ur.C_)(["panel-heading timeline-heading",{"shout-heading":e.floating}]),onClick:t[0]||(t[0]=(0,or.iM)((function(){return e.togglePanel&&e.togglePanel.apply(e,arguments)}),["stop","prevent"]))},[(0,lr._)("div",Wi,[(0,lr.Uk)((0,ur.zw)(e.$t("shoutbox.title"))+" ",1),e.floating?((0,lr.wg)(),(0,lr.j4)(s,{key:0,icon:"times",class:"close-icon"})):(0,lr.kq)("",!0)])],2),(0,lr._)("div",Bi,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.messages,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.id,class:"shout-message"},[(0,lr._)("span",Hi,[(0,lr._)("img",{src:t.author.avatar},null,8,Vi)]),(0,lr._)("div",Ki,[(0,lr.Wm)(a,{class:"shout-name",to:e.userProfileLink(t.author)},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(t.author.username),1)]})),_:2},1032,["to"]),Gi,(0,lr._)("span",Yi,(0,ur.zw)(t.text),1)])])})),128))]),(0,lr._)("div",Ji,[(0,lr.wy)((0,lr._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentMessage=t}),class:"shout-input-textarea",rows:"1",onKeyup:t[2]||(t[2]=(0,or.D2)((function(t){return e.submit(e.currentMessage)}),["enter"]))},null,544),[[or.nr,e.currentMessage]])])])]))}]]);var rs=["src","alt","title"],os=["src","alt","title"],is=["title"],ss=["title"],as=["title"],cs={key:6,class:"description"},ls={class:"counter"},us={key:7,class:"loading-spinner"},ds=n(19236),ps=n(34133),hs=n(782);const ms={methods:{setTransform:function(e){var t=e.scale,n=e.x,r=e.y;this.$el.setTransform({scale:t,x:n,y:r})}},created:function(){hs.Z}},fs=(0,Lr.Z)(ms,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("pinch-zoom",(0,lr.dG)({class:"pinch-zoom-parent"},e.$attrs,(0,lr.mx)(e.$listeners,!0)),[(0,lr.WI)(e.$slots,"default")],16)}]]);var gs=n(15671),vs=n(43144),ws=function(e,t){return[t[0]-e[0],t[1]-e[1]]},bs=function(e){return[(t=e.touches[0]).screenX,t.screenY];var t},ys=function(e){return[e.clientX,e.clientY]},_s=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},ks=function(e){return[e[1],-e[0]]},Ss=function(e,t){return e[0]*t[0]+e[1]*t[1]},js=function(e,t){var n=Ss(e,t)/Ss(t,t);return[n*t[0],n*t[1]]};const Os={DIRECTION_LEFT:[-1,0],DIRECTION_RIGHT:[1,0],DIRECTION_UP:[0,-1],DIRECTION_DOWN:[0,1],swipeGesture:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{direction:e,onSwipe:t,threshold:n,perpendicularTolerance:r,_startPos:[0,0],_swiping:!1}},beginSwipe:function(e,t){t._startPos=bs(e),t._swiping=!0},updateSwipe:function(e,t){if(t._swiping){var n=ws(t._startPos,bs(e));if(!(_s(n)<t.threshold||Ss(n,t.direction)<0)){var r=js(n,t.direction),o=ks(t.direction),i=js(n,o);_s(r)*t.perpendicularTolerance<_s(i)||(t.onSwipe(),t._swiping=!1)}}},SwipeAndClickGesture:function(){function e(t){var n=t.direction,r=t.swipePreviewCallback,o=t.swipeEndCallback,i=t.swipeCancelCallback,s=t.swipelessClickCallback,a=t.threshold,c=void 0===a?30:a,l=t.perpendicularTolerance,u=void 0===l?1:l,d=t.disableClickThreshold,p=void 0===d?1:d;(0,gs.Z)(this,e);var h=function(){};this.direction=n,this.swipePreviewCallback=r||h,this.swipeEndCallback=o||h,this.swipeCancelCallback=i||h,this.swipelessClickCallback=s||h,this.threshold="function"==typeof c?c:function(){return c},this.disableClickThreshold="function"==typeof p?p:function(){return p},this.perpendicularTolerance=u,this._reset()}return(0,vs.Z)(e,[{key:"_reset",value:function(){this._startPos=[0,0],this._pointerId=-1,this._swiping=!1,this._swiped=!1,this._preventNextClick=!1}},{key:"start",value:function(e){0===e.button&&(this._startPos=ys(e),this._pointerId=e.pointerId,this._swiping=!0,this._swiped=!1)}},{key:"move",value:function(e){if(this._swiping&&this._pointerId===e.pointerId){this._swiped=!0;var t=ys(e),n=ws(this._startPos,t);this.swipePreviewCallback(n)}}},{key:"cancel",value:function(e){this._swiping&&this._pointerId===e.pointerId&&this.swipeCancelCallback()}},{key:"end",value:function(e){var t=this;if(this._swiping&&this._pointerId===e.pointerId){this._swiping=!1;var n=ys(e),r=ws(this._startPos,n),o=function(){if(_s(r)<t.threshold())return 0;var e=Ss(r,t.direction)>0,n=js(r,t.direction),o=ks(t.direction),i=js(r,o);return _s(n)*t.perpendicularTolerance<_s(i)?0:e?1:-1}();this._swiped&&this.swipeEndCallback(o),this._reset(),_s(r)>=this.disableClickThreshold()&&"mouse"===e.pointerType&&(this._preventNextClick=!0)}}},{key:"click",value:function(e){this._preventNextClick||this.swipelessClickCallback(),this._reset()}}]),e}()},Cs={props:{direction:{type:Array},threshold:{type:Function,default:function(){return 30}},perpendicularTolerance:{type:Number,default:1}},methods:{handlePointerDown:function(e){this.$gesture.start(e)},handlePointerMove:function(e){this.$gesture.move(e)},handlePointerUp:function(e){this.$gesture.end(e)},handlePointerCancel:function(e){this.$gesture.cancel(e)},handleNativeClick:function(e){this.$gesture.click(e)},preview:function(e){this.$emit("preview-requested",e)},end:function(e){this.$emit("swipe-finished",e)},click:function(){this.$emit("swipeless-clicked")},cancel:function(){this.$emit("swipe-canceled")}},created:function(){this.$gesture=new Os.SwipeAndClickGesture({direction:this.direction,threshold:this.threshold,perpendicularTolerance:this.perpendicularTolerance,swipePreviewCallback:this.preview,swipeEndCallback:this.end,swipeCancelCallback:this.cancel,swipelessClickCallback:this.click})}},Ps=(0,Lr.Z)(Cs,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("div",(0,lr.dG)(e.$attrs,{onPointerdown:t[0]||(t[0]=function(){return e.handlePointerDown&&e.handlePointerDown.apply(e,arguments)}),onPointermove:t[1]||(t[1]=function(){return e.handlePointerMove&&e.handlePointerMove.apply(e,arguments)}),onPointerup:t[2]||(t[2]=function(){return e.handlePointerUp&&e.handlePointerUp.apply(e,arguments)}),onPointercancel:t[3]||(t[3]=function(){return e.handlePointerCancel&&e.handlePointerCancel.apply(e,arguments)}),onClick:t[4]||(t[4]=function(){return e.handleNativeClick&&e.handleNativeClick.apply(e,arguments)})}),[(0,lr.WI)(e.$slots,"default")],16)}]]);var zs=n(12394);Rt.vI.add(Nt.A35,Nt._tD,Nt.IJ7,Nt.NBC);const Is={components:{StillImage:ds.Z,VideoAttachment:ps.Z,PinchZoom:fs,SwipeClick:Ps,Modal:Ft.Z,Flash:zs.Z},data:function(){return{loading:!1,swipeDirection:Os.DIRECTION_LEFT,swipeThreshold:function(){return window.innerWidth*(1/4)},pinchZoomMinScale:1,pinchZoomScaleResetLimit:1.2}},computed:{showing:function(){return this.$store.state.mediaViewer.activated},media:function(){return this.$store.state.mediaViewer.media},description:function(){return this.currentMedia.description},currentIndex:function(){return this.$store.state.mediaViewer.currentIndex},currentMedia:function(){return this.media[this.currentIndex]},canNavigate:function(){return this.media.length>1},type:function(){return this.currentMedia?this.getType(this.currentMedia):null}},methods:{getType:function(e){return hn.Z.fileType(e.mimetype)},hide:function(){var e=this;setTimeout((function(){e.$store.dispatch("closeMediaViewer")}),100)},hideIfNotSwiped:function(e){var t=this.$refs.swipeClick;t?t.$gesture.click(e):this.hide()},goPrev:function(){if(this.canNavigate){var e=0===this.currentIndex?this.media.length-1:this.currentIndex-1,t=this.media[e];"image"===this.getType(t)&&(this.loading=!0),this.$store.dispatch("setCurrentMedia",t)}},goNext:function(){if(this.canNavigate){var e=this.currentIndex===this.media.length-1?0:this.currentIndex+1,t=this.media[e];"image"===this.getType(t)&&(this.loading=!0),this.$store.dispatch("setCurrentMedia",t)}},onImageLoaded:function(){this.loading=!1},handleSwipePreview:function(e){this.$refs.pinchZoom.setTransform({scale:1,x:e[0],y:0})},handleSwipeEnd:function(e){this.$refs.pinchZoom.setTransform({scale:1,x:0,y:0}),e>0?this.goNext():e<0&&this.goPrev()},handleKeyupEvent:function(e){this.showing&&27===e.keyCode&&this.hide()},handleKeydownEvent:function(e){this.showing&&(39===e.keyCode?this.goNext():37===e.keyCode&&this.goPrev())}},mounted:function(){window.addEventListener("popstate",this.hide),document.addEventListener("keyup",this.handleKeyupEvent),document.addEventListener("keydown",this.handleKeydownEvent)},unmounted:function(){window.removeEventListener("popstate",this.hide),document.removeEventListener("keyup",this.handleKeyupEvent),document.removeEventListener("keydown",this.handleKeydownEvent)}},Ds=(0,Lr.Z)(Is,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("PinchZoom"),a=(0,lr.up)("SwipeClick"),c=(0,lr.up)("VideoAttachment"),l=(0,lr.up)("Flash"),u=(0,lr.up)("FAIcon"),d=(0,lr.up)("Modal");return e.showing?((0,lr.wg)(),(0,lr.j4)(d,{key:0,class:"media-modal-view",onBackdropClicked:e.hideIfNotSwiped},{default:(0,lr.w5)((function(){return["image"===e.type?((0,lr.wg)(),(0,lr.j4)(a,{key:0,ref:"swipeClick",class:"modal-image-container",direction:e.swipeDirection,threshold:e.swipeThreshold,onPreviewRequested:e.handleSwipePreview,onSwipeFinished:e.handleSwipeEnd,onSwipelessClicked:e.hide},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{ref:"pinchZoom",class:"modal-image-container-inner",selector:".modal-image","reach-min-scale-strategy":"reset","stop-propagate-handled":"stop-propgate-handled","allow-pan-min-scale":e.pinchZoomMinScale,"min-scale":e.pinchZoomMinScale,"reset-to-min-scale-limit":e.pinchZoomScaleResetLimit},{default:(0,lr.w5)((function(){return[(0,lr._)("img",{class:(0,ur.C_)([{loading:e.loading},"modal-image"]),src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description,onLoad:t[0]||(t[0]=function(){return e.onImageLoaded&&e.onImageLoaded.apply(e,arguments)})},null,42,rs)]})),_:1},8,["allow-pan-min-scale","min-scale","reset-to-min-scale-limit"])]})),_:1},8,["direction","threshold","onPreviewRequested","onSwipeFinished","onSwipelessClicked"])):(0,lr.kq)("",!0),"video"===e.type?((0,lr.wg)(),(0,lr.j4)(c,{key:1,class:"modal-image",attachment:e.currentMedia,controls:!0},null,8,["attachment"])):(0,lr.kq)("",!0),"audio"===e.type?((0,lr.wg)(),(0,lr.iD)("audio",{key:2,class:"modal-image",src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description,controls:""},null,8,os)):(0,lr.kq)("",!0),"flash"===e.type?((0,lr.wg)(),(0,lr.j4)(l,{key:3,class:"modal-image",src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description},null,8,["src","alt","title"])):(0,lr.kq)("",!0),e.canNavigate?((0,lr.wg)(),(0,lr.iD)("button",{key:4,title:e.$t("media_modal.previous"),class:"modal-view-button modal-view-button-arrow modal-view-button-arrow--prev",onClick:t[1]||(t[1]=(0,or.iM)((function(){return e.goPrev&&e.goPrev.apply(e,arguments)}),["stop","prevent"]))},[(0,lr.Wm)(u,{class:"button-icon arrow-icon",icon:"chevron-left"})],8,is)):(0,lr.kq)("",!0),e.canNavigate?((0,lr.wg)(),(0,lr.iD)("button",{key:5,title:e.$t("media_modal.next"),class:"modal-view-button modal-view-button-arrow modal-view-button-arrow--next",onClick:t[2]||(t[2]=(0,or.iM)((function(){return e.goNext&&e.goNext.apply(e,arguments)}),["stop","prevent"]))},[(0,lr.Wm)(u,{class:"button-icon arrow-icon",icon:"chevron-right"})],8,ss)):(0,lr.kq)("",!0),(0,lr._)("button",{class:"modal-view-button modal-view-button-hide",title:e.$t("media_modal.hide"),onClick:t[3]||(t[3]=(0,or.iM)((function(){return e.hide&&e.hide.apply(e,arguments)}),["stop","prevent"]))},[(0,lr.Wm)(u,{class:"button-icon",icon:"times"})],8,as),e.description?((0,lr.wg)(),(0,lr.iD)("span",cs,(0,ur.zw)(e.description),1)):(0,lr.kq)("",!0),(0,lr._)("span",ls,(0,ur.zw)(e.$tc("media_modal.counter",e.currentIndex+1,{current:e.currentIndex+1,total:e.media.length})),1),e.loading?((0,lr.wg)(),(0,lr.iD)("span",us,[(0,lr.Wm)(u,{spin:"",icon:"circle-notch",size:"5x"})])):(0,lr.kq)("",!0)]})),_:1},8,["onBackdropClicked"])):(0,lr.kq)("",!0)}]]);var xs={key:1,class:"side-drawer-logo-wrapper"},Ts=["src"],$s={key:0},Us={key:0,class:"badge badge-notification"},Ms={key:0},As={key:0,class:"badge badge-notification"},Ls={href:"/pleroma/admin/#/login-pleroma",target:"_blank"},Es={key:0,class:"badge badge-notification"};function Fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.$Wj,Nt.jLD,Nt.J9Y,Nt.lXL,Nt.qmU,Nt.FKd,Nt.Acd,Nt.wn1,Nt.HLz,Nt.b7W,Nt.sqG,Nt.GTN,Nt.Zrf);const Ns={props:["logout"],data:function(){return{closed:!0,closeGesture:void 0}},created:function(){this.closeGesture=Os.swipeGesture(Os.DIRECTION_LEFT,this.toggleDrawer),this.currentUser&&this.currentUser.locked&&this.$store.dispatch("startFetchingFollowRequests")},components:{UserCard:_o.Z},computed:Rs(Rs({currentUser:function(){return this.$store.state.users.currentUser},shout:function(){return this.$store.state.shout.joined},unseenNotifications:function(){return(0,K.Km)(this.$store)},unseenNotificationsCount:function(){return this.unseenNotifications.length},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled},logo:function(){return this.$store.state.instance.logo},hideSitename:function(){return this.$store.state.instance.hideSitename},sitename:function(){return this.$store.state.instance.name},followRequestCount:function(){return this.$store.state.api.followRequests.length},privateMode:function(){return this.$store.state.instance.private},federating:function(){return this.$store.state.instance.federating},timelinesRoute:function(){var e;return this.$store.state.interface.lastTimeline&&(e=this.$store.state.interface.lastTimeline),e=this.currentUser?"friends":"public-timeline",Lo.has(e)?{name:e,params:{username:this.currentUser.screen_name}}:{name:e}}},(0,s.rn)({pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable},supportsAnnouncements:function(e){return e.announcements.supportsAnnouncements}})),(0,s.Se)(["unreadChatCount","unreadAnnouncementCount"])),methods:{toggleDrawer:function(){this.closed=!this.closed},doLogout:function(){this.logout(),this.toggleDrawer()},touchStart:function(e){Os.beginSwipe(e,this.closeGesture)},touchMove:function(e){Os.updateSwipe(e,this.closeGesture)},openSettingsModal:function(){this.$store.dispatch("openSettingsModal")}}},qs=(0,Lr.Z)(Ns,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserCard"),a=(0,lr.up)("FAIcon"),c=(0,lr.up)("router-link");return(0,lr.wg)(),(0,lr.iD)("div",{class:(0,ur.C_)(["side-drawer-container",{"side-drawer-container-closed":e.closed,"side-drawer-container-open":!e.closed}])},[(0,lr._)("div",{class:(0,ur.C_)(["side-drawer-darken",{"side-drawer-darken-closed":e.closed}])},null,2),(0,lr._)("div",{class:(0,ur.C_)(["side-drawer",{"side-drawer-closed":e.closed}]),onTouchstart:t[18]||(t[18]=function(){return e.touchStart&&e.touchStart.apply(e,arguments)}),onTouchmove:t[19]||(t[19]=function(){return e.touchMove&&e.touchMove.apply(e,arguments)})},[(0,lr._)("div",{class:"side-drawer-heading",onClick:t[0]||(t[0]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[e.currentUser?((0,lr.wg)(),(0,lr.j4)(s,{key:0,"user-id":e.currentUser.id,"hide-bio":!0},null,8,["user-id"])):((0,lr.wg)(),(0,lr.iD)("div",xs,[(0,lr._)("img",{src:e.logo},null,8,Ts),e.hideSitename?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("span",$s,(0,ur.zw)(e.sitename),1))]))]),(0,lr._)("ul",null,[e.currentUser?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("li",{key:0,onClick:t[1]||(t[1]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"login"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-in-alt"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("login.login")),1)]})),_:1})])),e.currentUser||!e.privateMode?((0,lr.wg)(),(0,lr.iD)("li",{key:1,onClick:t[2]||(t[2]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:e.timelinesRoute},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"home"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.timelines")),1)]})),_:1},8,["to"])])):(0,lr.kq)("",!0),e.currentUser?((0,lr.wg)(),(0,lr.iD)("li",{key:2,onClick:t[3]||(t[3]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"lists"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"list"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.lists")),1)]})),_:1})])):(0,lr.kq)("",!0),e.currentUser&&e.pleromaChatMessagesAvailable?((0,lr.wg)(),(0,lr.iD)("li",{key:3,onClick:t[4]||(t[4]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"chats",params:{username:e.currentUser.screen_name}},style:{position:"relative"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"comments"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.chats"))+" ",1),e.unreadChatCount?((0,lr.wg)(),(0,lr.iD)("span",Us,(0,ur.zw)(e.unreadChatCount),1)):(0,lr.kq)("",!0)]})),_:1},8,["to"])])):(0,lr.kq)("",!0)]),e.currentUser?((0,lr.wg)(),(0,lr.iD)("ul",Ms,[(0,lr._)("li",{onClick:t[5]||(t[5]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"interactions",params:{username:e.currentUser.screen_name}}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bell"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.interactions")),1)]})),_:1},8,["to"])]),e.currentUser.locked?((0,lr.wg)(),(0,lr.iD)("li",{key:0,onClick:t[6]||(t[6]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:"/friend-requests"},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"user-plus"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.friend_requests"))+" ",1),e.followRequestCount>0?((0,lr.wg)(),(0,lr.iD)("span",As,(0,ur.zw)(e.followRequestCount),1)):(0,lr.kq)("",!0)]})),_:1})])):(0,lr.kq)("",!0),e.shout?((0,lr.wg)(),(0,lr.iD)("li",{key:1,onClick:t[7]||(t[7]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"shout-panel"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bullhorn"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("shoutbox.title")),1)]})),_:1})])):(0,lr.kq)("",!0)])):(0,lr.kq)("",!0),(0,lr._)("ul",null,[e.currentUser||!e.privateMode?((0,lr.wg)(),(0,lr.iD)("li",{key:0,onClick:t[8]||(t[8]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"search"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"search"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.search")),1)]})),_:1})])):(0,lr.kq)("",!0),e.currentUser&&e.suggestionsEnabled?((0,lr.wg)(),(0,lr.iD)("li",{key:1,onClick:t[9]||(t[9]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"who-to-follow"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"user-plus"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.who_to_follow")),1)]})),_:1})])):(0,lr.kq)("",!0),(0,lr._)("li",{onClick:t[11]||(t[11]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr._)("button",{class:"button-unstyled -link -fullwidth",onClick:t[10]||(t[10]=function(){return e.openSettingsModal&&e.openSettingsModal.apply(e,arguments)})},[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"cog"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("settings.settings")),1)])]),(0,lr._)("li",{onClick:t[12]||(t[12]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"about"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"info-circle"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.about")),1)]})),_:1})]),e.currentUser&&"admin"===e.currentUser.role?((0,lr.wg)(),(0,lr.iD)("li",{key:2,onClick:t[13]||(t[13]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr._)("a",Ls,[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"tachometer-alt"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.administration")),1)])])):(0,lr.kq)("",!0),e.currentUser&&e.supportsAnnouncements?((0,lr.wg)(),(0,lr.iD)("li",{key:3,onClick:t[14]||(t[14]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"announcements"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bullhorn"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.announcements"))+" ",1),e.unreadAnnouncementCount?((0,lr.wg)(),(0,lr.iD)("span",Es,(0,ur.zw)(e.unreadAnnouncementCount),1)):(0,lr.kq)("",!0)]})),_:1})])):(0,lr.kq)("",!0),e.currentUser?((0,lr.wg)(),(0,lr.iD)("li",{key:4,onClick:t[15]||(t[15]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr.Wm)(c,{to:{name:"edit-navigation"}},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"compass"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("nav.edit_nav_mobile")),1)]})),_:1})])):(0,lr.kq)("",!0),e.currentUser?((0,lr.wg)(),(0,lr.iD)("li",{key:5,onClick:t[17]||(t[17]=function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)})},[(0,lr._)("button",{class:"button-unstyled -link -fullwidth",onClick:t[16]||(t[16]=function(){return e.doLogout&&e.doLogout.apply(e,arguments)})},[(0,lr.Wm)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-out-alt"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("login.logout")),1)])])):(0,lr.kq)("",!0)])],34),(0,lr._)("div",{class:(0,ur.C_)(["side-drawer-click-outside",{"side-drawer-click-outside-closed":e.closed}]),onClick:t[20]||(t[20]=(0,or.iM)((function(){return e.toggleDrawer&&e.toggleDrawer.apply(e,arguments)}),["stop","prevent"]))},null,2)],2)}]]);var Zs=["title"],Ws=n(23279),Bs=n.n(Ws);Rt.vI.add(Nt.IwR);var Hs=new Set(["chats","chat","lists-edit"]);const Vs={data:function(){return{hidden:!1,scrollingDown:!1,inputActive:!1,oldScrollPos:0,amountScrolled:0}},created:function(){this.autohideFloatingPostButton&&this.activateFloatingPostButtonAutohide(),window.addEventListener("resize",this.handleOSK)},unmounted:function(){this.autohideFloatingPostButton&&this.deactivateFloatingPostButtonAutohide(),window.removeEventListener("resize",this.handleOSK)},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},isHidden:function(){return!!Hs.has(this.$route.name)||this.autohideFloatingPostButton&&(this.hidden||this.inputActive)},isPersistent:function(){return!!this.$store.getters.mergedConfig.alwaysShowNewPostButton},autohideFloatingPostButton:function(){return!!this.$store.getters.mergedConfig.autohideFloatingPostButton}},watch:{autohideFloatingPostButton:function(e){e?this.activateFloatingPostButtonAutohide():this.deactivateFloatingPostButtonAutohide()}},methods:{activateFloatingPostButtonAutohide:function(){window.addEventListener("scroll",this.handleScrollStart),window.addEventListener("scroll",this.handleScrollEnd)},deactivateFloatingPostButtonAutohide:function(){window.removeEventListener("scroll",this.handleScrollStart),window.removeEventListener("scroll",this.handleScrollEnd)},openPostForm:function(){this.$store.dispatch("openPostStatusModal")},handleOSK:function(){var e=window.innerWidth<350,t=e&&window.innerHeight<345,n=!e&&window.innerWidth<450&&window.innerHeight<560;this.inputActive=!(!t&&!n)},handleScrollStart:Bs()((function(){window.scrollY>this.oldScrollPos?this.hidden=!0:this.hidden=!1,this.oldScrollPos=window.scrollY}),100,{leading:!0,trailing:!1}),handleScrollEnd:Bs()((function(){this.hidden=!1,this.oldScrollPos=window.scrollY}),100,{leading:!1,trailing:!0})}},Ks=(0,Lr.Z)(Vs,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon");return e.isLoggedIn?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:(0,ur.C_)(["MobilePostButton button-default new-status-button",{hidden:e.isHidden,"always-show":e.isPersistent}]),title:e.$t("post_status.new_status"),onClick:t[0]||(t[0]=function(){return e.openPostForm&&e.openPostForm.apply(e,arguments)})},[(0,lr.Wm)(s,{icon:"pen"})],10,Zs)):(0,lr.kq)("",!0)}]]);var Gs={class:"MobileNav"},Ys={class:"item"},Js=["title","aria-expanaded"],Qs={key:0,class:"alert-dot"},Xs={class:"item right"},ea=["title"],ta={key:0,class:"alert-dot"},na={class:"mobile-notifications-header"},ra={class:"title"},oa=(0,lr._)("span",{class:"spacer"},null,-1),ia=["title"],sa=["title"],aa=n(2302);function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC,Nt.qmU,Nt.xiG,Nt.FPD,Nt.Kl4);const ua={components:{SideDrawer:qs,Notifications:aa.default,NavigationPins:ri},data:function(){return{notificationsCloseGesture:void 0,notificationsOpen:!1,notificationsAtTop:!0}},created:function(){var e=this;this.notificationsCloseGesture=Os.swipeGesture(Os.DIRECTION_RIGHT,(function(){return e.closeMobileNotifications(!0)}),50)},computed:la(la({currentUser:function(){return this.$store.state.users.currentUser},unseenNotifications:function(){return(0,K.Km)(this.$store)},unseenNotificationsCount:function(){return this.unseenNotifications.length},hideSitename:function(){return this.$store.state.instance.hideSitename},sitename:function(){return this.$store.state.instance.name},isChat:function(){return"chat"===this.$route.name}},(0,s.Se)(["unreadChatCount","unreadAnnouncementCount"])),{},{chatsPinned:function(){return new Set(this.$store.state.serverSideStorage.prefsStorage.collections.pinnedNavItems).has("chats")}}),methods:{toggleMobileSidebar:function(){this.$refs.sideDrawer.toggleDrawer()},openMobileNotifications:function(){this.notificationsOpen=!0},closeMobileNotifications:function(e){this.notificationsOpen&&(this.notificationsOpen=!1,e&&this.markNotificationsAsSeen())},notificationsTouchStart:function(e){Os.beginSwipe(e,this.notificationsCloseGesture)},notificationsTouchMove:function(e){Os.updateSwipe(e,this.notificationsCloseGesture)},scrollToTop:function(){window.scrollTo(0,0)},scrollMobileNotificationsToTop:function(){this.$refs.mobileNotifications.scrollTo(0,0)},logout:function(){this.$router.replace("/main/public"),this.$store.dispatch("logout")},markNotificationsAsSeen:function(){this.$store.dispatch("markNotificationsAsSeen")},onScroll:function(e){var t=e.target,n=t.scrollTop,r=t.clientHeight,o=t.scrollHeight;this.notificationsAtTop=n>0,n+r>=o&&this.$refs.notifications.fetchOlderNotifications()}},watch:{$route:function(){this.closeMobileNotifications()}}},da=(0,Lr.Z)(ua,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("NavigationPins"),c=(0,lr.up)("FALayers"),l=(0,lr.up)("SideDrawer");return(0,lr.wg)(),(0,lr.iD)("div",Gs,[(0,lr._)("nav",{id:"nav",class:"mobile-nav",onClick:t[2]||(t[2]=function(t){return e.scrollToTop()})},[(0,lr._)("div",Ys,[(0,lr._)("button",{class:"button-unstyled mobile-nav-button",title:e.$t("nav.mobile_sidebar"),"aria-expanaded":e.$refs.sideDrawer&&!e.$refs.sideDrawer.closed,onClick:t[0]||(t[0]=(0,or.iM)((function(t){return e.toggleMobileSidebar()}),["stop","prevent"]))},[(0,lr.Wm)(s,{class:"fa-scale-110 fa-old-padding",icon:"bars"}),e.unreadChatCount&&!e.chatsPinned||e.unreadAnnouncementCount?((0,lr.wg)(),(0,lr.iD)("div",Qs)):(0,lr.kq)("",!0)],8,Js),(0,lr.Wm)(a,{class:"pins"})]),(0,lr.Uk)(),(0,lr._)("div",Xs,[e.currentUser?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-unstyled mobile-nav-button",title:e.unseenNotificationsCount?e.$t("nav.mobile_notifications_unread_active"):e.$t("nav.mobile_notifications"),onClick:t[1]||(t[1]=(0,or.iM)((function(t){return e.openMobileNotifications()}),["stop","prevent"]))},[(0,lr.Wm)(s,{class:"fa-scale-110 fa-old-padding",icon:"bell"}),e.unseenNotificationsCount?((0,lr.wg)(),(0,lr.iD)("div",ta)):(0,lr.kq)("",!0)],8,ea)):(0,lr.kq)("",!0)])]),e.currentUser?((0,lr.wg)(),(0,lr.iD)("aside",{key:0,class:(0,ur.C_)(["mobile-notifications-drawer",{"-closed":!e.notificationsOpen}]),onTouchstart:t[6]||(t[6]=(0,or.iM)((function(){return e.notificationsTouchStart&&e.notificationsTouchStart.apply(e,arguments)}),["stop"])),onTouchmove:t[7]||(t[7]=(0,or.iM)((function(){return e.notificationsTouchMove&&e.notificationsTouchMove.apply(e,arguments)}),["stop"]))},[(0,lr._)("div",na,[(0,lr._)("span",ra,(0,ur.zw)(e.$t("notifications.notifications")),1),oa,e.notificationsAtTop?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-unstyled mobile-nav-button",title:e.$t("general.scroll_to_top"),onClick:t[3]||(t[3]=(0,or.iM)((function(){return e.scrollMobileNotificationsToTop&&e.scrollMobileNotificationsToTop.apply(e,arguments)}),["stop","prevent"]))},[(0,lr.Wm)(c,{class:"fa-scale-110 fa-old-padding-layer"},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{icon:"arrow-up"}),(0,lr.Wm)(s,{icon:"minus",transform:"up-7"})]})),_:1})],8,ia)):(0,lr.kq)("",!0),(0,lr._)("button",{class:"button-unstyled mobile-nav-button",title:e.$t("nav.mobile_notifications_close"),onClick:t[4]||(t[4]=(0,or.iM)((function(t){return e.closeMobileNotifications(!0)}),["stop","prevent"]))},[(0,lr.Wm)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})],8,sa)]),(0,lr._)("div",{id:"mobile-notifications",ref:"mobileNotifications",class:"mobile-notifications",onScroll:t[5]||(t[5]=function(){return e.onScroll&&e.onScroll.apply(e,arguments)})},null,544)],34)):(0,lr.kq)("",!0),(0,lr.Wm)(l,{ref:"sideDrawer",logout:e.logout},null,8,["logout"])])}]]);var pa={class:"inner-nav"},ha={class:"item sitename"},ma=["src"],fa={class:"item right actions"},ga=(0,lr._)("span",{class:"spacer"},null,-1),va=["title"],wa=["placeholder"],ba=(0,lr._)("span",{class:"spacer"},null,-1),ya=(0,lr._)("span",{class:"spacer"},null,-1);Rt.vI.add(Nt.NBC,Nt.wn1);const _a={data:function(){return{searchTerm:void 0,hidden:!0,error:!1}},watch:{$route:function(e){"search"===e.name&&(this.searchTerm=e.query.query)}},methods:{find:function(e){this.$router.push({name:"search",query:{query:e}}),this.$refs.searchInput.focus()},toggleHidden:function(){var e=this;this.hidden=!this.hidden,this.$emit("toggled",this.hidden),this.$nextTick((function(){e.hidden||e.$refs.searchInput.focus()}))}}},ka=(0,Lr.Z)(_a,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",{class:(0,ur.C_)(["SearchBar",{"-expanded":!e.hidden}])},[e.hidden?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-unstyled nav-icon",title:e.$t("nav.search"),type:"button",onClick:t[0]||(t[0]=(0,or.iM)((function(){return e.toggleHidden&&e.toggleHidden.apply(e,arguments)}),["prevent","stop"]))},[(0,lr.Wm)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"search"})],8,va)):((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:1},[(0,lr.wy)((0,lr._)("input",{id:"search-bar-input",ref:"searchInput","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchTerm=t}),class:"search-bar-input",placeholder:e.$t("nav.search"),type:"text",onKeyup:t[2]||(t[2]=(0,or.D2)((function(t){return e.find(e.searchTerm)}),["enter"]))},null,40,wa),[[or.nr,e.searchTerm]]),(0,lr._)("button",{class:"button-default search-button",type:"submit",onClick:t[3]||(t[3]=function(t){return e.find(e.searchTerm)})},[(0,lr.Wm)(s,{"fixed-width":"",icon:"search"})]),(0,lr._)("button",{class:"button-unstyled cancel-search",type:"button",onClick:t[4]||(t[4]=(0,or.iM)((function(){return e.toggleHidden&&e.toggleHidden.apply(e,arguments)}),["prevent","stop"]))},[(0,lr.Wm)(s,{"fixed-width":"",icon:"times",class:"cancel-icon fa-scale-110 fa-old-padding"})]),ba,ya],64))],2)}]]);Rt.vI.add(Nt.$Wj,Nt.jLD,Nt.J9Y,Nt.lXL,Nt.qmU,Nt.FKd,Nt.Acd,Nt.wn1,Nt.HLz,Nt.b7W,Nt.sqG);const Sa={components:{SearchBar:ka},data:function(){return{searchBarHidden:!0,supportsMask:window.CSS&&window.CSS.supports&&(window.CSS.supports("mask-size","contain")||window.CSS.supports("-webkit-mask-size","contain")||window.CSS.supports("-moz-mask-size","contain")||window.CSS.supports("-ms-mask-size","contain")||window.CSS.supports("-o-mask-size","contain"))}},computed:{enableMask:function(){return this.supportsMask&&this.$store.state.instance.logoMask},logoStyle:function(){return{visibility:this.enableMask?"hidden":"visible"}},logoMaskStyle:function(){return this.enableMask?{"mask-image":"url(".concat(this.$store.state.instance.logo,")")}:{"background-color":this.enableMask?"":"transparent"}},logoBgStyle:function(){return Object.assign({margin:"".concat(this.$store.state.instance.logoMargin," 0"),opacity:this.searchBarHidden?1:0},this.enableMask?{}:{"background-color":this.enableMask?"":"transparent"})},logo:function(){return this.$store.state.instance.logo},sitename:function(){return this.$store.state.instance.name},hideSitename:function(){return this.$store.state.instance.hideSitename},logoLeft:function(){return this.$store.state.instance.logoLeft},currentUser:function(){return this.$store.state.users.currentUser},privateMode:function(){return this.$store.state.instance.private}},methods:{scrollToTop:function(){window.scrollTo(0,0)},logout:function(){this.$router.replace("/main/public"),this.$store.dispatch("logout")},onSearchBarToggled:function(e){this.searchBarHidden=e},openSettingsModal:function(){this.$store.dispatch("openSettingsModal")}}},ja=(0,Lr.Z)(Sa,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link"),a=(0,lr.up)("search-bar"),c=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("nav",{id:"nav",class:(0,ur.C_)(["DesktopNav",{"-logoLeft":e.logoLeft}]),onClick:t[4]||(t[4]=function(t){return e.scrollToTop()})},[(0,lr._)("div",pa,[(0,lr._)("div",ha,[e.hideSitename?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(s,{key:0,class:"site-name",to:{name:"root"},"active-class":"home"},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.sitename),1)]})),_:1}))]),(0,lr.Wm)(s,{class:"logo",to:{name:"root"},style:(0,ur.j5)(e.logoBgStyle)},{default:(0,lr.w5)((function(){return[(0,lr._)("div",{class:"mask",style:(0,ur.j5)(e.logoMaskStyle)},null,4),(0,lr._)("img",{src:e.logo,style:(0,ur.j5)(e.logoStyle)},null,12,ma)]})),_:1},8,["style"]),(0,lr._)("div",fa,[e.currentUser||!e.privateMode?((0,lr.wg)(),(0,lr.j4)(a,{key:0,onToggled:e.onSearchBarToggled,onClick:t[0]||(t[0]=(0,or.iM)((function(){}),["stop"]))},null,8,["onToggled"])):(0,lr.kq)("",!0),(0,lr._)("button",{class:"button-unstyled nav-icon",onClick:t[1]||(t[1]=function(){return e.openSettingsModal&&e.openSettingsModal.apply(e,arguments)})},[(0,lr.Wm)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"cog",title:e.$t("nav.preferences")},null,8,["title"])]),e.currentUser&&"admin"===e.currentUser.role?((0,lr.wg)(),(0,lr.iD)("a",{key:1,href:"/pleroma/admin/#/login-pleroma",class:"nav-icon",target:"_blank",onClick:t[2]||(t[2]=(0,or.iM)((function(){}),["stop"]))},[(0,lr.Wm)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"tachometer-alt",title:e.$t("nav.administration")},null,8,["title"])])):(0,lr.kq)("",!0),ga,e.currentUser?((0,lr.wg)(),(0,lr.iD)("button",{key:2,class:"button-unstyled nav-icon",onClick:t[3]||(t[3]=(0,or.iM)((function(){return e.logout&&e.logout.apply(e,arguments)}),["prevent"]))},[(0,lr.Wm)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-out-alt",title:e.$t("login.logout")},null,8,["title"])])):(0,lr.kq)("",!0)])])],2)}]]);var Oa={class:"user-reporting-panel panel"},Ca={class:"panel-heading"},Pa={class:"panel-body"},za={class:"user-reporting-panel-left"},Ia=["placeholder"],Da={key:0},xa=["disabled"],Ta={key:0,class:"alert error"},$a={class:"user-reporting-panel-right"},Ua={class:"status-fadein user-reporting-panel-sitem"},Ma=n(87482),Aa=n(83293),La=n(12061);function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Fa={components:{Status:Ma.default,List:Aa.Z,Checkbox:oi.Z,Modal:Ft.Z,UserLink:La.Z},data:function(){return{comment:"",forward:!1,statusIdsToReport:[],processing:!1,error:!1}},computed:{reportModal:function(){return this.$store.state.reports.reportModal},isLoggedIn:function(){return!!this.$store.state.users.currentUser},isOpen:function(){return this.isLoggedIn&&this.reportModal.activated},userId:function(){return this.reportModal.userId},user:function(){return this.$store.getters.findUser(this.userId)},remoteInstance:function(){return!this.user.is_local&&this.user.screen_name.substr(this.user.screen_name.indexOf("@")+1)},statuses:function(){return this.reportModal.statuses},preTickedIds:function(){return this.reportModal.preTickedIds}},watch:{userId:"resetState",preTickedIds:function(e){this.statusIdsToReport=e}},methods:{resetState:function(){this.comment="",this.forward=!1,this.statusIdsToReport=this.preTickedIds,this.processing=!1,this.error=!1},closeModal:function(){this.$store.dispatch("closeUserReportingModal")},reportUser:function(){var e=this;this.processing=!0,this.error=!1;var t={userId:this.userId,comment:this.comment,forward:this.forward,statusIds:this.statusIdsToReport};this.$store.state.api.backendInteractor.reportUser(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)).then((function(){e.processing=!1,e.resetState(),e.closeModal()})).catch((function(){e.processing=!1,e.error=!0}))},clearError:function(){this.error=!1},isChecked:function(e){return-1!==this.statusIdsToReport.indexOf(e)},toggleStatus:function(e,t){e!==this.isChecked(t)&&(e?this.statusIdsToReport.push(t):this.statusIdsToReport.splice(this.statusIdsToReport.indexOf(t),1))},resize:function(e){var t=e.target||e;t instanceof window.Element&&(t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"),""===t.value&&(t.style.height=null))}}},Ra=(0,Lr.Z)(Fa,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserLink"),a=(0,lr.up)("i18n-t"),c=(0,lr.up)("Checkbox"),l=(0,lr.up)("Status"),u=(0,lr.up)("List"),d=(0,lr.up)("Modal");return e.isOpen?((0,lr.wg)(),(0,lr.j4)(d,{key:0,onBackdropClicked:e.closeModal},{default:(0,lr.w5)((function(){return[(0,lr._)("div",Oa,[(0,lr._)("div",Ca,[(0,lr.Wm)(a,{tag:"div",keypath:"user_reporting.title",class:"title"},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{user:e.user},null,8,["user"])]})),_:1})]),(0,lr._)("div",Pa,[(0,lr._)("div",za,[(0,lr._)("div",null,[(0,lr._)("p",null,(0,ur.zw)(e.$t("user_reporting.add_comment_description")),1),(0,lr.wy)((0,lr._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.comment=t}),class:"form-control",placeholder:e.$t("user_reporting.additional_comments"),rows:"1",onInput:t[1]||(t[1]=function(){return e.resize&&e.resize.apply(e,arguments)})},null,40,Ia),[[or.nr,e.comment]])]),e.user.is_local?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",Da,[(0,lr._)("p",null,(0,ur.zw)(e.$t("user_reporting.forward_description")),1),(0,lr.Wm)(c,{modelValue:e.forward,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.forward=t})},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("user_reporting.forward_to",[e.remoteInstance])),1)]})),_:1},8,["modelValue"])])),(0,lr._)("div",null,[(0,lr._)("button",{class:"btn button-default",disabled:e.processing,onClick:t[3]||(t[3]=function(){return e.reportUser&&e.reportUser.apply(e,arguments)})},(0,ur.zw)(e.$t("user_reporting.submit")),9,xa),e.error?((0,lr.wg)(),(0,lr.iD)("div",Ta,(0,ur.zw)(e.$t("user_reporting.generic_error")),1)):(0,lr.kq)("",!0)])]),(0,lr._)("div",$a,[(0,lr.Wm)(u,{items:e.statuses},{item:(0,lr.w5)((function(t){var n=t.item;return[(0,lr._)("div",Ua,[(0,lr.Wm)(l,{"in-conversation":!1,focused:!1,statusoid:n},null,8,["statusoid"]),(0,lr.Wm)(c,{"model-value":e.isChecked(n.id),"onUpdate:modelValue":function(t){return e.toggleStatus(t,n.id)}},null,8,["model-value","onUpdate:modelValue"])])]})),_:1},8,["items"])])])])]})),_:1},8,["onBackdropClicked"])):(0,lr.kq)("",!0)}]]);var Na={class:"edit-form-modal-panel panel"},qa={class:"panel-heading"},Za=n(7257);const Wa={components:{PostStatusForm:yo.Z,Modal:Ft.Z},data:function(){return{resettingForm:!1}},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},modalActivated:function(){return this.$store.state.editStatus.modalActivated},isFormVisible:function(){return this.isLoggedIn&&!this.resettingForm&&this.modalActivated},params:function(){return this.$store.state.editStatus.params||{}}},watch:{params:function(e,t){var n=this;xt()(e,"statusId")!==xt()(t,"statusId")&&(this.resettingForm=!0,this.$nextTick((function(){n.resettingForm=!1})))},isFormVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$el&&t.$el.querySelector("textarea").focus()}))}},methods:{doEditStatus:function(e){var t=e.status,n=e.spoilerText,r=e.sensitive,o=e.media,i=e.contentType,s=e.poll,a={store:this.$store,statusId:this.$store.state.editStatus.params.statusId,status:t,spoilerText:n,sensitive:r,poll:s,media:o,contentType:i};return Za.Z.editStatus(a).then((function(e){return e})).catch((function(e){return console.error("Error editing status",e),{error:e.message}}))},closeModal:function(){this.$store.dispatch("closeEditStatusModal")}}},Ba=(0,Lr.Z)(Wa,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("PostStatusForm"),a=(0,lr.up)("Modal");return e.isFormVisible?((0,lr.wg)(),(0,lr.j4)(a,{key:0,class:"edit-form-modal-view",onBackdropClicked:e.closeModal},{default:(0,lr.w5)((function(){return[(0,lr._)("div",Na,[(0,lr._)("div",qa,(0,ur.zw)(e.$t("post_status.edit_status")),1),(0,lr.Wm)(s,(0,lr.dG)({class:"panel-body"},e.params,{"post-handler":e.doEditStatus,"disable-polls":!0,"disable-visibility-selector":!0,onPosted:e.closeModal}),null,16,["post-handler","onPosted"])])]})),_:1},8,["onBackdropClicked"])):(0,lr.kq)("",!0)}]]);var Ha={class:"post-form-modal-panel panel"},Va={class:"panel-heading"};const Ka={components:{PostStatusForm:yo.Z,Modal:Ft.Z},data:function(){return{resettingForm:!1}},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},modalActivated:function(){return this.$store.state.postStatus.modalActivated},isFormVisible:function(){return this.isLoggedIn&&!this.resettingForm&&this.modalActivated},params:function(){return this.$store.state.postStatus.params||{}}},watch:{params:function(e,t){var n=this;xt()(e,"repliedUser.id")!==xt()(t,"repliedUser.id")&&(this.resettingForm=!0,this.$nextTick((function(){n.resettingForm=!1})))},isFormVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$el&&t.$el.querySelector("textarea").focus()}))}},methods:{closeModal:function(){this.$store.dispatch("closePostStatusModal")}}},Ga=(0,Lr.Z)(Ka,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("PostStatusForm"),a=(0,lr.up)("Modal");return e.isLoggedIn&&!e.resettingForm?((0,lr.wg)(),(0,lr.j4)(a,{key:0,"is-open":e.modalActivated,class:"post-form-modal-view",onBackdropClicked:e.closeModal},{default:(0,lr.w5)((function(){return[(0,lr._)("div",Ha,[(0,lr._)("div",Va,(0,ur.zw)(e.$t("post_status.new_status")),1),(0,lr.Wm)(s,(0,lr.dG)({class:"panel-body"},e.params,{onPosted:e.closeModal}),null,16,["onPosted"])])]})),_:1},8,["is-open","onBackdropClicked"])):(0,lr.kq)("",!0)}]]);var Ya={class:"status-history-modal-panel panel"},Ja={class:"panel-heading"},Qa={class:"panel-body"},Xa={key:0,class:"history-body"};const ec={components:{Modal:Ft.Z,Status:Ma.default},data:function(){return{statuses:[]}},computed:{modalActivated:function(){return this.$store.state.statusHistory.modalActivated},params:function(){return this.$store.state.statusHistory.params},statusId:function(){return this.params.id},historyCount:function(){return this.statuses.length},history:function(){return this.statuses}},watch:{params:function(e,t){var n=xt()(e,"id")!==xt()(t,"id");n&&this.resetHistory(),(n||xt()(e,"edited_at")!==xt()(t,"edited_at"))&&this.fetchStatusHistory()}},methods:{resetHistory:function(){this.statuses=[]},fetchStatusHistory:function(){var e=this;this.$store.dispatch("fetchStatusHistory",this.params).then((function(t){e.statuses=t}))},closeModal:function(){this.$store.dispatch("closeStatusHistoryModal")}}},tc=(0,Lr.Z)(ec,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("status"),a=(0,lr.up)("Modal");return e.modalActivated?((0,lr.wg)(),(0,lr.j4)(a,{key:0,class:"status-history-modal-view",onBackdropClicked:e.closeModal},{default:(0,lr.w5)((function(){return[(0,lr._)("div",Ya,[(0,lr._)("div",Ja,(0,ur.zw)(e.$t("status.status_history"))+" ("+(0,ur.zw)(e.historyCount)+") ",1),(0,lr._)("div",Qa,[e.historyCount>0?((0,lr.wg)(),(0,lr.iD)("div",Xa,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.history,(function(e){return(0,lr.wg)(),(0,lr.j4)(s,{key:e.id,statusoid:e,"is-preview":!0,class:"conversation-status status-fadein panel-body"},null,8,["statusoid"])})),128))])):(0,lr.kq)("",!0)])])]})),_:1},8,["onBackdropClicked"])):(0,lr.kq)("",!0)}]]);var nc={class:"global-notice-list"},rc={class:"notice-message"},oc=["onClick"];Rt.vI.add(Nt.NBC);const ic={computed:{notices:function(){return this.$store.state.interface.globalNotices}},methods:{closeNotice:function(e){this.$store.dispatch("removeGlobalNotice",e)}}},sc=(0,Lr.Z)(ic,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",nc,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.notices,(function(t,n){return(0,lr.wg)(),(0,lr.iD)("div",{key:n,class:(0,ur.C_)(["alert global-notice",(0,d.Z)({},"global-"+t.level,!0)])},[(0,lr._)("div",rc,(0,ur.zw)(e.$t(t.messageKey,t.messageArgs)),1),(0,lr._)("button",{class:"button-unstyled close-notice",onClick:function(n){return e.closeNotice(t)}},[(0,lr.Wm)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})],8,oc)],2)})),128))])}]]);function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const cc={name:"app",components:{UserPanel:jo,NavPanel:ci,Notifications:(0,lr.RC)((function(){return Promise.resolve().then(n.bind(n,2302))})),InstanceSpecificPanel:mi,FeaturesPanel:Pi,WhoToFollowPanel:Ni,ShoutPanel:ns,MediaModal:Ds,SideDrawer:qs,MobilePostStatusButton:Ks,MobileNav:da,DesktopNav:ja,SettingsModal:(0,lr.RC)((function(){return n.e(1325).then(n.bind(n,51325))})),UpdateNotification:(0,lr.RC)((function(){return n.e(6464).then(n.bind(n,16464))})),UserReportingModal:Ra,PostStatusModal:Ga,EditStatusModal:Ba,StatusHistoryModal:tc,GlobalNoticeList:sc},data:function(){return{mobileActivePanel:"timeline"}},created:function(){var e=this.$store.getters.mergedConfig.interfaceLanguage;this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e}),window.addEventListener("resize",this.updateMobileState)},unmounted:function(){window.removeEventListener("resize",this.updateMobileState)},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({classes:function(){return[{"-reverse":this.reverseLayout,"-no-sticky-headers":this.noSticky,"-has-new-post-button":this.newPostButtonShown},"-"+this.layoutType]},navClasses:function(){var e=this.$store.getters.mergedConfig.navbarColumnStretch;return["-"+this.layoutType].concat((0,u.Z)(e?["-column-stretch"]:[]))},currentUser:function(){return this.$store.state.users.currentUser},userBackground:function(){return this.currentUser.background_image},instanceBackground:function(){return this.mergedConfig.hideInstanceWallpaper?null:this.$store.state.instance.background},background:function(){return this.userBackground||this.instanceBackground},bgStyle:function(){if(this.background)return{"--body-background-image":"url(".concat(this.background,")")}},shout:function(){return this.$store.state.shout.joined},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled},showInstanceSpecificPanel:function(){return this.$store.state.instance.showInstanceSpecificPanel&&!this.$store.getters.mergedConfig.hideISP&&this.$store.state.instance.instanceSpecificPanelContent},isChats:function(){return"chat"===this.$route.name||"chats"===this.$route.name},isListEdit:function(){return"lists-edit"===this.$route.name},newPostButtonShown:function(){return!this.isChats&&!this.isListEdit&&(this.$store.getters.mergedConfig.alwaysShowNewPostButton||"mobile"===this.layoutType)},showFeaturesPanel:function(){return this.$store.state.instance.showFeaturesPanel},editingAvailable:function(){return this.$store.state.instance.editingAvailable},shoutboxPosition:function(){return this.$store.getters.mergedConfig.alwaysShowNewPostButton||!1},hideShoutbox:function(){return this.$store.getters.mergedConfig.hideShoutbox},layoutType:function(){return this.$store.state.interface.layoutType},privateMode:function(){return this.$store.state.instance.private},reverseLayout:function(){var e=this.$store.getters.mergedConfig,t=e.thirdColumnMode,n=e.sidebarRight;return"wide"!==this.layoutType||"notifications"===t?n:!n},noSticky:function(){return this.$store.getters.mergedConfig.disableStickyHeaders},showScrollbars:function(){return this.$store.getters.mergedConfig.showScrollbars}},(0,s.Se)(["mergedConfig"])),methods:{updateMobileState:function(){this.$store.dispatch("setLayoutWidth",Ue()),this.$store.dispatch("setLayoutHeight",Me())}}},lc=(0,Lr.Z)(cc,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("MobileNav"),a=(0,lr.up)("DesktopNav"),c=(0,lr.up)("Notifications"),l=(0,lr.up)("user-panel"),u=(0,lr.up)("nav-panel"),d=(0,lr.up)("instance-specific-panel"),p=(0,lr.up)("features-panel"),h=(0,lr.up)("who-to-follow-panel"),m=(0,lr.up)("router-link"),f=(0,lr.up)("router-view"),g=(0,lr.up)("MediaModal"),v=(0,lr.up)("shout-panel"),w=(0,lr.up)("MobilePostStatusButton"),b=(0,lr.up)("UserReportingModal"),y=(0,lr.up)("PostStatusModal"),_=(0,lr.up)("EditStatusModal"),k=(0,lr.up)("StatusHistoryModal"),S=(0,lr.up)("SettingsModal"),j=(0,lr.up)("UpdateNotification"),O=(0,lr.up)("GlobalNoticeList");return(0,lr.wg)(),(0,lr.iD)("div",{id:"app-loaded",style:(0,ur.j5)(e.bgStyle)},[dr,"mobile"===e.layoutType?((0,lr.wg)(),(0,lr.j4)(s,{key:0})):((0,lr.wg)(),(0,lr.j4)(a,{key:1,class:(0,ur.C_)(e.navClasses)},null,8,["class"])),e.currentUser?((0,lr.wg)(),(0,lr.j4)(c,{key:2})):(0,lr.kq)("",!0),(0,lr._)("div",{id:"content",class:(0,ur.C_)(["app-layout container",e.classes])},[pr,(0,lr._)("div",{id:"sidebar",class:(0,ur.C_)(["column -scrollable",{"-show-scrollbar":e.showScrollbars}])},[(0,lr.Wm)(l),"mobile"!==e.layoutType?((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:0},[(0,lr.Wm)(u),e.showInstanceSpecificPanel?((0,lr.wg)(),(0,lr.j4)(d,{key:0})):(0,lr.kq)("",!0),!e.currentUser&&e.showFeaturesPanel?((0,lr.wg)(),(0,lr.j4)(p,{key:1})):(0,lr.kq)("",!0),e.currentUser&&e.suggestionsEnabled?((0,lr.wg)(),(0,lr.j4)(h,{key:2})):(0,lr.kq)("",!0),hr],64)):(0,lr.kq)("",!0)],2),(0,lr._)("main",{id:"main-scroller",class:(0,ur.C_)(["column main",{"-full-height":e.isChats||e.isListEdit}])},[e.currentUser?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",mr,[(0,lr.Wm)(m,{to:{name:"login"},class:"panel-body"},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("login.hint")),1)]})),_:1})])),(0,lr.Wm)(f)],2),(0,lr._)("div",{id:"notifs-column",class:(0,ur.C_)(["column -scrollable",{"-show-scrollbar":e.showScrollbars}])},null,2)],2),(0,lr.Wm)(g),e.currentUser&&e.shout&&!e.hideShoutbox?((0,lr.wg)(),(0,lr.j4)(v,{key:3,floating:!0,class:(0,ur.C_)(["floating-shout mobile-hidden",{"-left":e.shoutboxPosition}])},null,8,["class"])):(0,lr.kq)("",!0),(0,lr.Wm)(w),(0,lr.Wm)(b),(0,lr.Wm)(y),e.editingAvailable?((0,lr.wg)(),(0,lr.j4)(_,{key:4})):(0,lr.kq)("",!0),e.editingAvailable?((0,lr.wg)(),(0,lr.j4)(k,{key:5})):(0,lr.kq)("",!0),(0,lr.Wm)(S),(0,lr.Wm)(j),fr,(0,lr.Wm)(O)],4)}]]);var uc={key:1,class:"rightside-button"},dc=["title"],pc={key:0,class:"rightside-button"},hc=["title"],mc={class:"alert-badge"},fc=["title"],gc={ref:"timeline",class:"timeline",role:"feed"},vc={key:0,class:"new-status-notification text-center faint"},wc={key:1,class:"new-status-notification text-center faint"},bc={class:"new-status-notification text-center"},yc={key:3,class:"new-status-notification text-center"},_c=n(24350),kc=n.n(_c),Sc=n(23493),jc=n.n(Sc),Oc={key:0,class:"panel-heading conversation-heading -sticky"},Cc={class:"title"},Pc={class:"conversation-body panel-body"},zc={key:0,class:"thread-body"},Ic={key:0,class:"conversation-dive-to-top-level-box"},Dc={key:1,class:"thread-ancestors"},xc={key:0,class:"thread-ancestor-dive-box"},Tc={class:"thread-ancestor-dive-box-inner"},$c={key:1,class:"thread-body"},Uc=n(66678),Mc=n.n(Uc),Ac={class:"thread-tree"},Lc={key:0,class:"thread-tree-replies"},Ec={key:1,class:"thread-tree-replies thread-tree-replies-hidden"};Rt.vI.add(Nt.Sbq,Nt.cLY);const Fc={components:{Status:Ma.default},name:"ThreadTree",props:{depth:Number,status:Object,inProfile:Boolean,conversation:Array,collapsable:Boolean,isExpanded:Boolean,pinnedStatusIdsObject:Object,profileUserId:String,focused:Function,highlight:String,getReplies:Function,setHighlight:Function,toggleExpanded:Function,simple:Boolean,toggleThreadDisplay:Function,threadDisplayStatus:Object,showThreadRecursively:Function,totalReplyCount:Object,totalReplyDepth:Object,statusContentProperties:Object,setStatusContentProperty:Function,toggleStatusContentProperty:Function,dive:Function},computed:{suspendable:function(){var e=!this.$refs.statusComponent||this.$refs.statusComponent.suspendable;return this.$refs.childComponent?e&&this.$refs.childComponent.every((function(e){return e.suspendable})):e},reverseLookupTable:function(){return this.conversation.reduce((function(e,t,n){return e[t.id]=n,e}),{})},currentReplies:function(){var e=this;return this.getReplies(this.status.id).map((function(t){var n=t.id;return e.statusById(n)}))},threadShowing:function(){return"showing"===this.threadDisplayStatus[this.status.id]},currentProp:function(){return this.statusContentProperties[this.status.id]}},methods:{statusById:function(e){return this.conversation[this.reverseLookupTable[e]]},collapseThread:function(){},showThread:function(){},showAllSubthreads:function(){},toggleCurrentProp:function(e){this.toggleStatusContentProperty(this.status.id,e)},setCurrentProp:function(e,t){this.setStatusContentProperty(this.status.id,e)}}},Rc=(0,Lr.Z)(Fc,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("status"),a=(0,lr.up)("thread-tree"),c=(0,lr.up)("FAIcon"),l=(0,lr.up)("i18n-t");return(0,lr.wg)(),(0,lr.iD)("article",Ac,[((0,lr.wg)(),(0,lr.j4)(s,{key:e.status.id,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:e.status,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[e.status.id],focused:e.focused(e.status.id),"in-conversation":e.isExpanded,highlight:e.highlight,replies:e.getReplies(e.status.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status conversation-status-treeview status-fadein panel-body","simple-tree":e.simple,"controlled-thread-display-status":e.threadDisplayStatus[e.status.id],"controlled-toggle-thread-display":function(){return e.toggleThreadDisplay(e.status.id)},"controlled-showing-tall":e.currentProp.showingTall,"controlled-expanding-subject":e.currentProp.expandingSubject,"controlled-showing-long-subject":e.currentProp.showingLongSubject,"controlled-replying":e.currentProp.replying,"controlled-media-playing":e.currentProp.mediaPlaying,"controlled-toggle-showing-tall":function(){return e.toggleCurrentProp("showingTall")},"controlled-toggle-expanding-subject":function(){return e.toggleCurrentProp("expandingSubject")},"controlled-toggle-showing-long-subject":function(){return e.toggleCurrentProp("showingLongSubject")},"controlled-toggle-replying":function(){return e.toggleCurrentProp("replying")},"controlled-set-media-playing":function(t){return e.setCurrentProp("mediaPlaying",t)},dive:e.dive?function(){return e.dive(e.status.id)}:void 0,onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","simple-tree","controlled-thread-display-status","controlled-toggle-thread-display","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-replying","controlled-media-playing","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","controlled-toggle-replying","controlled-set-media-playing","dive","onGoto","onToggleExpanded"])),e.currentReplies.length&&e.threadShowing?((0,lr.wg)(),(0,lr.iD)("div",Lc,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.currentReplies,(function(t){return(0,lr.wg)(),(0,lr.j4)(a,{key:t.id,ref_for:!0,ref:"childComponent",depth:e.depth+1,status:t,"in-profile":e.inProfile,conversation:e.conversation,collapsable:e.collapsable,"is-expanded":e.isExpanded,"pinned-status-ids-object":e.pinnedStatusIdsObject,"profile-user-id":e.profileUserId,focused:e.focused,"get-replies":e.getReplies,highlight:e.highlight,"set-highlight":e.setHighlight,"toggle-expanded":e.toggleExpanded,simple:e.simple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,dive:e.dive},null,8,["depth","status","in-profile","conversation","collapsable","is-expanded","pinned-status-ids-object","profile-user-id","focused","get-replies","highlight","set-highlight","toggle-expanded","simple","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","dive"])})),128))])):(0,lr.kq)("",!0),e.currentReplies.length&&!e.threadShowing?((0,lr.wg)(),(0,lr.iD)("div",Ec,[e.simple?((0,lr.wg)(),(0,lr.j4)(l,{key:0,scope:"global",tag:"button",keypath:"status.thread_follow_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:t[0]||(t[0]=(0,or.iM)((function(t){return e.dive(e.status.id)}),["prevent"]))},{icon:(0,lr.w5)((function(){return[(0,lr.Wm)(c,{icon:"angle-double-right"})]})),text:(0,lr.w5)((function(){return[(0,lr._)("span",null,(0,ur.zw)(e.$tc("status.thread_follow",e.totalReplyCount[e.status.id],{numStatus:e.totalReplyCount[e.status.id]})),1)]})),_:1})):((0,lr.wg)(),(0,lr.j4)(l,{key:1,scope:"global",tag:"button",keypath:"status.thread_show_full_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:t[1]||(t[1]=(0,or.iM)((function(t){return e.showThreadRecursively(e.status.id)}),["prevent"]))},{icon:(0,lr.w5)((function(){return[(0,lr.Wm)(c,{icon:"angle-double-down"})]})),text:(0,lr.w5)((function(){return[(0,lr._)("span",null,(0,ur.zw)(e.$tc("status.thread_show_full",e.totalReplyCount[e.status.id],{numStatus:e.totalReplyCount[e.status.id],depth:e.totalReplyDepth[e.status.id]})),1)]})),_:1}))])):(0,lr.kq)("",!0)])}]]);var Nc={class:"dropdown-menu"},qc={key:0},Zc={key:3,role:"separator",class:"dropdown-divider"},Wc=n(49874);function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.G_j,Nt.yGG,Nt.klh);const Vc={props:{conversation:Boolean},components:{Popover:Wc.default},methods:{setReplyVisibility:function(e){this.$store.dispatch("setOption",{name:"replyVisibility",value:e}),this.$store.dispatch("queueFlushAll")},openTab:function(e){this.$store.dispatch("openSettingsModalTab",e)}},computed:Hc(Hc({},(0,s.Se)(["mergedConfig"])),{},{loggedIn:function(){return!!this.$store.state.users.currentUser},replyVisibilitySelf:{get:function(){return"self"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("self")}},replyVisibilityFollowing:{get:function(){return"following"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("following")}},replyVisibilityAll:{get:function(){return"all"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("all")}},hideMedia:{get:function(){return this.mergedConfig.hideAttachments||this.mergedConfig.hideAttachmentsInConv},set:function(){var e=!this.hideMedia;this.$store.dispatch("setOption",{name:"hideAttachments",value:e}),this.$store.dispatch("setOption",{name:"hideAttachmentsInConv",value:e})}},hideMutedPosts:{get:function(){return this.mergedConfig.hideFilteredStatuses},set:function(){var e=!this.hideMutedPosts;this.$store.dispatch("setOption",{name:"hideFilteredStatuses",value:e})}},muteBotStatuses:{get:function(){return this.mergedConfig.muteBotStatuses},set:function(){var e=!this.muteBotStatuses;this.$store.dispatch("setOption",{name:"muteBotStatuses",value:e})}}})},Kc=(0,Lr.Z)(Vc,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("Popover");return(0,lr.wg)(),(0,lr.j4)(a,{trigger:"click",class:"QuickFilterSettings","bound-to":{x:"container"},"trigger-attrs":{title:e.$t("timeline.quick_filter_settings")}},{content:(0,lr.w5)((function(){return[(0,lr._)("div",Nc,[e.loggedIn?((0,lr.wg)(),(0,lr.iD)("div",qc,[e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-default dropdown-item",onClick:t[0]||(t[0]=function(t){return e.replyVisibilityAll=!0})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilityAll}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.reply_visibility_all")),1)])),e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("button",{key:1,class:"button-default dropdown-item",onClick:t[1]||(t[1]=function(t){return e.replyVisibilityFollowing=!0})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilityFollowing}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.reply_visibility_following_short")),1)])),e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("button",{key:2,class:"button-default dropdown-item",onClick:t[2]||(t[2]=function(t){return e.replyVisibilitySelf=!0})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilitySelf}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.reply_visibility_self_short")),1)])),e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",Zc))])):(0,lr.kq)("",!0),(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[3]||(t[3]=function(t){return e.muteBotStatuses=!e.muteBotStatuses})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.muteBotStatuses}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.mute_bot_posts")),1)]),(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=function(t){return e.hideMedia=!e.hideMedia})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hideMedia}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.hide_media_previews")),1)]),(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=function(t){return e.hideMutedPosts=!e.hideMutedPosts})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hideMutedPosts}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.hide_all_muted_posts")),1)]),(0,lr._)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[6]||(t[6]=function(t){return e.openTab("filtering")})},[(0,lr.Wm)(s,{icon:"font"}),(0,lr.Uk)((0,ur.zw)(e.$t("settings.word_filter_and_more")),1)])])]})),trigger:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{icon:"filter"})]})),_:1},8,["trigger-attrs"])}]]);var Gc={class:"dropdown-menu"},Yc=(0,lr._)("div",{role:"separator",class:"dropdown-divider"},null,-1);function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.Zrf,Nt.lCn,Nt.xiG,Nt.klh);const Xc={props:{conversation:Boolean},components:{Popover:Wc.default},methods:{setConversationDisplay:function(e){this.$store.dispatch("setOption",{name:"conversationDisplay",value:e})},openTab:function(e){this.$store.dispatch("openSettingsModalTab",e)}},computed:Qc(Qc({},(0,s.Se)(["mergedConfig"])),{},{loggedIn:function(){return!!this.$store.state.users.currentUser},conversationDisplay:{get:function(){return this.mergedConfig.conversationDisplay},set:function(e){this.setConversationDisplay(e)}},autoUpdate:{get:function(){return this.mergedConfig.streaming},set:function(){var e=!this.autoUpdate;this.$store.dispatch("setOption",{name:"streaming",value:e})}},collapseWithSubjects:{get:function(){return this.mergedConfig.collapseMessageWithSubject},set:function(){var e=!this.collapseWithSubjects;this.$store.dispatch("setOption",{name:"collapseMessageWithSubject",value:e})}},showUserAvatars:{get:function(){return this.mergedConfig.mentionLinkShowAvatar},set:function(){var e=!this.showUserAvatars;console.log(e),this.$store.dispatch("setOption",{name:"mentionLinkShowAvatar",value:e})}},muteBotStatuses:{get:function(){return this.mergedConfig.muteBotStatuses},set:function(){var e=!this.muteBotStatuses;this.$store.dispatch("setOption",{name:"muteBotStatuses",value:e})}}})},el=(0,Lr.Z)(Xc,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("Popover");return(0,lr.wg)(),(0,lr.j4)(a,{trigger:"click",class:"QuickViewSettings","bound-to":{x:"container"},"trigger-attrs":{title:e.$t("timeline.quick_view_settings")}},{content:(0,lr.w5)((function(){return[(0,lr._)("div",Gc,[(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=function(t){return e.conversationDisplay="tree"})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox -radio",{"menu-checkbox-checked":"tree"===e.conversationDisplay}])},null,2),(0,lr.Wm)(s,{icon:"folder-tree"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("settings.conversation_display_tree_quick")),1)]),(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=function(t){return e.conversationDisplay="linear"})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox -radio",{"menu-checkbox-checked":"linear"===e.conversationDisplay}])},null,2),(0,lr.Wm)(s,{icon:"list"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("settings.conversation_display_linear_quick")),1)]),Yc,(0,lr._)("button",{class:"button-default dropdown-item",onClick:t[2]||(t[2]=function(t){return e.showUserAvatars=!e.showUserAvatars})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.showUserAvatars}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.mention_link_show_avatar_quick")),1)]),e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-default dropdown-item",onClick:t[3]||(t[3]=function(t){return e.autoUpdate=!e.autoUpdate})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.autoUpdate}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.auto_update")),1)])),e.conversation?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("button",{key:1,class:"button-default dropdown-item",onClick:t[4]||(t[4]=function(t){return e.collapseWithSubjects=!e.collapseWithSubjects})},[(0,lr._)("span",{class:(0,ur.C_)(["menu-checkbox",{"menu-checkbox-checked":e.collapseWithSubjects}])},null,2),(0,lr.Uk)((0,ur.zw)(e.$t("settings.collapse_subject")),1)])),(0,lr._)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[5]||(t[5]=function(t){return e.openTab("general")})},[(0,lr.Wm)(s,{icon:"wrench"}),(0,lr.Uk)((0,ur.zw)(e.$t("settings.more_settings")),1)])])]})),trigger:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{icon:"bars"})]})),_:1},8,["trigger-attrs"])}]]);function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.Sbq,Nt.UXu,Nt.A35);var rl=function(e,t){var n="retweet"===e.type?e.retweeted_status.id:e.id,r="retweet"===t.type?t.retweeted_status.id:t.id,o=Number(n),i=Number(r),s=!Number.isNaN(o),a=!Number.isNaN(i);return s&&a?o<i?-1:1:s&&!a?-1:!s&&a?1:n<r?-1:1};const ol={data:function(){return{highlight:null,expanded:!1,threadDisplayStatusObject:{},statusContentPropertiesObject:{},inlineDivePosition:null}},props:["statusId","collapsable","isPage","pinnedStatusIdsObject","inProfile","profileUserId","virtualHidden"],created:function(){this.isPage&&this.fetchConversation()},computed:nl(nl({maxDepthToShowByDefault:function(){var e=this.$store.getters.mergedConfig.maxDepthInThread-2;return e>=1?e:1},streamingEnabled:function(){return this.mergedConfig.useStreamingApi&&this.mastoUserSocketStatus===m._z.JOINED},displayStyle:function(){return this.$store.getters.mergedConfig.conversationDisplay},isTreeView:function(){return!this.isLinearView},treeViewIsSimple:function(){return!this.$store.getters.mergedConfig.conversationTreeAdvanced},isLinearView:function(){return"linear"===this.displayStyle},shouldFadeAncestors:function(){return this.$store.getters.mergedConfig.conversationTreeFadeAncestors},otherRepliesButtonPosition:function(){return this.$store.getters.mergedConfig.conversationOtherRepliesButton},showOtherRepliesButtonBelowStatus:function(){return"below"===this.otherRepliesButtonPosition},showOtherRepliesButtonInsideStatus:function(){return"inside"===this.otherRepliesButtonPosition},suspendable:function(){return this.isTreeView?Object.entries(this.statusContentProperties).every((function(e){var t=(0,l.Z)(e,2),n=(t[0],t[1]);return!n.replying&&0===n.mediaPlaying.length})):!this.$refs.statusComponent||!this.$refs.statusComponent[0]||this.$refs.statusComponent.every((function(e){return e.suspendable}))},hideStatus:function(){return this.virtualHidden&&this.suspendable},status:function(){return this.$store.state.statuses.allStatusesObject[this.statusId]},originalStatusId:function(){return this.status.retweeted_status?this.status.retweeted_status.id:this.statusId},conversationId:function(){return this.getConversationId(this.statusId)},conversation:function(){if(!this.status)return[];if(!this.isExpanded)return[this.status];var e=Mc()(this.$store.state.statuses.conversationsObject[this.conversationId]),t=N()(e,{id:this.originalStatusId});return-1!==t&&(e[t]=this.status),function(e,t){return(e="retweet"===t.type?bn()(e,(function(e){return"retweet"===e.type||e.id!==t.retweeted_status.id})):bn()(e,(function(e){return"retweet"!==e.type}))).filter((function(e){return e})).sort(rl)}(e,this.status)},statusMap:function(){return this.conversation.reduce((function(e,t){return e[t.id]=t,e}),{})},threadTree:function(){var e=this,t=this.conversation.reduce((function(e,t,n){return e[t.id]=n,e}),{}),n=function n(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o.map((function(o){return s[o]?[]:(s[o]=!0,[{status:e.conversation[t[o]],id:o,depth:i},n(r,r[o],i+1,s)].reduce((function(e,t){return e.concat(t)}),[]))})).reduce((function(e,t){return e.concat(t)}),[])}(this.conversation.reduce((function(t,n){var r=n.id;return t.forest[r]=e.getReplies(r).map((function(e){return e.id})),t}),{forest:{}}).forest,this.topLevel.map((function(e){return e.id})));return n},replyIds:function(){var e=this;return this.conversation.map((function(e){return e.id})).reduce((function(t,n){return t[n]=(e.replies[n]||[]).map((function(e){return e.id})),t}),{})},totalReplyCount:function(){var e=this,t={};return this.conversation.map((function(e){return e.id})).map((function n(r){return t[r]||(t[r]=1+e.replyIds[r].map((function(e){return n(e)})).reduce((function(e,t){return e+t}),0)),t[r]})),Object.keys(t).reduce((function(e,n){return e[n]=t[n]-1,e}),{})},totalReplyDepth:function(){var e=this,t={};return this.conversation.map((function(e){return e.id})).map((function n(r){return t[r]||(t[r]=1+e.replyIds[r].map((function(e){return n(e)})).reduce((function(e,t){return e>t?e:t}),0)),t[r]})),Object.keys(t).reduce((function(e,n){return e[n]=t[n]-1,e}),{})},depths:function(){return this.threadTree.reduce((function(e,t){return e[t.id]=t.depth,e}),{})},topLevel:function(){var e=this;return this.conversation.reduce((function(t,n){return t.filter((function(t){return-1===e.getReplies(n.id).map((function(e){return e.id})).indexOf(t.id)}))}),this.conversation)},otherTopLevelCount:function(){return this.topLevel.length-1},showingTopLevel:function(){return this.canDive&&this.diveRoot?[this.statusMap[this.diveRoot]]:this.topLevel},diveRoot:function(){var e=this.inlineDivePosition||this.statusId;return this.parentOf(e)?e:null},diveDepth:function(){return this.canDive&&this.diveRoot?this.depths[this.diveRoot]:0},diveMode:function(){return this.canDive&&!!this.diveRoot},shouldShowAllConversationButton:function(){return this.isTreeView&&this.isExpanded&&this.diveMode&&this.topLevel.length>1},shouldShowAncestors:function(){return this.isTreeView&&this.isExpanded&&this.ancestorsOf(this.diveRoot).length},replies:function(){var e=1;return Le()(this.conversation,(function(t,n){var r=n.id,o=n.in_reply_to_status_id;return o&&(t[o]=t[o]||[],t[o].push({name:"#".concat(e),id:r})),e++,t}),{})},isExpanded:function(){return!(!this.expanded&&!this.isPage)},hiddenStyle:function(){var e=this.status&&this.status.virtualHeight||"120px";return this.virtualHidden?{height:e}:{}},threadDisplayStatus:function(){var e=this;return this.conversation.reduce((function(t,n){var r=n.id,o=e.depths[r],i=e.threadDisplayStatusObject[r]?e.threadDisplayStatusObject[r]:o-e.diveDepth<=e.maxDepthToShowByDefault?"showing":"hidden";return t[r]=i,t}),{})},statusContentProperties:function(){var e=this;return this.conversation.reduce((function(t,n){var r,o=n.id,i=(r={showingTall:!1,expandingSubject:!1,showingLongSubject:!1,isReplying:!1,mediaPlaying:[]},e.statusContentPropertiesObject[o]?nl(nl({},r),e.statusContentPropertiesObject[o]):r);return t[o]=i,t}),{})},canDive:function(){return this.isTreeView&&this.isExpanded},focused:function(){var e=this;return function(t){return e.isExpanded&&t===e.highlight}},maybeHighlight:function(){return this.isExpanded?this.highlight:null}},(0,s.Se)(["mergedConfig"])),(0,s.rn)({mastoUserSocketStatus:function(e){return e.api.mastoUserSocketStatus}})),components:{Status:Ma.default,ThreadTree:Rc,QuickFilterSettings:Kc,QuickViewSettings:el},watch:{statusId:function(e,t){var n=this.getConversationId(e),r=this.getConversationId(t);n&&r&&n===r?this.setHighlight(this.originalStatusId):this.fetchConversation()},expanded:function(e){e?this.fetchConversation():this.resetDisplayState()},virtualHidden:function(e){this.$store.dispatch("setVirtualHeight",{statusId:this.statusId,height:"".concat(this.$el.clientHeight,"px")})}},methods:{fetchConversation:function(){var e=this;this.status?this.$store.state.api.backendInteractor.fetchConversation({id:this.statusId}).then((function(t){var n=t.ancestors,r=t.descendants;e.$store.dispatch("addNewStatuses",{statuses:n}),e.$store.dispatch("addNewStatuses",{statuses:r}),e.setHighlight(e.originalStatusId)})):this.$store.state.api.backendInteractor.fetchStatus({id:this.statusId}).then((function(t){e.$store.dispatch("addNewStatuses",{statuses:[t]}),e.fetchConversation()}))},getReplies:function(e){return this.replies[e]||[]},getHighlight:function(){return this.isExpanded?this.highlight:null},setHighlight:function(e){e&&(this.highlight=e,this.streamingEnabled||this.$store.dispatch("fetchStatus",e),this.$store.dispatch("fetchFavsAndRepeats",e),this.$store.dispatch("fetchEmojiReactionsBy",e))},toggleExpanded:function(){this.expanded=!this.expanded},getConversationId:function(e){var t=this.$store.state.statuses.allStatusesObject[e];return xt()(t,"retweeted_status.statusnet_conversation_id",xt()(t,"statusnet_conversation_id"))},setThreadDisplay:function(e,t){this.threadDisplayStatusObject=nl(nl({},this.threadDisplayStatusObject),{},(0,d.Z)({},e,t))},toggleThreadDisplay:function(e){var t="showing"===this.threadDisplayStatus[e]?"hidden":"showing";this.setThreadDisplay(e,t)},setThreadDisplayRecursively:function(e,t){var n=this;this.setThreadDisplay(e,t),this.getReplies(e).map((function(e){return e.id})).map((function(e){return n.setThreadDisplayRecursively(e,t)}))},showThreadRecursively:function(e){this.setThreadDisplayRecursively(e,"showing")},setStatusContentProperty:function(e,t,n){this.statusContentPropertiesObject=nl(nl({},this.statusContentPropertiesObject),{},(0,d.Z)({},e,nl(nl({},this.statusContentPropertiesObject[e]),{},(0,d.Z)({},t,n))))},toggleStatusContentProperty:function(e,t){this.setStatusContentProperty(e,t,!this.statusContentProperties[e][t])},leastVisibleAncestor:function(e){for(var t=e,n=this.parentOf(t);t;){if("showing"===this.threadDisplayStatus[n])return t;n=this.parentOf(n),t=this.parentOf(t)}return this.topLevel[0]?this.topLevel[0].id:void 0},diveIntoStatus:function(e,t){this.tryScrollTo(e)},diveToTopLevel:function(){this.tryScrollTo(this.topLevelAncestorOrSelfId(this.diveRoot)||this.topLevel[0].id)},undive:function(){this.inlineDivePosition=null,this.setHighlight(this.statusId)},tryScrollTo:function(e){var t=this;e&&(this.isPage?this.$router.push({name:"conversation",params:{id:e}}):this.inlineDivePosition=e,this.$nextTick((function(){t.setHighlight(e)})))},goToCurrent:function(){this.tryScrollTo(this.diveRoot||this.topLevel[0].id)},statusById:function(e){return this.statusMap[e]},parentOf:function(e){var t=this.statusById(e);if(t){var n=t.in_reply_to_status_id;if(this.statusMap[n])return n}},parentOrSelf:function(e){return this.parentOf(e)||e},ancestorsOf:function(e){for(var t=[],n=this.parentOf(e);n;)t.unshift(this.statusMap[n]),n=this.parentOf(n);return t},topLevelAncestorOrSelfId:function(e){for(var t=e,n=this.parentOf(e);n;)t=this.parentOf(t),n=this.parentOf(n);return t},resetDisplayState:function(){this.undive(),this.threadDisplayStatusObject={}}}},il=(0,Lr.Z)(ol,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("QuickFilterSettings"),a=(0,lr.up)("QuickViewSettings"),c=(0,lr.up)("FAIcon"),l=(0,lr.up)("i18n-t"),u=(0,lr.up)("status"),d=(0,lr.up)("thread-tree");return e.hideStatus?((0,lr.wg)(),(0,lr.iD)("div",{key:1,style:(0,ur.j5)(e.hiddenStyle)},null,4)):((0,lr.wg)(),(0,lr.iD)("div",{key:0,style:(0,ur.j5)(e.hiddenStyle),class:(0,ur.C_)(["Conversation",{"-expanded":e.isExpanded,panel:e.isExpanded}])},[e.isExpanded?((0,lr.wg)(),(0,lr.iD)("div",Oc,[(0,lr._)("span",Cc,(0,ur.zw)(e.$t("timeline.conversation")),1),e.collapsable?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-unstyled -link",onClick:t[0]||(t[0]=(0,or.iM)((function(){return e.toggleExpanded&&e.toggleExpanded.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("timeline.collapse")),1)):(0,lr.kq)("",!0),e.collapsable?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(s,{key:1,conversation:!0,class:"rightside-button"})),e.collapsable?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(a,{key:2,conversation:!0,class:"rightside-button"}))])):(0,lr.kq)("",!0),(0,lr._)("div",Pc,[e.isTreeView?((0,lr.wg)(),(0,lr.iD)("div",zc,[e.shouldShowAllConversationButton?((0,lr.wg)(),(0,lr.iD)("div",Ic,[(0,lr.Wm)(l,{keypath:"status.show_all_conversation_with_icon",tag:"button",class:"button-unstyled -link",scope:"global",onClick:(0,or.iM)(e.diveToTopLevel,["prevent"])},{icon:(0,lr.w5)((function(){return[(0,lr.Wm)(c,{icon:"angle-double-left"})]})),text:(0,lr.w5)((function(){return[(0,lr._)("span",null,(0,ur.zw)(e.$tc("status.show_all_conversation",e.otherTopLevelCount,{numStatus:e.otherTopLevelCount})),1)]})),_:1},8,["onClick"])])):(0,lr.kq)("",!0),e.shouldShowAncestors?((0,lr.wg)(),(0,lr.iD)("div",Dc,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.ancestorsOf(e.diveRoot),(function(t){return(0,lr.wg)(),(0,lr.iD)("article",{key:t.id,class:(0,ur.C_)(["thread-ancestor",{"thread-ancestor-has-other-replies":e.getReplies(t.id).length>1,"-faded":e.shouldFadeAncestors}])},[(0,lr.Wm)(u,{ref_for:!0,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:t,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[t.id],focused:e.focused(t.id),"in-conversation":e.isExpanded,highlight:e.getHighlight(),replies:e.getReplies(t.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status status-fadein panel-body","simple-tree":e.treeViewIsSimple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"show-other-replies-as-button":e.showOtherRepliesButtonInsideStatus,dive:function(){return e.diveIntoStatus(t.id)},"controlled-showing-tall":e.statusContentProperties[t.id].showingTall,"controlled-expanding-subject":e.statusContentProperties[t.id].expandingSubject,"controlled-showing-long-subject":e.statusContentProperties[t.id].showingLongSubject,"controlled-replying":e.statusContentProperties[t.id].replying,"controlled-media-playing":e.statusContentProperties[t.id].mediaPlaying,"controlled-toggle-showing-tall":function(){return e.toggleStatusContentProperty(t.id,"showingTall")},"controlled-toggle-expanding-subject":function(){return e.toggleStatusContentProperty(t.id,"expandingSubject")},"controlled-toggle-showing-long-subject":function(){return e.toggleStatusContentProperty(t.id,"showingLongSubject")},"controlled-toggle-replying":function(){return e.toggleStatusContentProperty(t.id,"replying")},"controlled-set-media-playing":function(n){return e.toggleStatusContentProperty(t.id,"mediaPlaying",n)},onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","simple-tree","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","show-other-replies-as-button","dive","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-replying","controlled-media-playing","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","controlled-toggle-replying","controlled-set-media-playing","onGoto","onToggleExpanded"]),e.showOtherRepliesButtonBelowStatus&&e.getReplies(t.id).length>1?((0,lr.wg)(),(0,lr.iD)("div",xc,[(0,lr._)("div",Tc,[(0,lr.Wm)(l,{tag:"button",scope:"global",keypath:"status.ancestor_follow_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:(0,or.iM)((function(n){return e.diveIntoStatus(t.id)}),["prevent"])},{icon:(0,lr.w5)((function(){return[(0,lr.Wm)(c,{icon:"angle-double-right"})]})),text:(0,lr.w5)((function(){return[(0,lr._)("span",null,(0,ur.zw)(e.$tc("status.ancestor_follow",e.getReplies(t.id).length-1,{numReplies:e.getReplies(t.id).length-1})),1)]})),_:2},1032,["onClick"])])])):(0,lr.kq)("",!0)],2)})),128))])):(0,lr.kq)("",!0),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.showingTopLevel,(function(t){return(0,lr.wg)(),(0,lr.j4)(d,{key:t.id,ref_for:!0,ref:"statusComponent",depth:0,status:t,"in-profile":e.inProfile,conversation:e.conversation,collapsable:e.collapsable,"is-expanded":e.isExpanded,"pinned-status-ids-object":e.pinnedStatusIdsObject,"profile-user-id":e.profileUserId,focused:e.focused,"get-replies":e.getReplies,highlight:e.maybeHighlight,"set-highlight":e.setHighlight,"toggle-expanded":e.toggleExpanded,simple:e.treeViewIsSimple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,dive:e.canDive?e.diveIntoStatus:void 0},null,8,["status","in-profile","conversation","collapsable","is-expanded","pinned-status-ids-object","profile-user-id","focused","get-replies","highlight","set-highlight","toggle-expanded","simple","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","dive"])})),128))])):(0,lr.kq)("",!0),e.isLinearView?((0,lr.wg)(),(0,lr.iD)("div",$c,[(0,lr._)("article",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.conversation,(function(t){return(0,lr.wg)(),(0,lr.j4)(u,{key:t.id,ref_for:!0,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:t,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[t.id],focused:e.focused(t.id),"in-conversation":e.isExpanded,highlight:e.getHighlight(),replies:e.getReplies(t.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status status-fadein panel-body","toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","onGoto","onToggleExpanded"])})),128))])])):(0,lr.kq)("",!0)])],6))}]]);var sl={key:1},al={class:"button-unstyled title timeline-menu-title"},cl={class:"timeline-title"};function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.ptq);const dl={components:{Popover:Wc.default,NavigationEntry:Wo,ListsMenuContent:Ko},data:function(){return{isOpen:!1}},created:function(){({friends:"nav.home_timeline",bookmarks:"nav.bookmarks",dms:"nav.dms","public-timeline":"nav.public_tl","public-external-timeline":"nav.twkn"})[this.$route.name]&&this.$store.dispatch("setLastTimeline",this.$route.name)},computed:ul(ul({useListsMenu:function(){return"lists-timeline"===this.$route.name}},(0,s.rn)({currentUser:function(e){return e.users.currentUser},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating}})),{},{timelinesList:function(){return Bo(Object.entries(Eo).map((function(e){var t=(0,l.Z)(e,2),n=t[0];return ul(ul({},t[1]),{},{name:n})})),{hasChats:this.pleromaChatMessagesAvailable,isFederating:this.federating,isPrivate:this.privateMode,currentUser:this.currentUser})}}),methods:{openMenu:function(){var e=this;setTimeout((function(){e.isOpen=!0}),25)},blockOpen:function(e){this.isOpen||e.stopPropagation()},timelineName:function(){var e=this.$route.name;if("tag-timeline"===e)return"#"+this.$route.params.tag;if("lists-timeline"===e)return this.$store.getters.findListTitle(this.$route.params.id);var t={friends:"nav.home_timeline",bookmarks:"nav.bookmarks",dms:"nav.dms","public-timeline":"nav.public_tl","public-external-timeline":"nav.twkn"}[this.$route.name];return t?this.$t(t):e}}},pl=(0,Lr.Z)(dl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("ListsMenuContent"),a=(0,lr.up)("NavigationEntry"),c=(0,lr.up)("FAIcon"),l=(0,lr.up)("Popover");return(0,lr.wg)(),(0,lr.j4)(l,{trigger:"click",class:(0,ur.C_)(["TimelineMenu",{open:e.isOpen}]),"bound-to":{x:"container"},"bound-to-selector":".Timeline","popover-class":"timeline-menu-popover popover-default",onShow:e.openMenu,onClose:t[1]||(t[1]=function(){return e.isOpen=!1})},{content:(0,lr.w5)((function(){return[e.useListsMenu?((0,lr.wg)(),(0,lr.j4)(s,{key:0,"show-pin":!1,class:"timelines"})):((0,lr.wg)(),(0,lr.iD)("ul",sl,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.timelinesList,(function(e){return(0,lr.wg)(),(0,lr.j4)(a,{key:e.name,"show-pin":!1,item:e},null,8,["item"])})),128))]))]})),trigger:(0,lr.w5)((function(){return[(0,lr._)("span",al,[(0,lr._)("span",cl,(0,ur.zw)(e.timelineName()),1),(0,lr._)("span",null,[(0,lr.Wm)(c,{size:"sm",icon:"chevron-down"})]),(0,lr._)("span",{class:"click-blocker",onClick:t[0]||(t[0]=function(){return e.blockOpen&&e.blockOpen.apply(e,arguments)})})])]})),_:1},8,["class","onShow"])}]]);function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Rt.vI.add(Nt.IJ7,Nt.b7W,Nt.Kl4,Nt.FPD,Nt.EQ8,Nt.LEp);var ml={props:["timeline","timelineName","title","userId","listId","tag","embedded","count","pinnedStatusIds","inProfile","footerSlipgate"],data:function(){return{showScrollTop:!1,paused:!1,unfocused:!1,bottomedOut:!1,virtualScrollIndex:0,blockingClicks:!1}},components:{Status:Ma.default,Conversation:il,TimelineMenu:pl,QuickFilterSettings:Kc,QuickViewSettings:el},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({filteredVisibleStatuses:function(){var e=this;return this.timeline.visibleStatuses.filter((function(t){return"user"!==e.timelineName||t.id>=e.timeline.minId&&t.id<=e.timeline.maxId}))},filteredPinnedStatusIds:function(){var e=this;return(this.pinnedStatusIds||[]).filter((function(t){return e.timeline.statusesObject[t]}))},newStatusCount:function(){return this.timeline.newStatusCount},showLoadButton:function(){return this.timeline.newStatusCount>0||0!==this.timeline.flushMarker},loadButtonString:function(){return 0!==this.timeline.flushMarker?this.$t("timeline.reload"):"".concat(this.$t("timeline.show_new")," (").concat(this.newStatusCount,")")},mobileLoadButtonString:function(){return 0!==this.timeline.flushMarker?"+":this.newStatusCount>99?"∞":this.newStatusCount},classes:function(){var e=this.embedded?["-nonpanel"]:["panel","panel-default"];return this.blockingClicks&&(e=e.concat(["-blocked","_misclick-prevention"])),{root:e,header:["timeline-heading"].concat(this.embedded?[]:["panel-heading","-sticky"]),body:["timeline-body"].concat(this.embedded?[]:["panel-body"]),footer:["timeline-footer"].concat(this.embedded?[]:["panel-footer"])}},pinnedStatusIdsObject:function(){return kc()(this.pinnedStatusIds)},statusesToDisplay:function(){var e=this.timeline.visibleStatuses.length,t=Math.ceil(Math.max(3,window.innerHeight/80)),n=this.virtualScrollIndex-this.filteredPinnedStatusIds.length,r=Math.max(0,n-t),o=Math.min(e,n+t);return this.timeline.visibleStatuses.slice(r,o).map((function(e){return e.id}))},virtualScrollingEnabled:function(){return this.$store.getters.mergedConfig.virtualScrolling}},(0,s.rn)({mobileLayout:function(e){return"mobile"===e.interface.layoutType}})),created:function(){var e=this.$store,t=e.state.users.currentUser.credentials,n=0===this.timeline.visibleStatuses.length;if(window.addEventListener("scroll",this.handleScroll),e.state.api.fetchers[this.timelineName])return!1;Ce.fetchAndUpdate({store:e,credentials:t,timeline:this.timelineName,showImmediately:n,userId:this.userId,listId:this.listId,tag:this.tag})},mounted:function(){void 0!==document.hidden&&(document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.unfocused=document.hidden),window.addEventListener("keydown",this.handleShortKey),setTimeout(this.determineVisibleStatuses,250)},unmounted:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("keydown",this.handleShortKey),void 0!==document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$store.commit("setLoading",{timeline:this.timelineName,value:!1})},methods:{scrollToTop:function(){window.scrollTo({top:this.$el.offsetTop})},stopBlockingClicks:Bs()((function(){this.blockingClicks=!1}),1e3),blockClicksTemporarily:function(){this.blockingClicks||(this.blockingClicks=!0),this.stopBlockingClicks()},handleShortKey:function(e){["textarea","input"].includes(e.target.tagName.toLowerCase())||"."===e.key&&this.showNewStatuses()},showNewStatuses:function(){0!==this.timeline.flushMarker?(this.$store.commit("clearTimeline",{timeline:this.timelineName,excludeUserId:!0}),this.$store.commit("queueFlush",{timeline:this.timelineName,id:0}),this.fetchOlderStatuses()):(this.blockClicksTemporarily(),this.$store.commit("showNewStatuses",{timeline:this.timelineName}),this.paused=!1),window.scrollTo({top:0})},fetchOlderStatuses:jc()((function(){var e=this,t=this.$store,n=t.state.users.currentUser.credentials;t.commit("setLoading",{timeline:this.timelineName,value:!0}),Ce.fetchAndUpdate({store:t,credentials:n,timeline:this.timelineName,older:!0,showImmediately:!0,userId:this.userId,listId:this.listId,tag:this.tag}).then((function(t){var n=t.statuses;n&&0===n.length&&(e.bottomedOut=!0)})).finally((function(){return t.commit("setLoading",{timeline:e.timelineName,value:!1})}))}),1e3,void 0),determineVisibleStatuses:function(){if(this.$refs.timeline&&this.virtualScrollingEnabled){var e=this.$refs.timeline.children,t=Math.max(0,Math.min(this.virtualScrollIndex,e.length-1));if(0!==e.length){var n=Math.max(document.body.offsetHeight,window.pageYOffset),r=window.pageYOffset+.5*window.innerHeight,o=Math.floor(e.length*(r/n)),i=e[o].getBoundingClientRect().y,s=e[t].getBoundingClientRect().y;for(Math.abs(i)>s&&(o=t,i=s);i<-20&&o<e.length-1;)i+=e[o].offsetHeight,o++;for(;i>window.innerHeight+100&&o>0;)i-=e[--o].offsetHeight;this.virtualScrollIndex=o}}},scrollLoad:function(e){var t=document.body.getBoundingClientRect(),n=Math.max(t.height,-t.y);!1===this.timeline.loading&&this.$el.offsetHeight>0&&window.innerHeight+window.pageYOffset>=n-750&&this.fetchOlderStatuses()},handleScroll:jc()((function(e){this.showScrollTop=this.$el.offsetTop<window.scrollY,this.determineVisibleStatuses(),this.scrollLoad(e)}),200),handleVisibilityChange:function(){this.unfocused=document.hidden}},watch:{newStatusCount:function(e){if(this.$store.getters.mergedConfig.streaming&&e>0){var t=document.documentElement;!((window.pageYOffset||t.scrollTop)-(t.clientTop||0)<15)||this.paused||this.unfocused&&this.$store.getters.mergedConfig.pauseOnUnfocused?this.paused=!0:this.showNewStatuses()}}}};const fl=ml,gl=(0,Lr.Z)(fl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("TimelineMenu"),a=(0,lr.up)("FAIcon"),c=(0,lr.up)("FALayers"),l=(0,lr.up)("QuickFilterSettings"),u=(0,lr.up)("QuickViewSettings"),d=(0,lr.up)("conversation");return(0,lr.wg)(),(0,lr.iD)("div",{class:(0,ur.C_)(["Timeline",e.classes.root])},[(0,lr._)("div",{class:(0,ur.C_)(e.classes.header)},[e.embedded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(s,{key:0,"timeline-name":e.timelineName},null,8,["timeline-name"])),e.showScrollTop&&!e.embedded?((0,lr.wg)(),(0,lr.iD)("div",uc,[(0,lr._)("button",{class:"button-unstyled scroll-to-top-button",type:"button",title:e.$t("general.scroll_to_top"),onClick:t[0]||(t[0]=function(){return e.scrollToTop&&e.scrollToTop.apply(e,arguments)})},[(0,lr.Wm)(c,{class:"fa-scale-110 fa-old-padding-layer"},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{icon:"arrow-up"}),(0,lr.Wm)(a,{icon:"minus",transform:"up-7"})]})),_:1})],8,dc)])):(0,lr.kq)("",!0),e.mobileLayout&&!e.embedded?((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:2},[e.showLoadButton?((0,lr.wg)(),(0,lr.iD)("div",pc,[(0,lr._)("button",{class:"button-unstyled loadmore-button",title:e.loadButtonString,onClick:t[1]||(t[1]=(0,or.iM)((function(){return e.showNewStatuses&&e.showNewStatuses.apply(e,arguments)}),["prevent"]))},[(0,lr.Wm)(a,{"fixed-width":"",icon:"circle-plus"}),(0,lr._)("div",mc,(0,ur.zw)(e.mobileLoadButtonString),1)],8,hc)])):e.embedded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",{key:1,class:"loadmore-text faint veryfaint rightside-icon",title:e.$t("timeline.up_to_date"),"aria-disabled":!0,onClick:t[2]||(t[2]=(0,or.iM)((function(){}),["prevent"]))},[(0,lr.Wm)(a,{"fixed-width":"",icon:"check"})],8,fc))],64)):((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:3},[e.showLoadButton?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"button-default loadmore-button",onClick:t[3]||(t[3]=(0,or.iM)((function(){return e.showNewStatuses&&e.showNewStatuses.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.loadButtonString),1)):e.embedded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",{key:1,class:"loadmore-text faint",onClick:t[4]||(t[4]=(0,or.iM)((function(){}),["prevent"]))},(0,ur.zw)(e.$t("timeline.up_to_date")),1))],64)),e.embedded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(l,{key:4,class:"rightside-button"})),e.embedded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.j4)(u,{key:5,class:"rightside-button"}))],2),(0,lr._)("div",{class:(0,ur.C_)(e.classes.body)},[(0,lr._)("div",gc,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.filteredPinnedStatusIds,(function(t){return(0,lr.wg)(),(0,lr.j4)(d,{key:t+"-pinned",role:"listitem",class:"status-fadein","status-id":t,collapsable:!0,"pinned-status-ids-object":e.pinnedStatusIdsObject,"in-profile":e.inProfile,"profile-user-id":e.userId},null,8,["status-id","pinned-status-ids-object","in-profile","profile-user-id"])})),128)),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.filteredVisibleStatuses,(function(t){return(0,lr.wg)(),(0,lr.j4)(d,{key:t.id,role:"listitem",class:"status-fadein","status-id":t.id,collapsable:!0,"in-profile":e.inProfile,"profile-user-id":e.userId,"virtual-hidden":e.virtualScrollingEnabled&&!e.statusesToDisplay.includes(t.id)},null,8,["status-id","in-profile","profile-user-id","virtual-hidden"])})),128))],512)],2),(0,lr._)("div",{class:(0,ur.C_)(e.classes.footer)},[((0,lr.wg)(),(0,lr.j4)(lr.lR,{to:e.footerSlipgate,disabled:!e.embedded||!e.footerSlipgate},[0===e.count?((0,lr.wg)(),(0,lr.iD)("div",vc,(0,ur.zw)(e.$t("timeline.no_statuses")),1)):e.bottomedOut?((0,lr.wg)(),(0,lr.iD)("div",wc,(0,ur.zw)(e.$t("timeline.no_more_statuses")),1)):e.timeline.loading?((0,lr.wg)(),(0,lr.iD)("div",yc,[(0,lr.Wm)(a,{icon:"circle-notch",spin:"",size:"lg"})])):((0,lr.wg)(),(0,lr.iD)("button",{key:2,class:"button-unstyled -link",onClick:t[5]||(t[5]=(0,or.iM)((function(t){return e.fetchOlderStatuses()}),["prevent"]))},[(0,lr._)("div",bc,(0,ur.zw)(e.$t("timeline.load_older")),1)]))],8,["to","disabled"]))],2)],2)}]]),vl={components:{Timeline:gl},computed:{timeline:function(){return this.$store.state.statuses.timelines.public}},created:function(){this.$store.dispatch("startFetchingTimeline",{timeline:"public"})},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","public")}},wl=(0,Lr.Z)(vl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.$t("nav.public_tl"),timeline:e.timeline,"timeline-name":"public"},null,8,["title","timeline"])}]]),bl={components:{Timeline:gl},computed:{timeline:function(){return this.$store.state.statuses.timelines.publicAndExternal}},created:function(){this.$store.dispatch("startFetchingTimeline",{timeline:"publicAndExternal"})},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","publicAndExternal")}},yl=(0,Lr.Z)(bl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.$t("nav.twkn"),timeline:e.timeline,"timeline-name":"publicAndExternal"},null,8,["title","timeline"])}]]),_l={components:{Timeline:gl},computed:{timeline:function(){return this.$store.state.statuses.timelines.friends}}},kl=(0,Lr.Z)(_l,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.$t("nav.timeline"),timeline:e.timeline,"timeline-name":"friends"},null,8,["title","timeline"])}]]),Sl={created:function(){this.$store.commit("clearTimeline",{timeline:"tag"}),this.$store.dispatch("startFetchingTimeline",{timeline:"tag",tag:this.tag})},components:{Timeline:gl},computed:{tag:function(){return this.$route.params.tag},timeline:function(){return this.$store.state.statuses.timelines.tag}},watch:{tag:function(){this.$store.commit("clearTimeline",{timeline:"tag"}),this.$store.dispatch("startFetchingTimeline",{timeline:"tag",tag:this.tag})}},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","tag")}},jl=(0,Lr.Z)(Sl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.tag,timeline:e.timeline,"timeline-name":"tag",tag:e.tag},null,8,["title","timeline","tag"])}]]),Ol={computed:{timeline:function(){return this.$store.state.statuses.timelines.bookmarks}},components:{Timeline:gl},unmounted:function(){this.$store.commit("clearTimeline",{timeline:"bookmarks"})}},Cl=(0,Lr.Z)(Ol,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.$t("nav.bookmarks"),timeline:e.timeline,"timeline-name":"bookmarks"},null,8,["title","timeline"])}]]),Pl={components:{Conversation:il},computed:{statusId:function(){return this.$route.params.id}}},zl=(0,Lr.Z)(Pl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("conversation");return(0,lr.wg)(),(0,lr.j4)(s,{collapsable:!1,"is-page":"true","status-id":e.statusId},null,8,["status-id"])}]]);var Il={class:"panel panel-default"},Dl={class:"panel-heading"},xl={class:"title"},Tl=["label"],$l=["label"],Ul=["label"],Ml=["label"],Al=["label"],Ll=["label"],El=n(79354),Fl={mentions:["mention"],"likes+repeats":["repeat","like"],follows:["follow"],reactions:["pleroma:emoji_reaction"],reports:["pleroma:report"],moves:["move"]};const Rl={data:function(){return{allowFollowingMove:this.$store.state.users.currentUser.allow_following_move,filterMode:Fl.mentions,canSeeReports:this.$store.state.users.currentUser.privileges.includes("reports_manage_reports")}},methods:{onModeSwitch:function(e){this.filterMode=Fl[e]}},components:{Notifications:aa.default,TabSwitcher:El.Z}},Nl=(0,Lr.Z)(Rl,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("tab-switcher"),a=(0,lr.up)("Notifications");return(0,lr.wg)(),(0,lr.iD)("div",Il,[(0,lr._)("div",Dl,[(0,lr._)("div",xl,(0,ur.zw)(e.$t("nav.interactions")),1)]),(0,lr.Wm)(s,{ref:"tabSwitcher","on-switch":e.onModeSwitch},{default:(0,lr.w5)((function(){return[(0,lr._)("span",{key:"mentions",label:e.$t("nav.mentions")},null,8,Tl),(0,lr._)("span",{key:"likes+repeats",label:e.$t("interactions.favs_repeats")},null,8,$l),(0,lr._)("span",{key:"follows",label:e.$t("interactions.follows")},null,8,Ul),(0,lr._)("span",{key:"reactions",label:e.$t("interactions.emoji_reactions")},null,8,Ml),e.canSeeReports?((0,lr.wg)(),(0,lr.iD)("span",{key:"reports",label:e.$t("interactions.reports")},null,8,Al)):(0,lr.kq)("",!0),e.allowFollowingMove?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("span",{key:"moves",label:e.$t("interactions.moves")},null,8,Ll))]})),_:1},8,["on-switch"]),(0,lr.Wm)(a,{ref:"notifications","no-heading":!0,"minimal-mode":!0,"filter-mode":e.filterMode},null,8,["filter-mode"])])}]]),ql={computed:{timeline:function(){return this.$store.state.statuses.timelines.dms}},components:{Timeline:gl}},Zl=(0,Lr.Z)(ql,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:e.$t("nav.dms"),timeline:e.timeline,"timeline-name":"dms"},null,8,["title","timeline"])}]]);var Wl={key:0},Bl={key:1,class:"chat-list panel panel-default"},Hl={class:"panel-heading -sticky"},Vl={class:"title"},Kl={class:"panel-body"},Gl={key:0,class:"timeline"},Yl={key:1,class:"emtpy-chat-list-alert"},Jl={class:"chat-list-item-left"},Ql={class:"chat-list-item-center"},Xl={class:"heading"},eu={key:0,class:"name-and-account-name"},tu=(0,lr._)("span",{class:"heading-right"},null,-1),nu={class:"time-wrapper"},ru={class:"chat-preview"},ou={key:0,class:"badge badge-notification unread-chat-count"},iu=n(33288),su=n(62312),au=n(55432),cu=n(1840),lu=["title"],uu=n(92820);const du={name:"ChatTitle",components:{UserAvatar:su.default,RichContent:uu.Z,UserPopover:(0,lr.RC)((function(){return Promise.resolve().then(n.bind(n,78873))}))},props:["user","withAvatar"],computed:{title:function(){return this.user?this.user.screen_name_ui:""},htmlTitle:function(){return this.user?this.user.name_html:""}}},pu=(0,Lr.Z)(du,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserAvatar"),a=(0,lr.up)("UserPopover"),c=(0,lr.up)("RichContent");return(0,lr.wg)(),(0,lr.iD)("div",{class:"chat-title",title:e.title},[e.withAvatar&&e.user?((0,lr.wg)(),(0,lr.j4)(a,{key:0,class:"avatar-container","user-id":e.user.id},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{class:"titlebar-avatar",user:e.user},null,8,["user"])]})),_:1},8,["user-id"])):(0,lr.kq)("",!0),e.user?((0,lr.wg)(),(0,lr.j4)(c,{key:1,class:"username",title:"@"+(e.user&&e.user.screen_name_ui),html:e.htmlTitle,emoji:e.user.emoji||[]},null,8,["title","html","emoji"])):(0,lr.kq)("",!0)],8,lu)}]]);function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fu={name:"ChatListItem",props:["chat"],components:{UserAvatar:su.default,AvatarList:au.Z,Timeago:cu.Z,ChatTitle:pu,StatusBody:iu.Z},computed:mu(mu({},(0,s.rn)({currentUser:function(e){return e.users.currentUser}})),{},{attachmentInfo:function(){if(0!==this.chat.lastMessage.attachments.length){var e=this.chat.lastMessage.attachments.map((function(e){return hn.Z.fileType(e.mimetype)}));return e.includes("video")?this.$t("file_type.video"):e.includes("audio")?this.$t("file_type.audio"):e.includes("image")?this.$t("file_type.image"):this.$t("file_type.file")}},messageForStatusContent:function(){var e=this.chat.lastMessage,t=e?e.emojis:[],n=e&&e.account_id===this.currentUser.id,r=e?this.attachmentInfo||e.content:"",o=n?"<i>".concat(this.$t("chats.you"),"</i> ").concat(r):r;return{summary:"",emojis:t,raw_html:o,text:o,attachments:[]}}}),methods:{openChat:function(e){this.chat.id&&this.$router.push({name:"chat",params:{username:this.currentUser.screen_name,recipient_id:this.chat.account.id}})}}},gu=(0,Lr.Z)(fu,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserAvatar"),a=(0,lr.up)("ChatTitle"),c=(0,lr.up)("Timeago"),l=(0,lr.up)("StatusBody");return(0,lr.wg)(),(0,lr.iD)("div",{class:"chat-list-item",onClickCapture:t[0]||(t[0]=(0,or.iM)((function(){return e.openChat&&e.openChat.apply(e,arguments)}),["prevent"]))},[(0,lr._)("div",Jl,[(0,lr.Wm)(s,{user:e.chat.account,height:"48px",width:"48px"},null,8,["user"])]),(0,lr._)("div",Ql,[(0,lr._)("div",Xl,[e.chat.account?((0,lr.wg)(),(0,lr.iD)("span",eu,[(0,lr.Wm)(a,{user:e.chat.account},null,8,["user"])])):(0,lr.kq)("",!0),tu,(0,lr._)("div",nu,[(0,lr.Wm)(c,{time:e.chat.updated_at,"auto-update":60},null,8,["time"])])]),(0,lr._)("div",ru,[(0,lr.Wm)(l,{class:"chat-preview-body",status:e.messageForStatusContent,"single-line":!0},null,8,["status"]),e.chat.unread>0?((0,lr.wg)(),(0,lr.iD)("div",ou,(0,ur.zw)(e.chat.unread),1)):(0,lr.kq)("",!0)])])],32)}]]);var vu={class:"panel-default panel chat-new"},wu={ref:"header",class:"panel-heading"},bu={class:"input-wrap"},yu={class:"input-search"},_u={class:"member-list"},ku=["onClickCapture"],Su=n(85267);function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.wn1,Nt.A35);var Cu={components:{BasicUserCard:Su.Z,UserAvatar:su.default},data:function(){return{suggestions:[],userIds:[],loading:!1,query:""}},created:function(){var e=this;return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.backendInteractor.chats();case 2:t.sent.chats.forEach((function(t){return e.suggestions.push(t.account)}));case 5:case"end":return t.stop()}}),t)})))()},computed:Ou(Ou({users:function(){var e=this;return this.userIds.map((function(t){return e.findUser(t)}))},availableUsers:function(){return 0!==this.query.length?this.users:this.suggestions}},(0,s.rn)({currentUser:function(e){return e.users.currentUser},backendInteractor:function(e){return e.api.backendInteractor}})),(0,s.Se)(["findUser"])),methods:{goBack:function(){this.$emit("cancel")},goToChat:function(e){this.$router.push({name:"chat",params:{recipient_id:e.id}})},onInput:function(){this.search(this.query)},addUser:function(e){this.selectedUserIds.push(e.id),this.query=""},removeUser:function(e){this.selectedUserIds=this.selectedUserIds.filter((function(t){return t!==e}))},search:function(e){var t=this;e?(this.loading=!0,this.userIds=[],this.$store.dispatch("search",{q:e,resolve:!0,type:"accounts"}).then((function(e){t.loading=!1,t.userIds=e.accounts.map((function(e){return e.id}))}))):this.loading=!1}}};const Pu=Cu,zu=(0,Lr.Z)(Pu,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("BasicUserCard");return(0,lr.wg)(),(0,lr.iD)("div",vu,[(0,lr._)("div",wu,[(0,lr._)("button",{class:"button-unstyled go-back-button",onClick:t[0]||(t[0]=function(){return e.goBack&&e.goBack.apply(e,arguments)})},[(0,lr.Wm)(s,{size:"lg",icon:"chevron-left"})])],512),(0,lr._)("div",bu,[(0,lr._)("div",yu,[(0,lr.Wm)(s,{class:"search-icon fa-scale-110 fa-old-padding",icon:"search"})]),(0,lr.wy)((0,lr._)("input",{ref:"search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.query=t}),placeholder:"Search people",onInput:t[2]||(t[2]=function(){return e.onInput&&e.onInput.apply(e,arguments)})},null,544),[[or.nr,e.query]])]),(0,lr._)("div",_u,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.availableUsers,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.id,class:"member"},[(0,lr._)("div",{onClickCapture:(0,or.iM)((function(n){return e.goToChat(t)}),["prevent"])},[(0,lr.Wm)(a,{user:t},null,8,["user"])],40,ku)])})),128))])])}]]);function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const xu={components:{ChatListItem:gu,List:Aa.Z,ChatNew:zu},computed:Du(Du({},(0,s.rn)({currentUser:function(e){return e.users.currentUser}})),(0,s.Se)(["sortedChatList"])),data:function(){return{isNew:!1}},created:function(){this.$store.dispatch("fetchChats",{latest:!0})},methods:{cancelNewChat:function(){this.isNew=!1,this.$store.dispatch("fetchChats",{latest:!0})},newChat:function(){this.isNew=!0}}},Tu=(0,Lr.Z)(xu,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("ChatNew"),a=(0,lr.up)("ChatListItem"),c=(0,lr.up)("List");return e.isNew?((0,lr.wg)(),(0,lr.iD)("div",Wl,[(0,lr.Wm)(s,{onCancel:e.cancelNewChat},null,8,["onCancel"])])):((0,lr.wg)(),(0,lr.iD)("div",Bl,[(0,lr._)("div",Hl,[(0,lr._)("span",Vl,(0,ur.zw)(e.$t("chats.chats")),1),(0,lr._)("button",{class:"button-default",onClick:t[0]||(t[0]=function(){return e.newChat&&e.newChat.apply(e,arguments)})},(0,ur.zw)(e.$t("chats.new")),1)]),(0,lr._)("div",Kl,[e.sortedChatList.length>0?((0,lr.wg)(),(0,lr.iD)("div",Gl,[(0,lr.Wm)(c,{items:e.sortedChatList},{item:(0,lr.w5)((function(e){var t=e.item;return[((0,lr.wg)(),(0,lr.j4)(a,{key:t.id,compact:!1,chat:t},null,8,["chat"]))]})),_:1},8,["items"])])):((0,lr.wg)(),(0,lr.iD)("div",Yl,[(0,lr._)("span",null,(0,ur.zw)(e.$t("chats.empty_chat_list_placeholder")),1)]))])]))}]]);var $u={class:"chat-view"},Uu={class:"chat-view-inner"},Mu={ref:"inner",class:"panel-default panel chat-view-body"},Au={ref:"header",class:"panel-heading -sticky chat-view-heading"},Lu={class:"title text-center"},Eu={key:1,class:"chat-loading-error"},Fu={class:"alert error"},Ru={ref:"footer",class:"panel-body footer"},Nu={key:0,class:"badge badge-notification unread-chat-count unread-message-count"},qu={key:0,class:"avatar-wrapper"},Zu={class:"chat-message-inner"},Wu={class:"dropdown-menu"},Bu=["title"],Hu={class:"created-at"},Vu={key:1,class:"chat-message-date-separator"},Ku=n(74722),Gu=n(99822),Yu=n(87887),Ju=n(39776);const Qu={name:"Timeago",props:["date"],computed:{displayDate:function(){var e=new Date;return e.setHours(0,0,0,0),this.date.getTime()===e.getTime()?this.$t("display_date.today"):this.date.toLocaleDateString(Ju.Z.internalToBrowserLocale(this.$i18n.locale),{day:"numeric",month:"long"})}}},Xu=(0,Lr.Z)(Qu,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("time",null,(0,ur.zw)(i.displayDate),1)}]]);function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC,Nt.cNd);const nd={name:"ChatMessage",props:["author","edited","noHeading","chatViewItem","hoveredMessageChain"],emits:["hover"],components:{Popover:Wc.default,Attachment:Ku.Z,StatusContent:iu.Z,UserAvatar:su.default,Gallery:Gu.Z,LinkPreview:Yu.Z,ChatMessageDate:Xu,UserPopover:(0,lr.RC)((function(){return Promise.resolve().then(n.bind(n,78873))}))},computed:td(td({createdAt:function(){return this.chatViewItem.data.created_at.toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",hour12:!1})},isCurrentUser:function(){return this.message.account_id===this.currentUser.id},message:function(){return this.chatViewItem.data},isMessage:function(){return"message"===this.chatViewItem.type},messageForStatusContent:function(){return{summary:"",emojis:this.message.emojis,raw_html:this.message.content||"",text:this.message.content||"",attachments:this.message.attachments}},hasAttachment:function(){return this.message.attachments.length>0}},(0,s.rn)({betterShadow:function(e){return e.interface.browserSupport.cssFilter},currentUser:function(e){return e.users.currentUser},restrictedNicknames:function(e){return e.instance.restrictedNicknames}})),{},{popoverMarginStyle:function(){return this.isCurrentUser?{}:{left:50}}},(0,s.Se)(["mergedConfig","findUser"])),data:function(){return{hovered:!1,menuOpened:!1}},methods:{onHover:function(e){this.$emit("hover",{isHovered:e,messageChainId:this.chatViewItem.messageChainId})},deleteMessage:function(){var e=this;return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm(e.$t("chats.delete_confirm"))){t.next=4;break}return t.next=4,e.$store.dispatch("deleteChatMessage",{messageId:e.chatViewItem.data.id,chatId:e.chatViewItem.data.chat_id});case 4:e.hovered=!1,e.menuOpened=!1;case 6:case"end":return t.stop()}}),t)})))()}}},rd=(0,Lr.Z)(nd,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserAvatar"),a=(0,lr.up)("UserPopover"),c=(0,lr.up)("FAIcon"),l=(0,lr.up)("Popover"),u=(0,lr.up)("StatusContent"),d=(0,lr.up)("ChatMessageDate");return e.isMessage?((0,lr.wg)(),(0,lr.iD)("div",{key:0,class:(0,ur.C_)(["chat-message-wrapper",{"hovered-message-chain":e.hoveredMessageChain}]),onMouseover:t[5]||(t[5]=function(t){return e.onHover(!0)}),onMouseleave:t[6]||(t[6]=function(t){return e.onHover(!1)})},[(0,lr._)("div",{class:(0,ur.C_)(["chat-message",[{outgoing:e.isCurrentUser,incoming:!e.isCurrentUser}]])},[e.isCurrentUser?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",qu,[e.chatViewItem.isHead?((0,lr.wg)(),(0,lr.j4)(a,{key:0,"user-id":e.author.id},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(s,{compact:!0,"better-shadow":e.betterShadow,user:e.author},null,8,["better-shadow","user"])]})),_:1},8,["user-id"])):(0,lr.kq)("",!0)])),(0,lr._)("div",Zu,[(0,lr._)("div",{class:"status-body",style:(0,ur.j5)({"min-width":e.message.attachment?"80%":""})},[(0,lr._)("div",{class:(0,ur.C_)(["media status",{"without-attachment":!e.hasAttachment,pending:e.chatViewItem.data.pending,error:e.chatViewItem.data.error}]),style:{position:"relative"},onMouseenter:t[3]||(t[3]=function(t){return e.hovered=!0}),onMouseleave:t[4]||(t[4]=function(t){return e.hovered=!1})},[(0,lr._)("div",{class:(0,ur.C_)(["chat-message-menu",{visible:e.hovered||e.menuOpened}])},[(0,lr.Wm)(l,{trigger:"click",placement:"top","bound-to-selector":".chat-view-inner","bound-to":{x:"container"},margin:e.popoverMarginStyle,onShow:t[1]||(t[1]=function(t){return e.menuOpened=!0}),onClose:t[2]||(t[2]=function(t){return e.menuOpened=!1})},{content:(0,lr.w5)((function(){return[(0,lr._)("div",Wu,[(0,lr._)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[0]||(t[0]=function(){return e.deleteMessage&&e.deleteMessage.apply(e,arguments)})},[(0,lr.Wm)(c,{icon:"times"}),(0,lr.Uk)(" "+(0,ur.zw)(e.$t("chats.delete")),1)])])]})),trigger:(0,lr.w5)((function(){return[(0,lr._)("button",{class:"button-default menu-icon",title:e.$t("chats.more")},[(0,lr.Wm)(c,{icon:"ellipsis-h"})],8,Bu)]})),_:1},8,["margin"])],2),(0,lr.Wm)(u,{class:"message-content",status:e.messageForStatusContent,"full-content":!0},{footer:(0,lr.w5)((function(){return[(0,lr._)("span",Hu,(0,ur.zw)(e.createdAt),1)]})),_:1},8,["status"])],34)],4)])],2)],34)):((0,lr.wg)(),(0,lr.iD)("div",Vu,[(0,lr.Wm)(d,{date:e.chatViewItem.date},null,8,["date"])]))}]]);var od=function(){return{scrollTop:window.scrollY,scrollHeight:document.documentElement.scrollHeight,offsetHeight:window.innerHeight}};function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.ptq,Nt.A35);var ad={components:{ChatMessage:rd,ChatTitle:pu,PostStatusForm:yo.Z},data:function(){return{jumpToBottomButtonVisible:!1,hoveredMessageChainId:void 0,lastScrollPosition:{},scrollableContainerHeight:"100%",errorLoadingChat:!1,messageRetriers:{}}},created:function(){this.startFetching(),window.addEventListener("resize",this.handleResize)},mounted:function(){var e=this;window.addEventListener("scroll",this.handleScroll),void 0!==document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$nextTick((function(){e.handleResize()}))},unmounted:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),void 0!==document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$store.dispatch("clearCurrentChat")},computed:sd(sd({recipient:function(){return this.currentChat&&this.currentChat.account},recipientId:function(){return this.$route.params.recipient_id},formPlaceholder:function(){return this.recipient?this.$t("chats.message_user",{nickname:this.recipient.screen_name_ui}):""},chatViewItems:function(){return En.getView(this.currentChatMessageService)},newMessageCount:function(){return this.currentChatMessageService&&this.currentChatMessageService.newMessageCount},streamingEnabled:function(){return this.mergedConfig.useStreamingApi&&this.mastoUserSocketStatus===m._z.JOINED}},(0,s.Se)(["currentChat","currentChatMessageService","findOpenedChatByRecipientId","mergedConfig"])),(0,s.rn)({backendInteractor:function(e){return e.api.backendInteractor},mastoUserSocketStatus:function(e){return e.api.mastoUserSocketStatus},mobileLayout:function(e){return"mobile"===e.interface.layoutType},currentUser:function(e){return e.users.currentUser}})),watch:{chatViewItems:function(){var e=this,t=this.bottomedOut(10);this.$nextTick((function(){t&&e.scrollDown()}))},$route:function(){this.startFetching()},mastoUserSocketStatus:function(e){e===m._z.JOINED&&this.fetchChat({isFirstFetch:!0})}},methods:{onMessageHover:function(e){var t=e.isHovered,n=e.messageChainId;this.hoveredMessageChainId=t?n:void 0},onFilesDropped:function(){var e=this;this.$nextTick((function(){e.handleResize()}))},handleVisibilityChange:function(){var e=this;this.$nextTick((function(){!document.hidden&&e.bottomedOut(10)&&e.scrollDown({forceRead:!0})}))},handleResize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delayed,r=void 0!==n&&n;r?setTimeout((function(){e.handleResize(sd(sd({},t),{},{delayed:!1}))}),100):this.$nextTick((function(){var t=od().offsetHeight,n=(void 0===t?void 0:t)-e.lastScrollPosition.offsetHeight;0===n||e.bottomedOut()||e.$nextTick((function(){window.scrollBy({top:-Math.trunc(n)})})),e.lastScrollPosition=od()}))},scrollDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.behavior,n=void 0===t?"auto":t,r=e.forceRead,o=void 0!==r&&r;this.$nextTick((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:n})})),o&&this.readChat()},readChat:function(){if(this.currentChatMessageService&&this.currentChatMessageService.maxId&&!document.hidden){var e=this.currentChatMessageService.maxId;this.$store.dispatch("readChat",{id:this.currentChat.id,lastReadId:e})}},bottomedOut:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=window.scrollY+e;return document.documentElement.scrollHeight-window.innerHeight<=t}(e)},reachedTop:function(){return window.scrollY<=0},cullOlderCheck:function(){var e=this;window.setTimeout((function(){e.bottomedOut(10)&&e.$store.dispatch("cullOlderMessages",e.currentChatMessageService.chatId)}),5e3)},handleScroll:jc()((function(){var e=this;this.lastScrollPosition=od(),this.currentChat&&(this.reachedTop()?this.fetchChat({maxId:this.currentChatMessageService.minId}):this.bottomedOut(10)?(this.jumpToBottomButtonVisible=!1,this.cullOlderCheck(),this.newMessageCount>0&&window.setTimeout((function(){e.$el&&e.readChat()}),1500)):this.jumpToBottomButtonVisible=!0)}),200),handleScrollUp:function(e){var t,n,r=od();window.scrollTo({top:(t=e,n=r,t.scrollTop+(n.scrollHeight-t.scrollHeight))})},fetchChat:function(e){var t=this,n=e.isFirstFetch,r=void 0!==n&&n,o=e.fetchLatest,i=void 0!==o&&o,s=e.maxId,a=this.currentChatMessageService;if(a&&(!i||!this.streamingEnabled)){var c=a.chatId,l=!!s,u=i&&a.maxId;return this.backendInteractor.chatMessages({id:c,maxId:s,sinceId:u}).then((function(e){r&&En.clear(a);var n=od();t.$store.dispatch("addChatMessages",{chatId:c,messages:e}).then((function(){t.$nextTick((function(){l&&t.handleScrollUp(n),!(document.documentElement.scrollHeight>window.innerHeight)&&e.length>0&&t.fetchChat({maxId:t.currentChatMessageService.minId})}))}))}))}},startFetching:function(){var e=this;return(0,r.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.findOpenedChatByRecipientId(e.recipientId)){t.next=12;break}return t.prev=2,t.next=5,e.backendInteractor.getOrCreateChat({accountId:e.recipientId});case 5:n=t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.error("Error creating or getting a chat",t.t0),e.errorLoadingChat=!0;case 12:n&&(e.$nextTick((function(){e.scrollDown({forceRead:!0})})),e.$store.dispatch("addOpenedChat",{chat:n}),e.doStartFetching());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()},doStartFetching:function(){var e=this;this.$store.dispatch("startFetchingCurrentChat",{fetcher:function(){return(0,Se.F)((function(){return e.fetchChat({fetchLatest:!0})}),5e3)}}),this.fetchChat({isFirstFetch:!0})},handleAttachmentPosting:function(){var e=this;this.$nextTick((function(){e.handleResize(),e.scrollDown({forceRead:!0})}))},sendMessage:function(e){var t=this,n=e.status,r=e.media,o=e.idempotencyKey,i={id:this.currentChat.id,content:n,idempotencyKey:o};r[0]&&(i.mediaId=r[0].id);var s=function(e){var t=e.attachments,n=e.userId,r=e.idempotencyKey,o={content:e.content,chat_id:e.chatId,created_at:new Date,id:"".concat((new Date).getTime()),attachments:t,account_id:n,idempotency_key:r,emojis:[],pending:!0,isNormalized:!0};return t[0]&&(o.attachment=t[0]),o}({attachments:r,chatId:this.currentChat.id,content:n,userId:this.currentUser.id,idempotencyKey:o});return this.$store.dispatch("addChatMessages",{chatId:this.currentChat.id,messages:[s]}).then((function(){t.handleAttachmentPosting()})),this.doSendMessage({params:i,fakeMessage:s,retriesLeft:10})},doSendMessage:function(e){var t=this,n=e.params,r=e.fakeMessage,o=e.retriesLeft,i=void 0===o?10:o;if(!(i<=0))return this.backendInteractor.sendChatMessage(n).then((function(e){return t.$store.dispatch("addChatMessages",{chatId:t.currentChat.id,updateMaxId:!1,messages:[sd(sd({},e),{},{fakeId:r.id})]}),e})).catch((function(e){return console.error("Error sending message",e),t.$store.dispatch("handleMessageError",{chatId:t.currentChat.id,fakeId:r.id,isRetry:10!==i}),(e.statusCode>=500&&e.statusCode<600||"Failed to fetch"===e.message)&&(t.messageRetriers[r.id]=setTimeout((function(){t.doSendMessage({params:n,fakeMessage:r,retriesLeft:i-1})}),1e3*Math.pow(2,10-i))),{}})),Promise.resolve(r)},goBack:function(){this.$router.push({name:"chats",params:{username:this.currentUser.screen_name}})}}};const cd=ad,ld=(0,Lr.Z)(cd,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("ChatTitle"),c=(0,lr.up)("ChatMessage"),l=(0,lr.up)("PostStatusForm");return(0,lr.wg)(),(0,lr.iD)("div",$u,[(0,lr._)("div",Uu,[(0,lr._)("div",Mu,[(0,lr._)("div",Au,[(0,lr._)("button",{class:"button-unstyled go-back-button",onClick:t[0]||(t[0]=function(){return e.goBack&&e.goBack.apply(e,arguments)})},[(0,lr.Wm)(s,{size:"lg",icon:"chevron-left"})]),(0,lr._)("div",Lu,[(0,lr.Wm)(a,{user:e.recipient,"with-avatar":!0},null,8,["user"])])],512),(0,lr._)("div",{class:"message-list",style:(0,ur.j5)({height:e.scrollableContainerHeight})},[e.errorLoadingChat?((0,lr.wg)(),(0,lr.iD)("div",Eu,[(0,lr._)("div",Fu,(0,ur.zw)(e.$t("chats.error_loading_chat")),1)])):((0,lr.wg)(!0),(0,lr.iD)(lr.HY,{key:0},(0,lr.Ko)(e.chatViewItems,(function(t){return(0,lr.wg)(),(0,lr.j4)(c,{key:t.id,author:e.recipient,"chat-view-item":t,"hovered-message-chain":t.messageChainId===e.hoveredMessageChainId,onHover:e.onMessageHover},null,8,["author","chat-view-item","hovered-message-chain","onHover"])})),128))],4),(0,lr._)("div",Ru,[(0,lr._)("div",{class:(0,ur.C_)(["jump-to-bottom-button",{visible:e.jumpToBottomButtonVisible}]),onClick:t[1]||(t[1]=function(t){return e.scrollDown({behavior:"smooth"})})},[(0,lr._)("span",null,[(0,lr.Wm)(s,{icon:"chevron-down"}),e.newMessageCount?((0,lr.wg)(),(0,lr.iD)("div",Nu,(0,ur.zw)(e.newMessageCount),1)):(0,lr.kq)("",!0)])],2),(0,lr.Wm)(l,{"disable-subject":!0,"disable-scope-selector":!0,"disable-notice":!0,"disable-lock-warning":!0,"disable-polls":!0,"disable-sensitivity-checkbox":!0,"disable-submit":e.errorLoadingChat||!e.currentChat,"disable-preview":!0,"optimistic-posting":!0,"post-handler":e.sendMessage,"submit-on-enter":!e.mobileLayout,"preserve-focus":!e.mobileLayout,"auto-focus":!e.mobileLayout,placeholder:e.formPlaceholder,"file-limit":1,"max-height":"160","emoji-picker-placement":"top",onResize:e.handleResize},null,8,["disable-submit","post-handler","submit-on-enter","preserve-focus","auto-focus","placeholder","onResize"])],512)],512)])])}]]);var ud={key:0,class:"user-profile panel panel-default"},dd={key:0,class:"user-profile-fields"},pd=["title"],hd=["title"],md=["label","disabled"],fd=["label","disabled"],gd={key:1,class:"panel user-profile-placeholder"},vd={class:"panel-heading"},wd={class:"title"},bd={class:"panel-body"},yd={key:0},_d={class:"follow-card-content-container"},kd={key:0,class:"faint"},Sd={key:0,class:"follow-card-follow-button"},jd=n(72895),Od=n(13046),Cd=["disabled","title"];const Pd={props:["relationship"],data:function(){return{inProgress:!1}},computed:{label:function(){return this.inProgress?this.$t("user_card.follow_progress"):this.$t("user_card.remove_follower")}},methods:{onClick:function(){var e=this;this.inProgress=!0,this.$store.dispatch("removeUserFromFollowers",this.relationship.id).then((function(){e.inProgress=!1}))}}},zd=(0,Lr.Z)(Pd,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("button",{class:(0,ur.C_)(["btn button-default follow-button",{toggled:e.inProgress}]),disabled:e.inProgress,title:e.$t("user_card.remove_follower"),onClick:t[0]||(t[0]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},(0,ur.zw)(e.label),11,Cd)}]]),Id={props:["user","noFollowsYou"],components:{BasicUserCard:Su.Z,RemoteFollow:jd.Z,FollowButton:Od.Z,RemoveFollowerButton:zd},computed:{isMe:function(){return this.$store.state.users.currentUser.id===this.user.id},loggedIn:function(){return this.$store.state.users.currentUser},relationship:function(){return this.$store.getters.relationship(this.user.id)}}},Dd=(0,Lr.Z)(Id,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("RemoteFollow"),a=(0,lr.up)("FollowButton"),c=(0,lr.up)("RemoveFollowerButton"),l=(0,lr.up)("basic-user-card");return(0,lr.wg)(),(0,lr.j4)(l,{user:e.user},{default:(0,lr.w5)((function(){return[(0,lr._)("div",_d,[e.isMe||!e.noFollowsYou&&e.relationship.followed_by?((0,lr.wg)(),(0,lr.iD)("span",kd,(0,ur.zw)(e.isMe?e.$t("user_card.its_you"):e.$t("user_card.follows_you")),1)):(0,lr.kq)("",!0),e.loggedIn?e.isMe?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:2},[(0,lr.Wm)(a,{relationship:e.relationship,"label-following":e.$t("user_card.follow_unfollow"),class:"follow-card-follow-button",user:e.user},null,8,["relationship","label-following","user"]),e.noFollowsYou&&e.relationship.followed_by?((0,lr.wg)(),(0,lr.j4)(c,{key:0,relationship:e.relationship,class:"follow-card-button"},null,8,["relationship"])):(0,lr.kq)("",!0)],64)):((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:1},[e.relationship.following?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",Sd,[(0,lr.Wm)(s,{user:e.user},null,8,["user"])]))],64))])]})),_:1},8,["user"])}]]);var xd=n(41609),Td=n.n(xd),$d=n(13562);function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.IJ7);const Ad=function(e){var t=e.fetch,n=e.select,r=e.unmounted,o=e.childPropName,i=void 0===o?"entries":o,s=e.additionalPropNames,a=void 0===s?[]:s;return function(e){return{props:Object.keys((0,$d.g)(e)).filter((function(e){return e!==i})).concat(a),data:function(){return{loading:!1,bottomedOut:!1,error:!1,entries:[]}},created:function(){window.addEventListener("scroll",this.scrollLoad),0===this.entries.length&&this.fetchEntries()},unmounted:function(){window.removeEventListener("scroll",this.scrollLoad),r&&r(this.$props,this.$store)},methods:{updateEntries:function(){this.entries=n(this.$props,this.$store)||[]},fetchEntries:function(){var e=this;this.loading||(this.loading=!0,this.error=!1,t(this.$props,this.$store).then((function(t){e.loading=!1,e.bottomedOut=Td()(t)})).catch((function(){e.loading=!1,e.error=!0})).finally((function(){e.updateEntries()})))},scrollLoad:function(e){var t=document.body.getBoundingClientRect(),n=Math.max(t.height,-t.y);!1===this.loading&&!1===this.bottomedOut&&this.$el.offsetHeight>0&&window.innerHeight+window.pageYOffset>=n-750&&this.fetchEntries()}},render:function(){var t,n=Md(Md({},this.$props),{},(0,d.Z)({},i,this.entries)),r=this.$slots;return(0,lr.Wm)("div",{class:"with-load-more"},[(0,lr.Wm)(e,n,(t=r,"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!(0,lr.lA)(t)?r:{default:function(){return[r]}})),(0,lr.Wm)("div",{class:"with-load-more-footer"},[this.error&&(0,lr.Wm)("button",{onClick:this.fetchEntries,class:"button-unstyled -link -fullwidth alert error"},[this.$t("general.generic_error")]),!this.error&&this.loading&&(0,lr.Wm)(cr.GN,{spin:!0,icon:"circle-notch"},null),!this.error&&!this.loading&&!this.bottomedOut&&(0,lr.Wm)("a",{onClick:this.fetchEntries},[this.$t("general.more")])])])}}}};Rt.vI.add(Nt.IJ7);var Ld=Ad({fetch:function(e,t){return t.dispatch("fetchFollowers",e.userId)},select:function(e,t){return xt()(t.getters.findUser(e.userId),"followerIds",[]).map((function(e){return t.getters.findUser(e)}))},destroy:function(e,t){return t.dispatch("clearFollowers",e.userId)},childPropName:"items",additionalPropNames:["userId"]})(Aa.Z),Ed=Ad({fetch:function(e,t){return t.dispatch("fetchFriends",e.userId)},select:function(e,t){return xt()(t.getters.findUser(e.userId),"friendIds",[]).map((function(e){return t.getters.findUser(e)}))},destroy:function(e,t){return t.dispatch("clearFriends",e.userId)},childPropName:"items",additionalPropNames:["userId"]})(Aa.Z),Fd="statuses";const Rd={data:function(){return{error:!1,userId:null,tab:Fd,footerRef:null}},created:function(){var e=this.$route.params;this.load({name:e.name,id:e.id}),this.tab=xt()(this.$route,"query.tab",Fd)},unmounted:function(){this.stopFetching()},computed:{timeline:function(){return this.$store.state.statuses.timelines.user},favorites:function(){return this.$store.state.statuses.timelines.favorites},media:function(){return this.$store.state.statuses.timelines.media},isUs:function(){return this.userId&&this.$store.state.users.currentUser.id&&this.userId===this.$store.state.users.currentUser.id},user:function(){return this.$store.getters.findUser(this.userId)},isExternal:function(){return"external-user-profile"===this.$route.name},followsTabVisible:function(){return this.isUs||!this.user.hide_follows},followersTabVisible:function(){return this.isUs||!this.user.hide_followers}},methods:{setFooterRef:function(e){this.footerRef=e},load:function(e){var t=this,n=function(e,n){n!==t.$store.state.statuses.timelines[e].userId&&t.$store.commit("clearTimeline",{timeline:e}),t.$store.dispatch("startFetchingTimeline",{timeline:e,userId:n})},r=function(e){t.userId=e,n("user",e),n("media",e),t.isUs&&n("favorites",e),t.$store.dispatch("fetchPinnedStatuses",e)};this.userId=null,this.error=!1;var o=e.id,i=e.name,s=o?this.$store.getters.findUser(o):this.$store.getters.findUserByName(i);s?r(s.id):(o?this.$store.dispatch("fetchUser",o):this.$store.dispatch("fetchUserByName",i)).then((function(e){var t=e.id;return r(t)})).catch((function(e){var n=xt()(e,"error.error");t.error="No user with such user_id"===n?t.$t("user_profile.profile_does_not_exist"):n||t.$t("user_profile.profile_loading_error")}))},stopFetching:function(){this.$store.dispatch("stopFetchingTimeline","user"),this.$store.dispatch("stopFetchingTimeline","favorites"),this.$store.dispatch("stopFetchingTimeline","media")},switchUser:function(e){this.stopFetching(),this.load(e)},onTabSwitch:function(e){this.tab=e,this.$router.replace({query:{tab:e}})},linkClicked:function(e){var t=e.target;"SPAN"===t.tagName&&(t=t.parentNode),"A"===t.tagName&&window.open(t.href,"_blank")}},watch:{"$route.params.id":function(e){e&&this.switchUser({id:e})},"$route.params.name":function(e){e&&this.switchUser({name:e})},"$route.query":function(e){this.tab=e.tab||Fd}},components:{UserCard:_o.Z,Timeline:gl,FollowerList:Ld,FriendList:Ed,FollowCard:Dd,TabSwitcher:El.Z,Conversation:il,RichContent:uu.Z}},Nd=(0,Lr.Z)(Rd,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("UserCard"),a=(0,lr.up)("RichContent"),c=(0,lr.up)("Timeline"),l=(0,lr.up)("FollowCard"),u=(0,lr.up)("FriendList"),d=(0,lr.up)("FollowerList"),p=(0,lr.up)("tab-switcher"),h=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",null,[e.user?((0,lr.wg)(),(0,lr.iD)("div",ud,[(0,lr.Wm)(s,{"user-id":e.userId,switcher:!0,selected:e.timeline.viewing,"avatar-action":"zoom",rounded:"top","has-note-editor":!0},null,8,["user-id","selected"]),e.user.fields_html&&e.user.fields_html.length>0?((0,lr.wg)(),(0,lr.iD)("div",dd,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.user.fields_html,(function(t,n){return(0,lr.wg)(),(0,lr.iD)("dl",{key:n,class:"user-profile-field"},[(0,lr._)("dt",{title:e.user.fields_text[n].name,class:"user-profile-field-name"},[(0,lr.Wm)(a,{html:t.name,emoji:e.user.emoji},null,8,["html","emoji"])],8,pd),(0,lr._)("dd",{title:e.user.fields_text[n].value,class:"user-profile-field-value"},[(0,lr.Wm)(a,{html:t.value,emoji:e.user.emoji},null,8,["html","emoji"])],8,hd)])})),128))])):(0,lr.kq)("",!0),(0,lr.Wm)(p,{"active-tab":e.tab,"render-only-focused":!0,"on-switch":e.onTabSwitch},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(c,{key:"statuses",label:e.$t("user_card.statuses"),count:e.user.statuses_count,embedded:!0,title:e.$t("user_profile.timeline_title"),timeline:e.timeline,"timeline-name":"user","user-id":e.userId,"pinned-status-ids":e.user.pinnedStatusIds,"in-profile":!0,"footer-slipgate":e.footerRef},null,8,["label","count","title","timeline","user-id","pinned-status-ids","footer-slipgate"]),e.followsTabVisible?((0,lr.wg)(),(0,lr.iD)("div",{key:"followees",label:e.$t("user_card.followees"),disabled:!e.user.friends_count},[(0,lr.Wm)(u,{"user-id":e.userId},{item:(0,lr.w5)((function(e){var t=e.item;return[(0,lr.Wm)(l,{user:t},null,8,["user"])]})),_:1},8,["user-id"])],8,md)):(0,lr.kq)("",!0),e.followersTabVisible?((0,lr.wg)(),(0,lr.iD)("div",{key:"followers",label:e.$t("user_card.followers"),disabled:!e.user.followers_count},[(0,lr.Wm)(d,{"user-id":e.userId},{item:(0,lr.w5)((function(t){var n=t.item;return[(0,lr.Wm)(l,{user:n,"no-follows-you":e.isUs},null,8,["user","no-follows-you"])]})),_:1},8,["user-id"])],8,fd)):(0,lr.kq)("",!0),(0,lr.Wm)(c,{key:"media",label:e.$t("user_card.media"),disabled:!e.media.visibleStatuses.length,embedded:!0,title:e.$t("user_card.media"),"timeline-name":"media",timeline:e.media,"user-id":e.userId,"in-profile":!0,"footer-slipgate":e.footerRef},null,8,["label","disabled","title","timeline","user-id","footer-slipgate"]),e.isUs?((0,lr.wg)(),(0,lr.j4)(c,{key:"favorites",label:e.$t("user_card.favorites"),disabled:!e.favorites.visibleStatuses.length,embedded:!0,title:e.$t("user_card.favorites"),"timeline-name":"favorites",timeline:e.favorites,"in-profile":!0,"footer-slipgate":e.footerRef},null,8,["label","disabled","title","timeline","footer-slipgate"])):(0,lr.kq)("",!0)]})),_:1},8,["active-tab","on-switch"]),(0,lr._)("div",{ref:e.setFooterRef,class:"panel-footer"},null,512)])):((0,lr.wg)(),(0,lr.iD)("div",gd,[(0,lr._)("div",vd,[(0,lr._)("div",wd,(0,ur.zw)(e.$t("settings.profile_tab")),1)]),(0,lr._)("div",bd,[e.error?((0,lr.wg)(),(0,lr.iD)("span",yd,(0,ur.zw)(e.error),1)):((0,lr.wg)(),(0,lr.j4)(h,{key:1,spin:"",icon:"circle-notch"}))])]))])}]]);var qd={class:"panel panel-default"},Zd={class:"panel-heading"},Wd={class:"title"},Bd={class:"search-input-container"},Hd=["placeholder"],Vd={key:0,class:"text-center loading-icon"},Kd={key:1},Gd={class:"search-nav-heading"},Yd=["label"],Jd=["label"],Qd=["label"],Xd={class:"panel-body"},ep={key:0},tp={class:"new-status-notification text-center"},np={key:1,class:"text-center loading-icon"},rp={key:2,class:"search-result-heading"},op={key:1},ip={key:0,class:"search-result-heading"},sp={key:2},ap={key:0,class:"search-result-heading"},cp={class:"hashtag"},lp={key:0},up={key:0},dp={key:1},pp={key:0,class:"count"},hp=(0,lr._)("div",{class:"search-result-footer text-center panel-footer faint"},null,-1),mp=n(45578),fp=n.n(mp);Rt.vI.add(Nt.IJ7,Nt.wn1);const gp={components:{FollowCard:Dd,Conversation:il,Status:Ma.default,TabSwitcher:El.Z},props:["query"],data:function(){return{loaded:!1,loading:!1,searchTerm:this.query||"",userIds:[],statuses:[],hashtags:[],currenResultTab:"statuses",statusesOffset:0,lastStatusFetchCount:0,lastQuery:""}},computed:{users:function(){var e=this;return this.userIds.map((function(t){return e.$store.getters.findUser(t)}))},visibleStatuses:function(){var e=this.$store.state.statuses.allStatusesObject;return this.statuses.filter((function(t){return e[t.id]&&!e[t.id].deleted}))}},mounted:function(){this.search(this.query)},watch:{query:function(e){this.searchTerm=e,this.search(e)}},methods:{newQuery:function(e){this.$router.push({name:"search",query:{query:e}}),this.$refs.searchInput.focus()},search:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(this.loading=!0,this.$refs.searchInput.blur(),this.lastQuery!==e&&(this.userIds=[],this.hashtags=[],this.statuses=[],this.statusesOffset=0,this.lastStatusFetchCount=0),this.$store.dispatch("search",{q:e,resolve:!0,offset:this.statusesOffset,type:n}).then((function(n){t.loading=!1;var r=t.statuses.length;t.userIds=t.userIds.concat(we()(n.accounts,"id")),t.statuses=fp()(t.statuses.concat(n.statuses),"id"),t.hashtags=t.hashtags.concat(n.hashtags),t.currenResultTab=t.getActiveTab(),t.loaded=!0,t.statusesOffset=t.statuses.length,t.lastStatusFetchCount=t.statuses.length-r,t.lastQuery=e}))):this.loading=!1},resultCount:function(e){var t=this[e].length;return 0===t?"":" (".concat(t,")")},onResultTabSwitch:function(e){this.currenResultTab=e},getActiveTab:function(){return this.visibleStatuses.length>0?"statuses":this.users.length>0?"people":this.hashtags.length>0?"hashtags":"statuses"},lastHistoryRecord:function(e){return e.history&&e.history[0]}}},vp=(0,Lr.Z)(gp,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("tab-switcher"),c=(0,lr.up)("Status"),l=(0,lr.up)("FollowCard"),u=(0,lr.up)("router-link");return(0,lr.wg)(),(0,lr.iD)("div",qd,[(0,lr._)("div",Zd,[(0,lr._)("div",Wd,(0,ur.zw)(e.$t("nav.search")),1)]),(0,lr._)("div",Bd,[(0,lr.wy)((0,lr._)("input",{ref:"searchInput","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchTerm=t}),class:"search-input",placeholder:e.$t("nav.search"),onKeyup:t[1]||(t[1]=(0,or.D2)((function(t){return e.newQuery(e.searchTerm)}),["enter"]))},null,40,Hd),[[or.nr,e.searchTerm]]),(0,lr._)("button",{class:"btn button-default search-button",type:"submit",onClick:t[2]||(t[2]=function(t){return e.newQuery(e.searchTerm)})},[(0,lr.Wm)(s,{icon:"search"})])]),e.loading&&0==e.statusesOffset?((0,lr.wg)(),(0,lr.iD)("div",Vd,[(0,lr.Wm)(s,{icon:"circle-notch",spin:"",size:"lg"})])):e.loaded?((0,lr.wg)(),(0,lr.iD)("div",Kd,[(0,lr._)("div",Gd,[(0,lr.Wm)(a,{ref:"tabSwitcher","on-switch":e.onResultTabSwitch,"active-tab":e.currenResultTab},{default:(0,lr.w5)((function(){return[(0,lr._)("span",{key:"statuses",label:e.$t("user_card.statuses")+e.resultCount("visibleStatuses")},null,8,Yd),(0,lr._)("span",{key:"people",label:e.$t("search.people")+e.resultCount("users")},null,8,Jd),(0,lr._)("span",{key:"hashtags",label:e.$t("search.hashtags")+e.resultCount("hashtags")},null,8,Qd)]})),_:1},8,["on-switch","active-tab"])])])):(0,lr.kq)("",!0),(0,lr._)("div",Xd,["statuses"===e.currenResultTab?((0,lr.wg)(),(0,lr.iD)("div",ep,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.visibleStatuses,(function(e){return(0,lr.wg)(),(0,lr.j4)(c,{key:e.id,collapsable:!1,expandable:!1,compact:!1,class:"search-result",statusoid:e,"no-heading":!1},null,8,["statusoid"])})),128)),!e.loading&&e.loaded&&e.lastStatusFetchCount>0?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"more-statuses-button button-unstyled -link -fullwidth",onClick:t[3]||(t[3]=(0,or.iM)((function(t){return e.search(e.searchTerm,"statuses")}),["prevent"]))},[(0,lr._)("div",tp,(0,ur.zw)(e.$t("search.load_more")),1)])):e.loading&&e.statusesOffset>0?((0,lr.wg)(),(0,lr.iD)("div",np,[(0,lr.Wm)(s,{icon:"circle-notch",spin:"",size:"lg"})])):(0,lr.kq)("",!0),0!==e.visibleStatuses.length&&0!==e.lastStatusFetchCount||e.loading||!e.loaded?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",rp,[(0,lr._)("h4",null,(0,ur.zw)(0===e.visibleStatuses.length?e.$t("search.no_results"):e.$t("search.no_more_results")),1)]))])):"people"===e.currenResultTab?((0,lr.wg)(),(0,lr.iD)("div",op,[0===e.users.length&&!e.loading&&e.loaded?((0,lr.wg)(),(0,lr.iD)("div",ip,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("search.no_results")),1)])):(0,lr.kq)("",!0),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.users,(function(e){return(0,lr.wg)(),(0,lr.j4)(l,{key:e.id,user:e,class:"list-item search-result"},null,8,["user"])})),128))])):"hashtags"===e.currenResultTab?((0,lr.wg)(),(0,lr.iD)("div",sp,[0===e.hashtags.length&&!e.loading&&e.loaded?((0,lr.wg)(),(0,lr.iD)("div",ap,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("search.no_results")),1)])):(0,lr.kq)("",!0),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.hashtags,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.url,class:"status trend search-result"},[(0,lr._)("div",cp,[(0,lr.Wm)(u,{to:{name:"tag-timeline",params:{tag:t.name}}},{default:(0,lr.w5)((function(){return[(0,lr.Uk)(" #"+(0,ur.zw)(t.name),1)]})),_:2},1032,["to"]),e.lastHistoryRecord(t)?((0,lr.wg)(),(0,lr.iD)("div",lp,[1==e.lastHistoryRecord(t).accounts?((0,lr.wg)(),(0,lr.iD)("span",up,(0,ur.zw)(e.$t("search.person_talking",{count:e.lastHistoryRecord(t).accounts})),1)):((0,lr.wg)(),(0,lr.iD)("span",dp,(0,ur.zw)(e.$t("search.people_talking",{count:e.lastHistoryRecord(t).accounts})),1))])):(0,lr.kq)("",!0)]),e.lastHistoryRecord(t)?((0,lr.wg)(),(0,lr.iD)("div",pp,(0,ur.zw)(e.lastHistoryRecord(t).uses),1)):(0,lr.kq)("",!0)])})),128))])):(0,lr.kq)("",!0)]),hp])}]]);var wp={class:"settings panel panel-default"},bp={class:"panel-heading"},yp={class:"panel-body"},_p={class:"container"},kp={class:"text-fields"},Sp={class:"form--label",for:"sign-up-username"},jp=["disabled","placeholder"],Op={key:0,class:"form-error"},Cp={key:0},Pp={class:"form--label",for:"sign-up-fullname"},zp=["disabled","placeholder"],Ip={key:1,class:"form-error"},Dp={key:0},xp={class:"form--label",for:"email"},Tp=["disabled","aria-required"],$p={key:2,class:"form-error"},Up={key:0},Mp={class:"form-group"},Ap={class:"form--label",for:"bio"},Lp=["disabled","placeholder"],Ep={class:"form--label",for:"sign-up-password"},Fp=["disabled"],Rp={key:3,class:"form-error"},Np={key:0},qp={class:"form--label",for:"sign-up-password-confirmation"},Zp=["disabled"],Wp={key:4,class:"form-error"},Bp={key:0},Hp={key:1},Vp={key:5,class:"form-group"},Kp={class:"form--label",for:"reason"},Gp=["disabled","placeholder"],Yp={key:6,id:"captcha-group",class:"form-group"},Jp={class:"form--label",for:"captcha-label"},Qp=["src"],Xp=["disabled"],eh={key:7,class:"form-group"},th={for:"token"},nh={class:"form-group"},rh=["disabled"],oh=["innerHTML"],ih={key:0,class:"form-group"},sh={class:"alert error"},ah=n(54028),ch=n(35332);function lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lh(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const dh={setup:function(){return{v$:(0,ah.ZP)()}},data:function(){return{user:{email:"",fullname:"",username:"",password:"",confirm:"",reason:"",language:""},captcha:{}}},components:{InterfaceLanguageSwitcher:n(80034).Z},validations:function(){var e=this;return{user:{email:{required:(0,ch.CF)((function(){return e.accountActivationRequired}))},username:{required:ch.C1},fullname:{required:ch.C1},password:{required:ch.C1},confirm:{required:ch.C1,sameAs:(0,ch.sH)(this.user.password)},reason:{required:(0,ch.CF)((function(){return e.accountApprovalRequired}))},language:{}}}},created:function(){(!this.registrationOpen&&!this.token||this.signedIn)&&this.$router.push({name:"root"}),this.setCaptcha()},computed:uh({token:function(){return this.$route.params.token},bioPlaceholder:function(){return this.replaceNewlines(this.$t("registration.bio_placeholder"))},reasonPlaceholder:function(){return this.replaceNewlines(this.$t("registration.reason_placeholder"))}},(0,s.rn)({registrationOpen:function(e){return e.instance.registrationOpen},signedIn:function(e){return!!e.users.currentUser},isPending:function(e){return e.users.signUpPending},serverValidationErrors:function(e){return e.users.signUpErrors},termsOfService:function(e){return e.instance.tos},accountActivationRequired:function(e){return e.instance.accountActivationRequired},accountApprovalRequired:function(e){return e.instance.accountApprovalRequired}})),methods:uh(uh({},(0,s.nv)(["signUp","getCaptcha"])),{},{submit:function(){var e=this;return(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user.nickname=e.user.username,e.user.token=e.token,e.user.captcha_solution=e.captcha.solution,e.user.captcha_token=e.captcha.token,e.user.captcha_answer_data=e.captcha.answer_data,e.user.language&&(e.user.language=Ju.Z.internalToBackendLocale(e.user.language)),e.v$.$touch(),e.v$.$invalid){t.next=18;break}return t.prev=8,t.next=11,e.signUp(e.user);case 11:e.$router.push({name:"friends"}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(8),console.warn("Registration failed: ",t.t0),e.setCaptcha();case 18:case"end":return t.stop()}}),t,null,[[8,14]])})))()},setCaptcha:function(){var e=this;this.getCaptcha().then((function(t){e.captcha=t}))},replaceNewlines:function(e){return e.replace(/\s*\n\s*/g," \n")}})},ph=(0,Lr.Z)(dh,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("interface-language-switcher");return(0,lr.wg)(),(0,lr.iD)("div",wp,[(0,lr._)("div",bp,(0,ur.zw)(e.$t("registration.registration")),1),(0,lr._)("div",yp,[(0,lr._)("form",{class:"registration-form",onSubmit:t[10]||(t[10]=(0,or.iM)((function(t){return e.submit(e.user)}),["prevent"]))},[(0,lr._)("div",_p,[(0,lr._)("div",kp,[(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.username.$error}])},[(0,lr._)("label",Sp,(0,ur.zw)(e.$t("login.username")),1),(0,lr.wy)((0,lr._)("input",{id:"sign-up-username","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.v$.user.username.$model=t}),disabled:e.isPending,class:"form-control","aria-required":!0,placeholder:e.$t("registration.username_placeholder")},null,8,jp),[[or.nr,e.v$.user.username.$model,void 0,{trim:!0}]])],2),e.v$.user.username.$dirty?((0,lr.wg)(),(0,lr.iD)("div",Op,[(0,lr._)("ul",null,[e.v$.user.username.required?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("li",Cp,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.username_required")),1)]))])])):(0,lr.kq)("",!0),(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.fullname.$error}])},[(0,lr._)("label",Pp,(0,ur.zw)(e.$t("registration.fullname")),1),(0,lr.wy)((0,lr._)("input",{id:"sign-up-fullname","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.v$.user.fullname.$model=t}),disabled:e.isPending,class:"form-control","aria-required":!0,placeholder:e.$t("registration.fullname_placeholder")},null,8,zp),[[or.nr,e.v$.user.fullname.$model,void 0,{trim:!0}]])],2),e.v$.user.fullname.$dirty?((0,lr.wg)(),(0,lr.iD)("div",Ip,[(0,lr._)("ul",null,[e.v$.user.fullname.required?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("li",Dp,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.fullname_required")),1)]))])])):(0,lr.kq)("",!0),(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.email.$error}])},[(0,lr._)("label",xp,(0,ur.zw)(e.accountActivationRequired?e.$t("registration.email"):e.$t("registration.email_optional")),1),(0,lr.wy)((0,lr._)("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.v$.user.email.$model=t}),disabled:e.isPending,class:"form-control",type:"email","aria-required":e.accountActivationRequired},null,8,Tp),[[or.nr,e.v$.user.email.$model]])],2),e.v$.user.email.$dirty?((0,lr.wg)(),(0,lr.iD)("div",$p,[(0,lr._)("ul",null,[e.v$.user.email.required?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("li",Up,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.email_required")),1)]))])])):(0,lr.kq)("",!0),(0,lr._)("div",Mp,[(0,lr._)("label",Ap,(0,ur.zw)(e.$t("registration.bio_optional")),1),(0,lr.wy)((0,lr._)("textarea",{id:"bio","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.user.bio=t}),disabled:e.isPending,class:"form-control",placeholder:e.bioPlaceholder},null,8,Lp),[[or.nr,e.user.bio]])]),(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.password.$error}])},[(0,lr._)("label",Ep,(0,ur.zw)(e.$t("login.password")),1),(0,lr.wy)((0,lr._)("input",{id:"sign-up-password","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.user.password=t}),disabled:e.isPending,class:"form-control",type:"password","aria-required":!0},null,8,Fp),[[or.nr,e.user.password]])],2),e.v$.user.password.$dirty?((0,lr.wg)(),(0,lr.iD)("div",Rp,[(0,lr._)("ul",null,[e.v$.user.password.required?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("li",Np,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.password_required")),1)]))])])):(0,lr.kq)("",!0),(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.confirm.$error}])},[(0,lr._)("label",qp,(0,ur.zw)(e.$t("registration.password_confirm")),1),(0,lr.wy)((0,lr._)("input",{id:"sign-up-password-confirmation","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.user.confirm=t}),disabled:e.isPending,class:"form-control",type:"password","aria-required":!0},null,8,Zp),[[or.nr,e.user.confirm]])],2),e.v$.user.confirm.$dirty?((0,lr.wg)(),(0,lr.iD)("div",Wp,[(0,lr._)("ul",null,[e.v$.user.confirm.required.$invalid?((0,lr.wg)(),(0,lr.iD)("li",Bp,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.password_confirmation_required")),1)])):(0,lr.kq)("",!0),e.v$.user.confirm.sameAs.$invalid?((0,lr.wg)(),(0,lr.iD)("li",Hp,[(0,lr._)("span",null,(0,ur.zw)(e.$t("registration.validations.password_confirmation_match")),1)])):(0,lr.kq)("",!0)])])):(0,lr.kq)("",!0),(0,lr._)("div",{class:(0,ur.C_)(["form-group",{"form-group--error":e.v$.user.language.$error}])},[(0,lr.Wm)(s,{for:"email-language","prompt-text":e.$t("registration.email_language"),language:e.v$.user.language.$model,"set-language":function(t){return e.v$.user.language.$model=t}},null,8,["prompt-text","language","set-language"])],2),e.accountApprovalRequired?((0,lr.wg)(),(0,lr.iD)("div",Vp,[(0,lr._)("label",Kp,(0,ur.zw)(e.$t("registration.reason")),1),(0,lr.wy)((0,lr._)("textarea",{id:"reason","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.user.reason=t}),disabled:e.isPending,class:"form-control",placeholder:e.reasonPlaceholder},null,8,Gp),[[or.nr,e.user.reason]])])):(0,lr.kq)("",!0),"none"!=e.captcha.type?((0,lr.wg)(),(0,lr.iD)("div",Yp,[(0,lr._)("label",Jp,(0,ur.zw)(e.$t("registration.captcha")),1),["kocaptcha","native"].includes(e.captcha.type)?((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:0},[(0,lr._)("img",{src:e.captcha.url,onClick:t[7]||(t[7]=function(){return e.setCaptcha&&e.setCaptcha.apply(e,arguments)})},null,8,Qp),(0,lr._)("sub",null,(0,ur.zw)(e.$t("registration.new_captcha")),1),(0,lr.wy)((0,lr._)("input",{id:"captcha-answer","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.captcha.solution=t}),disabled:e.isPending,class:"form-control",type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},null,8,Xp),[[or.nr,e.captcha.solution]])],64)):(0,lr.kq)("",!0)])):(0,lr.kq)("",!0),e.token?((0,lr.wg)(),(0,lr.iD)("div",eh,[(0,lr._)("label",th,(0,ur.zw)(e.$t("registration.token")),1),(0,lr.wy)((0,lr._)("input",{id:"token","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.token=t}),disabled:"true",class:"form-control",type:"text"},null,512),[[or.nr,e.token]])])):(0,lr.kq)("",!0),(0,lr._)("div",nh,[(0,lr._)("button",{disabled:e.isPending,type:"submit",class:"btn button-default"},(0,ur.zw)(e.$t("registration.register")),9,rh)])]),(0,lr._)("div",{class:"terms-of-service",innerHTML:e.termsOfService},null,8,oh)]),e.serverValidationErrors.length?((0,lr.wg)(),(0,lr.iD)("div",ih,[(0,lr._)("div",sh,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.serverValidationErrors,(function(e){return(0,lr.wg)(),(0,lr.iD)("span",{key:e},(0,ur.zw)(e),1)})),128))])])):(0,lr.kq)("",!0)],32)])])}]]);var hh={class:"settings panel panel-default"},mh={class:"panel-heading"},fh={class:"panel-body"},gh={class:"container"},vh={key:0},wh={key:0},bh={key:1},yh={key:1},_h={key:0},kh={class:"form-group text-center"},Sh={key:2},jh={key:0,class:"password-reset-required error"},Oh={class:"form-group"},Ch=["disabled","placeholder"],Ph={class:"form-group"},zh=["disabled"],Ih={key:3,class:"alert error notice-dismissible"};function Dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dh(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.NBC);var Th={data:function(){return{user:{email:""},isPending:!1,success:!1,throttled:!1,error:null}},computed:xh(xh({},(0,s.rn)({signedIn:function(e){return!!e.users.currentUser},instance:function(e){return e.instance}})),{},{mailerEnabled:function(){return this.instance.mailerEnabled}}),created:function(){this.signedIn&&this.$router.push({name:"root"})},props:{passwordResetRequested:{default:!1,type:Boolean}},methods:{dismissError:function(){this.error=null},submit:function(){var e=this;this.isPending=!0;var t=this.user.email;(function(e){var t=e.instance,n={email:e.email},r=Le()(n,(function(e,t,n){var r="".concat(n,"=").concat(encodeURIComponent(t));return"".concat(e,"&").concat(r)}),""),o="".concat(t).concat("/auth/password","?").concat(r);return window.fetch(o,{method:"POST"})})({instance:this.instance.server,email:t}).then((function(t){var n=t.status;e.isPending=!1,e.user.email="",204===n?(e.success=!0,e.error=null):429===n&&(e.throttled=!0,e.error=e.$t("password_reset.too_many_requests"))})).catch((function(){e.isPending=!1,e.user.email="",e.error=e.$t("general.generic_error")}))}}};const $h=Th,Uh=(0,Lr.Z)($h,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link"),a=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",hh,[(0,lr._)("div",mh,(0,ur.zw)(e.$t("password_reset.password_reset")),1),(0,lr._)("div",fh,[(0,lr._)("form",{class:"password-reset-form",onSubmit:t[2]||(t[2]=(0,or.iM)((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[(0,lr._)("div",gh,[e.mailerEnabled?e.success||e.throttled?((0,lr.wg)(),(0,lr.iD)("div",yh,[e.success?((0,lr.wg)(),(0,lr.iD)("p",_h,(0,ur.zw)(e.$t("password_reset.check_email")),1)):(0,lr.kq)("",!0),(0,lr._)("div",kh,[(0,lr.Wm)(s,{to:{name:"root"}},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("password_reset.return_home")),1)]})),_:1})])])):((0,lr.wg)(),(0,lr.iD)("div",Sh,[e.passwordResetRequested?((0,lr.wg)(),(0,lr.iD)("p",jh,(0,ur.zw)(e.$t("password_reset.password_reset_required")),1)):(0,lr.kq)("",!0),(0,lr._)("p",null,(0,ur.zw)(e.$t("password_reset.instruction")),1),(0,lr._)("div",Oh,[(0,lr.wy)((0,lr._)("input",{ref:"email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.user.email=t}),disabled:e.isPending,placeholder:e.$t("password_reset.placeholder"),class:"form-control",type:"input"},null,8,Ch),[[or.nr,e.user.email]])]),(0,lr._)("div",Ph,[(0,lr._)("button",{disabled:e.isPending,type:"submit",class:"btn button-default btn-block"},(0,ur.zw)(e.$t("settings.save")),9,zh)])])):((0,lr.wg)(),(0,lr.iD)("div",vh,[e.passwordResetRequested?((0,lr.wg)(),(0,lr.iD)("p",wh,(0,ur.zw)(e.$t("password_reset.password_reset_required_but_mailer_is_disabled")),1)):((0,lr.wg)(),(0,lr.iD)("p",bh,(0,ur.zw)(e.$t("password_reset.password_reset_disabled")),1))])),e.error?((0,lr.wg)(),(0,lr.iD)("p",Ih,[(0,lr._)("span",null,(0,ur.zw)(e.error),1),(0,lr._)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[1]||(t[1]=(0,or.iM)((function(t){return e.dismissError()}),["prevent"]))},[(0,lr.Wm)(a,{icon:"times"})])])):(0,lr.kq)("",!0)])],32)])])}]]);var Mh={class:"settings panel panel-default"},Ah={class:"panel-heading"},Lh={class:"title"},Eh={class:"panel-body"},Fh={class:"follow-request-card-content-container"};const Rh={props:["user"],components:{BasicUserCard:Su.Z},methods:{findFollowRequestNotificationId:function(){var e=this,t=(0,K.Bt)(this.$store).find((function(t){return t.from_profile.id===e.user.id&&"follow_request"===t.type}));return t&&t.id},approveUser:function(){this.$store.state.api.backendInteractor.approveUser({id:this.user.id}),this.$store.dispatch("removeFollowRequest",this.user);var e=this.findFollowRequestNotificationId();this.$store.dispatch("markSingleNotificationAsSeen",{id:e}),this.$store.dispatch("updateNotification",{id:e,updater:function(e){e.type="follow"}})},denyUser:function(){var e=this,t=this.findFollowRequestNotificationId();this.$store.state.api.backendInteractor.denyUser({id:this.user.id}).then((function(){e.$store.dispatch("dismissNotificationLocal",{id:t}),e.$store.dispatch("removeFollowRequest",e.user)}))}}},Nh={components:{FollowRequestCard:(0,Lr.Z)(Rh,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("basic-user-card");return(0,lr.wg)(),(0,lr.j4)(s,{user:e.user},{default:(0,lr.w5)((function(){return[(0,lr._)("div",Fh,[(0,lr._)("button",{class:"btn button-default",onClick:t[0]||(t[0]=function(){return e.approveUser&&e.approveUser.apply(e,arguments)})},(0,ur.zw)(e.$t("user_card.approve")),1),(0,lr._)("button",{class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.denyUser&&e.denyUser.apply(e,arguments)})},(0,ur.zw)(e.$t("user_card.deny")),1)])]})),_:1},8,["user"])}]])},computed:{requests:function(){return this.$store.state.api.followRequests}}},qh=(0,Lr.Z)(Nh,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FollowRequestCard");return(0,lr.wg)(),(0,lr.iD)("div",Mh,[(0,lr._)("div",Ah,[(0,lr._)("div",Lh,(0,ur.zw)(e.$t("nav.friend_requests")),1)]),(0,lr._)("div",Eh,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.requests,(function(e){return(0,lr.wg)(),(0,lr.j4)(s,{key:e.id,user:e,class:"list-item"},null,8,["user"])})),128))])])}]]),Zh={props:["code"],mounted:function(){var e=this;if(this.code){var t=this.$store.state.oauth,n=t.clientId,r=t.clientSecret;qe.getToken({clientId:n,clientSecret:r,instance:this.$store.state.instance.server,code:this.code}).then((function(t){e.$store.commit("setToken",t.access_token),e.$store.dispatch("loginUser",t.access_token),e.$router.push({name:"friends"})}))}}},Wh=(0,Lr.Z)(Zh,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("h1",null,"...")}]]);var Bh={class:"panel panel-default"},Hh={class:"panel-heading"},Vh={class:"panel-body"};const Kh={components:{FollowCard:Dd},data:function(){return{users:[]}},mounted:function(){this.getWhoToFollow()},methods:{showWhoToFollow:function(e){var t=this;e.forEach((function(e,n){t.$store.state.api.backendInteractor.fetchUser({id:e.acct}).then((function(e){e.error||(t.$store.commit("addNewUsers",[e]),t.users.push(e))}))}))},getWhoToFollow:function(){var e=this,t=this.$store.state.users.currentUser.credentials;t&&m.ZP.suggestions({credentials:t}).then((function(t){e.showWhoToFollow(t)}))}}},Gh=(0,Lr.Z)(Kh,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FollowCard");return(0,lr.wg)(),(0,lr.iD)("div",Bh,[(0,lr._)("div",Hh,(0,ur.zw)(e.$t("who_to_follow.who_to_follow")),1),(0,lr._)("div",Vh,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.users,(function(e){return(0,lr.wg)(),(0,lr.j4)(s,{key:e.id,user:e,class:"list-item"},null,8,["user"])})),128))])])}]]);var Yh={class:"column-inner"},Jh={class:"panel panel-default"},Qh={class:"panel-body"},Xh=["innerHTML"];const em={computed:{content:function(){return this.$store.state.instance.tos}}},tm=(0,Lr.Z)(em,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("div",null,[(0,lr._)("div",Jh,[(0,lr._)("div",Qh,[(0,lr._)("div",{class:"tos-content",innerHTML:e.content},null,8,Xh)])])])}]]);var nm={class:"staff-panel"},rm={class:"panel panel-default base01-background"},om={class:"panel-heading timeline-heading base02-background"},im={class:"title"},sm={class:"panel-body"};function am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?am(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const lm={created:function(){var e=this;this.$store.state.instance.staffAccounts.forEach((function(t){return e.$store.dispatch("fetchUserIfMissing",t)}))},components:{BasicUserCard:Su.Z},computed:cm(cm({groupedStaffAccounts:function(){var e=we()(this.staffAccounts,this.findUserByName).filter((function(e){return e})),t=Ot()(e,"role");return[{role:"admin",users:t.admin},{role:"moderator",users:t.moderator}].filter((function(e){return e.users}))}},(0,s.Se)(["findUserByName"])),(0,s.rn)({staffAccounts:function(e){return e.instance.staffAccounts}}))},um=(0,Lr.Z)(lm,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("basic-user-card");return(0,lr.wg)(),(0,lr.iD)("div",nm,[(0,lr._)("div",rm,[(0,lr._)("div",om,[(0,lr._)("div",im,(0,ur.zw)(e.$t("about.staff")),1)]),(0,lr._)("div",sm,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.groupedStaffAccounts,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.role,class:"staff-group"},[(0,lr._)("h4",null,(0,ur.zw)(e.$t("general.role."+t.role)),1),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(t.users,(function(e){return(0,lr.wg)(),(0,lr.j4)(s,{key:e.screen_name,user:e},null,8,["user"])})),128))])})),128))])])])}]]);var dm={key:0,class:"mrf-transparency-panel"},pm={class:"panel panel-default base01-background"},hm={class:"panel-heading timeline-heading base02-background"},mm={class:"title"},fm={class:"panel-body"},gm={class:"mrf-section"},vm=["textContent"],wm={key:0},bm={key:1},ym={key:0},_m={key:1},km={key:2},Sm={key:0},jm={key:1},Om={key:3},Cm={key:0},Pm={key:1},zm={key:4},Im={key:0},Dm={key:1},xm={key:5},Tm={key:0},$m={key:1},Um={key:6},Mm={key:0},Am={key:1},Lm={key:7},Em={key:8},Fm=["textContent"],Rm={key:9},Nm=["textContent"],qm={key:10};function Zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bm=function(e,t,n){return e.map((function(e){return t[n]&&t[n][e]&&t[n][e].reason?{instance:e,reason:t[n][e].reason}:{instance:e,reason:""}}))};const Hm={computed:Wm(Wm({},(0,s.rn)({federationPolicy:function(e){return xt()(e,"instance.federationPolicy")},mrfPolicies:function(e){return xt()(e,"instance.federationPolicy.mrf_policies",[])},quarantineInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.quarantined_instances",[]),xt()(e,"instance.federationPolicy.quarantined_instances_info",[]),"quarantined_instances")},acceptInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.mrf_simple.accept",[]),xt()(e,"instance.federationPolicy.mrf_simple_info",[]),"accept")},rejectInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.mrf_simple.reject",[]),xt()(e,"instance.federationPolicy.mrf_simple_info",[]),"reject")},ftlRemovalInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.mrf_simple.federated_timeline_removal",[]),xt()(e,"instance.federationPolicy.mrf_simple_info",[]),"federated_timeline_removal")},mediaNsfwInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.mrf_simple.media_nsfw",[]),xt()(e,"instance.federationPolicy.mrf_simple_info",[]),"media_nsfw")},mediaRemovalInstances:function(e){return Bm(xt()(e,"instance.federationPolicy.mrf_simple.media_removal",[]),xt()(e,"instance.federationPolicy.mrf_simple_info",[]),"media_removal")},keywordsFtlRemoval:function(e){return xt()(e,"instance.federationPolicy.mrf_keyword.federated_timeline_removal",[])},keywordsReject:function(e){return xt()(e,"instance.federationPolicy.mrf_keyword.reject",[])},keywordsReplace:function(e){return xt()(e,"instance.federationPolicy.mrf_keyword.replace",[])}})),{},{hasInstanceSpecificPolicies:function(){return this.quarantineInstances.length||this.acceptInstances.length||this.rejectInstances.length||this.ftlRemovalInstances.length||this.mediaNsfwInstances.length||this.mediaRemovalInstances.length},hasKeywordPolicies:function(){return this.keywordsFtlRemoval.length||this.keywordsReject.length||this.keywordsReplace.length}})},Vm={components:{InstanceSpecificPanel:mi,FeaturesPanel:Pi,TermsOfServicePanel:tm,StaffPanel:um,MRFTransparencyPanel:(0,Lr.Z)(Hm,[["render",function(e,t,n,r,o,i){return e.federationPolicy?((0,lr.wg)(),(0,lr.iD)("div",dm,[(0,lr._)("div",pm,[(0,lr._)("div",hm,[(0,lr._)("div",mm,(0,ur.zw)(e.$t("about.mrf.federation")),1)]),(0,lr._)("div",fm,[(0,lr._)("div",gm,[(0,lr._)("h2",null,(0,ur.zw)(e.$t("about.mrf.mrf_policies")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.mrf_policies_desc")),1),(0,lr._)("ul",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.mrfPolicies,(function(e){return(0,lr.wg)(),(0,lr.iD)("li",{key:e,textContent:(0,ur.zw)(e)},null,8,vm)})),128))]),e.hasInstanceSpecificPolicies?((0,lr.wg)(),(0,lr.iD)("h2",wm,(0,ur.zw)(e.$t("about.mrf.simple.simple_policies")),1)):(0,lr.kq)("",!0),e.acceptInstances.length?((0,lr.wg)(),(0,lr.iD)("div",bm,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.accept")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.accept_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.acceptInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_accept"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",ym,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",_m,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.rejectInstances.length?((0,lr.wg)(),(0,lr.iD)("div",km,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.reject")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.reject_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.rejectInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_reject"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",Sm,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",jm,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.quarantineInstances.length?((0,lr.wg)(),(0,lr.iD)("div",Om,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.quarantine")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.quarantine_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.quarantineInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_quarantine"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",Cm,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",Pm,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.ftlRemovalInstances.length?((0,lr.wg)(),(0,lr.iD)("div",zm,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.ftl_removal")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.ftl_removal_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.ftlRemovalInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_ftl_removal"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",Im,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",Dm,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.mediaNsfwInstances.length?((0,lr.wg)(),(0,lr.iD)("div",xm,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.media_nsfw")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.media_nsfw_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.mediaNsfwInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_media_nsfw"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",Tm,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",$m,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.mediaRemovalInstances.length?((0,lr.wg)(),(0,lr.iD)("div",Um,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.simple.media_removal")),1),(0,lr._)("p",null,(0,ur.zw)(e.$t("about.mrf.simple.media_removal_desc")),1),(0,lr._)("table",null,[(0,lr._)("tr",null,[(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.instance")),1),(0,lr._)("th",null,(0,ur.zw)(e.$t("about.mrf.simple.reason")),1)]),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.mediaRemovalInstances,(function(t){return(0,lr.wg)(),(0,lr.iD)("tr",{key:t.instance+"_media_removal"},[(0,lr._)("td",null,(0,ur.zw)(t.instance),1),""===t.reason?((0,lr.wg)(),(0,lr.iD)("td",Mm,(0,ur.zw)(e.$t("about.mrf.simple.not_applicable")),1)):((0,lr.wg)(),(0,lr.iD)("td",Am,(0,ur.zw)(t.reason),1))])})),128))])])):(0,lr.kq)("",!0),e.hasKeywordPolicies?((0,lr.wg)(),(0,lr.iD)("h2",Lm,(0,ur.zw)(e.$t("about.mrf.keyword.keyword_policies")),1)):(0,lr.kq)("",!0),e.keywordsFtlRemoval.length?((0,lr.wg)(),(0,lr.iD)("div",Em,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.keyword.ftl_removal")),1),(0,lr._)("ul",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.keywordsFtlRemoval,(function(e){return(0,lr.wg)(),(0,lr.iD)("li",{key:e,textContent:(0,ur.zw)(e)},null,8,Fm)})),128))])])):(0,lr.kq)("",!0),e.keywordsReject.length?((0,lr.wg)(),(0,lr.iD)("div",Rm,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.keyword.reject")),1),(0,lr._)("ul",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.keywordsReject,(function(e){return(0,lr.wg)(),(0,lr.iD)("li",{key:e,textContent:(0,ur.zw)(e)},null,8,Nm)})),128))])])):(0,lr.kq)("",!0),e.keywordsReplace.length?((0,lr.wg)(),(0,lr.iD)("div",qm,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("about.mrf.keyword.replace")),1),(0,lr._)("ul",null,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.keywordsReplace,(function(t){return(0,lr.wg)(),(0,lr.iD)("li",{key:t},(0,ur.zw)(t.pattern)+" "+(0,ur.zw)(e.$t("about.mrf.keyword.is_replaced_by"))+" "+(0,ur.zw)(t.replacement),1)})),128))])])):(0,lr.kq)("",!0)])])])])):(0,lr.kq)("",!0)}]])},computed:{showFeaturesPanel:function(){return this.$store.state.instance.showFeaturesPanel},showInstanceSpecificPanel:function(){return this.$store.state.instance.showInstanceSpecificPanel&&!this.$store.getters.mergedConfig.hideISP&&this.$store.state.instance.instanceSpecificPanelContent}}},Km=(0,Lr.Z)(Vm,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("instance-specific-panel"),a=(0,lr.up)("staff-panel"),c=(0,lr.up)("terms-of-service-panel"),l=(0,lr.up)("MRFTransparencyPanel"),u=(0,lr.up)("features-panel");return(0,lr.wg)(),(0,lr.iD)("div",Yh,[e.showInstanceSpecificPanel?((0,lr.wg)(),(0,lr.j4)(s,{key:0})):(0,lr.kq)("",!0),(0,lr.Wm)(a),(0,lr.Wm)(c),(0,lr.Wm)(l),e.showFeaturesPanel?((0,lr.wg)(),(0,lr.j4)(u,{key:1})):(0,lr.kq)("",!0)])}]]);var Gm={class:"panel panel-default"},Ym={class:"panel-heading"},Jm={class:"panel-body"},Qm={key:0};const Xm={data:function(){return{error:!1}},mounted:function(){this.redirect()},methods:{redirect:function(){var e=this,t=this.$route.params.username+"@"+this.$route.params.hostname;this.$store.state.api.backendInteractor.fetchUser({id:t}).then((function(t){if(t.error)e.error=!0;else{e.$store.commit("addNewUsers",[t]);var n=t.id;e.$router.replace({name:"external-user-profile",params:{id:n}})}})).catch((function(){e.error=!0}))}}},ef=(0,Lr.Z)(Xm,[["render",function(e,t,n,r,o,i){return(0,lr.wg)(),(0,lr.iD)("div",Gm,[(0,lr._)("div",Ym,(0,ur.zw)(e.$t("remote_user_resolver.remote_user_resolver")),1),(0,lr._)("div",Jm,[(0,lr._)("p",null,(0,ur.zw)(e.$t("remote_user_resolver.searching_for"))+" @"+(0,ur.zw)(e.$route.params.username)+"@"+(0,ur.zw)(e.$route.params.hostname),1),e.error?((0,lr.wg)(),(0,lr.iD)("p",Qm,(0,ur.zw)(e.$t("remote_user_resolver.error")),1)):(0,lr.kq)("",!0)])])}]]);var tf={class:"Lists panel panel-default"},nf={class:"panel-heading"},rf={class:"title"},of={class:"panel-body"},sf={class:"list-card"};Rt.vI.add(Nt.cNd);const af={props:["list"]},cf={data:function(){return{isNew:!1}},components:{ListsCard:(0,Lr.Z)(af,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link"),a=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",sf,[(0,lr.Wm)(s,{to:{name:"lists-timeline",params:{id:e.list.id}},class:"list-name"},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.list.title),1)]})),_:1},8,["to"]),(0,lr.Wm)(s,{to:{name:"lists-edit",params:{id:e.list.id}},class:"button-list-edit"},{default:(0,lr.w5)((function(){return[(0,lr.Wm)(a,{class:"fa-scale-110 fa-old-padding",icon:"ellipsis-h"})]})),_:1},8,["to"])])}]])},computed:{lists:function(){return this.$store.state.lists.allLists}},methods:{cancelNewList:function(){this.isNew=!1},newList:function(){this.isNew=!0}}},lf=(0,Lr.Z)(cf,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("router-link"),a=(0,lr.up)("ListsCard");return(0,lr.wg)(),(0,lr.iD)("div",tf,[(0,lr._)("div",nf,[(0,lr._)("div",rf,(0,ur.zw)(e.$t("lists.lists")),1),(0,lr.Wm)(s,{to:{name:"lists-new"},class:"button-default btn new-list-button"},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("lists.new")),1)]})),_:1})]),(0,lr._)("div",of,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.lists.slice().reverse(),(function(e){return(0,lr.wg)(),(0,lr.j4)(a,{key:e,list:e,class:"list-item"},null,8,["list"])})),128))])])}]]),uf=lf,df={data:function(){return{listId:null}},components:{Timeline:gl},computed:{timeline:function(){return this.$store.state.statuses.timelines.list}},watch:{$route:function(e){"lists-timeline"===e.name&&e.params.id!==this.listId&&(this.listId=e.params.id,this.$store.dispatch("stopFetchingTimeline","list"),this.$store.commit("clearTimeline",{timeline:"list"}),this.$store.dispatch("fetchList",{listId:this.listId}),this.$store.dispatch("startFetchingTimeline",{timeline:"list",listId:this.listId}))}},created:function(){this.listId=this.$route.params.id,this.$store.dispatch("fetchList",{listId:this.listId}),this.$store.dispatch("startFetchingTimeline",{timeline:"list",listId:this.listId})},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","list"),this.$store.commit("clearTimeline",{timeline:"list"})}},pf=(0,Lr.Z)(df,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Timeline");return(0,lr.wg)(),(0,lr.j4)(s,{title:"list.name",timeline:e.timeline,"list-id":e.listId,"timeline-name":"list"},null,8,["timeline","list-id"])}]]);var hf={class:"panel-default panel ListEdit"},mf={ref:"header",class:"panel-heading list-edit-heading"},ff={class:"title"},gf={class:"panel-body"},vf={class:"input-wrap"},wf={for:"list-edit-title"},bf=["label"],yf={class:"users-list"},_f=["onClick"],kf=["label"],Sf={key:0,class:"loading"},jf={key:1,class:"users-list"},Of={key:0},Cf=["onClick"],Pf=["onClick"],zf={class:"panel-footer"},If=(0,lr._)("span",{class:"spacer"},null,-1),Df={class:"ListsUserSearch"},xf={class:"input-wrap"},Tf={class:"input-search"},$f=["placeholder"],Uf={class:"input-wrap"};Rt.vI.add(Nt.wn1,Nt.A35);const Mf={components:{Checkbox:oi.Z},emits:["loading","loadingDone","results"],data:function(){return{loading:!1,query:"",followingOnly:!0}},methods:{onInput:Bs()((function(){this.search(this.query)}),2e3),search:function(e){var t=this;e?(this.loading=!0,this.$emit("loading"),this.userIds=[],this.$store.dispatch("search",{q:e,resolve:!0,type:"accounts",following:this.followingOnly}).then((function(e){t.$emit("results",e.accounts.map((function(e){return e.id})))})).finally((function(){t.loading=!1,t.$emit("loadingDone")}))):this.loading=!1}}},Af=(0,Lr.Z)(Mf,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("Checkbox");return(0,lr.wg)(),(0,lr.iD)("div",Df,[(0,lr._)("div",xf,[(0,lr._)("div",Tf,[(0,lr.Wm)(s,{class:"search-icon fa-scale-110 fa-old-padding",icon:"search"})]),(0,lr.wy)((0,lr._)("input",{ref:"search","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.query=t}),placeholder:e.$t("lists.search"),onInput:t[1]||(t[1]=function(){return e.onInput&&e.onInput.apply(e,arguments)})},null,40,$f),[[or.nr,e.query]])]),(0,lr._)("div",Uf,[(0,lr.Wm)(a,{modelValue:e.followingOnly,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.followingOnly=t}),onChange:e.onInput},{default:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.$t("lists.following_only")),1)]})),_:1},8,["modelValue","onChange"])])])}]]);var Lf=n(96786);function Ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ef(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rt.vI.add(Nt.wn1,Nt.A35);var Rf={components:{BasicUserCard:Su.Z,UserAvatar:su.default,ListsUserSearch:Af,TabSwitcher:El.Z,PanelLoading:Lf.Z},data:function(){return{title:"",titleDraft:"",membersUserIds:[],removedUserIds:new Set([]),searchUserIds:[],addedUserIds:new Set([]),searchLoading:!1,reallyDelete:!1}},created:function(){var e=this;this.id&&(this.$store.dispatch("fetchList",{listId:this.id}).then((function(){e.title=e.findListTitle(e.id),e.titleDraft=e.title})),this.$store.dispatch("fetchListAccounts",{listId:this.id}).then((function(){e.membersUserIds=e.findListAccounts(e.id),e.membersUserIds.forEach((function(t){e.$store.dispatch("fetchUserIfMissing",t)}))})))},computed:Ff(Ff({id:function(){return this.$route.params.id},membersUsers:function(){var e=this;return[].concat((0,u.Z)(this.membersUserIds),(0,u.Z)(this.addedUserIds)).map((function(t){return e.findUser(t)})).filter((function(e){return e}))},searchUsers:function(){var e=this;return this.searchUserIds.map((function(t){return e.findUser(t)})).filter((function(e){return e}))}},(0,s.rn)({currentUser:function(e){return e.users.currentUser}})),(0,s.Se)(["findUser","findListTitle","findListAccounts"])),methods:{onInput:function(){this.search(this.query)},toggleRemoveMember:function(e){this.removedUserIds.has(e.id)?(this.id&&this.addUser(e),this.removedUserIds.delete(e.id)):(this.id&&this.removeUser(e.id),this.removedUserIds.add(e.id))},toggleAddFromSearch:function(e){this.addedUserIds.has(e.id)?(this.id&&this.removeUser(e.id),this.addedUserIds.delete(e.id)):(this.id&&this.addUser(e),this.addedUserIds.add(e.id))},isRemoved:function(e){return this.removedUserIds.has(e.id)},isAdded:function(e){return this.addedUserIds.has(e.id)},addUser:function(e){this.$store.dispatch("addListAccount",{accountId:this.user.id,listId:this.id})},removeUser:function(e){this.$store.dispatch("removeListAccount",{accountId:this.user.id,listId:this.id})},onSearchLoading:function(e){this.searchLoading=!0},onSearchLoadingDone:function(e){this.searchLoading=!1},onSearchResults:function(e){this.searchLoading=!1,this.searchUserIds=e},updateListTitle:function(){var e=this;this.$store.dispatch("setList",{listId:this.id,title:this.titleDraft}).then((function(){e.title=e.findListTitle(e.id)}))},createList:function(){var e=this;this.$store.dispatch("createList",{title:this.titleDraft}).then((function(t){return e.$store.dispatch("setListAccounts",{listId:t.id,accountIds:(0,u.Z)(e.addedUserIds)}).then((function(){return t.id}))})).then((function(t){e.$router.push({name:"lists-timeline",params:{id:t}})})).catch((function(t){e.$store.dispatch("pushGlobalNotice",{messageKey:"lists.error",messageArgs:[t.message],level:"error"})}))},deleteList:function(){this.$store.dispatch("deleteList",{listId:this.id}),this.$router.push({name:"lists"})}}};const Nf=Rf,qf=(0,Lr.Z)(Nf,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("FAIcon"),a=(0,lr.up)("i18n-t"),c=(0,lr.up)("BasicUserCard"),l=(0,lr.up)("ListsUserSearch"),u=(0,lr.up)("PanelLoading"),d=(0,lr.up)("tab-switcher");return(0,lr.wg)(),(0,lr.iD)("div",hf,[(0,lr._)("div",mf,[(0,lr._)("button",{class:"button-unstyled go-back-button",onClick:t[0]||(t[0]=function(){var t;return e.$router.back&&(t=e.$router).back.apply(t,arguments)})},[(0,lr.Wm)(s,{size:"lg",icon:"chevron-left"})]),(0,lr._)("div",ff,[e.id?((0,lr.wg)(),(0,lr.j4)(a,{key:0,keypath:"lists.editing_list"},{listTitle:(0,lr.w5)((function(){return[(0,lr.Uk)((0,ur.zw)(e.title),1)]})),_:1})):((0,lr.wg)(),(0,lr.j4)(a,{key:1,keypath:"lists.creating_list"}))])],512),(0,lr._)("div",gf,[(0,lr._)("div",vf,[(0,lr._)("label",wf,(0,ur.zw)(e.$t("lists.title")),1),(0,lr.Uk)(" "+(0,ur.zw)(" ")+" "),(0,lr.wy)((0,lr._)("input",{id:"list-edit-title",ref:"title","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.titleDraft=t})},null,512),[[or.nr,e.titleDraft]]),e.id?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"btn button-default follow-button",onClick:t[2]||(t[2]=function(){return e.updateListTitle&&e.updateListTitle.apply(e,arguments)})},(0,ur.zw)(e.$t("lists.update_title")),1)):(0,lr.kq)("",!0)]),(0,lr.Wm)(d,{class:"list-member-management","scrollable-tabs":!0},{default:(0,lr.w5)((function(){return[e.id||e.addedUserIds.size>0?((0,lr.wg)(),(0,lr.iD)("div",{key:0,label:e.$t("lists.manage_members"),class:"members-list"},[(0,lr._)("div",yf,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.membersUsers,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.id,class:"member"},[(0,lr.Wm)(c,{user:t},{default:(0,lr.w5)((function(){return[(0,lr._)("button",{class:"btn button-default follow-button",onClick:function(n){return e.toggleRemoveMember(t)}},(0,ur.zw)(e.isRemoved(t)?e.$t("general.undo"):e.$t("lists.remove_from_list")),9,_f)]})),_:2},1032,["user"])])})),128))])],8,bf)):(0,lr.kq)("",!0),(0,lr._)("div",{class:"search-list",label:e.$t("lists.add_members")},[(0,lr.Wm)(l,{onResults:e.onSearchResults,onLoading:e.onSearchLoading,onLoadingDone:e.onSearchLoadingDone},null,8,["onResults","onLoading","onLoadingDone"]),e.searchLoading?((0,lr.wg)(),(0,lr.iD)("div",Sf,[(0,lr.Wm)(u)])):((0,lr.wg)(),(0,lr.iD)("div",jf,[((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.searchUsers,(function(t){return(0,lr.wg)(),(0,lr.iD)("div",{key:t.id,class:"member"},[(0,lr.Wm)(c,{user:t},{default:(0,lr.w5)((function(){return[e.membersUserIds.includes(t.id)?((0,lr.wg)(),(0,lr.iD)("span",Of,(0,ur.zw)(e.$t("lists.is_in_list")),1)):(0,lr.kq)("",!0),e.membersUserIds.includes(t.id)?((0,lr.wg)(),(0,lr.iD)("button",{key:2,class:"btn button-default follow-button",onClick:function(n){return e.toggleRemoveMember(t)}},(0,ur.zw)(e.isRemoved(t)?e.$t("general.undo"):e.$t("lists.remove_from_list")),9,Pf)):((0,lr.wg)(),(0,lr.iD)("button",{key:1,class:"btn button-default follow-button",onClick:function(n){return e.toggleAddFromSearch(t)}},(0,ur.zw)(e.isAdded(t)?e.$t("general.undo"):e.$t("lists.add_to_list")),9,Cf))]})),_:2},1032,["user"])])})),128))]))],8,kf)]})),_:1})]),(0,lr._)("div",zf,[If,e.id?e.reallyDelete?((0,lr.wg)(),(0,lr.iD)(lr.HY,{key:2},[(0,lr.Uk)((0,ur.zw)(e.$t("lists.really_delete"))+" ",1),(0,lr._)("button",{class:"btn button-default footer-button",onClick:t[5]||(t[5]=function(){return e.deleteList&&e.deleteList.apply(e,arguments)})},(0,ur.zw)(e.$t("general.yes")),1),(0,lr._)("button",{class:"btn button-default footer-button",onClick:t[6]||(t[6]=function(t){return e.reallyDelete=!1})},(0,ur.zw)(e.$t("general.no")),1)],64)):((0,lr.wg)(),(0,lr.iD)("button",{key:1,class:"btn button-default footer-button",onClick:t[4]||(t[4]=function(t){return e.reallyDelete=!0})},(0,ur.zw)(e.$t("lists.delete")),1)):((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:"btn button-default footer-button",onClick:t[3]||(t[3]=function(){return e.createList&&e.createList.apply(e,arguments)})},(0,ur.zw)(e.$t("lists.create")),1))])])}]]);var Zf={class:"panel panel-default announcements-page"},Wf={class:"panel-heading"},Bf={class:"panel-body"},Hf={key:0},Vf={class:"post-form"},Kf={class:"heading"},Gf={class:"body"},Yf={class:"footer"},Jf=["disabled"],Qf={key:0,class:"alert error"},Xf={class:"announcement"},eg={class:"heading"},tg={class:"body"},ng={class:"footer"},rg={key:0,class:"times"},og={key:0},ig={key:1},sg={key:2},ag={key:1,class:"actions"},cg=["disabled","title"],lg={key:2,class:"actions"},ug={key:0,class:"alert error"},dg={class:"announcement-editor"},pg=["placeholder","disabled"],hg={class:"announcement-metadata"},mg={for:"announcement-start-time"},fg=["type","disabled"],gg={class:"announcement-metadata"},vg={for:"announcement-end-time"},wg=["type","disabled"],bg={class:"announcement-metadata"},yg={for:"announcement-all-day"};const _g={components:{Checkbox:oi.Z},props:{announcement:Object,disabled:Boolean}},kg=(0,Lr.Z)(_g,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("Checkbox");return(0,lr.wg)(),(0,lr.iD)("div",dg,[(0,lr.wy)((0,lr._)("textarea",{ref:"textarea","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.announcement.content=t}),class:"post-textarea",rows:"1",cols:"1",placeholder:e.$t("announcements.post_placeholder"),disabled:e.disabled},null,8,pg),[[or.nr,e.announcement.content]]),(0,lr._)("span",hg,[(0,lr._)("label",mg,(0,ur.zw)(e.$t("announcements.start_time_prompt")),1),(0,lr.wy)((0,lr._)("input",{id:"announcement-start-time","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.announcement.startsAt=t}),type:e.announcement.allDay?"date":"datetime-local",disabled:e.disabled},null,8,fg),[[or.YZ,e.announcement.startsAt]])]),(0,lr._)("span",gg,[(0,lr._)("label",vg,(0,ur.zw)(e.$t("announcements.end_time_prompt")),1),(0,lr.wy)((0,lr._)("input",{id:"announcement-end-time","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.announcement.endsAt=t}),type:e.announcement.allDay?"date":"datetime-local",disabled:e.disabled},null,8,wg),[[or.YZ,e.announcement.endsAt]])]),(0,lr._)("span",bg,[(0,lr.Wm)(s,{id:"announcement-all-day",modelValue:e.announcement.allDay,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.announcement.allDay=t}),disabled:e.disabled},null,8,["modelValue","disabled"]),(0,lr._)("label",yg,(0,ur.zw)(e.$t("announcements.all_day_prompt")),1)])])}]]);function Sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sg(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Og={components:{AnnouncementEditor:kg,RichContent:uu.Z},data:function(){return{editing:!1,editedAnnouncement:{content:"",startsAt:void 0,endsAt:void 0,allDay:void 0},editError:""}},props:{announcement:Object},computed:jg(jg({},(0,s.rn)({currentUser:function(e){return e.users.currentUser}})),{},{content:function(){return this.announcement.content},isRead:function(){return this.announcement.read},publishedAt:function(){var e=this.announcement.published_at;if(e)return this.formatTimeOrDate(e,Ju.Z.internalToBrowserLocale(this.$i18n.locale))},startsAt:function(){var e=this.announcement.starts_at;if(e)return this.formatTimeOrDate(e,Ju.Z.internalToBrowserLocale(this.$i18n.locale))},endsAt:function(){var e=this.announcement.ends_at;if(e)return this.formatTimeOrDate(e,Ju.Z.internalToBrowserLocale(this.$i18n.locale))},inactive:function(){return this.announcement.inactive}}),methods:{markAsRead:function(){if(!this.isRead)return this.$store.dispatch("markAnnouncementAsRead",this.announcement.id)},deleteAnnouncement:function(){return this.$store.dispatch("deleteAnnouncement",this.announcement.id)},formatTimeOrDate:function(e,t){var n=new Date(e);return this.announcement.all_day?n.toLocaleDateString(t):n.toLocaleString(t)},enterEditMode:function(){this.editedAnnouncement.content=this.announcement.pleroma.raw_content,this.editedAnnouncement.startsAt=this.announcement.starts_at,this.editedAnnouncement.endsAt=this.announcement.ends_at,this.editedAnnouncement.allDay=this.announcement.all_day,this.editing=!0},submitEdit:function(){var e=this;this.$store.dispatch("editAnnouncement",jg({id:this.announcement.id},this.editedAnnouncement)).then((function(){e.editing=!1})).catch((function(t){e.editError=t.error}))},cancelEdit:function(){this.editing=!1},clearError:function(){this.editError=void 0}}};function Cg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cg(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zg={components:{Announcement:(0,Lr.Z)(Og,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("rich-content"),a=(0,lr.up)("announcement-editor"),c=(0,lr.up)("FAIcon");return(0,lr.wg)(),(0,lr.iD)("div",Xf,[(0,lr._)("div",eg,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("announcements.title")),1)]),(0,lr._)("div",tg,[e.editing?((0,lr.wg)(),(0,lr.j4)(a,{key:1,announcement:e.editedAnnouncement},null,8,["announcement"])):((0,lr.wg)(),(0,lr.j4)(s,{key:0,html:e.content,emoji:e.announcement.emojis,"handle-links":!0},null,8,["html","emoji"]))]),(0,lr._)("div",ng,[e.editing?(0,lr.kq)("",!0):((0,lr.wg)(),(0,lr.iD)("div",rg,[e.publishedAt?((0,lr.wg)(),(0,lr.iD)("span",og,(0,ur.zw)(e.$t("announcements.published_time_display",{time:e.publishedAt})),1)):(0,lr.kq)("",!0),e.startsAt?((0,lr.wg)(),(0,lr.iD)("span",ig,(0,ur.zw)(e.$t("announcements.start_time_display",{time:e.startsAt})),1)):(0,lr.kq)("",!0),e.endsAt?((0,lr.wg)(),(0,lr.iD)("span",sg,(0,ur.zw)(e.$t("announcements.end_time_display",{time:e.endsAt})),1)):(0,lr.kq)("",!0)])),e.editing?((0,lr.wg)(),(0,lr.iD)("div",lg,[(0,lr._)("button",{class:"btn button-default",onClick:t[3]||(t[3]=function(){return e.submitEdit&&e.submitEdit.apply(e,arguments)})},(0,ur.zw)(e.$t("announcements.submit_edit_action")),1),(0,lr._)("button",{class:"btn button-default",onClick:t[4]||(t[4]=function(){return e.cancelEdit&&e.cancelEdit.apply(e,arguments)})},(0,ur.zw)(e.$t("announcements.cancel_edit_action")),1),e.editing&&e.editError?((0,lr.wg)(),(0,lr.iD)("div",ug,[(0,lr.Uk)((0,ur.zw)(e.$t("announcements.edit_error",{error:e.error}))+" ",1),(0,lr._)("button",{class:"button-unstyled",onClick:t[5]||(t[5]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,lr.Wm)(c,{class:"fa-scale-110 fa-old-padding",icon:"times",title:e.$t("announcements.close_error")},null,8,["title"])])])):(0,lr.kq)("",!0)])):((0,lr.wg)(),(0,lr.iD)("div",ag,[e.currentUser?((0,lr.wg)(),(0,lr.iD)("button",{key:0,class:(0,ur.C_)(["btn button-default",{toggled:e.isRead}]),disabled:e.inactive,title:e.inactive?e.$t("announcements.inactive_message"):"",onClick:t[0]||(t[0]=function(){return e.markAsRead&&e.markAsRead.apply(e,arguments)})},(0,ur.zw)(e.$t("announcements.mark_as_read_action")),11,cg)):(0,lr.kq)("",!0),e.currentUser&&"admin"===e.currentUser.role?((0,lr.wg)(),(0,lr.iD)("button",{key:1,class:"btn button-default",onClick:t[1]||(t[1]=function(){return e.enterEditMode&&e.enterEditMode.apply(e,arguments)})},(0,ur.zw)(e.$t("announcements.edit_action")),1)):(0,lr.kq)("",!0),e.currentUser&&"admin"===e.currentUser.role?((0,lr.wg)(),(0,lr.iD)("button",{key:2,class:"btn button-default",onClick:t[2]||(t[2]=function(){return e.deleteAnnouncement&&e.deleteAnnouncement.apply(e,arguments)})},(0,ur.zw)(e.$t("announcements.delete_action")),1)):(0,lr.kq)("",!0)]))])])}]]),AnnouncementEditor:kg},data:function(){return{newAnnouncement:{content:"",startsAt:void 0,endsAt:void 0,allDay:!1},posting:!1,error:void 0}},mounted:function(){this.$store.dispatch("fetchAnnouncements")},computed:Pg(Pg({},(0,s.rn)({currentUser:function(e){return e.users.currentUser}})),{},{announcements:function(){return this.$store.state.announcements.announcements}}),methods:{postAnnouncement:function(){var e=this;this.posting=!0,this.$store.dispatch("postAnnouncement",this.newAnnouncement).then((function(){e.newAnnouncement.content="",e.startsAt=void 0,e.endsAt=void 0})).catch((function(t){e.error=t.error})).finally((function(){e.posting=!1}))},clearError:function(){this.error=void 0}}},Ig=(0,Lr.Z)(zg,[["render",function(e,t,n,r,o,i){var s=(0,lr.up)("announcement-editor"),a=(0,lr.up)("FAIcon"),c=(0,lr.up)("announcement");return(0,lr.wg)(),(0,lr.iD)("div",Zf,[(0,lr._)("div",Wf,[(0,lr._)("span",null,(0,ur.zw)(e.$t("announcements.page_header")),1)]),(0,lr._)("div",Bf,[e.currentUser&&"admin"===e.currentUser.role?((0,lr.wg)(),(0,lr.iD)("section",Hf,[(0,lr._)("div",Vf,[(0,lr._)("div",Kf,[(0,lr._)("h4",null,(0,ur.zw)(e.$t("announcements.post_form_header")),1)]),(0,lr._)("div",Gf,[(0,lr.Wm)(s,{announcement:e.newAnnouncement,disabled:e.posting},null,8,["announcement","disabled"])]),(0,lr._)("div",Yf,[(0,lr._)("button",{class:"btn button-default post-button",disabled:e.posting,onClick:t[0]||(t[0]=(0,or.iM)((function(){return e.postAnnouncement&&e.postAnnouncement.apply(e,arguments)}),["prevent"]))},(0,ur.zw)(e.$t("announcements.post_action")),9,Jf),e.error?((0,lr.wg)(),(0,lr.iD)("div",Qf,[(0,lr.Uk)((0,ur.zw)(e.$t("announcements.post_error",{error:e.error}))+" ",1),(0,lr._)("button",{class:"button-unstyled",onClick:t[1]||(t[1]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,lr.Wm)(a,{class:"fa-scale-110 fa-old-padding",icon:"times",title:e.$t("announcements.close_error")},null,8,["title"])])])):(0,lr.kq)("",!0)])])])):(0,lr.kq)("",!0),((0,lr.wg)(!0),(0,lr.iD)(lr.HY,null,(0,lr.Ko)(e.announcements,(function(e){return(0,lr.wg)(),(0,lr.iD)("section",{key:e.id},[(0,lr.Wm)(c,{announcement:e},null,8,["announcement"])])})),128))])])}]]),Dg=function(e){var t=function(t,n,r){e.state.users.currentUser?r():r(e.state.instance.redirectRootNoLogin||"/main/all")},n=[{name:"root",path:"/",redirect:function(t){return(e.state.users.currentUser?e.state.instance.redirectRootLogin:e.state.instance.redirectRootNoLogin)||"/main/all"}},{name:"public-external-timeline",path:"/main/all",component:yl},{name:"public-timeline",path:"/main/public",component:wl},{name:"friends",path:"/main/friends",component:kl,beforeEnter:t},{name:"tag-timeline",path:"/tag/:tag",component:jl},{name:"bookmarks",path:"/bookmarks",component:Cl},{name:"conversation",path:"/notice/:id",component:zl,meta:{dontScroll:!0}},{name:"remote-user-profile-acct",path:"/remote-users/:_(@)?:username([^/@]+)@:hostname([^/@]+)",component:ef,beforeEnter:t},{name:"remote-user-profile",path:"/remote-users/:hostname/:username",component:ef,beforeEnter:t},{name:"external-user-profile",path:"/users/$:id",component:Nd},{name:"interactions",path:"/users/:username/interactions",component:Nl,beforeEnter:t},{name:"dms",path:"/users/:username/dms",component:Zl,beforeEnter:t},{name:"registration",path:"/registration",component:ph},{name:"password-reset",path:"/password-reset",component:Uh,props:!0},{name:"registration-token",path:"/registration/:token",component:ph},{name:"friend-requests",path:"/friend-requests",component:qh,beforeEnter:t},{name:"notifications",path:"/:username/notifications",component:aa.default,props:function(){return{disableTeleport:!0}},beforeEnter:t},{name:"login",path:"/login",component:bo},{name:"shout-panel",path:"/shout-panel",component:ns,props:function(){return{floating:!1}}},{name:"oauth-callback",path:"/oauth-callback",component:Wh,props:function(e){return{code:e.query.code}}},{name:"search",path:"/search",component:vp,props:function(e){return{query:e.query.query}}},{name:"who-to-follow",path:"/who-to-follow",component:Gh,beforeEnter:t},{name:"about",path:"/about",component:Km},{name:"announcements",path:"/announcements",component:Ig},{name:"user-profile",path:"/users/:name",component:Nd},{name:"legacy-user-profile",path:"/:name",component:Nd},{name:"lists",path:"/lists",component:uf},{name:"lists-timeline",path:"/lists/:id",component:pf},{name:"lists-edit",path:"/lists/:id/edit",component:qf},{name:"lists-new",path:"/lists/new",component:qf},{name:"edit-navigation",path:"/nav-edit",component:ci,props:function(){return{forceExpand:!0,forceEditMode:!0}},beforeEnter:t}];return e.state.instance.pleromaChatMessagesAvailable&&(n=n.concat([{name:"chat",path:"/users/:username/chats/:recipient_id",component:ld,meta:{dontScroll:!1},beforeEnter:t},{name:"chats",path:"/users/:username/chats",component:Tu,meta:{dontScroll:!1},beforeEnter:t}])),n};var xg,Tg,$g=n(58509),Ug=new Set([]),Mg=function(e){var t=window.innerWidth-document.documentElement.clientWidth;$g.Qp(e,{reserveScrollBarGap:!0}),Ug.add(e),setTimeout((function(){if(Ug.size<=1){if(void 0===xg){var e=document.getElementById("nav");xg=window.getComputedStyle(e).getPropertyValue("padding-right"),e.style.paddingRight=xg?"calc(".concat(xg," + ").concat(t,"px)"):"".concat(t,"px")}if(void 0===Tg){var n=document.getElementById("app_bg_wrapper");Tg=window.getComputedStyle(n).getPropertyValue("right"),n.style.right=Tg?"calc(".concat(Tg," + ").concat(t,"px)"):"".concat(t,"px")}document.body.classList.add("scroll-locked")}}))},Ag=function(e){Ug.delete(e),setTimeout((function(){0===Ug.size&&(void 0!==xg&&(document.getElementById("nav").style.paddingRight=xg,xg=void 0),void 0!==Tg&&(document.getElementById("app_bg_wrapper").style.right=Tg,Tg=void 0),document.body.classList.remove("scroll-locked"))})),$g.tG(e)},Lg={mounted:function(e,t){t.value&&Mg(e)},updated:function(e,t){t.oldValue!==t.value&&(t.value?Mg(e):Ag(e))},unmounted:function(e){Ag(e)}};const Eg=function(e){e.directive("body-scroll-lock",Lg)};var Fg=n(49753);function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ng(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qg=null,Zg=function(e){var t=atob(e),n=Uint8Array.from((0,u.Z)(t).map((function(e){return e.charCodeAt(0)})));return(new TextDecoder).decode(n)},Wg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.getElementById("initial-results")?(qg||(qg=JSON.parse(document.getElementById("initial-results").textContent)),qg):null)&&n[t]){e.next=3;break}return e.abrupt("return",window.fetch(t));case 3:return r=Zg(n[t]),o=JSON.parse(r),e.abrupt("return",{ok:!0,json:function(){return o},text:function(){return o}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Wg("/api/v1/instance");case 4:if(!(r=e.sent).ok){e.next=16;break}return e.next=8,r.json();case 8:o=e.sent,s=o.max_toot_chars,a=o.pleroma.vapid_public_key,n.dispatch("setInstanceOption",{name:"textlimit",value:s}),n.dispatch("setInstanceOption",{name:"accountApprovalRequired",value:o.approval_required}),a&&n.dispatch("setInstanceOption",{name:"vapidPublicKey",value:a}),e.next=17;break;case 16:throw r;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("Could not load instance config, potentially fatal"),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),Hg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.store,e.prev=1,e.next=4,window.fetch("/api/pleroma/frontend_configurations");case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r.pleroma_fe);case 12:throw n;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Could not load backend-provided frontend config, potentially fatal"),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),Vg=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("/static/config.json");case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:throw t;case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.warn("Failed to load static/config.json, continuing without it."),console.warn(e.t0),e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Kg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiConfig,r=t.staticConfig,o=t.store,s=window.___pleromafe_dev_overrides||{},a=window.___pleromafe_mode.NODE_ENV,c={},s.staticConfigPreference&&"development"===a?(console.warn("OVERRIDING API CONFIG WITH STATIC CONFIG"),c=Object.assign({},n,r)):c=Object.assign({},r,n),(l=function(e){o.dispatch("setInstanceOption",{name:e,value:c[e]})})("nsfwCensorImage"),l("background"),l("hidePostStats"),l("hideBotIndication"),l("hideUserStats"),l("hideFilteredStatuses"),l("logo"),o.dispatch("setInstanceOption",{name:"logoMask",value:void 0===c.logoMask||c.logoMask}),o.dispatch("setInstanceOption",{name:"logoMargin",value:void 0===c.logoMargin?0:c.logoMargin}),l("logoLeft"),o.commit("authFlow/setInitialStrategy",c.loginMethod),l("redirectRootNoLogin"),l("redirectRootLogin"),l("showInstanceSpecificPanel"),l("minimalScopesMode"),l("hideMutedPosts"),l("collapseMessageWithSubject"),l("scopeCopy"),l("subjectLineBehavior"),l("postContentType"),l("alwaysShowSubjectInput"),l("showFeaturesPanel"),l("hideSitename"),l("sidebarRight"),e.abrupt("return",o.dispatch("setTheme",c.theme));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,window.fetch("/static/terms-of-service.html");case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.text();case 8:o=e.sent,n.dispatch("setInstanceOption",{name:"tos",value:o}),e.next=13;break;case 12:throw r;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("Can't load TOS"),console.warn(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),Yg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Wg("/instance/panel.html");case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.text();case 8:o=e.sent,n.dispatch("setInstanceOption",{name:"instanceSpecificPanelContent",value:o}),e.next=13;break;case 12:throw r;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("Can't load instance panel"),console.warn(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),Jg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,window.fetch("/static/stickers.json");case 4:if(!(o=e.sent).ok){e.next=15;break}return e.next=8,o.json();case 8:return s=e.sent,e.next=11,Promise.all(Object.entries(s).map(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Z)(t,2),r=n[0],o=n[1],e.next=3,window.fetch(o+"pack.json");case 3:if(s=e.sent,a={},!s.ok){e.next=9;break}return e.next=8,s.json();case 8:a=e.sent;case 9:return e.abrupt("return",{pack:r,path:o,meta:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:a=e.sent.sort((function(e,t){return e.meta.title.localeCompare(t.meta.title)})),n.dispatch("setInstanceOption",{name:"stickers",value:a}),e.next=16;break;case 15:throw o;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.warn("Can't load stickers"),console.warn(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Qg=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=n.state,o=n.commit,s=r.oauth,a=r.instance,e.abrupt("return",Fe(Ng(Ng({},s),{},{instance:a.server,commit:o})).then((function(e){return Re(Ng(Ng({},e),{},{instance:a.server}))})).then((function(e){o("setAppToken",e.access_token),o("setBackendInteractor",$e(n.getters.getToken()))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xg=function(e){var t=e.store,n=e.accounts.map((function(e){return e.split("/").pop()}));t.dispatch("setInstanceOption",{name:"staffAccounts",value:n})},ev=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a,c,l,u,d,p,h,m,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Wg("/nodeinfo/2.0.json");case 4:if(!(r=e.sent).ok){e.next=50;break}return e.next=8,r.json();case 8:o=e.sent,s=o.metadata,a=s.features,n.dispatch("setInstanceOption",{name:"name",value:s.nodeName}),n.dispatch("setInstanceOption",{name:"registrationOpen",value:o.openRegistrations}),n.dispatch("setInstanceOption",{name:"mediaProxyAvailable",value:a.includes("media_proxy")}),n.dispatch("setInstanceOption",{name:"safeDM",value:a.includes("safe_dm_mentions")}),n.dispatch("setInstanceOption",{name:"shoutAvailable",value:a.includes("chat")}),n.dispatch("setInstanceOption",{name:"pleromaChatMessagesAvailable",value:a.includes("pleroma_chat_messages")}),n.dispatch("setInstanceOption",{name:"gopherAvailable",value:a.includes("gopher")}),n.dispatch("setInstanceOption",{name:"pollsAvailable",value:a.includes("polls")}),n.dispatch("setInstanceOption",{name:"editingAvailable",value:a.includes("editing")}),n.dispatch("setInstanceOption",{name:"pollLimits",value:s.pollLimits}),n.dispatch("setInstanceOption",{name:"mailerEnabled",value:s.mailerEnabled}),c=s.uploadLimits,n.dispatch("setInstanceOption",{name:"uploadlimit",value:parseInt(c.general)}),n.dispatch("setInstanceOption",{name:"avatarlimit",value:parseInt(c.avatar)}),n.dispatch("setInstanceOption",{name:"backgroundlimit",value:parseInt(c.background)}),n.dispatch("setInstanceOption",{name:"bannerlimit",value:parseInt(c.banner)}),n.dispatch("setInstanceOption",{name:"fieldsLimits",value:s.fieldsLimits}),n.dispatch("setInstanceOption",{name:"restrictedNicknames",value:s.restrictedNicknames}),n.dispatch("setInstanceOption",{name:"postFormats",value:s.postFormats}),l=s.suggestions,n.dispatch("setInstanceOption",{name:"suggestionsEnabled",value:l.enabled}),n.dispatch("setInstanceOption",{name:"suggestionsWeb",value:l.web}),u=o.software,n.dispatch("setInstanceOption",{name:"backendVersion",value:u.version}),n.dispatch("setInstanceOption",{name:"pleromaBackend",value:"pleroma"===u.name}),d=s.private,n.dispatch("setInstanceOption",{name:"private",value:d}),p=window.___pleromafe_commit_hash,n.dispatch("setInstanceOption",{name:"frontendVersion",value:p}),h=s.federation,n.dispatch("setInstanceOption",{name:"tagPolicyAvailable",value:void 0!==h.mrf_policies&&s.federation.mrf_policies.includes("TagPolicy")}),n.dispatch("setInstanceOption",{name:"federationPolicy",value:h}),n.dispatch("setInstanceOption",{name:"federating",value:void 0===h.enabled||h.enabled}),m=s.accountActivationRequired,n.dispatch("setInstanceOption",{name:"accountActivationRequired",value:m}),f=s.staffAccounts,Xg({store:n,accounts:f}),e.next=51;break;case 50:throw r;case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(1),console.warn("Could not load nodeinfo"),console.warn(e.t0);case 57:case"end":return e.stop()}}),e,null,[[1,53]])})));return function(t){return e.apply(this,arguments)}}(),tv=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.next=3,Promise.all([Hg({store:n}),Vg()]);case 3:return r=e.sent,o=r[0],s=r[1],e.next=8,Kg({store:n,apiConfig:o,staticConfig:s}).then(Qg({store:n}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nv=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.abrupt("return",new Promise(function(){var e=(0,r.Z)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.getters.getUserToken()){e.next=9;break}return e.prev=1,e.next=4,n.dispatch("loginUser",n.getters.getUserToken());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:t();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const rv=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s,a,c,l,u,d,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.i18n,n.dispatch("setLayoutWidth",Ue()),n.dispatch("setLayoutHeight",Me()),Fg.Z.initFaviconService(),o=window.___pleromafe_dev_overrides||{},s=void 0!==o.target?o.target:window.location.origin,n.dispatch("setInstanceOption",{name:"server",value:s}),e.next=9,tv({store:n});case 9:return a=n.state.config,c=a.customTheme,l=a.customThemeSource,u=n.state.instance.theme,l||c?l&&l.themeEngineVersion===h.we?(0,p._v)(l):(0,p._v)(c):u||console.error("Failed to load any theme!"),(0,p.mg)(n.state.config),e.next=16,Promise.all([nv({store:n}),Yg({store:n}),ev({store:n}),Bg({store:n})]);case 16:return n.dispatch("fetchMutes"),n.dispatch("startFetchingAnnouncements"),Gg({store:n}),Jg({store:n}),d=(0,ir.p7)({history:(0,ir.PO)(),routes:Dg(n),scrollBehavior:function(e,t,n){return!e.matched.some((function(e){return e.meta.dontScroll}))&&(n||{left:0,top:0})}}),(m=(0,or.ri)(lc)).use(d),m.use(n),m.use(r),m.use(ar()),m.use(Eg),m.component("FAIcon",cr.GN),m.component("FALayers",cr.NH),m.config.unwrapInjectedRef=!0,m.mount("#app"),e.abrupt("return",m);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ov=(window.navigator.language||"en").split("-")[0],iv=(0,Vn.o)({locale:"en",fallbackLocale:"en",messages:rr.Z.default});rr.Z.setLanguage(iv,ov);var sv={paths:["serverSideStorage.cache","config","users.lastLoginName","oauth"]};(0,r.Z)(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=[nr],e.prev=2,e.next=5,tr(sv);case 5:r=e.sent,n.push(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),t=!0;case 13:o=(0,s.MT)({modules:{i18n:{getters:{i18n:function(){return iv.global}}},interface:c,instance:S,users:it,statuses:ae,lists:ue,api:gt,config:f.ZP,serverSideConfig:vt.ZP,serverSideStorage:rn,shout:on,oauth:sn,authFlow:pn,mediaViewer:gn,oauthTokens:vn,reports:_n,polls:kn,postStatus:Sn,editStatus:jn,statusHistory:On,chats:Bn,announcements:Hn},plugins:n,strict:!1}),t&&o.dispatch("pushGlobalNotice",{messageKey:"errors.storage_unavailable",level:"error"}),rv({store:o,i18n:iv});case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))(),window.___pleromafe_mode={NODE_ENV:"production"},window.___pleromafe_commit_hash="3a507ba9b\n",window.___pleromafe_dev_overrides=void 0},85565:(e,t,n)=>{"use strict";n.d(t,{Oi:()=>h,W2:()=>p,ZP:()=>m});var r=n(4942),o=n(29439),i=n(6258),s=n(77394),a=n(72617),c=n(39776);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={expertLevel:0,colors:{},theme:void 0,customTheme:void 0,customThemeSource:void 0,hideISP:!1,hideInstanceWallpaper:!1,hideShoutbox:!1,hideMutedPosts:void 0,hideMutedThreads:void 0,hideWordFilteredPosts:void 0,muteBotStatuses:void 0,collapseMessageWithSubject:void 0,padEmoji:!0,hideAttachments:!1,hideAttachmentsInConv:!1,maxThumbnails:16,hideNsfw:!0,preloadImage:!0,loopVideo:!0,loopVideoSilentOnly:!0,streaming:!1,emojiReactionsOnTimeline:!0,alwaysShowNewPostButton:!1,autohideFloatingPostButton:!1,pauseOnUnfocused:!0,stopGifs:!0,replyVisibility:"all",thirdColumnMode:"notifications",notificationVisibility:{follows:!0,mentions:!0,likes:!0,repeats:!0,moves:!0,emojiReactions:!0,followRequest:!0,reports:!0,chatMention:!0,polls:!0},webPushNotifications:!1,muteWords:[],highlight:{},interfaceLanguage:(window.navigator.language||"en").split("-")[0],hideScopeNotice:!1,useStreamingApi:!1,sidebarRight:void 0,scopeCopy:void 0,subjectLineBehavior:void 0,alwaysShowSubjectInput:void 0,postContentType:void 0,minimalScopesMode:void 0,hideFilteredStatuses:void 0,playVideosInModal:!1,useOneClickNsfw:!1,useContainFit:!0,disableStickyHeaders:!1,showScrollbars:!1,userPopoverAvatarAction:"open",userPopoverOverlay:!1,sidebarColumnWidth:"25rem",contentColumnWidth:"45rem",notifsColumnWidth:"25rem",navbarColumnStretch:!1,greentext:void 0,useAtIcon:void 0,mentionLinkDisplay:void 0,mentionLinkShowTooltip:void 0,mentionLinkShowAvatar:void 0,mentionLinkFadeDomain:void 0,mentionLinkShowYous:void 0,mentionLinkBoldenYou:void 0,hidePostStats:void 0,hideBotIndication:void 0,hideUserStats:void 0,virtualScrolling:void 0,sensitiveByDefault:void 0,conversationDisplay:void 0,conversationTreeAdvanced:void 0,conversationOtherRepliesButton:void 0,conversationTreeFadeAncestors:void 0,maxDepthInThread:void 0},h=Object.entries(p).filter((function(e){var t=(0,o.Z)(e,2);return t[0],void 0===t[1]})).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return t[1],n}));const m={state:d({},p),getters:{defaultConfig:function(e,t,n,r){var o=n.instance;return d(d({},p),Object.fromEntries(h.map((function(e){return[e,o[e]]}))))},mergedConfig:function(e,t,n,r){return d(d({},r.defaultConfig),Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,o.Z)(e,2);return t[0],void 0!==t[1]}))))}},mutations:{setOption:function(e,t){var n=t.name,r=t.value;e[n]=r},setHighlight:function(e,t){var n=t.user,r=t.color,o=t.type,i=this.state.config.highlight[n];r||o?e.highlight[n]={color:r||i.color,type:o||i.type}:delete e.highlight[n]}},actions:{loadSettings:function(e,t){var n,r=e.dispatch,o=new Set(Object.keys(p)),i=new Set(Object.keys(t)),s=new Set,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(i);try{for(a.s();!(n=a.n()).done;){var c=n.value;o.has(c)&&s.add(c)}}catch(e){a.e(e)}finally{a.f()}s.forEach((function(e){return r("setOption",{name:e,value:t[e]})}))},setHighlight:function(e,t){var n=e.commit;e.dispatch,n("setHighlight",{user:t.user,color:t.color,type:t.type})},setOption:function(e,t){var n=e.commit,r=e.dispatch,o=e.state,l=t.name,u=t.value;switch(n("setOption",{name:l,value:u}),l){case"theme":(0,s.bY)(u);break;case"sidebarColumnWidth":case"contentColumnWidth":case"notifsColumnWidth":(0,s.mg)(o);break;case"customTheme":case"customThemeSource":(0,s._v)(u);break;case"interfaceLanguage":a.Z.setLanguage(this.getters.i18n,u),r("loadUnicodeEmojiData",u),i.Z.set("userLanguage",c.Z.internalToBackendLocale(u));break;case"thirdColumnMode":r("setLayoutWidth",void 0)}}}}},65405:(e,t,n)=>{"use strict";n.d(t,{W2:()=>h,ZP:()=>m});var r=n(29439),o=n(4942),i=n(36968),s=n.n(i),a=n(27361),c=n.n(a);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=function(e,t){var n=e.rootState,r=e.commit,o=t.path,i=t.value,a={};return s()(a,o,i),n.api.backendInteractor.updateProfile({params:a}).then((function(e){r("addNewUsers",[e]),r("setCurrentUser",e)}))},d=function(e,t){var n=e.rootState,r=e.commit,o=t.path,i=t.value,a=t.oldValue,c={};return s()(c,o,i),n.api.backendInteractor.updateNotificationSettings({settings:c}).then((function(e){"success"===e.status?r("confirmServerSideOption",{name,value:i}):r("confirmServerSideOption",{name,value:a})}))},p={defaultScope:"source.privacy",defaultNSFW:"source.sensitive",stripRichContent:{get:"source.pleroma.no_rich_text",set:"no_rich_text"},locked:"locked",acceptChatMessages:{get:"pleroma.accepts_chat_messages",set:"accepts_chat_messages"},allowFollowingMove:{get:"pleroma.allow_following_move",set:"allow_following_move"},discoverable:{get:"source.pleroma.discoverable",set:"discoverable"},hideFavorites:{get:"pleroma.hide_favorites",set:"hide_favorites"},hideFollowers:{get:"pleroma.hide_followers",set:"hide_followers"},hideFollows:{get:"pleroma.hide_follows",set:"hide_follows"},hideFollowersCount:{get:"pleroma.hide_followers_count",set:"hide_followers_count"},hideFollowsCount:{get:"pleroma.hide_follows_count",set:"hide_follows_count"},webPushHideContents:{get:"pleroma.notification_settings.hide_notification_contents",set:"hide_notification_contents",api:d},blockNotificationsFromStrangers:{get:"pleroma.notification_settings.block_from_strangers",set:"block_from_strangers",api:d}},h=Object.fromEntries(Object.keys(p).map((function(e){return[e,null]})));const m={state:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h),mutations:{confirmServerSideOption:function(e,t){var n=t.name,r=t.value;s()(e,n,r)},wipeServerSideOption:function(e,t){var n=t.name;s()(e,n,null)},wipeAllServerSideOptions:function(e){Object.keys(p).forEach((function(t){s()(e,t,null)}))},setCurrentUser:function(e,t){Object.entries(p).forEach((function(n){var o=(0,r.Z)(n,2),i=o[0],a=o[1],l=a.get,u=void 0===l?a:l;s()(e,i,c()(t._original,u))}))}},actions:{setServerSideOption:function(e,t){var n=e.rootState,r=e.state,o=e.commit,i=(e.dispatch,t.name),s=t.value,a=c()(r,i),l=p[i];if(!l)throw new Error("Invalid server-side setting");var d=l.set,h=void 0===d?l:d,m=l.api,f=void 0===m?u:m;o("wipeServerSideOption",{name:i}),f({rootState:n,commit:o},{path:h,value:s,oldValue:a}).catch((function(e){console.warn("Error setting server-side option:",e),o("confirmServerSideOption",{name:i,value:a})}))},logout:function(e){(0,e.commit)("wipeAllServerSideOptions")}}}},77776:(e,t,n)=>{"use strict";n.d(t,{ro:()=>Ue,_z:()=>Ae,ZP:()=>Le,pR:()=>xe});var r=n(15861),o=n(44925),i=n(29439),s=n(4942),a=n(27361),c=n.n(a),l=n(10928),u=n.n(l),d=n(57043),p=n.n(d),h=n(35161),m=n.n(h),f=n(66073),g=n.n(f),v=n(64687),w=n.n(v),b=n(27742),y=n(71002),_=n(43144),k=n(15671),S=n(97326),j=n(60136),O=n(82963),C=n(61120),P=n(72407),z=n(93433),I=n(48403),D=n.n(I);function x(e,t,n,r){this.name="StatusCodeError",this.statusCode=e,this.message=e+" - "+(JSON&&JSON.stringify?JSON.stringify(t):t),this.error=t,this.options=n,this.response=r,Error.captureStackTrace&&Error.captureStackTrace(this)}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x;var T=function(e){(0,j.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,C.Z)(t);if(n){var o=(0,C.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,O.Z)(this,e)});function o(e){var t,n;(0,k.Z)(this,o),t=r.call(this),Error.captureStackTrace&&Error.captureStackTrace((0,S.Z)(t));try{if("string"==typeof e&&(e=JSON.parse(e)).hasOwnProperty("error")&&(e=JSON.parse(e.error)),"object"===(0,y.Z)(e)){var s=JSON.parse(e.error);s.ap_id&&(s.username=s.ap_id,delete s.ap_id),t.message=(n=s,Object.entries(n).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],o=n[1].reduce((function(e,t){return e+[D()(r.replace(/_/g," ")),t].join(" ")+". "}),"");return[].concat((0,z.Z)(e),[o])}),[]))}else t.message=e}catch(n){t.message=e}return t}return(0,_.Z)(o)}((0,P.Z)(Error)),$=["nickname"],U=["id","credentials"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L="/api/pleroma/aliases",E="/api/pleroma/admin/users/tag",F=function(e,t){return"/api/pleroma/admin/users/".concat(e,"/permission_group/").concat(t)},R=function(e){return"/api/v1/notifications/".concat(e,"/dismiss")},N=function(e){return"/api/v1/statuses/".concat(e,"/favourite")},q=function(e){return"/api/v1/statuses/".concat(e,"/unfavourite")},Z=function(e){return"/api/v1/statuses/".concat(e,"/reblog")},W=function(e){return"/api/v1/statuses/".concat(e,"/unreblog")},B="/api/v1/timelines/public",H=function(e){return"/api/v1/statuses/".concat(e)},V=function(e){return"/api/v1/accounts/".concat(e,"/statuses")},K=function(e){return"/api/v1/lists/".concat(e)},G=function(e){return"/api/v1/timelines/list/".concat(e)},Y=function(e){return"/api/v1/lists/".concat(e,"/accounts")},J=function(e){return"/api/v1/timelines/tag/".concat(e)},Q=function(e){return"/api/v1/accounts/".concat(e,"/mute")},X=function(e){return"/api/v1/accounts/".concat(e,"/unmute")},ee=function(e){return"/api/v1/pleroma/accounts/".concat(e,"/subscribe")},te=function(e){return"/api/v1/pleroma/accounts/".concat(e,"/unsubscribe")},ne=function(e){return"/api/v1/accounts/".concat(e,"/note")},re=function(e){return"/api/v1/statuses/".concat(e,"/bookmark")},oe=function(e){return"/api/v1/statuses/".concat(e,"/unbookmark")},ie="/api/v1/media",se=function(e){return"/api/v1/statuses/".concat(e,"/favourited_by")},ae=function(e){return"/api/v1/statuses/".concat(e,"/reblogged_by")},ce="/api/v1/accounts/update_credentials",le=function(e){return"/api/v1/statuses/".concat(e,"/pin")},ue=function(e){return"/api/v1/statuses/".concat(e,"/unpin")},de=function(e){return"/api/v1/statuses/".concat(e,"/mute")},pe=function(e){return"/api/v1/statuses/".concat(e,"/unmute")},he="/api/v1/domain_blocks",me=function(e){return"/api/v1/announcements/".concat(e,"/dismiss")},fe=function(e){return"/api/v1/pleroma/statuses/".concat(e,"/reactions")},ge=function(e,t){return"/api/v1/pleroma/statuses/".concat(e,"/reactions/").concat(t)},ve=function(e,t){return"/api/v1/pleroma/statuses/".concat(e,"/reactions/").concat(t)},we=function(e){return"/api/v1/pleroma/chats/".concat(e,"/messages")},be=function(e){return"/api/v1/pleroma/chats/".concat(e,"/read")},ye=function(e,t){return"/api/v1/pleroma/chats/".concat(e,"/messages/").concat(t)},_e="/api/v1/pleroma/backups",ke=function(e){return"/api/v1/pleroma/admin/announcements/".concat(e)},Se=function(e){return"/api/v1/pleroma/admin/announcements/".concat(e)},je=window.fetch,Oe=function(e,t){var n=""+e;return(t=t||{}).credentials="same-origin",je(n,t)},Ce=function(e){var t=e.method,n=e.url,r=e.params,o=e.payload,s=e.credentials,a=e.headers,c={method:t,headers:A({Accept:"application/json","Content-Type":"application/json"},void 0===a?{}:a)};return r&&(n+="?"+Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&")),o&&(c.body=JSON.stringify(o)),s&&(c.headers=A(A({},c.headers),Pe(s))),Oe(n,c).then((function(e){return new Promise((function(t,r){return e.json().then((function(o){return e.ok?t(o):r(new x(e.status,o,{url:n,options:c},e))})).catch((function(t){return r(new x(e.status,t,{url:n,options:c},e))}))}))}))},Pe=function(e){return e?{Authorization:"Bearer ".concat(e)}:{}},ze=function(e){var t=e.id,n=e.credentials,r="".concat("/api/v1/accounts","/").concat(t);return Ce({url:r,credentials:n}).then((function(e){return(0,b.nL)(e)}))},Ie=function(e){var t=e.id,n=e.maxId,r=e.sinceId,o=e.limit,i=void 0===o?20:o,s=e.credentials,a=function(e){return"/api/v1/accounts/".concat(e,"/following")}(t),c=[n&&"max_id=".concat(n),r&&"since_id=".concat(r),i&&"limit=".concat(i),"with_relationships=true"].filter((function(e){return e})).join("&");return Oe(a+=c?"?"+c:"",{headers:Pe(s)}).then((function(e){return e.json()})).then((function(e){return e.map(b.nL)}))},De=function(e){var t=e.content,n=e.startsAt,r=e.endsAt,o=e.allDay,i={content:t};return void 0!==n&&(i.starts_at=n?new Date(n).toISOString():null),void 0!==r&&(i.ends_at=r?new Date(r).toISOString():null),void 0!==o&&(i.all_day=o),i},xe=function(e){var t=e.credentials,n=e.stream,r=e.args,o=void 0===r?{}:r;return Object.entries(A(A({},t?{access_token:t}:{}),{},{stream:n},o)).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];return e+"".concat(r,"=").concat(o,"&")}),"/api/v1/streaming?")},Te=new Set(["update","notification","delete","filters_changed","status.update"]),$e=new Set(["pleroma:chat_update"]),Ue=function(e){var t=e.url,n=e.preprocessor,r=void 0===n?Me:n,o=e.id,i=void 0===o?"Unknown":o,s=new EventTarget,a=new WebSocket(t);if(!a)throw new Error("Failed to create socket ".concat(i));var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};e.addEventListener(t,(function(e){s.dispatchEvent(new CustomEvent(t,{detail:n(e)}))}))};return a.addEventListener("open",(function(e){console.debug("[WS][".concat(i,"] Socket connected"),e)})),a.addEventListener("error",(function(e){console.debug("[WS][".concat(i,"] Socket errored"),e)})),a.addEventListener("close",(function(e){console.debug("[WS][".concat(i,"] Socket disconnected with code ").concat(e.code),e)})),c(a,"open"),c(a,"close"),c(a,"message",r),c(a,"error"),s.close=function(){a.close(1e3,"Shutting down socket")},s.getState=function(){return a.readyState},s},Me=function(e){var t=e.data;if(t){var n=JSON.parse(t),r=n.event,o=n.payload;if(!Te.has(r)&&!$e.has(r))return console.warn("Unknown event",e),null;if("delete"===r)return{event:r,id:o};var i=o?JSON.parse(o):null;return"update"===r||"status.update"===r?{event:r,status:(0,b.Wn)(i)}:"notification"===r?{event:r,notification:(0,b.eM)(i)}:"pleroma:chat_update"===r?{event:r,chatUpdate:(0,b._J)(i)}:void 0}},Ae=Object.freeze({JOINED:1,CLOSED:2,ERROR:3,DISABLED:4,STARTING:5,STARTING_INITIAL:6});const Le={verifyCredentials:function(e){return Oe("/api/v1/accounts/verify_credentials",{headers:Pe(e)}).then((function(e){return e.ok?e.json():{error:e}})).then((function(e){return e.error?e:(0,b.nL)(e)}))},fetchTimeline:function(e){var t=e.timeline,n=e.credentials,r=e.since,o=void 0!==r&&r,i=e.until,s=void 0!==i&&i,a=e.userId,c=void 0!==a&&a,l=e.listId,u=void 0!==l&&l,d=e.tag,p=void 0!==d&&d,h=e.withMuted,f=void 0!==h&&h,g=e.replyVisibility,v=void 0===g?"all":g,w=e.includeTypes,y=void 0===w?[]:w,_="notifications"===t,k=[],S={public:B,friends:"/api/v1/timelines/home",dms:"/api/v1/timelines/direct",notifications:"/api/v1/notifications",publicAndExternal:B,user:V,media:V,list:G,favorites:"/api/v1/favourites",tag:J,bookmarks:"/api/v1/bookmarks"}[t];"user"!==t&&"media"!==t||(S=S(c)),"list"===t&&(S=S(u)),o&&k.push(["since_id",o]),s&&k.push(["max_id",s]),p&&(S=S(p)),"media"===t&&k.push(["only_media",1]),"public"===t&&k.push(["local",!0]),"public"!==t&&"publicAndExternal"!==t||k.push(["only_media",!1]),"favorites"!==t&&"bookmarks"!==t&&k.push(["with_muted",f]),"all"!==v&&k.push(["reply_visibility",v]),y.length>0&&y.forEach((function(e){k.push(["include_types[]",e])})),k.push(["limit",20]);var j=m()(k,(function(e){return"".concat(e[0],"=").concat(e[1])})).join("&");S+="?".concat(j);var O="",C="",P={};return Oe(S,{headers:Pe(n)}).then((function(e){return O=e.status,C=e.statusText,P=(0,b.Nw)(e.headers.get("Link"),{flakeId:"bookmarks"!==t&&"notifications"!==t}),e})).then((function(e){return e.json()})).then((function(e){return e.errors?(e.status=O,e.statusText=C,e):{data:e.map(_?b.eM:b.Wn),pagination:P}}))},fetchPinnedStatuses:function(e){var t=e.id,n=e.credentials,r=V(t)+"?pinned=true";return Ce({url:r,credentials:n}).then((function(e){return e.map(b.Wn)}))},fetchConversation:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/statuses/".concat(e,"/context")}(t);return Oe(r,{headers:Pe(n)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching timeline",e)})).then((function(e){return e.json()})).then((function(e){var t=e.ancestors,n=e.descendants;return{ancestors:t.map(b.Wn),descendants:n.map(b.Wn)}}))},fetchStatus:function(e){var t=e.id,n=e.credentials,r=H(t);return Oe(r,{headers:Pe(n)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching timeline",e)})).then((function(e){return e.json()})).then((function(e){return(0,b.Wn)(e)}))},fetchStatusSource:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/statuses/".concat(e,"/source")}(t);return Oe(r,{headers:Pe(n)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching source",e)})).then((function(e){return e.json()})).then((function(e){return(0,b.P7)(e)}))},fetchStatusHistory:function(e){var t,n=e.status,r=e.credentials,o=(t=n.id,"/api/v1/statuses/".concat(t,"/history"));return Ce({url:o,credentials:r}).then((function(e){return e.reverse(),e.map((function(e){return e.originalStatus=n,(0,b.Wn)(e)}))}))},fetchFriends:Ie,exportFriends:function(e){var t=e.id,n=e.credentials;return new Promise(function(){var e=(0,r.Z)(w().mark((function e(r,o){var i,s,a,c;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=[],s=!0;case 3:if(!s){e.next=12;break}return a=i.length>0?u()(i).id:void 0,e.next=7,Ie({id:t,maxId:a,credentials:n});case 7:c=e.sent,i=p()(i,c),0===c.length&&(s=!1),e.next=3;break;case 12:r(i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),o(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}())},fetchFollowers:function(e){var t=e.id,n=e.maxId,r=e.sinceId,o=e.limit,i=void 0===o?20:o,s=e.credentials,a=function(e){return"/api/v1/accounts/".concat(e,"/followers")}(t),c=[n&&"max_id=".concat(n),r&&"since_id=".concat(r),i&&"limit=".concat(i),"with_relationships=true"].filter((function(e){return e})).join("&");return Oe(a+=c?"?"+c:"",{headers:Pe(s)}).then((function(e){return e.json()})).then((function(e){return e.map(b.nL)}))},followUser:function(e){var t=e.id,n=e.credentials,r=(0,o.Z)(e,U),i=function(e){return"/api/v1/accounts/".concat(e,"/follow")}(t),s={};return void 0!==r.reblogs&&(s.reblogs=r.reblogs),Oe(i,{body:JSON.stringify(s),headers:A(A({},Pe(n)),{},{"Content-Type":"application/json"}),method:"POST"}).then((function(e){return e.json()}))},unfollowUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/accounts/".concat(e,"/unfollow")}(t);return Oe(r,{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},pinOwnStatus:function(e){var t=e.id,n=e.credentials;return Ce({url:le(t),credentials:n,method:"POST"}).then((function(e){return(0,b.Wn)(e)}))},unpinOwnStatus:function(e){var t=e.id,n=e.credentials;return Ce({url:ue(t),credentials:n,method:"POST"}).then((function(e){return(0,b.Wn)(e)}))},muteConversation:function(e){var t=e.id,n=e.credentials;return Ce({url:de(t),credentials:n,method:"POST"}).then((function(e){return(0,b.Wn)(e)}))},unmuteConversation:function(e){var t=e.id,n=e.credentials;return Ce({url:pe(t),credentials:n,method:"POST"}).then((function(e){return(0,b.Wn)(e)}))},blockUser:function(e){var t=e.id,n=e.credentials;return Oe(function(e){return"/api/v1/accounts/".concat(e,"/block")}(t),{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},unblockUser:function(e){var t=e.id,n=e.credentials;return Oe(function(e){return"/api/v1/accounts/".concat(e,"/unblock")}(t),{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},removeUserFromFollowers:function(e){var t=e.id,n=e.credentials;return Oe(function(e){return"/api/v1/accounts/".concat(e,"/remove_from_followers")}(t),{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},editUserNote:function(e){var t=e.id,n=e.credentials,r=e.comment;return Ce({url:ne(t),credentials:n,payload:{comment:r},method:"POST"})},fetchUser:ze,fetchUserByName:function(e){var t=e.name,n=e.credentials;return Ce({url:"/api/v1/accounts/lookup",credentials:n,params:{acct:t}}).then((function(e){return e.id})).catch((function(e){if(e&&404===e.statusCode)return t;throw e})).then((function(e){return ze({id:e,credentials:n})}))},fetchUserRelationship:function(e){var t=e.id,n=e.credentials,r="".concat("/api/v1/accounts/relationships","/?id=").concat(t);return Oe(r,{headers:Pe(n)}).then((function(e){return new Promise((function(t,n){return e.json().then((function(o){return e.ok?t(o):n(new x(e.status,o,{url:r},e))}))}))}))},favorite:function(e){var t=e.id,n=e.credentials;return Ce({url:N(t),method:"POST",credentials:n}).then((function(e){return(0,b.Wn)(e)}))},unfavorite:function(e){var t=e.id,n=e.credentials;return Ce({url:q(t),method:"POST",credentials:n}).then((function(e){return(0,b.Wn)(e)}))},retweet:function(e){var t=e.id,n=e.credentials;return Ce({url:Z(t),method:"POST",credentials:n}).then((function(e){return(0,b.Wn)(e)}))},unretweet:function(e){var t=e.id,n=e.credentials;return Ce({url:W(t),method:"POST",credentials:n}).then((function(e){return(0,b.Wn)(e)}))},bookmarkStatus:function(e){var t=e.id,n=e.credentials;return Ce({url:re(t),headers:Pe(n),method:"POST"})},unbookmarkStatus:function(e){var t=e.id,n=e.credentials;return Ce({url:oe(t),headers:Pe(n),method:"POST"})},postStatus:function(e){var t=e.credentials,n=e.status,r=e.spoilerText,o=e.visibility,i=e.sensitive,s=e.poll,a=e.mediaIds,c=void 0===a?[]:a,l=e.inReplyToStatusId,u=e.contentType,d=e.preview,p=e.idempotencyKey,h=new FormData,m=s.options||[];if(h.append("status",n),h.append("source","Pleroma FE"),r&&h.append("spoiler_text",r),o&&h.append("visibility",o),i&&h.append("sensitive",i),u&&h.append("content_type",u),c.forEach((function(e){h.append("media_ids[]",e)})),m.some((function(e){return""!==e}))){var f={expires_in:s.expiresIn,multiple:s.multiple};Object.keys(f).forEach((function(e){h.append("poll[".concat(e,"]"),f[e])})),m.forEach((function(e){h.append("poll[options][]",e)}))}l&&h.append("in_reply_to_id",l),d&&h.append("preview","true");var g=Pe(t);return p&&(g["idempotency-key"]=p),Oe("/api/v1/statuses",{body:h,method:"POST",headers:g}).then((function(e){return e.json()})).then((function(e){return e.error?e:(0,b.Wn)(e)}))},editStatus:function(e){var t=e.id,n=e.credentials,r=e.status,o=e.spoilerText,i=e.sensitive,s=e.poll,a=e.mediaIds,c=void 0===a?[]:a,l=e.contentType,u=new FormData,d=s.options||[];if(u.append("status",r),o&&u.append("spoiler_text",o),i&&u.append("sensitive",i),l&&u.append("content_type",l),c.forEach((function(e){u.append("media_ids[]",e)})),d.some((function(e){return""!==e}))){var p={expires_in:s.expiresIn,multiple:s.multiple};Object.keys(p).forEach((function(e){u.append("poll[".concat(e,"]"),p[e])})),d.forEach((function(e){u.append("poll[options][]",e)}))}var h=Pe(n);return Oe(H(t),{body:u,method:"PUT",headers:h}).then((function(e){return e.json()})).then((function(e){return e.error?e:(0,b.Wn)(e)}))},deleteStatus:function(e){var t=e.id,n=e.credentials;return Oe(function(e){return"/api/v1/statuses/".concat(e)}(t),{headers:Pe(n),method:"DELETE"})},uploadMedia:function(e){var t=e.formData,n=e.credentials;return Oe(ie,{body:t,method:"POST",headers:Pe(n)}).then((function(e){return e.json()})).then((function(e){return(0,b.cO)(e)}))},setMediaDescription:function(e){var t=e.id,n=e.description,r=e.credentials;return Ce({url:"".concat(ie,"/").concat(t),method:"PUT",headers:Pe(r),payload:{description:n}}).then((function(e){return(0,b.cO)(e)}))},fetchMutes:function(e){var t=e.credentials;return Ce({url:"/api/v1/mutes/",credentials:t}).then((function(e){return e.map(b.nL)}))},muteUser:function(e){var t=e.id,n=e.credentials;return Ce({url:Q(t),credentials:n,method:"POST"})},unmuteUser:function(e){var t=e.id,n=e.credentials;return Ce({url:X(t),credentials:n,method:"POST"})},subscribeUser:function(e){var t=e.id,n=e.credentials;return Ce({url:ee(t),credentials:n,method:"POST"})},unsubscribeUser:function(e){var t=e.id,n=e.credentials;return Ce({url:te(t),credentials:n,method:"POST"})},fetchBlocks:function(e){var t=e.credentials;return Ce({url:"/api/v1/blocks/",credentials:t}).then((function(e){return e.map(b.nL)}))},fetchOAuthTokens:function(e){var t=e.credentials;return Oe("/api/oauth_tokens.json",{headers:Pe(t)}).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching auth tokens",e)}))},revokeOAuthToken:function(e){var t=e.id,n=e.credentials,r="/api/oauth_tokens/".concat(t);return Oe(r,{headers:Pe(n),method:"DELETE"})},tagUser:function(e){var t=e.tag,n=e.credentials,r={nicknames:[e.user.screen_name],tags:[t]},o=Pe(n);return o["Content-Type"]="application/json",Oe(E,{method:"PUT",headers:o,body:JSON.stringify(r)})},untagUser:function(e){var t=e.tag,n=e.credentials,r={nicknames:[e.user.screen_name],tags:[t]},o=Pe(n);return o["Content-Type"]="application/json",Oe(E,{method:"DELETE",headers:o,body:JSON.stringify(r)})},deleteUser:function(e){var t=e.credentials,n=e.user.screen_name,r=Pe(t);return Oe("".concat("/api/pleroma/admin/users","?nickname=").concat(n),{method:"DELETE",headers:r})},addRight:function(e){var t=e.right,n=e.credentials,r=e.user.screen_name;return Oe(F(r,t),{method:"POST",headers:Pe(n),body:{}})},deleteRight:function(e){var t=e.right,n=e.credentials,r=e.user.screen_name;return Oe(F(r,t),{method:"DELETE",headers:Pe(n),body:{}})},activateUser:function(e){var t=e.credentials,n=e.user.screen_name;return Ce({url:"/api/pleroma/admin/users/activate",method:"PATCH",credentials:t,payload:{nicknames:[n]}}).then((function(e){return c()(e,"users.0")}))},deactivateUser:function(e){var t=e.credentials,n=e.user.screen_name;return Ce({url:"/api/pleroma/admin/users/deactivate",method:"PATCH",credentials:t,payload:{nicknames:[n]}}).then((function(e){return c()(e,"users.0")}))},register:function(e){var t=e.params,n=e.credentials,r=t.nickname,i=(0,o.Z)(t,$);return Oe("/api/v1/accounts",{method:"POST",headers:A(A({},Pe(n)),{},{"Content-Type":"application/json"}),body:JSON.stringify(A({nickname:r,locale:"en_US",agreement:!0},i))}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new T(e)}))}))},getCaptcha:function(){return Oe("/api/pleroma/captcha").then((function(e){return e.json()}))},updateProfileImages:function(e){var t=e.credentials,n=e.avatar,r=void 0===n?null:n,o=e.avatarName,i=void 0===o?null:o,s=e.banner,a=void 0===s?null:s,c=e.background,l=void 0===c?null:c,u=new FormData;return null!==r&&(null!==i?u.append("avatar",r,i):u.append("avatar",r)),null!==a&&u.append("header",a),null!==l&&u.append("pleroma_background_image",l),Oe(ce,{headers:Pe(t),method:"PATCH",body:u}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error);return(0,b.nL)(e)}))},updateProfile:function(e){var t=e.credentials,n=e.params;return Ce({url:ce,method:"PATCH",payload:n,credentials:t}).then((function(e){return(0,b.nL)(e)}))},importMutes:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),Oe("/api/pleroma/mutes_import",{body:r,method:"POST",headers:Pe(n)}).then((function(e){return e.ok}))},importBlocks:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),Oe("/api/pleroma/blocks_import",{body:r,method:"POST",headers:Pe(n)}).then((function(e){return e.ok}))},importFollows:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),Oe("/api/pleroma/follow_import",{body:r,method:"POST",headers:Pe(n)}).then((function(e){return e.ok}))},deleteAccount:function(e){var t=e.credentials,n=e.password,r=new FormData;return r.append("password",n),Oe("/api/pleroma/delete_account",{body:r,method:"POST",headers:Pe(t)}).then((function(e){return e.json()}))},changeEmail:function(e){var t=e.credentials,n=e.email,r=e.password,o=new FormData;return o.append("email",n),o.append("password",r),Oe("/api/pleroma/change_email",{body:o,method:"POST",headers:Pe(t)}).then((function(e){return e.json()}))},moveAccount:function(e){var t=e.credentials,n=e.password,r=e.targetAccount,o=new FormData;return o.append("password",n),o.append("target_account",r),Oe("/api/pleroma/move_account",{body:o,method:"POST",headers:Pe(t)}).then((function(e){return e.json()}))},addAlias:function(e){var t=e.credentials,n=e.alias;return Ce({url:L,method:"PUT",credentials:t,payload:{alias:n}})},deleteAlias:function(e){var t=e.credentials,n=e.alias;return Ce({url:L,method:"DELETE",credentials:t,payload:{alias:n}})},listAliases:function(e){var t=e.credentials;return Ce({url:L,method:"GET",credentials:t,params:{_cacheBooster:(new Date).getTime()}})},changePassword:function(e){var t=e.credentials,n=e.password,r=e.newPassword,o=e.newPasswordConfirmation,i=new FormData;return i.append("password",n),i.append("new_password",r),i.append("new_password_confirmation",o),Oe("/api/pleroma/change_password",{body:i,method:"POST",headers:Pe(t)}).then((function(e){return e.json()}))},settingsMFA:function(e){var t=e.credentials;return Oe("/api/pleroma/accounts/mfa",{headers:Pe(t),method:"GET"}).then((function(e){return e.json()}))},mfaDisableOTP:function(e){var t=e.credentials,n=e.password,r=new FormData;return r.append("password",n),Oe("/api/pleroma/accounts/mfa/totp",{body:r,method:"DELETE",headers:Pe(t)}).then((function(e){return e.json()}))},generateMfaBackupCodes:function(e){var t=e.credentials;return Oe("/api/pleroma/accounts/mfa/backup_codes",{headers:Pe(t),method:"GET"}).then((function(e){return e.json()}))},mfaSetupOTP:function(e){var t=e.credentials;return Oe("/api/pleroma/accounts/mfa/setup/totp",{headers:Pe(t),method:"GET"}).then((function(e){return e.json()}))},mfaConfirmOTP:function(e){var t=e.credentials,n=e.password,r=e.token,o=new FormData;return o.append("password",n),o.append("code",r),Oe("/api/pleroma/accounts/mfa/confirm/totp",{body:o,headers:Pe(t),method:"POST"}).then((function(e){return e.json()}))},addBackup:function(e){var t=e.credentials;return Ce({url:_e,method:"POST",credentials:t})},listBackups:function(e){var t=e.credentials;return Ce({url:_e,method:"GET",credentials:t,params:{_cacheBooster:(new Date).getTime()}})},fetchFollowRequests:function(e){var t=e.credentials;return Oe("/api/v1/follow_requests",{headers:Pe(t)}).then((function(e){return e.json()})).then((function(e){return e.map(b.nL)}))},fetchLists:function(e){var t=e.credentials;return Oe("/api/v1/lists",{headers:Pe(t)}).then((function(e){return e.json()}))},createList:function(e){var t=e.title,n=e.credentials,r=Pe(n);return r["Content-Type"]="application/json",Oe("/api/v1/lists",{headers:r,method:"POST",body:JSON.stringify({title:t})}).then((function(e){return e.json()}))},getList:function(e){var t=e.listId,n=e.credentials,r=K(t);return Oe(r,{headers:Pe(n)}).then((function(e){return e.json()}))},updateList:function(e){var t=e.listId,n=e.title,r=e.credentials,o=K(t),i=Pe(r);return i["Content-Type"]="application/json",Oe(o,{headers:i,method:"PUT",body:JSON.stringify({title:n})})},getListAccounts:function(e){var t=e.listId,n=e.credentials,r=Y(t);return Oe(r,{headers:Pe(n)}).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return e.id}))}))},addAccountsToList:function(e){var t=e.listId,n=e.accountIds,r=e.credentials,o=Y(t),i=Pe(r);return i["Content-Type"]="application/json",Oe(o,{headers:i,method:"POST",body:JSON.stringify({account_ids:n})})},removeAccountsFromList:function(e){var t=e.listId,n=e.accountIds,r=e.credentials,o=Y(t),i=Pe(r);return i["Content-Type"]="application/json",Oe(o,{headers:i,method:"DELETE",body:JSON.stringify({account_ids:n})})},deleteList:function(e){var t=e.listId,n=e.credentials,r=K(t);return Oe(r,{method:"DELETE",headers:Pe(n)})},approveUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/follow_requests/".concat(e,"/authorize")}(t);return Oe(r,{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},denyUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/follow_requests/".concat(e,"/reject")}(t);return Oe(r,{headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},suggestions:function(e){var t=e.credentials;return Oe("/api/v1/suggestions",{headers:Pe(t)}).then((function(e){return e.json()}))},markNotificationsAsSeen:function(e){var t=e.id,n=e.credentials,r=e.single,o=void 0!==r&&r,i=new FormData;return o?i.append("id",t):i.append("max_id",t),Oe("/api/v1/pleroma/notifications/read",{body:i,headers:Pe(n),method:"POST"}).then((function(e){return e.json()}))},dismissNotification:function(e){var t=e.credentials,n=e.id;return Ce({url:R(n),method:"POST",payload:{id:n},credentials:t})},vote:function(e){var t,n=e.pollId,r=e.choices,o=e.credentials;return(new FormData).append("choices",r),Ce({url:(t=encodeURIComponent(n),"/api/v1/polls/".concat(t,"/votes")),method:"POST",credentials:o,payload:{choices:r}})},fetchPoll:function(e){var t,n=e.pollId,r=e.credentials;return Ce({url:(t=encodeURIComponent(n),"/api/v1/polls/".concat(t)),method:"GET",credentials:r})},fetchFavoritedByUsers:function(e){var t=e.id,n=e.credentials;return Ce({url:se(t),method:"GET",credentials:n}).then((function(e){return e.map(b.nL)}))},fetchRebloggedByUsers:function(e){var t=e.id,n=e.credentials;return Ce({url:ae(t),method:"GET",credentials:n}).then((function(e){return e.map(b.nL)}))},fetchEmojiReactions:function(e){var t=e.id,n=e.credentials;return Ce({url:fe(t),credentials:n}).then((function(e){return e.map((function(e){return e.accounts=e.accounts.map(b.nL),e}))}))},reactWithEmoji:function(e){var t=e.id,n=e.emoji,r=e.credentials;return Ce({url:ge(t,n),method:"PUT",credentials:r}).then(b.Wn)},unreactWithEmoji:function(e){var t=e.id,n=e.emoji,r=e.credentials;return Ce({url:ve(t,n),method:"DELETE",credentials:r}).then(b.Wn)},reportUser:function(e){var t=e.credentials,n=e.userId,r=e.statusIds,o=e.comment,i=e.forward;return Ce({url:"/api/v1/reports",method:"POST",payload:{account_id:n,status_ids:r,comment:o,forward:i},credentials:t})},updateNotificationSettings:function(e){var t=e.credentials,n=e.settings,r=new FormData;return g()(n,(function(e,t){r.append(t,e)})),Oe("/api/pleroma/notification_settings",{headers:Pe(t),method:"PUT",body:r}).then((function(e){return e.json()}))},search2:function(e){var t=e.credentials,n=e.q,r=e.resolve,o=e.limit,i=e.offset,s=e.following,a=e.type,c="/api/v2/search",l=[];n&&l.push(["q",encodeURIComponent(n)]),r&&l.push(["resolve",r]),o&&l.push(["limit",o]),i&&l.push(["offset",i]),s&&l.push(["following",!0]),a&&l.push(["following",a]),l.push(["with_relationships",!0]);var u=m()(l,(function(e){return"".concat(e[0],"=").concat(e[1])})).join("&");return c+="?".concat(u),Oe(c,{headers:Pe(t)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching search result",e)})).then((function(e){return e.json()})).then((function(e){return e.accounts=e.accounts.slice(0,o).map((function(e){return(0,b.nL)(e)})),e.statuses=e.statuses.slice(0,o).map((function(e){return(0,b.Wn)(e)})),e}))},searchUsers:function(e){var t=e.credentials,n=e.query;return Ce({url:"/api/v1/accounts/search",params:{q:n,resolve:!0},credentials:t}).then((function(e){return e.map(b.nL)}))},fetchKnownDomains:function(e){var t=e.credentials;return Ce({url:"/api/v1/instance/peers",credentials:t})},fetchDomainMutes:function(e){var t=e.credentials;return Ce({url:he,credentials:t})},muteDomain:function(e){var t=e.domain,n=e.credentials;return Ce({url:he,method:"POST",payload:{domain:t},credentials:n})},unmuteDomain:function(e){var t=e.domain,n=e.credentials;return Ce({url:he,method:"DELETE",payload:{domain:t},credentials:n})},chats:function(e){var t=e.credentials;return Oe("/api/v1/pleroma/chats",{headers:Pe(t)}).then((function(e){return e.json()})).then((function(e){return{chats:e.map(b._J).filter((function(e){return e}))}}))},getOrCreateChat:function(e){var t,n=e.accountId,r=e.credentials;return Ce({url:(t=n,"/api/v1/pleroma/chats/by-account-id/".concat(t)),method:"POST",credentials:r})},chatMessages:function(e){var t=e.id,n=e.credentials,r=e.maxId,o=e.sinceId,i=e.limit,s=void 0===i?20:i,a=we(t),c=[r&&"max_id=".concat(r),o&&"since_id=".concat(o),s&&"limit=".concat(s)].filter((function(e){return e})).join("&");return Ce({url:a+=c?"?"+c:"",method:"GET",credentials:n})},sendChatMessage:function(e){var t=e.id,n=e.content,r=e.mediaId,o=void 0===r?null:r,i=e.idempotencyKey,s=e.credentials,a={content:n};o&&(a.media_id=o);var c={};return i&&(c["idempotency-key"]=i),Ce({url:we(t),method:"POST",payload:a,credentials:s,headers:c})},readChat:function(e){var t=e.id,n=e.lastReadId,r=e.credentials;return Ce({url:be(t),method:"POST",payload:{last_read_id:n},credentials:r})},deleteChatMessage:function(e){var t=e.chatId,n=e.messageId,r=e.credentials;return Ce({url:ye(t,n),method:"DELETE",credentials:r})},setReportState:function(e){var t=e.id,n=e.state,r=e.credentials;return Oe("/api/pleroma/admin/reports",{headers:A(A({},Pe(r)),{},{Accept:"application/json","Content-Type":"application/json"}),method:"PATCH",body:JSON.stringify({reports:[{id:t,state:n}]})}).then((function(e){if(e.status>=500)throw Error(e.statusText);return e.status>=400?e.json():e})).then((function(e){if(e.errors)throw Error(e.errors[0].message)}))},fetchUserInLists:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/accounts/".concat(e,"/lists")}(t);return Oe(r,{headers:Pe(n)}).then((function(e){return e.json()}))},fetchAnnouncements:function(e){var t=e.credentials;return Ce({url:"/api/v1/announcements",credentials:t})},dismissAnnouncement:function(e){var t=e.id,n=e.credentials;return Ce({url:me(t),credentials:n,method:"POST"})},postAnnouncement:function(e){var t=e.credentials,n=e.content,r=e.startsAt,o=e.endsAt,i=e.allDay;return Ce({url:"/api/v1/pleroma/admin/announcements",credentials:t,method:"POST",payload:De({content:n,startsAt:r,endsAt:o,allDay:i})})},editAnnouncement:function(e){var t=e.id,n=e.credentials,r=e.content,o=e.startsAt,i=e.endsAt,s=e.allDay;return Ce({url:ke(t),credentials:n,method:"PATCH",payload:De({content:r,startsAt:o,endsAt:i,allDay:s})})},deleteAnnouncement:function(e){var t=e.id,n=e.credentials;return Ce({url:Se(t),credentials:n,method:"DELETE"})},adminFetchAnnouncements:function(e){var t=e.credentials;return Ce({url:"/api/v1/pleroma/admin/announcements",credentials:t})}}},21865:(e,t,n)=>{"use strict";n.d(t,{CO:()=>l,Rx:()=>m,Tj:()=>h,_I:()=>v,a4:()=>g,aj:()=>p,ov:()=>u,pP:()=>b,uu:()=>w,wK:()=>f});var r=n(4942),o=n(29439),i=n(71002),s=n(97332);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e,t,n){if(null!=e){if("#"===e[0]||"transparent"===e)return e;if("object"===(0,i.Z)(e)){var r=e;e=r.r,t=r.g,n=r.b}var s=[e,t,n].map((function(e){return(e=(e=Math.ceil(e))<0?0:e)>255?255:e})),a=(0,o.Z)(s,3);return e=a[0],t=a[1],n=a[2],"#".concat(((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1))}},u=function(e){var t=function(e){return"rgb".split("").reduce((function(t,n){return t[n]=function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}(e[n]),t}),{})}(e);return.2126*t.r+.7152*t.g+.0722*t.b},d=function(e,t){var n=u(e),r=u(t),i=n>r?[n,r]:[r,n],s=(0,o.Z)(i,2);return(s[0]+.05)/(s[1]+.05)},p=function(e,t,n){return d(m(n,t),e)},h=function(e,t,n){return 1===t||void 0===t?e:"rgb".split("").reduce((function(r,o){return r[o]=e[o]*t+n[o]*(1-t),r}),{})},m=function(e,t){return t.reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];return h(r,i,e)}),e)},f=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},g=function(e,t){return"rgb".split("").reduce((function(n,r){return n[r]=(e[r]+t[r])/2,n}),{})},v=function(e){return"rgba(".concat(Math.floor(e.r),", ").concat(Math.floor(e.g),", ").concat(Math.floor(e.b),", ").concat(e.a,")")},w=function(e,t,n){if(d(e,t)<4.5){var r=void 0!==t.a?{a:t.a}:{},o=Object.assign(r,(0,s.Xp)(t).rgb);return!n&&d(e,o)<4.5?(0,s.wo)(e,t).rgb:o}return t},b=function(e,t){var n={};if("object"===(0,i.Z)(e))n=e;else if("string"==typeof e){if(!e.startsWith("#"))return e;n=f(e)}return v(c(c({},n),{},{a:t}))}},13562:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r=n(23560),o=n.n(r),i=function(e){return function(e){return o()(e)?e.options:e}(e).props}},27483:(e,t,n)=>{"use strict";n.d(t,{EB:()=>o,GV:()=>u,_F:()=>d,kr:()=>i,x4:()=>s});var r=1e3,o=6e4,i=60*o,s=24*i,a=7*s,c=30*s,l=365.25*s,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;"string"==typeof e&&(e=Date.parse(e));var n=Date.now()>e?Math.floor:Math.ceil,u=Math.abs(Date.now()-e),d={num:n(u/l),key:"time.unit.years"};return u<t*r?(d.num=0,d.key="time.now"):u<o?(d.num=n(u/r),d.key="time.unit.seconds"):u<i?(d.num=n(u/o),d.key="time.unit.minutes"):u<s?(d.num=n(u/i),d.key="time.unit.hours"):u<a?(d.num=n(u/s),d.key="time.unit.days"):u<c?(d.num=n(u/a),d.key="time.unit.weeks"):u<l&&(d.num=n(u/c),d.key="time.unit.months"),d},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=u(e,t);return n.key+="_short",n}},64689:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var r=function(e,t){if("Notification"in window&&"granted"===window.Notification.permission&&!e.statuses.notifications.desktopNotificationSilence){var n=new window.Notification(t.title,t);setTimeout(n.close.bind(n),5e3)}}},27742:(e,t,n)=>{"use strict";n.d(t,{Nw:()=>w,P7:()=>m,UB:()=>y,Wn:()=>f,_J:()=>b,cO:()=>h,eM:()=>g,nL:()=>p});var r=n(4942),o=n(95573),i=n.n(o),s=n(28490),a=n.n(s),c=n(52230),l=n(35748);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t={},n=Object.prototype.hasOwnProperty.call(e,"acct"),r=n&&!Object.prototype.hasOwnProperty.call(e,"avatar");if(t.inLists=null,t.id=String(e.id),t._original=e,n){if(t.screen_name=e.acct,t.fqn=e.fqn,t.statusnet_profile_url=e.url,r)return t;if(t.emoji=e.emojis,t.name=i()(e.display_name),t.name_html=t.name,t.name_unescaped=e.display_name,t.description=e.note,t.description_html=e.note,t.fields=e.fields,t.fields_html=e.fields.map((function(e){return{name:i()(e.name),value:e.value}})),t.fields_text=e.fields.map((function(e){return{name:unescape(e.name.replace(/<[^>]*>/g,"")),value:unescape(e.value.replace(/<[^>]*>/g,""))}})),t.profile_image_url=e.avatar,t.profile_image_url_original=e.avatar,t.cover_photo=e.header,t.friends_count=e.following_count,t.bot=e.bot,e.pleroma){e.pleroma.settings_store&&(t.storage=e.pleroma.settings_store["pleroma-fe"]);var o=e.pleroma.relationship;t.background_image=e.pleroma.background_image,t.favicon=e.pleroma.favicon,t.token=e.pleroma.chat_token,o&&(t.relationship=o),t.allow_following_move=e.pleroma.allow_following_move,t.hide_follows=e.pleroma.hide_follows,t.hide_followers=e.pleroma.hide_followers,t.hide_follows_count=e.pleroma.hide_follows_count,t.hide_followers_count=e.pleroma.hide_followers_count,t.rights={moderator:e.pleroma.is_moderator,admin:e.pleroma.is_admin},t.rights.admin?t.role="admin":t.rights.moderator?t.role="moderator":t.role="member",e.pleroma.privileges?t.privileges=e.pleroma.privileges:e.pleroma.is_admin?t.privileges=["users_read","users_manage_invites","users_manage_activation_state","users_manage_tags","users_manage_credentials","users_delete","messages_read","messages_delete","instances_delete","reports_manage_reports","moderation_log_read","announcements_manage_announcements","emoji_manage_emoji","statistics_read"]:e.pleroma.is_moderator?t.privileges=["messages_delete","reports_manage_reports"]:t.privileges=[]}e.source&&(t.description=e.source.note,t.default_scope=e.source.privacy,t.fields=e.source.fields,e.source.pleroma&&(t.no_rich_text=e.source.pleroma.no_rich_text,t.show_role=e.source.pleroma.show_role,t.discoverable=e.source.pleroma.discoverable)),t.is_local=!t.screen_name.includes("@")}else t.screen_name=e.screen_name,t.name=e.name,t.name_html=e.name_html,t.description=e.description,t.description_html=e.description_html,t.profile_image_url=e.profile_image_url,t.profile_image_url_original=e.profile_image_url_original,t.cover_photo=e.cover_photo,t.friends_count=e.friends_count,t.statusnet_profile_url=e.statusnet_profile_url,t.is_local=e.is_local,t.role=e.role,t.show_role=e.show_role,e.rights&&(t.rights={moderator:e.rights.delete_others_notice,admin:e.rights.admin}),t.no_rich_text=e.no_rich_text,t.default_scope=e.default_scope,t.hide_follows=e.hide_follows,t.hide_followers=e.hide_followers,t.hide_follows_count=e.hide_follows_count,t.hide_followers_count=e.hide_followers_count,t.background_image=e.background_image,t.token=e.token,t.relationship={muting:e.muted,blocking:e.statusnet_blocking,followed_by:e.follows_you,following:e.following};if(t.created_at=new Date(e.created_at),t.locked=e.locked,t.followers_count=e.followers_count,t.statuses_count=e.statuses_count,e.pleroma&&(t.follow_request_count=e.pleroma.follow_request_count,t.tags=e.pleroma.tags,t.deactivated=void 0!==e.pleroma.is_active?!e.pleroma.is_active:e.pleroma.deactivated,t.notification_settings=e.pleroma.notification_settings,t.unread_chat_count=e.pleroma.unread_chat_count),t.tags=t.tags||[],t.rights=t.rights||{},t.notification_settings=t.notification_settings||{},t.screen_name_ui=t.screen_name,t.screen_name&&t.screen_name.includes("@")){var s=t.screen_name.split("@"),a=l.Z.toUnicode(s[1]);a!==s[1]?(t.screen_name_ui_contains_non_ascii=!0,t.screen_name_ui=[s[0],a].join("@")):t.screen_name_ui_contains_non_ascii=!1}return t},h=function(e){var t={};return Object.prototype.hasOwnProperty.call(e,"oembed")?t.mimetype=e.mimetype:(t.mimetype=e.pleroma?e.pleroma.mime_type:e.type,t.meta=e.meta,t.id=e.id),t.url=e.url,t.large_thumb_url=e.preview_url,t.description=e.description,t},m=function(e){var t={};return t.text=e.text,t.spoiler_text=e.spoiler_text,t.content_type=e.content_type,t},f=function e(t){var n={},r=Object.prototype.hasOwnProperty.call(t,"account");if(r){if(n.favorited=t.favourited,n.fave_num=t.favourites_count,n.repeated=t.reblogged,n.repeat_num=t.reblogs_count,n.bookmarked=t.bookmarked,n.type=t.reblog?"retweet":"status",n.nsfw=t.sensitive,n.raw_html=t.content,n.emojis=t.emojis,n.tags=t.tags,n.edited_at=t.edited_at,t.pleroma){var o=t.pleroma;n.text=o.content?t.pleroma.content["text/plain"]:t.content,n.summary=o.spoiler_text?t.pleroma.spoiler_text["text/plain"]:t.spoiler_text,n.statusnet_conversation_id=t.pleroma.conversation_id,n.is_local=o.local,n.in_reply_to_screen_name=t.pleroma.in_reply_to_account_acct,n.thread_muted=o.thread_muted,n.emoji_reactions=o.emoji_reactions,n.parent_visible=void 0===o.parent_visible||o.parent_visible}else n.text=t.content,n.summary=t.spoiler_text;n.in_reply_to_status_id=t.in_reply_to_id,n.in_reply_to_user_id=t.in_reply_to_account_id,n.replies_count=t.replies_count,"retweet"===n.type&&(n.retweeted_status=e(t.reblog)),n.summary_raw_html=i()(t.spoiler_text),n.external_url=t.url,n.poll=t.poll,n.poll&&(n.poll.options=(n.poll.options||[]).map((function(e){return d(d({},e),{},{title_html:i()(e.title)})}))),n.pinned=t.pinned,n.muted=t.muted}else n.favorited=t.favorited,n.fave_num=t.fave_num,n.repeated=t.repeated,n.repeat_num=t.repeat_num,n.type=function(e){return e.is_post_verb?"status":e.retweeted_status?"retweet":"string"==typeof e.uri&&e.uri.match(/(fave|objectType=Favourite)/)||"string"==typeof e.text&&e.text.match(/favorited/)?"favorite":e.text.match(/deleted notice {{tag/)||e.qvitter_delete_notice?"deletion":e.text.match(/started following/)||"follow"===e.activity_type?"follow":"unknown"}(t),void 0===t.nsfw?(n.nsfw=v(t),t.retweeted_status&&(n.nsfw=t.retweeted_status.nsfw)):n.nsfw=t.nsfw,n.raw_html=t.statusnet_html,n.text=t.text,n.in_reply_to_status_id=t.in_reply_to_status_id,n.in_reply_to_user_id=t.in_reply_to_user_id,n.in_reply_to_screen_name=t.in_reply_to_screen_name,n.statusnet_conversation_id=t.statusnet_conversation_id,"retweet"===n.type&&(n.retweeted_status=e(t.retweeted_status)),n.summary=t.summary,n.summary_html=t.summary_html,n.external_url=t.external_url,n.is_local=t.is_local;n.id=String(t.id),n.visibility=t.visibility,n.card=t.card,n.created_at=new Date(t.created_at),n.in_reply_to_status_id=n.in_reply_to_status_id?String(n.in_reply_to_status_id):null,n.in_reply_to_user_id=n.in_reply_to_user_id?String(n.in_reply_to_user_id):null,n.user=p(r?t.account:t.user),n.attentions=((r?t.mentions:t.attentions)||[]).map(p),n.attachments=((r?t.media_attachments:t.attachments)||[]).map(h);var s=r?t.reblog:t.retweeted_status;return s&&(n.retweeted_status=e(s)),n.favoritedBy=[],n.rebloggedBy=[],Object.prototype.hasOwnProperty.call(t,"originalStatus")&&Object.assign(n,t.originalStatus),n},g=function(e){var t={};if(Object.prototype.hasOwnProperty.call(e,"ntype")){var n=f(e.notice);t.type=e.ntype,t.seen=Boolean(e.is_seen),t.status="like"===t.type?f(e.notice.favorited_status):n,t.action=n,t.from_profile="pleroma:chat_mention"===t.type?p(e.account):p(e.from_profile)}else t.type={favourite:"like",reblog:"repeat"}[e.type]||e.type,t.seen=e.pleroma.is_seen,t.status=(0,c.Gr)(t.type)?f(e.status):null,t.action=t.status,t.target="move"!==t.type?null:p(e.target),t.from_profile=p(e.account),t.emoji=e.emoji,e.report&&(t.report=e.report,t.report.content=e.report.content,t.report.acct=p(e.report.account),t.report.actor=p(e.report.actor),t.report.statuses=e.report.statuses.map(f));return t.created_at=new Date(e.created_at),t.id=parseInt(e.id),t},v=function(e){return(e.tags||[]).includes("nsfw")||!!(e.text||"").match(/#nsfw/i)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.flakeId,r=a()(e);if(r){var o=r.next.max_id,i=r.prev.min_id;return{maxId:n?o:parseInt(o,10),minId:n?i:parseInt(i,10)}}},b=function(e){var t={};return t.id=e.id,t.account=p(e.account),t.unread=e.unread,t.lastMessage=y(e.last_message),t.updated_at=new Date(e.updated_at),t},y=function(e){if(e){if(e.isNormalized)return e;var t=e;return t.id=e.id,t.created_at=new Date(e.created_at),t.chat_id=e.chat_id,t.emojis=e.emojis,t.content=e.content,e.attachment?t.attachments=[h(e.attachment)]:t.attachments=[],t.pending=!!e.pending,t.error=!1,t.idempotency_key=e.idempotency_key,t.isNormalized=!0,t}}},49753:(e,t,n)=>{"use strict";var r,o,i,s,a;n.d(t,{Z:()=>c});const c=(r=[],o=128,i=128,s=function(e){return e.complete&&0!==e.naturalHeight},{initFaviconService:function(){document.querySelectorAll('link[rel="icon"]').forEach((function(e){if(e){var t=document.createElement("canvas");t.width=o,t.height=i;var n=new Image;n.crossOrigin="anonymous",n.src=e.href;var s=t.getContext("2d");r.push({favcanvas:t,favimg:n,favcontext:s,favicon:e})}}))},clearFaviconBadge:a=function(){0!==r.length&&r.forEach((function(e){var t=e.favimg,n=e.favcanvas,r=e.favcontext,a=e.favicon;t&&r&&a&&(r.clearRect(0,0,o,i),s(t)&&r.drawImage(t,0,0,t.width,t.height,0,0,o,i),a.href=n.toDataURL("image/png"))}))},drawFaviconBadge:function(){0!==r.length&&(a(),r.forEach((function(e){var t=e.favimg,n=e.favcanvas,r=e.favcontext,a=e.favicon;if(t&&r&&r){var c=getComputedStyle(document.body),l="".concat(c.getPropertyValue("--badgeNotification")||"rgb(240, 100, 100)");s(t)&&r.drawImage(t,0,0,t.width,t.height,0,0,o,i),r.fillStyle=l,r.beginPath(),r.arc(96,32,32,0,2*Math.PI,!1),r.fill(),a.href=n.toDataURL("image/png")}})))}})},65079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={fileSizeFormat:function(e){var t=["B","KiB","MiB","GiB","TiB"],n=e;if(n<1)return n+" "+t[0];var r=Math.min(Math.floor(Math.log(n)/Math.log(1024)),t.length-1);return{num:n=1*(n/Math.pow(1024,r)).toFixed(2),unit:t[r]}}}},58394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=function(e){return e.match(/flash/)?"flash":e.match(/text\/html/)?"html":e.match(/image/)?"image":e.match(/video/)?"video":e.match(/audio/)?"audio":"unknown"};const o={fileType:r,fileMatchesSomeType:function(e,t){return e.some((function(e){return r(t.mimetype)===e}))}}},39776:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(35161),o=n.n(r),i=n(72617),s=n(2900),a={ja_easy:"ja",zh_Hant:"zh-HANT",zh:"zh-Hans"},c=function(e){return a[e]||e},l=function(e){var t={ja_easy:"やさしいにほんご",zh:"简体中文",zh_Hant:"繁體中文"}[e]||s.Z.getNativeName(e),n=c(e);return t.charAt(0).toLocaleUpperCase(n)+t.slice(1)},u=o()(i.Z.languages,(function(e){return{code:e,name:l(e)}})).sort((function(e,t){return e.name.localeCompare(t.name)}));const d={internalToBrowserLocale:c,internalToBackendLocale:function(e){return c(e).replace("_","-")},languages:u,getLanguageName:l}},52230:(e,t,n)=>{"use strict";n.d(t,{Bt:()=>d,G2:()=>w,Gr:()=>m,Km:()=>b,nJ:()=>v,nU:()=>f});var r=n(64721),o=n.n(r),i=n(89734),s=n.n(i),a=n(63105),c=n.n(a),l=n(67828),u=n(64689),d=function(e){return e.state.statuses.notifications.data},p=function(e){var t=e.rootState||e.state;return[t.config.notificationVisibility.likes&&"like",t.config.notificationVisibility.mentions&&"mention",t.config.notificationVisibility.repeats&&"repeat",t.config.notificationVisibility.follows&&"follow",t.config.notificationVisibility.followRequest&&"follow_request",t.config.notificationVisibility.moves&&"move",t.config.notificationVisibility.emojiReactions&&"pleroma:emoji_reaction",t.config.notificationVisibility.reports&&"pleroma:report",t.config.notificationVisibility.polls&&"poll"].filter((function(e){return e}))},h=["like","mention","repeat","pleroma:emoji_reaction","poll"],m=function(e){return o()(h,e)},f=function(e){return!(m(e.type)&&!e.status)},g=function(e,t){var n=Number(e.id),r=Number(t.id),o=!Number.isNaN(n),i=!Number.isNaN(r);return o&&i?n>r?-1:1:o&&!i?1:!o&&i||e.id>t.id?-1:1},v=function(e,t){var n=e.rootState||e.state;if(!t.seen&&p(e).includes(t.type)&&("mention"!==t.type||!function(e,t){if(t.status)return t.status.muted||(0,l.u)(t.status,e.rootGetters.mergedConfig.muteWords).length>0}(e,t))){var r=y(t,e.rootGetters.i18n);(0,u.w)(n,r)}},w=function(e,t){var n=d(e).map((function(e){return e})).sort(g);return(n=s()(n,"seen")).filter((function(n){return(t||p(e)).includes(n.type)}))},b=function(e){return c()(w(e),(function(e){return!e.seen}))},y=function(e,t){var n,r={tag:e.id},o=e.status,i=e.from_profile.name;switch(r.title=i,r.icon=e.from_profile.profile_image_url,e.type){case"like":n="favorited_you";break;case"repeat":n="repeated_you";break;case"follow":n="followed_you";break;case"move":n="migrated_to";break;case"follow_request":n="follow_request";break;case"pleroma:report":n="submitted_report";break;case"poll":n="poll_ended"}return"pleroma:emoji_reaction"===e.type?r.body=t.t("notifications.reacted_with",[e.emoji]):n?r.body=t.t("notifications."+n):m(e.type)&&(r.body=e.status.text),o&&o.attachments&&o.attachments.length>0&&!o.nsfw&&o.attachments[0].mimetype.startsWith("image/")&&(r.image=o.attachments[0].url),r}},15568:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(93433),o=n(77776),i=n(22626),s=["mention","favourite","reblog","follow","move","pleroma:emoji_reaction","pleroma:report"],a=function(e){var t=e.store,n=e.credentials,o=e.older,i=void 0!==o&&o,a=e.since,l={credentials:n},u=t.getters,d=(t.rootState||t.state).statuses.notifications,p=u.mergedConfig.hideMutedPosts;if(l.includeTypes=s,l.withMuted=!p,l.timeline="notifications",i)return d.minId!==Number.POSITIVE_INFINITY&&(l.until=d.minId),c({store:t,args:l,older:i});void 0===a&&d.maxId!==Number.POSITIVE_INFINITY?l.since=d.maxId:null!==a&&(l.since=a);var h=c({store:t,args:l,older:i}),m=d.data,f=m.filter((function(e){return e.seen})).map((function(e){return e.id}));return m.length-f.length>0&&f.length>0&&(l.since=Math.max.apply(Math,(0,r.Z)(f)),c({store:t,args:l,older:i})),h},c=function(e){var t=e.store,n=e.args,r=e.older;return o.ZP.fetchTimeline(n).then((function(e){if(e.errors)throw new Error("".concat(e.status," ").concat(e.statusText));var n=e.data;return function(e){var t=e.notifications,n=e.older;e.store.dispatch("addNewNotifications",{notifications:t,older:n})}({store:t,notifications:n,older:r}),n})).catch((function(e){t.dispatch("pushGlobalNotice",{level:"error",messageKey:"notifications.error",messageArgs:[e.message],timeout:5e3}),console.error(e)}))};const l={fetchAndUpdate:a,startFetching:function(e){var t=e.credentials,n=e.store;setTimeout((function(){return n.dispatch("setNotificationsSilence",!1)}),1e4);var r=function(){return a({credentials:t,store:n})};return r(),(0,i.F)(r,1e4)}}},67952:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.top,s=void 0===i?0:i,a=r.left,c=void 0===a?0:a,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u={top:s+t.offsetTop,left:c+t.offsetLeft};if(!l&&t!==window){var d=o(t),p=d.topPadding,h=d.leftPadding;u.top+=l?0:p,u.left+=l?0:h}if(t.offsetParent&&"sticky"!==window.getComputedStyle(t.offsetParent).position&&(n===window||n.contains(t.offsetParent)||n===t.offsetParent))return e(t.offsetParent,n,u,!1);if(n!==window){var m=o(n),f=m.topPadding,g=m.leftPadding;u.top+=f,u.left+=g}return u},o=function(e){var t=window.getComputedStyle(e)["padding-top"],n=Number(t.substring(0,t.length-2)),r=window.getComputedStyle(e)["padding-left"];return{topPadding:n,leftPadding:Number(r.substring(0,r.length-2))}}},22626:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var r=function(e,t){var n=!1,r=null;return r=window.setTimeout((function o(){var i=e();i&&i.finally?i.finally((function(){n||(r=window.setTimeout(o,t))})):console.warn("promiseInterval: promise call did not return a promise, stopping interval.")}),t),{stop:function(){n=!0,window.clearTimeout(r)}}}},67828:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(63105),o=n.n(r),i=function(e,t){var n=e.text.toLowerCase(),r=e.summary.toLowerCase();return o()(t,(function(e){return n.includes(e.toLowerCase())||r.includes(e.toLowerCase())}))}},7257:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(35161),o=n.n(r),i=n(77776);const s={postStatus:function(e){var t=e.store,n=e.status,r=e.spoilerText,s=e.visibility,a=e.sensitive,c=e.poll,l=e.media,u=void 0===l?[]:l,d=e.inReplyToStatusId,p=void 0===d?void 0:d,h=e.contentType,m=void 0===h?"text/plain":h,f=e.preview,g=void 0!==f&&f,v=e.idempotencyKey,w=void 0===v?"":v,b=o()(u,"id");return i.ZP.postStatus({credentials:t.state.users.currentUser.credentials,status:n,spoilerText:r,visibility:s,sensitive:a,mediaIds:b,inReplyToStatusId:p,contentType:m,poll:c,preview:g,idempotencyKey:w}).then((function(e){return e.error||g||t.dispatch("addNewStatuses",{statuses:[e],timeline:"friends",showImmediately:!0,noIdUpdate:!0}),e})).catch((function(e){return{error:e.message}}))},editStatus:function(e){var t=e.store,n=e.statusId,r=e.status,s=e.spoilerText,a=e.sensitive,c=e.poll,l=e.media,u=void 0===l?[]:l,d=e.contentType,p=void 0===d?"text/plain":d,h=o()(u,"id");return i.ZP.editStatus({id:n,credentials:t.state.users.currentUser.credentials,status:r,spoilerText:s,sensitive:a,poll:c,mediaIds:h,contentType:p}).then((function(e){return e.error||t.dispatch("addNewStatuses",{statuses:[e],timeline:"friends",showImmediately:!0,noIdUpdate:!0}),e})).catch((function(e){return console.error("Error editing status",e),{error:e.message}}))},uploadMedia:function(e){var t=e.store,n=e.formData,r=t.state.users.currentUser.credentials;return i.ZP.uploadMedia({credentials:r,formData:n})},setMediaDescription:function(e){var t=e.store,n=e.id,r=e.description,o=t.state.users.currentUser.credentials;return i.ZP.setMediaDescription({credentials:o,id:n,description:r})}}},77394:(e,t,n)=>{"use strict";n.d(t,{H2:()=>P,I3:()=>$,LP:()=>b,Ot:()=>v,RC:()=>D,_v:()=>h,bY:()=>U,dE:()=>x,gm:()=>z,l9:()=>T,lD:()=>y,m:()=>_,mg:()=>g,vp:()=>C});var r=n(71002),o=n(93433),i=n(4942),s=n(29439),a=n(97332),c=n(21865),l=n(40454),u=n(85565);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=I(e).rules,n=document.head,r=document.body;r.classList.add("hidden");var o=document.createElement("style");n.appendChild(o);var i=o.sheet;i.toString(),i.insertRule(":root { ".concat(t.radii," }"),"index-max"),i.insertRule(":root { ".concat(t.colors," }"),"index-max"),i.insertRule(":root { ".concat(t.shadows," }"),"index-max"),i.insertRule(":root { ".concat(t.fonts," }"),"index-max"),r.classList.remove("hidden")},m=function(e){return{sidebarColumnWidth:e.sidebarColumnWidth,contentColumnWidth:e.contentColumnWidth,notifsColumnWidth:e.notifsColumnWidth}},f=m(u.W2),g=function(e){var t=m(e);if(t!==f){var n=document.head,r=document.body;r.classList.add("hidden");var o=Object.entries(t).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return"--".concat(n,": ").concat(r)})).join(";"),i=document.createElement("style");n.appendChild(i);var a=i.sheet;a.toString(),a.insertRule(":root { ".concat(o," }"),"index-max"),r.classList.remove("hidden")}},v=function(e,t){return 0===e.length?"none":e.filter((function(e){return t?e.inset:e})).map((function(e){return[e.x,e.y,e.blur,e.spread].map((function(e){return e+"px"})).concat([(0,c.pP)(e.color,e.alpha),e.inset?"inset":""]).join(" ")})).join(", ")},w=function(e){return 0===e.length?"none":e.filter((function(e){return!e.inset&&0===Number(e.spread)})).map((function(e){return[e.x,e.y,e.blur/2].map((function(e){return e+"px"})).concat([(0,c.pP)(e.color,e.alpha)]).join(" ")})).map((function(e){return"drop-shadow(".concat(e,")")})).join(" ")},b=function(e){var t=e.themeEngineVersion?e.colors||e:x(e.colors||e),n=(0,l.EC)(t,e.opacity||{}),r=n.colors,o=n.opacity,i=Object.entries(r).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];return o?(e.solid[r]=(0,c.CO)(o),e.complete[r]=void 0===o.a?(0,c.CO)(o):(0,c._I)(o),e):e}),{complete:{},solid:{}});return{rules:{colors:Object.entries(i.complete).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return"--".concat(n,": ").concat(r)})).join(";")},theme:{colors:i.solid,opacity:o}}},y=function(e){var t=e.radii||{};void 0!==e.btnRadius&&(t=Object.entries(e).filter((function(e){var t=(0,s.Z)(e,2),n=t[0];return t[1],n.endsWith("Radius")})).reduce((function(e,t){return e[t[0].split("Radius")[0]]=t[1],e}),{}));var n=Object.entries(t).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];return e[r]=o,e}),{btn:4,input:4,checkbox:2,panel:10,avatar:5,avatarAlt:50,tooltip:2,attachment:5,chatMessage:t.panel});return{rules:{radii:Object.entries(n).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return"--".concat(n,"Radius: ").concat(r,"px")})).join(";")},theme:{radii:n}}},_=function(e){var t=Object.entries(e.fonts||{}).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];return e[r]=Object.entries(o).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];return e[r]=o,e}),e[r]),e}),{interface:{family:"sans-serif"},input:{family:"inherit"},post:{family:"inherit"},postCode:{family:"monospace"}});return{rules:{fonts:Object.entries(t).filter((function(e){var t=(0,s.Z)(e,2);return t[0],t[1]})).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return"--".concat(n,"Font: ").concat(r.family)})).join(";")},theme:{fonts:t}}},k=function(e,t){return{x:0,y:e?1:-1,blur:0,spread:0,color:t?"#000000":"#FFFFFF",alpha:.2,inset:!0}},S=[k(!0,!1),k(!1,!0)],j=[k(!0,!0),k(!1,!1)],O={x:0,y:0,blur:4,spread:0,color:"--faint",alpha:1},C={panel:[{x:1,y:1,blur:4,spread:0,color:"#000000",alpha:.6}],topBar:[{x:0,y:0,blur:4,spread:0,color:"#000000",alpha:.6}],popup:[{x:2,y:2,blur:3,spread:0,color:"#000000",alpha:.5}],avatar:[{x:0,y:1,blur:8,spread:0,color:"#000000",alpha:.7}],avatarStatus:[],panelHeader:[],button:[{x:0,y:0,blur:2,spread:0,color:"#000000",alpha:1}].concat(S),buttonHover:[O].concat(S),buttonPressed:[O].concat(j),input:[].concat(j,[{x:0,y:0,blur:2,inset:!0,spread:0,color:"#000000",alpha:1}])},P=function(e,t){var n={button:"btn",panel:"bg",top:"topBar",popup:"popover",avatar:"bg",panelHeader:"panel",input:"input"},r=Object.fromEntries(Object.entries(e.shadows||{}).map((function(e){var t=(0,s.Z)(e,2);return[t[0],t[1].map((function(e){return p({color:"#000000"},e)}))]}))),u=r&&!e.themeEngineVersion?T(r,e.opacity):r||{},d=Object.entries(p(p({},C),u)).reduce((function(e,r){var u=(0,s.Z)(r,2),d=u[0],h=u[1],m=d.replace(/[A-Z].*$/,""),f=n[m],g=(0,c.ov)((0,a.OQ)(t[f]).rgb)<.5?1:-1,v=h.reduce((function(e,n){return[].concat((0,o.Z)(e),[p(p({},n),{},{color:(0,c.CO)((0,l.NI)(n.color,(function(e){return(0,a.OQ)(t[e]).rgb}),g))})])}),[]);return p(p({},e),{},(0,i.Z)({},d,v))}),{});return{rules:{shadows:Object.entries(d).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return["--".concat(n,"Shadow: ").concat(v(r)),"--".concat(n,"ShadowFilter: ").concat(w(r)),"--".concat(n,"ShadowInset: ").concat(v(r,!0))].join(";")})).join(";")},theme:{shadows:d}}},z=function(e,t,n,r){return{rules:p(p(p(p({},n.rules),e.rules),t.rules),r.rules),theme:p(p(p(p({},n.theme),e.theme),t.theme),r.theme)}},I=function(e){var t=b(e);return z(t,y(e),P(e,t.theme.colors,t.mod),_(e))},D=function(){var e="no-store";return window.fetch("/static/styles.json",{cache:e}).then((function(e){return e.json()})).then((function(t){return Object.entries(t).map((function(t){var n=(0,s.Z)(t,2),o=n[0],i=n[1],a=null;return"object"===(0,r.Z)(i)?a=Promise.resolve(i):"string"==typeof i&&(a=window.fetch(i,{cache:e}).then((function(e){return e.json()})).catch((function(e){return console.error(e),null}))),[o,a]}))})).then((function(e){return e.reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];return e[r]=o,e}),{})}))},x=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],o=n[1];switch(r){case"lightBg":return p(p({},e),{},{highlight:o});case"btnText":return p(p({},e),["","Panel","TopBar"].reduce((function(e,t){return p(p({},e),{},(0,i.Z)({},"btn"+t+"Text",o))}),{}));default:return p(p({},e),{},(0,i.Z)({},r,o))}}),{})},T=function(e,t){return Object.entries(e).reduce((function(e,n){var r=(0,s.Z)(n,2),a=r[0],c=r[1].reduce((function(e,n){return[].concat((0,o.Z)(e),[p(p({},n),{},{alpha:(s=n,a=s.color,(void 0===a?"#000000":a).startsWith("--")?(r=n,i=r.color,t[(0,l.AV)(i.substring(2).split(",")[0])]||1):n.alpha)})]);var r,i,s,a}),[]);return p(p({},e),{},(0,i.Z)({},a,c))}),{})},$=function(e){return D().then((function(t){return t[e]?t[e]:t["pleroma-dark"]})).then((function(e){var t=Array.isArray(e),n=t?{}:e.theme;if(t){var r=(0,c.wK)(e[1]),o=(0,c.wK)(e[2]),i=(0,c.wK)(e[3]),s=(0,c.wK)(e[4]),a=(0,c.wK)(e[5]||"#FF0000"),l=(0,c.wK)(e[6]||"#00FF00"),u=(0,c.wK)(e[7]||"#0000FF"),d=(0,c.wK)(e[8]||"#E3FF00");n.colors={bg:r,fg:o,text:i,link:s,cRed:a,cBlue:u,cGreen:l,cOrange:d}}return{theme:n,source:e.source}}))},U=function(e){return $(e).then((function(e){return h(e.theme)}))}},44551:(e,t,n)=>{"use strict";n.d(t,{em:()=>a,k0:()=>i,wB:()=>s});var r=n(97332),o=n(21865),i={undelay:null,topBar:null,badge:null,profileTint:null,fg:null,bg:"underlay",highlight:"bg",panel:"bg",popover:"bg",selectedMenu:"popover",btn:"bg",btnPanel:"panel",btnTopBar:"topBar",input:"bg",inputPanel:"panel",inputTopBar:"topBar",alert:"bg",alertPanel:"panel",poll:"bg",chatBg:"underlay",chatMessage:"chatBg"},s={profileTint:.5,alert:.5,input:.5,faint:.5,underlay:.15,alertPopup:.95},a={bg:{depends:[],opacity:"bg",priority:1},wallpaper:{depends:["bg"],color:function(e,t){return(0,r.Xu)(-2*e,t).rgb}},fg:{depends:[],priority:1},text:{depends:[],layer:"bg",opacity:null,priority:1},underlay:{default:"#000000",opacity:"underlay"},link:{depends:["accent"],priority:1},accent:{depends:["link"],priority:1},faint:{depends:["text"],opacity:"faint"},faintLink:{depends:["link"],opacity:"faint"},postFaintLink:{depends:["postLink"],opacity:"faint"},cBlue:"#0000ff",cRed:"#FF0000",cGreen:"#00FF00",cOrange:"#E3FF00",profileBg:{depends:["bg"],color:function(e,t){return{r:Math.floor(.53*t.r),g:Math.floor(.56*t.g),b:Math.floor(.59*t.b)}}},profileTint:{depends:["bg"],layer:"profileTint",opacity:"profileTint"},highlight:{depends:["bg"],color:function(e,t){return(0,r.Xu)(5*e,t).rgb}},highlightLightText:{depends:["lightText"],layer:"highlight",textColor:!0},highlightPostLink:{depends:["postLink"],layer:"highlight",textColor:"preserve"},highlightFaintText:{depends:["faint"],layer:"highlight",textColor:!0},highlightFaintLink:{depends:["faintLink"],layer:"highlight",textColor:"preserve"},highlightPostFaintLink:{depends:["postFaintLink"],layer:"highlight",textColor:"preserve"},highlightText:{depends:["text"],layer:"highlight",textColor:!0},highlightLink:{depends:["link"],layer:"highlight",textColor:"preserve"},highlightIcon:{depends:["highlight","highlightText"],color:function(e,t,n){return(0,o.a4)(t,n)}},popover:{depends:["bg"],opacity:"popover"},popoverLightText:{depends:["lightText"],layer:"popover",textColor:!0},popoverPostLink:{depends:["postLink"],layer:"popover",textColor:"preserve"},popoverFaintText:{depends:["faint"],layer:"popover",textColor:!0},popoverFaintLink:{depends:["faintLink"],layer:"popover",textColor:"preserve"},popoverPostFaintLink:{depends:["postFaintLink"],layer:"popover",textColor:"preserve"},popoverText:{depends:["text"],layer:"popover",textColor:!0},popoverLink:{depends:["link"],layer:"popover",textColor:"preserve"},popoverIcon:{depends:["popover","popoverText"],color:function(e,t,n){return(0,o.a4)(t,n)}},selectedPost:"--highlight",selectedPostFaintText:{depends:["highlightFaintText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostLightText:{depends:["highlightLightText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostPostLink:{depends:["highlightPostLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostFaintLink:{depends:["highlightFaintLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostText:{depends:["highlightText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostLink:{depends:["highlightLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostIcon:{depends:["selectedPost","selectedPostText"],color:function(e,t,n){return(0,o.a4)(t,n)}},selectedMenu:{depends:["bg"],color:function(e,t){return(0,r.Xu)(5*e,t).rgb}},selectedMenuLightText:{depends:["highlightLightText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuFaintText:{depends:["highlightFaintText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuFaintLink:{depends:["highlightFaintLink"],layer:"selectedMenu",variant:"selectedMenu",textColor:"preserve"},selectedMenuText:{depends:["highlightText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuLink:{depends:["highlightLink"],layer:"selectedMenu",variant:"selectedMenu",textColor:"preserve"},selectedMenuIcon:{depends:["selectedMenu","selectedMenuText"],color:function(e,t,n){return(0,o.a4)(t,n)}},selectedMenuPopover:{depends:["popover"],color:function(e,t){return(0,r.Xu)(5*e,t).rgb}},selectedMenuPopoverLightText:{depends:["selectedMenuLightText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverFaintText:{depends:["selectedMenuFaintText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverFaintLink:{depends:["selectedMenuFaintLink"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:"preserve"},selectedMenuPopoverText:{depends:["selectedMenuText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverLink:{depends:["selectedMenuLink"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:"preserve"},selectedMenuPopoverIcon:{depends:["selectedMenuPopover","selectedMenuText"],color:function(e,t,n){return(0,o.a4)(t,n)}},lightText:{depends:["text"],layer:"bg",textColor:"preserve",color:function(e,t){return(0,r.Xu)(20*e,t).rgb}},postLink:{depends:["link"],layer:"bg",textColor:"preserve"},postGreentext:{depends:["cGreen"],layer:"bg",textColor:"preserve"},postCyantext:{depends:["cBlue"],layer:"bg",textColor:"preserve"},border:{depends:["fg"],opacity:"border",color:function(e,t){return(0,r.Xu)(2*e,t).rgb}},poll:{depends:["accent","bg"],copacity:"poll",color:function(e,t,n){return(0,o.Tj)(t,.4,n)}},pollText:{depends:["text"],layer:"poll",textColor:!0},icon:{depends:["bg","text"],inheritsOpacity:!1,color:function(e,t,n){return(0,o.a4)(t,n)}},fgText:{depends:["text"],layer:"fg",textColor:!0},fgLink:{depends:["link"],layer:"fg",textColor:"preserve"},panel:{depends:["fg"],opacity:"panel"},panelText:{depends:["text"],layer:"panel",textColor:!0},panelFaint:{depends:["fgText"],layer:"panel",opacity:"faint",textColor:!0},panelLink:{depends:["fgLink"],layer:"panel",textColor:"preserve"},topBar:"--fg",topBarText:{depends:["fgText"],layer:"topBar",textColor:!0},topBarLink:{depends:["fgLink"],layer:"topBar",textColor:"preserve"},tab:{depends:["btn"]},tabText:{depends:["btnText"],layer:"btn",textColor:!0},tabActiveText:{depends:["text"],layer:"bg",textColor:!0},btn:{depends:["fg"],variant:"btn",opacity:"btn"},btnText:{depends:["fgText"],layer:"btn",textColor:!0},btnPanelText:{depends:["btnText"],layer:"btnPanel",variant:"btn",textColor:!0},btnTopBarText:{depends:["btnText"],layer:"btnTopBar",variant:"btn",textColor:!0},btnPressed:{depends:["btn"],layer:"btn"},btnPressedText:{depends:["btnText"],layer:"btn",variant:"btnPressed",textColor:!0},btnPressedPanel:{depends:["btnPressed"],layer:"btn"},btnPressedPanelText:{depends:["btnPanelText"],layer:"btnPanel",variant:"btnPressed",textColor:!0},btnPressedTopBar:{depends:["btnPressed"],layer:"btn"},btnPressedTopBarText:{depends:["btnTopBarText"],layer:"btnTopBar",variant:"btnPressed",textColor:!0},btnToggled:{depends:["btn"],layer:"btn",color:function(e,t){return(0,r.Xu)(20*e,t).rgb}},btnToggledText:{depends:["btnText"],layer:"btn",variant:"btnToggled",textColor:!0},btnToggledPanelText:{depends:["btnPanelText"],layer:"btnPanel",variant:"btnToggled",textColor:!0},btnToggledTopBarText:{depends:["btnTopBarText"],layer:"btnTopBar",variant:"btnToggled",textColor:!0},btnDisabled:{depends:["btn","bg"],color:function(e,t,n){return(0,o.Tj)(t,.25,n)}},btnDisabledText:{depends:["btnText","btnDisabled"],layer:"btn",variant:"btnDisabled",color:function(e,t,n){return(0,o.Tj)(t,.25,n)}},btnDisabledPanelText:{depends:["btnPanelText","btnDisabled"],layer:"btnPanel",variant:"btnDisabled",color:function(e,t,n){return(0,o.Tj)(t,.25,n)}},btnDisabledTopBarText:{depends:["btnTopBarText","btnDisabled"],layer:"btnTopBar",variant:"btnDisabled",color:function(e,t,n){return(0,o.Tj)(t,.25,n)}},input:{depends:["fg"],opacity:"input"},inputText:{depends:["text"],layer:"input",textColor:!0},inputPanelText:{depends:["panelText"],layer:"inputPanel",variant:"input",textColor:!0},inputTopbarText:{depends:["topBarText"],layer:"inputTopBar",variant:"input",textColor:!0},alertError:{depends:["cRed"],opacity:"alert"},alertErrorText:{depends:["text"],layer:"alert",variant:"alertError",textColor:!0},alertErrorPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertError",textColor:!0},alertWarning:{depends:["cOrange"],opacity:"alert"},alertWarningText:{depends:["text"],layer:"alert",variant:"alertWarning",textColor:!0},alertWarningPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertWarning",textColor:!0},alertSuccess:{depends:["cGreen"],opacity:"alert"},alertSuccessText:{depends:["text"],layer:"alert",variant:"alertSuccess",textColor:!0},alertSuccessPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertSuccess",textColor:!0},alertNeutral:{depends:["text"],opacity:"alert"},alertNeutralText:{depends:["text"],layer:"alert",variant:"alertNeutral",color:function(e,t){return(0,r.Xp)(t).rgb},textColor:!0},alertNeutralPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertNeutral",textColor:!0},alertPopupError:{depends:["alertError"],opacity:"alertPopup"},alertPopupErrorText:{depends:["alertErrorText"],layer:"popover",variant:"alertPopupError",textColor:!0},alertPopupWarning:{depends:["alertWarning"],opacity:"alertPopup"},alertPopupWarningText:{depends:["alertWarningText"],layer:"popover",variant:"alertPopupWarning",textColor:!0},alertPopupSuccess:{depends:["alertSuccess"],opacity:"alertPopup"},alertPopupSuccessText:{depends:["alertSuccessText"],layer:"popover",variant:"alertPopupSuccess",textColor:!0},alertPopupNeutral:{depends:["alertNeutral"],opacity:"alertPopup"},alertPopupNeutralText:{depends:["alertNeutralText"],layer:"popover",variant:"alertPopupNeutral",textColor:!0},badgeNotification:"--cRed",badgeNotificationText:{depends:["text","badgeNotification"],layer:"badge",variant:"badgeNotification",textColor:"bw"},badgeNeutral:"--cGreen",badgeNeutralText:{depends:["text","badgeNeutral"],layer:"badge",variant:"badgeNeutral",textColor:"bw"},chatBg:{depends:["bg"]},chatMessageIncomingBg:{depends:["chatBg"]},chatMessageIncomingText:{depends:["text"],layer:"chatMessage",variant:"chatMessageIncomingBg",textColor:!0},chatMessageIncomingLink:{depends:["link"],layer:"chatMessage",variant:"chatMessageIncomingBg",textColor:"preserve"},chatMessageIncomingBorder:{depends:["border"],opacity:"border",color:function(e,t){return(0,r.Xu)(2*e,t).rgb}},chatMessageOutgoingBg:{depends:["chatMessageIncomingBg"],color:function(e,t){return(0,r.Xu)(5*e,t).rgb}},chatMessageOutgoingText:{depends:["text"],layer:"chatMessage",variant:"chatMessageOutgoingBg",textColor:!0},chatMessageOutgoingLink:{depends:["link"],layer:"chatMessage",variant:"chatMessageOutgoingBg",textColor:"preserve"},chatMessageOutgoingBorder:{depends:["chatMessageOutgoingBg"],opacity:"border",color:function(e,t){return(0,r.Xu)(2*e,t).rgb}}}},40454:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>y,AV:()=>v,EC:()=>k,NI:()=>_,we:()=>p,xb:()=>m});var r=n(4942),o=n(29439),i=n(71002),s=n(93433),a=n(97332),c=n(21865),l=n(44551);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=3,h=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.k0,n=[e],r=t[e];r;)n.unshift(r),r=t[r];return n},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return h(e).map((function(i){return[i===e?r[t]:r[i],i===e?o[n]||1:o[i]]}))},f=function(e,t){var n=t[e];if("string"==typeof n&&n.startsWith("--"))return[n.substring(2)];if(null===n)return[];var r=n.depends,o=n.layer,i=n.variant,a=o?h(o).map((function(e){return e===o?i||o:e})):[];return Array.isArray(r)?[].concat((0,s.Z)(r),(0,s.Z)(a)):(0,s.Z)(a)},g=function(e){return"object"===(0,i.Z)(e)?e:{depends:e.startsWith("--")?[e.substring(2)]:[],default:e.startsWith("#")?e:void 0}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.em,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,r=g(t[e]);if(null!==r.opacity){if(r.opacity)return r.opacity;var o=function r(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e],a=n(o,t)[0];if(void 0!==a){var c=t[a];if(void 0!==c)return c.opacity||null===c?c.opacity:c.depends&&i.includes(a)?r(a,[].concat((0,s.Z)(i),[a])):null}};return r.depends?o(e):void 0}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.em,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,r=g(t[e]);if(l.k0[e])return e;if(null!==r.layer){if(r.layer)return r.layer;var o=function r(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e],a=n(o,t)[0];if(void 0!==a){var c=t[a];if(void 0!==c)return c.layer||null===c?c.layer:c.depends?r(c,[].concat((0,s.Z)(i),[a])):null}};return r.depends?o(e):void 0}},b=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.em,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=Object.keys(e),r=new Set(n),o=new Set,i=new Set,s=[].concat(n),a=[],c=function n(s){if(r.has(s))r.delete(s),o.add(s),t(s,e).forEach(n),o.delete(s),i.add(s),a.push(s);else if(o.has(s))console.debug("Cyclic depenency in topoSort, ignoring"),a.push(s);else if(!i.has(s))throw new Error("Unintended condition in topoSort!")};s.length>0;)c(s.pop());return a.map((function(e,t){return{data:e,index:t}})).sort((function(n,r){var o=n.data,i=n.index,s=r.data,a=r.index,c=t(o,e).length,l=t(s,e).length;return c===l||0!==l&&0!==c?i-a:0===c&&0!==l?-1:0===l&&0!==c?1:0})).map((function(e){return e.data}))}(Object.entries(l.em).sort((function(e,t){var n=(0,o.Z)(e,2),r=(n[0],n[1]),i=(0,o.Z)(t,2),s=(i[0],i[1]);return(r&&r.priority||0)-(s&&s.priority||0)})).reduce((function(e,t){var n=(0,o.Z)(t,2),i=n[0],s=n[1];return d(d({},e),{},(0,r.Z)({},i,s))}),{})),y=Object.entries(l.em).reduce((function(e,t){var n=(0,o.Z)(t,2),i=n[0],a=(n[1],v(i,l.em,f));return a?d(d({},e),{},(0,r.Z)({},a,{defaultValue:l.wB[a]||1,affectedSlots:[].concat((0,s.Z)(e[a]&&e[a].affectedSlots||[]),[i])})):e}),{}),_=function(e,t,n){if("string"!=typeof e||!e.startsWith("--"))return e;var r=null,i=e.split(/,/g).map((function(e){return e.trim()})),s=(0,o.Z)(i,2),c=s[0],l=s[1];return r=t(c.substring(2)),l&&(r=(0,a.Xu)(Number.parseFloat(l)*n,r).rgb),r},k=function(e,t){return b.reduce((function(n,o){var i,u=n.colors,p=n.opacity,h=e[o],b=g(l.em[o]),k=f(o,l.em),S=!!b.textColor,j=b.variant||b.layer;i=S?(0,c.Rx)(d({},u[k[0]]||(0,a.OQ)(e[o]||"#FF00FF").rgb),m(w(o)||"bg",j||"bg",v(j),u,p)):j&&j!==o?u[j]||(0,a.OQ)(e[j]).rgb:u.bg||(0,a.OQ)(e.bg);var O=(0,c.ov)(i)<.5?1:-1,C=null;if(h){var P=h;if("transparent"===P){var z=m(w(o),o,v(o)||o,u,p).slice(0,-1);P=d(d({},(0,c.Rx)((0,a.OQ)("#FF00FF").rgb,z)),{},{a:0})}else"string"==typeof h&&h.startsWith("--")?P=_(h,(function(t){return u[t]||e[t]}),O):"string"==typeof h&&h.startsWith("#")&&(P=(0,a.OQ)(P).rgb);C=d({},P)}else if(b.default)C=(0,a.OQ)(b.default).rgb;else{var I=b.color||function(e,t){return d({},t)};if(b.textColor)if("bw"===b.textColor)C=(0,a.wo)(i).rgb;else{var D=d({},u[k[0]]);b.color&&(D=I.apply(void 0,[O].concat((0,s.Z)(k.map((function(e){return d({},u[e])})))))),C=(0,c.uu)(i,d({},D),"preserve"===b.textColor)}else C=I.apply(void 0,[O].concat((0,s.Z)(k.map((function(e){return d({},u[e])})))))}if(!C)throw new Error("Couldn't generate color for "+o);var x=b.opacity||v(o),T=b.opacity;if(null===T)C.a=1;else if("transparent"===h)C.a=0;else{var $=T&&void 0!==t[x],U=k[0],M=U&&u[U];T||!M||b.textColor||null===T?M||x?M&&0===M.a?C.a=0:C.a=Number($?t[x]:(y[x]||{}).defaultValue):delete C.a:C.a=M.a}return(Number.isNaN(C.a)||void 0===C.a)&&(C.a=1),x?{colors:d(d({},u),{},(0,r.Z)({},o,C)),opacity:d(d({},p),{},(0,r.Z)({},x,C.a))}:{colors:d(d({},u),{},(0,r.Z)({},o,C)),opacity:p}}),{colors:{},opacity:{}})}},95052:(e,t,n)=>{"use strict";n.d(t,{M:()=>c,q:()=>a});var r=n(4942),o=n(21865);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e){if(void 0!==e){var t=e.color,n=e.type;if("string"==typeof t){var r=(0,o.wK)(t);if(null!=r){var i="rgb(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),")"),a="rgba(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),", .1)"),c="rgba(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),", .2)"),l={"--____highlight-solidColor":i,"--____highlight-tintColor":a,"--____highlight-tintColor2":c};return"striped"===n?s({backgroundImage:["repeating-linear-gradient(135deg,","".concat(a," ,"),"".concat(a," 20px,"),"".concat(c," 20px,"),"".concat(c," 40px")].join(" "),backgroundPosition:"0 0"},l):"solid"===n?s({backgroundColor:c},l):"side"===n?s({backgroundImage:["linear-gradient(to right,","".concat(i," ,"),"".concat(i," 2px,"),"transparent 6px"].join(" "),backgroundPosition:"0 0"},l):void 0}}}},c=function(e){return"USER____"+e.screen_name.replace(/\./g,"_").replace(/@/g,"_AT_")}},4493:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(64721),o=n.n(r);const i=function(e,t,n){var r=!t||function(e){return e&&e.includes("@")}(t)||o()(n,t);return{name:r?"external-user-profile":"user-profile",params:r?{id:e}:{name:t}}}},74722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W});var r=n(66252),o=n(3577),i=n(49963),s=["href","alt","title"],a={key:1,class:"attachment-buttons"},c=["placeholder"],l={key:1},u={class:"attachment-wrapper"},d=["href","alt","title"],p=["src"],h={key:1,class:"attachment-buttons"},m=["title"],f=["title"],g=["title"],v=["title"],w=["title"],b=["title"],y=["title"],_=["href"],k=["href"],S=["href"],j=["src","alt","title"],O={key:0,class:"image"},C=["src"],P={class:"text"},z=["href"],I=["innerHTML"],D=["href"],x=["placeholder"],T={key:1},$=n(4942),U=n(19236),M=n(12394),A=n(34133);const L=n.p+"static/img/nsfw.2958239.png";var E=n(58394),F=n(989),R=n(9382),N=n(84131);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}R.vI.add(N.gMD,N.Xig,N.VmB,N.IyC,N.aQp,N.NBC,N.Bg$,N.N7g,N.I7k,N.UJf,N.S3c);const Z={props:["attachment","description","hideDescription","nsfw","size","setMedia","remove","shiftUp","shiftDn","edit"],data:function(){return{localDescription:this.description||this.attachment.description,nsfwImage:this.$store.state.instance.nsfwCensorImage||L,hideNsfwLocal:this.$store.getters.mergedConfig.hideNsfw,preloadImage:this.$store.getters.mergedConfig.preloadImage,loading:!1,img:"image"===E.Z.fileType(this.attachment.mimetype)&&document.createElement("img"),modalOpen:!1,showHidden:!1,flashLoaded:!1,showDescription:!1}},components:{Flash:M.Z,StillImage:U.Z,VideoAttachment:A.Z},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,$.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({classNames:function(){return[{"-loading":this.loading,"-nsfw-placeholder":this.hidden,"-editable":void 0!==this.edit},"-type-"+this.type,this.size&&"-size-"+this.size,"-".concat(this.useContainFit?"contain":"cover","-fit")]},usePlaceholder:function(){return"hide"===this.size},useContainFit:function(){return this.$store.getters.mergedConfig.useContainFit},placeholderName:function(){return""!==this.attachment.description&&this.attachment.description?this.attachment.description:this.type.toUpperCase()},placeholderIconClass:function(){return"image"===this.type?"image":"video"===this.type?"video":"audio"===this.type?"music":"file"},referrerpolicy:function(){return this.$store.state.instance.mediaProxyAvailable?"":"no-referrer"},type:function(){return E.Z.fileType(this.attachment.mimetype)},hidden:function(){return this.nsfw&&this.hideNsfwLocal&&!this.showHidden},isEmpty:function(){return"html"===this.type&&!this.attachment.oembed},useModal:function(){var e=[];switch(this.size){case"hide":case"small":e=["image","video","audio","flash"];break;default:e=this.mergedConfig.playVideosInModal?["image","video","flash"]:["image"]}return e.includes(this.type)},videoTag:function(){return this.useModal?"button":"span"}},(0,F.Se)(["mergedConfig"])),watch:{"attachment.description":function(e){this.localDescription=e},localDescription:function(e){this.onEdit(e)}},methods:{linkClicked:function(e){var t=e.target;"A"===t.tagName&&window.open(t.href,"_blank")},openModal:function(e){this.useModal?(this.$emit("setMedia"),this.$store.dispatch("setCurrentMedia",this.attachment)):"unknown"===this.type&&window.open(this.attachment.url)},openModalForce:function(e){this.$emit("setMedia"),this.$store.dispatch("setCurrentMedia",this.attachment)},onEdit:function(e){this.edit&&this.edit(this.attachment,e)},onRemove:function(){this.remove&&this.remove(this.attachment)},onShiftUp:function(){this.shiftUp&&this.shiftUp(this.attachment)},onShiftDn:function(){this.shiftDn&&this.shiftDn(this.attachment)},stopFlash:function(){this.$refs.flash.closePlayer()},setFlashLoaded:function(e){this.flashLoaded=e},toggleDescription:function(){this.showDescription=!this.showDescription},toggleHidden:function(e){var t=this;!this.mergedConfig.useOneClickNsfw||this.showHidden||"video"===this.type&&!this.mergedConfig.playVideosInModal?this.img&&!this.preloadImage?this.img.onload?this.img.onload():(this.loading=!0,this.img.src=this.attachment.url,this.img.onload=function(){t.loading=!1,t.showHidden=!t.showHidden}):this.showHidden=!this.showHidden:this.openModal(e)},onImageLoad:function(e){var t=e.naturalWidth,n=e.naturalHeight;this.$emit("naturalSizeLoad",{id:this.attachment.id,width:t,height:n})}}},W=(0,n(83744).Z)(Z,[["render",function(e,t,n,$,U,M){var A=(0,r.up)("FAIcon"),L=(0,r.up)("StillImage"),E=(0,r.up)("VideoAttachment"),F=(0,r.up)("Flash");return e.usePlaceholder?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,o.C_)(["Attachment -placeholder button-unstyled",e.classNames]),onClick:t[4]||(t[4]=function(){return e.openModal&&e.openModal.apply(e,arguments)})},["html"!==e.type?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"placeholder",target:"_blank",href:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,onClick:t[0]||(t[0]=(0,i.iM)((function(){}),["prevent"]))},[(0,r.Wm)(A,{icon:e.placeholderIconClass},null,8,["icon"]),(0,r._)("b",null,(0,o.zw)(e.nsfw?"NSFW / ":""),1),(0,r.Uk)((0,o.zw)(e.edit?"":e.placeholderName),1)],8,s)):(0,r.kq)("",!0),e.edit||e.remove?((0,r.wg)(),(0,r.iD)("div",a,[e.remove?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-unstyled attachment-button",onClick:t[1]||(t[1]=(0,i.iM)((function(){return e.onRemove&&e.onRemove.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"trash-alt"})])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),"hide"!==e.size&&!e.hideDescription&&(e.edit||e.localDescription||e.showDescription)?((0,r.wg)(),(0,r.iD)("div",{key:2,class:(0,o.C_)(["description-container",{"-static":!e.edit}])},[e.edit?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.localDescription=t}),type:"text",class:"description-field",placeholder:e.$t("post_status.media_description"),onKeydown:t[3]||(t[3]=(0,i.D2)((0,i.iM)((function(){}),["prevent"]),["enter"]))},null,40,c)),[[i.nr,e.localDescription]]):((0,r.wg)(),(0,r.iD)("p",l,(0,o.zw)(e.localDescription),1))],2)):(0,r.kq)("",!0)],2)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,o.C_)(["Attachment",e.classNames])},[(0,r.wy)((0,r._)("div",u,[e.hidden?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"image-container",href:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,onClick:t[5]||(t[5]=(0,i.iM)((function(){return e.toggleHidden&&e.toggleHidden.apply(e,arguments)}),["prevent","stop"]))},[((0,r.wg)(),(0,r.iD)("img",{key:e.nsfwImage,class:"nsfw",src:e.nsfwImage},null,8,p)),"video"===e.type?((0,r.wg)(),(0,r.j4)(A,{key:0,class:"play-icon",icon:"play-circle"})):(0,r.kq)("",!0)],8,d)):(0,r.kq)("",!0),e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",h,["flash"===e.type&&e.flashLoaded?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-unstyled attachment-button",title:e.$t("status.attachment_stop_flash"),onClick:t[6]||(t[6]=(0,i.iM)((function(){return e.stopFlash&&e.stopFlash.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"stop"})],8,m)):(0,r.kq)("",!0),e.attachment.description&&"small"!==e.size&&!e.edit&&"unknown"!==e.type?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-unstyled attachment-button",title:e.$t("status.show_attachment_description"),onClick:t[7]||(t[7]=(0,i.iM)((function(){return e.toggleDescription&&e.toggleDescription.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"align-right"})],8,f)):(0,r.kq)("",!0),e.useModal||"unknown"===e.type?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-unstyled attachment-button",title:e.$t("status.show_attachment_in_modal"),onClick:t[8]||(t[8]=(0,i.iM)((function(){return e.openModalForce&&e.openModalForce.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"search-plus"})],8,g)),e.nsfw&&e.hideNsfwLocal?((0,r.wg)(),(0,r.iD)("button",{key:3,class:"button-unstyled attachment-button",title:e.$t("status.hide_attachment"),onClick:t[9]||(t[9]=(0,i.iM)((function(){return e.toggleHidden&&e.toggleHidden.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"times"})],8,v)):(0,r.kq)("",!0),e.shiftUp?((0,r.wg)(),(0,r.iD)("button",{key:4,class:"button-unstyled attachment-button",title:e.$t("status.move_up"),onClick:t[10]||(t[10]=(0,i.iM)((function(){return e.onShiftUp&&e.onShiftUp.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"chevron-left"})],8,w)):(0,r.kq)("",!0),e.shiftDn?((0,r.wg)(),(0,r.iD)("button",{key:5,class:"button-unstyled attachment-button",title:e.$t("status.move_down"),onClick:t[11]||(t[11]=(0,i.iM)((function(){return e.onShiftDn&&e.onShiftDn.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"chevron-right"})],8,b)):(0,r.kq)("",!0),e.remove?((0,r.wg)(),(0,r.iD)("button",{key:6,class:"button-unstyled attachment-button",title:e.$t("status.remove_attachment"),onClick:t[12]||(t[12]=(0,i.iM)((function(){return e.onRemove&&e.onRemove.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(A,{icon:"trash-alt"})],8,y)):(0,r.kq)("",!0)])),"image"!==e.type||e.hidden&&!e.preloadImage?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("a",{key:2,class:(0,o.C_)(["image-container",{"-hidden":e.hidden&&e.preloadImage}]),href:e.attachment.url,target:"_blank",onClick:t[13]||(t[13]=(0,i.iM)((function(){return e.openModal&&e.openModal.apply(e,arguments)}),["stop","prevent"]))},[(0,r.Wm)(L,{class:"image",referrerpolicy:e.referrerpolicy,mimetype:e.attachment.mimetype,src:e.attachment.large_thumb_url||e.attachment.url,"image-load-handler":e.onImageLoad,alt:e.attachment.description},null,8,["referrerpolicy","mimetype","src","image-load-handler","alt"])],10,_)),"unknown"!==e.type||e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("a",{key:3,class:"placeholder-container",href:e.attachment.url,target:"_blank"},[(0,r.Wm)(A,{size:"5x",icon:e.placeholderIconClass},null,8,["icon"]),(0,r._)("p",null,(0,o.zw)(e.localDescription),1)],8,k)),"video"!==e.type||e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,r.LL)(e.videoTag),{key:4,class:(0,o.C_)(["video-container",{"button-unstyled":"isModal"}]),href:e.attachment.url,onClick:(0,i.iM)(e.openModal,["stop","prevent"])},{default:(0,r.w5)((function(){return[(0,r.Wm)(E,{class:"video",attachment:e.attachment,controls:!e.useModal,onPlay:t[14]||(t[14]=function(t){return e.$emit("play")}),onPause:t[15]||(t[15]=function(t){return e.$emit("pause")})},null,8,["attachment","controls"]),e.useModal?((0,r.wg)(),(0,r.j4)(A,{key:0,class:"play-icon",icon:"play-circle"})):(0,r.kq)("",!0)]})),_:1},8,["href","onClick"])),"audio"!==e.type||e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:5,class:"audio-container",href:e.attachment.url,onClick:t[18]||(t[18]=(0,i.iM)((function(){return e.openModal&&e.openModal.apply(e,arguments)}),["stop","prevent"]))},["audio"===e.type?((0,r.wg)(),(0,r.iD)("audio",{key:0,src:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,controls:"",onPlay:t[16]||(t[16]=function(t){return e.$emit("play")}),onPause:t[17]||(t[17]=function(t){return e.$emit("pause")})},null,40,j)):(0,r.kq)("",!0)],8,S)),"html"===e.type&&e.attachment.oembed?((0,r.wg)(),(0,r.iD)("div",{key:6,class:"oembed-container",onClick:t[19]||(t[19]=(0,i.iM)((function(){return e.linkClicked&&e.linkClicked.apply(e,arguments)}),["prevent"]))},[e.attachment.thumb_url?((0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("img",{src:e.attachment.thumb_url},null,8,C)])):(0,r.kq)("",!0),(0,r._)("div",P,[(0,r._)("h1",null,[(0,r._)("a",{href:e.attachment.url},(0,o.zw)(e.attachment.oembed.title),9,z)]),(0,r._)("div",{innerHTML:e.attachment.oembed.oembedHTML},null,8,I)])])):(0,r.kq)("",!0),"flash"!==e.type||e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:7,class:"flash-container",href:e.attachment.url,onClick:t[22]||(t[22]=(0,i.iM)((function(){return e.openModal&&e.openModal.apply(e,arguments)}),["stop","prevent"]))},[(0,r.Wm)(F,{ref:"flash",class:"flash",src:e.attachment.large_thumb_url||e.attachment.url,onPlayerOpened:t[20]||(t[20]=function(t){return e.setFlashLoaded(!0)}),onPlayerClosed:t[21]||(t[21]=function(t){return e.setFlashLoaded(!1)})},null,8,["src"])],8,D))],512),[[i.F8,!e.isEmpty]]),"hide"!==e.size&&!e.hideDescription&&(e.edit||e.localDescription&&e.showDescription)?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,o.C_)(["description-container",{"-static":!e.edit}])},[e.edit?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.localDescription=t}),type:"text",class:"description-field",placeholder:e.$t("post_status.media_description"),onKeydown:t[24]||(t[24]=(0,i.D2)((0,i.iM)((function(){}),["prevent"]),["enter"]))},null,40,x)),[[i.nr,e.localDescription]]):((0,r.wg)(),(0,r.iD)("p",T,(0,o.zw)(e.localDescription),1))],2)):(0,r.kq)("",!0)],2))}]])},55432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(66252),o={class:"avatars"},i=n(62312),s=n(4493);const a={props:["users"],computed:{slicedUsers:function(){return this.users?this.users.slice(0,15):[]}},components:{UserAvatar:i.default},methods:{userProfileLink:function(e){return(0,s.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)}}},c=(0,n(83744).Z)(a,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("UserAvatar"),l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.slicedUsers,(function(t){return(0,r.wg)(),(0,r.j4)(l,{key:t.id,to:e.userProfileLink(t),class:"avatars-item"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{user:t,class:"avatar-small"},null,8,["user"])]})),_:2},1032,["to"])})),128))])}]])},85267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(66252),o=n(49963),i={class:"basic-user-card"},s={class:"basic-user-card-collapsed-content"},a=["title"],c=n(78873),l=n(62312),u=n(12061),d=n(92820),p=n(4493);const h={props:["user"],components:{UserPopover:c.default,UserAvatar:l.default,RichContent:d.Z,UserLink:u.Z},methods:{userProfileLink:function(e){return(0,p.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)}}},m=(0,n(83744).Z)(h,[["render",function(e,t,n,c,l,u){var d=(0,r.up)("UserAvatar"),p=(0,r.up)("UserPopover"),h=(0,r.up)("router-link"),m=(0,r.up)("RichContent"),f=(0,r.up)("user-link");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(h,{to:e.userProfileLink(e.user),onClick:t[1]||(t[1]=(0,o.iM)((function(){}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{"user-id":e.user.id,"overlay-centers":!0,"overlay-centers-selector":".avatar"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{class:"user-avatar avatar",user:e.user,onClick:t[0]||(t[0]=(0,o.iM)((function(){}),["prevent"]))},null,8,["user"])]})),_:1},8,["user-id"])]})),_:1},8,["to"]),(0,r._)("div",s,[(0,r._)("div",{title:e.user.name,class:"basic-user-card-user-name"},[(0,r.Wm)(m,{class:"basic-user-card-user-name-value",html:e.user.name,emoji:e.user.emoji},null,8,["html","emoji"])],8,a),(0,r._)("div",null,[(0,r.Wm)(f,{class:"basic-user-card-screen-name",user:e.user},null,8,["user"])]),(0,r.WI)(e.$slots,"default")])])}]])},40151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(66252),o=n(3577),i=["disabled","checked","indeterminate"],s=(0,r._)("i",{class:"checkbox-indicator"},null,-1),a={key:0,class:"label"};const c={props:["modelValue","indeterminate","disabled"],emits:["update:modelValue"]},l=(0,n(83744).Z)(c,[["render",function(e,t,n,c,l,u){return(0,r.wg)(),(0,r.iD)("label",{class:(0,o.C_)(["checkbox",{disabled:n.disabled,indeterminate:n.indeterminate}])},[(0,r._)("input",{type:"checkbox",disabled:n.disabled,checked:n.modelValue,indeterminate:n.indeterminate,onChange:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.checked)})},null,40,i),s,e.$slots.default?((0,r.wg)(),(0,r.iD)("span",a,[(0,r.WI)(e.$slots,"default")])):(0,r.kq)("",!0)],2)}]])},38658:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ke});var r=n(66252),o=n(3577),i=n(49963),s={ref:"hiddenOverlayCaret",class:"caret"},a={ref:"panel-body",class:"autocomplete-panel-body"},c=["onClick"],l={class:"image"},u=["src"],d={key:1},p={class:"label"},h={key:0,class:"displayText"},m={key:1,class:"displayText"},f={class:"detailText"},g=n(4942),v=n(44925),w=n(15861),b=n(93433),y=n(69572),_=n.n(y),k=n(64687),S=n.n(k),j=n(13311),O=n.n(j),C=n(54061),P=n.n(C),z=function(e){return P()(e,(function(e,t){var n={word:t,start:0,end:t.length};if(e.length>0){var r=e.pop();n.start+=r.end,n.end+=r.end,e.push(r)}return e.push(n),e}),[])},I=function(e){for(var t=[],n="",r=0;r<e.length;r++){var o=e[r];n?!!o.trim()==!!n.trim()?n+=o:(t.push(n),n=o):n=o}return n&&t.push(n),t};const D=function(e,t){var n=I(e),r=z(n);return O()(r,(function(e){var n=e.start,r=e.end;return n<=t&&r>t}))},x=function(e,t,n){return e.slice(0,t.start)+n+e.slice(t.end)};var T={class:"heading"},$={ref:"header",class:"emoji-tabs"},U=["title","onClick"],M={key:0,class:"emoji-picker-header-image"},A={key:0,class:"additional-tabs"},L=["title"],E={key:0,class:"content"},F={class:"emoji-search"},R=["placeholder"],N=["title","onClick"],q={key:0,class:"emoji-picker-emoji -unicode"},Z={class:"keep-open"},W={key:0,class:"stickers-content"},B=n(29439),H=n(92742),V=n.n(H),K=n(23279),G=n.n(K),Y=n(40151),J=n(49874),Q=n(19236),X=n(8312),ee=n(7059),te=n.n(ee),ne=n(9382),re=n(84131);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ne.vI.add(re.IA$,re.L4e,re.RKn,re.ctA,re.ILF,re.kQp,re.E1P,re.k0d,re.Elv,re.X8G,re.dT$,re.RrC);var ce={"smileys-and-emotion":"smile","people-and-body":"user","animals-and-nature":"paw","food-and-drink":"ice-cream","travel-and-places":"bus",activities:"basketball-ball",objects:"lightbulb",symbols:"code",flags:"flag"},le=function(e,t,n){var r=[e.displayText,n(e)];return e.annotations&&t.forEach((function(t){var n,o,i=(null===(n=e.annotations[t])||void 0===n?void 0:n.keywords)||[],s=null===(o=e.annotations[t])||void 0===o?void 0:o.name;r.push.apply(r,(0,b.Z)(i.concat([s]).filter((function(e){return e}))))})),r};const ue={props:{enableStickerPicker:{required:!1,type:Boolean,default:!1}},data:function(){return{keyword:"",activeGroup:"custom",showingStickers:!1,groupsScrolledClass:"scrolled-top",keepOpen:!1,customEmojiTimeout:null,contentLoaded:!1,groupRefs:{},emojiRefs:{},filteredEmojiGroups:[]}},components:{StickerPicker:(0,r.RC)((function(){return n.e(8532).then(n.bind(n,68532))})),Checkbox:Y.Z,StillImage:Q.Z,Popover:J.default},methods:{showPicker:function(){this.$refs.popover.showPopover(),this.onShowing()},hidePicker:function(){this.$refs.popover.hidePopover()},setAnchorEl:function(e){this.$refs.popover.setAnchorEl(e)},setGroupRef:function(e){var t=this;return function(n){t.groupRefs[e]=n}},setEmojiRef:function(e){var t=this;return function(n){t.emojiRefs[e]=n}},onPopoverShown:function(){this.$emit("show")},onPopoverClosed:function(){this.$emit("close")},onStickerUploaded:function(e){this.$emit("sticker-uploaded",e)},onStickerUploadFailed:function(e){this.$emit("sticker-upload-failed",e)},onEmoji:function(e){var t=e.imageUrl?":".concat(e.displayText,":"):e.replacement;this.keepOpen||this.$refs.popover.hidePopover(),this.$emit("emoji",{insertion:t,keepOpen:this.keepOpen})},onScroll:function(e){var t=e&&e.target||this.$refs["emoji-groups"];this.updateScrolledClass(t),this.scrolledGroup(t)},scrolledGroup:function(e){var t=this,n=e.scrollTop+5;this.$nextTick((function(){t.allEmojiGroups.forEach((function(e){var r=t.groupRefs["group-"+e.id];r&&r.offsetTop<=n&&(t.activeGroup=e.id)})),t.scrollHeader()}))},scrollHeader:function(){var e=this.groupRefs["group-header-"+this.activeGroup],t=e.offsetLeft,n=t+e.offsetWidth,r=this.$refs.header,o=r.scrollLeft,i=o+r.clientWidth,s=function(e){r.scrollLeft=e};t-7<o?s(t-7):n+7>i&&s(n+7-r.clientWidth)},highlight:function(e){var t=this,n=this.groupRefs["group-"+e].offsetTop;this.setShowStickers(!1),this.activeGroup=e,this.$nextTick((function(){t.$refs["emoji-groups"].scrollTop=n+1}))},updateScrolledClass:function(e){e.scrollTop<=5?this.groupsScrolledClass="scrolled-top":e.scrollTop>=e.scrollTopMax-5?this.groupsScrolledClass="scrolled-bottom":this.groupsScrolledClass="scrolled-middle"},toggleStickers:function(){this.showingStickers=!this.showingStickers},setShowStickers:function(e){this.showingStickers=e},filterByKeyword:function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(""===t)return e;var o,i=t.toLowerCase(),s=[],a=se(e);try{for(a.s();!(o=a.n()).done;){var c=o.value,l=le(c,n,r).map((function(e){return e.toLowerCase().indexOf(i)})).filter((function(e){return e>-1})),u=l.length?Math.min.apply(Math,(0,b.Z)(l)):-1;u>-1&&(Array.isArray(s[u])||(s[u]=[]),s[u].push(c))}}catch(e){a.e(e)}finally{a.f()}return s.flat()}(e,t,this.languages,this.maybeLocalizedEmojiName)},initializeLazyLoad:function(){var e=this;this.destroyLazyLoad(),this.$nextTick((function(){e.$lozad=te()(".still-image.emoji-picker-emoji",{load:function(t){var n=t.getAttribute("data-emoji-name"),r=e.emojiRefs[n];r&&r.loadLazy()}}),e.$lozad.observe()}))},waitForDomAndInitializeLazyLoad:function(){var e=this;this.$nextTick((function(){return e.initializeLazyLoad()}))},destroyLazyLoad:function(){this.$lozad&&(this.$lozad.observer&&this.$lozad.observer.disconnect(),this.$lozad.mutationObserver&&this.$lozad.mutationObserver.disconnect())},onShowing:function(){var e=this,t=this.contentLoaded;this.$nextTick((function(){e.$refs.search.focus()})),this.contentLoaded=!0,this.waitForDomAndInitializeLazyLoad(),this.filteredEmojiGroups=this.getFilteredEmojiGroups(),t||this.$nextTick((function(){e.defaultGroup&&e.highlight(e.defaultGroup)}))},getFilteredEmojiGroups:function(){var e=this;return this.allEmojiGroups.map((function(t){return ie(ie({},t),{},{emojis:e.filterByKeyword(t.emojis,V()(e.keyword))})})).filter((function(e){return e.emojis.length>0}))}},watch:{keyword:function(){this.onScroll(),this.debouncedHandleKeywordChange()},allCustomGroups:function(){this.waitForDomAndInitializeLazyLoad(),this.filteredEmojiGroups=this.getFilteredEmojiGroups()}},destroyed:function(){this.destroyLazyLoad()},computed:{activeGroupView:function(){return this.showingStickers?"":this.activeGroup},stickersAvailable:function(){return this.$store.state.instance.stickers?this.$store.state.instance.stickers.length>0:0},allCustomGroups:function(){return this.$store.getters.groupedCustomEmojis},defaultGroup:function(){return Object.keys(this.allCustomGroups)[0]},unicodeEmojiGroups:function(){var e=this;return this.$store.getters.standardEmojiGroupList.map((function(t){return{id:"standard-".concat(t.id),text:e.$t("emoji.unicode_groups.".concat(t.id)),icon:ce[t.id],emojis:t.emojis}}))},allEmojiGroups:function(){return Object.entries(this.allCustomGroups).map((function(e){var t=(0,B.Z)(e,2);return t[0],t[1]})).concat(this.unicodeEmojiGroups)},stickerPickerEnabled:function(){return 0!==(this.$store.state.instance.stickers||[]).length},debouncedHandleKeywordChange:function(){var e=this;return G()((function(){e.waitForDomAndInitializeLazyLoad(),e.filteredEmojiGroups=e.getFilteredEmojiGroups()}),500)},languages:function(){return(0,X.ensureFinalFallback)(this.$store.getters.mergedConfig.interfaceLanguage)},maybeLocalizedEmojiName:function(){var e=this;return function(t){if(!t.annotations)return t.displayText;if(t.displayTextI18n)return e.$t(t.displayTextI18n.key,t.displayTextI18n.args);var n,r=se(e.languages);try{for(r.s();!(n=r.n()).done;){var o,i=n.value;if(null!==(o=t.annotations[i])&&void 0!==o&&o.name)return t.annotations[i].name}}catch(e){r.e(e)}finally{r.f()}return t.displayText}}}};var de=n(83744);const pe=(0,de.Z)(ue,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("still-image"),u=(0,r.up)("FAIcon"),d=(0,r.up)("Checkbox"),p=(0,r.up)("sticker-picker"),h=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(h,{ref:"popover",trigger:"click","popover-class":"emoji-picker popover-default",onShow:e.onPopoverShown,onClose:e.onPopoverClosed},{content:(0,r.w5)((function(){return[(0,r._)("div",T,[(0,r._)("span",$,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.filteredEmojiGroups,(function(t){return(0,r.wg)(),(0,r.iD)("span",{ref_for:!0,ref:e.setGroupRef("group-header-"+t.id),key:t.id,class:(0,o.C_)(["emoji-tabs-item",{active:e.activeGroupView===t.id}]),title:t.text,onClick:(0,i.iM)((function(n){return e.highlight(t.id)}),["prevent"])},[t.image?((0,r.wg)(),(0,r.iD)("span",M,[(0,r.Wm)(l,{alt:t.text,src:t.image},null,8,["alt","src"])])):((0,r.wg)(),(0,r.j4)(u,{key:1,icon:t.icon,"fixed-width":""},null,8,["icon"]))],10,U)})),128))],512),e.stickerPickerEnabled?((0,r.wg)(),(0,r.iD)("span",A,[(0,r._)("span",{class:(0,o.C_)(["stickers-tab-icon additional-tabs-item",{active:e.showingStickers}]),title:e.$t("emoji.stickers"),onClick:t[0]||(t[0]=(0,i.iM)((function(){return e.toggleStickers&&e.toggleStickers.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(u,{icon:"sticky-note","fixed-width":""})],10,L)])):(0,r.kq)("",!0)]),e.contentLoaded?((0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("div",{class:(0,o.C_)(["emoji-content",{hidden:e.showingStickers}])},[(0,r._)("div",F,[(0,r.wy)((0,r._)("input",{ref:"search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.keyword=t}),type:"text",class:"form-control",placeholder:e.$t("emoji.search_emoji"),onInput:t[2]||(t[2]=function(e){return e.target.composing=!1})},null,40,R),[[i.nr,e.keyword]])]),(0,r._)("div",{ref:"emoji-groups",class:(0,o.C_)(["emoji-groups",e.groupsScrolledClass]),onScroll:t[3]||(t[3]=function(){return e.onScroll&&e.onScroll.apply(e,arguments)})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.filteredEmojiGroups,(function(t){return(0,r.wg)(),(0,r.iD)("div",{key:t.id,class:"emoji-group"},[(0,r._)("h6",{ref_for:!0,ref:e.setGroupRef("group-"+t.id),class:"emoji-group-title"},(0,o.zw)(t.text),513),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.emojis,(function(n){return(0,r.wg)(),(0,r.iD)("span",{key:t.id+n.displayText,title:e.maybeLocalizedEmojiName(n),class:"emoji-item",onClick:(0,i.iM)((function(t){return e.onEmoji(n)}),["stop","prevent"])},[n.imageUrl?((0,r.wg)(),(0,r.j4)(l,{key:1,ref_for:!0,ref:e.setEmojiRef(t.id+n.displayText),class:"emoji-picker-emoji -custom","data-src":n.imageUrl,"data-emoji-name":t.id+n.displayText},null,8,["data-src","data-emoji-name"])):((0,r.wg)(),(0,r.iD)("span",q,(0,o.zw)(n.replacement),1))],8,N)})),128)),(0,r._)("span",{ref_for:!0,ref:e.setGroupRef("group-end-"+t.id)},null,512)])})),128))],34),(0,r._)("div",Z,[(0,r.Wm)(d,{modelValue:e.keepOpen,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.keepOpen=t})},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.$t("emoji.keep_open")),1)]})),_:1},8,["modelValue"])])],2),e.showingStickers?((0,r.wg)(),(0,r.iD)("div",W,[(0,r.Wm)(p,{onUploaded:e.onStickerUploaded,onUploadFailed:e.onStickerUploadFailed},null,8,["onUploaded","onUploadFailed"])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)]})),_:1},8,["onShow","onClose"])}]]);var he,me=n(42262),fe=n(67952),ge=n(5737),ve=["imageUrl"];function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ne.vI.add(ge.RKn);const _e={emits:["update:modelValue","shown"],props:{suggest:{required:!0,type:Function},modelValue:{required:!0,type:String},enableEmojiPicker:{required:!1,type:Boolean,default:!1},hideEmojiButton:{required:!1,type:Boolean,default:!1},enableStickerPicker:{required:!1,type:Boolean,default:!1},placement:{required:!1,type:String,default:"auto"},newlineOnCtrlEnter:{required:!1,type:Boolean,default:!1}},data:function(){return{input:void 0,caretEl:void 0,highlighted:0,caret:0,focused:!1,blurTimeout:null,temporarilyHideSuggestions:!1,disableClickOutside:!1,suggestions:[],overlayStyle:{},pickerShown:!1}},components:{Popover:J.default,EmojiPicker:pe,UnicodeDomainIndicator:me.Z},computed:{padEmoji:function(){return this.$store.getters.mergedConfig.padEmoji},preText:function(){return this.modelValue.slice(0,this.caret)},postText:function(){return this.modelValue.slice(this.caret)},showSuggestions:function(){return this.focused&&this.suggestions&&this.suggestions.length>0&&!this.pickerShown&&!this.temporarilyHideSuggestions},textAtCaret:function(){var e;return null===(e=this.wordAtCaret)||void 0===e?void 0:e.word},wordAtCaret:function(){if(this.modelValue&&this.caret)return D(this.modelValue,this.caret-1)||{}},languages:function(){return(0,X.ensureFinalFallback)(this.$store.getters.mergedConfig.interfaceLanguage)},maybeLocalizedEmojiNamesAndKeywords:function(){var e=this;return function(t){var n=[t.displayText],r=[];return t.displayTextI18n&&n.push(e.$t(t.displayTextI18n.key,t.displayTextI18n.args)),t.annotations&&e.languages.forEach((function(e){var o,i;n.push(null===(o=t.annotations[e])||void 0===o?void 0:o.name),r.push.apply(r,(0,b.Z)((null===(i=t.annotations[e])||void 0===i?void 0:i.keywords)||[]))})),{names:n.filter((function(e){return e})),keywords:r.filter((function(e){return e}))}}},maybeLocalizedEmojiName:function(){var e=this;return function(t){if(!t.annotations)return t.displayText;if(t.displayTextI18n)return e.$t(t.displayTextI18n.key,t.displayTextI18n.args);var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e.languages);try{for(r.s();!(n=r.n()).done;){var o,i=n.value;if(null!==(o=t.annotations[i])&&void 0!==o&&o.name)return t.annotations[i].name}}catch(e){r.e(e)}finally{r.f()}return t.displayText}},onInputScroll:function(){this.$refs.hiddenOverlay.scrollTo({top:this.input.scrollTop,left:this.input.scrollLeft})}},mounted:function(){var e=this.$refs,t=e.root,n=e.hiddenOverlayCaret,r=e.suggestorPopover,o=t.querySelector(".emoji-input > input")||t.querySelector(".emoji-input > textarea");if(o){this.input=o,this.caretEl=n,r.setAnchorEl?(r.setAnchorEl(this.caretEl),this.$refs.picker.setAnchorEl(this.caretEl)):console.warn("setAnchorEl not found, are we in a unit test?");var i=getComputedStyle(this.input);this.overlayStyle.padding=i.padding,this.overlayStyle.border=i.border,this.overlayStyle.margin=i.margin,this.overlayStyle.lineHeight=i.lineHeight,this.overlayStyle.fontFamily=i.fontFamily,this.overlayStyle.fontSize=i.fontSize,this.overlayStyle.wordWrap=i.wordWrap,this.overlayStyle.whiteSpace=i.whiteSpace,this.resize(),o.addEventListener("blur",this.onBlur),o.addEventListener("focus",this.onFocus),o.addEventListener("paste",this.onPaste),o.addEventListener("keyup",this.onKeyUp),o.addEventListener("keydown",this.onKeyDown),o.addEventListener("click",this.onClickInput),o.addEventListener("transitionend",this.onTransition),o.addEventListener("input",this.onInput),o.addEventListener("scroll",this.onInputScroll)}},unmounted:function(){var e=this.input;e&&(e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.removeEventListener("paste",this.onPaste),e.removeEventListener("keyup",this.onKeyUp),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("click",this.onClickInput),e.removeEventListener("transitionend",this.onTransition),e.removeEventListener("input",this.onInput),e.removeEventListener("scroll",this.onInputScroll))},watch:{showSuggestions:function(e,t){this.$emit("shown",e),e?this.$refs.suggestorPopover.showPopover():this.$refs.suggestorPopover.hidePopover()},textAtCaret:(he=(0,w.Z)(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:if(n=t.charAt(0),t!==n){e.next=6;break}return this.suggestions=[],e.abrupt("return");case 6:return e.next=8,this.suggest(t,this.maybeLocalizedEmojiNamesAndKeywords);case 8:if(r=e.sent,!(this.textAtCaret!==t||r.length<=0)){e.next=12;break}return this.suggestions=[],e.abrupt("return");case 12:this.suggestions=_()(r,5).map((function(e){var t=e.imageUrl;return be(be({},(0,v.Z)(e,ve)),{},{img:t||""})}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return he.apply(this,arguments)})},methods:{triggerShowPicker:function(){var e=this;this.$nextTick((function(){e.$refs.picker.showPicker(),e.scrollIntoView()})),this.disableClickOutside=!0,setTimeout((function(){e.disableClickOutside=!1}),0)},togglePicker:function(){this.input.focus(),this.pickerShown?this.$refs.picker.hidePicker():(this.scrollIntoView(),this.$refs.picker.showPicker(),this.$refs.picker.startEmojiLoad())},replace:function(e){var t=x(this.modelValue,this.wordAtCaret,e);this.$emit("update:modelValue",t),this.caret=0},insert:function(e){var t=e.insertion,n=e.keepOpen,r=e.surroundingSpace,o=void 0===r||r,i=this.modelValue.substring(0,this.caret)||"",s=this.modelValue.substring(this.caret)||"",a=/\s/,c=o&&!a.exec(i.slice(-1))&&i.length&&this.padEmoji>0?" ":"",l=o&&!a.exec(s[0])&&this.padEmoji?" ":"",u=[i,c,t,l,s].join("");this.$emit("update:modelValue",u);var d=this.caret+(t+l+c).length;n||this.input.focus(),this.$nextTick((function(){this.input.setSelectionRange(d,d),this.caret=d}))},replaceText:function(e,t){var n=this.suggestions.length||0;if(1!==this.textAtCaret.length&&(n>0||t)){var r=(t||this.suggestions[this.highlighted]).replacement,o=x(this.modelValue,this.wordAtCaret,r);this.$emit("update:modelValue",o),this.highlighted=0;var i=this.wordAtCaret.start+r.length;this.$nextTick((function(){this.input.focus(),this.input.setSelectionRange(i,i),this.caret=i})),e.preventDefault()}},cycleBackward:function(e){(this.suggestions.length||0)>1?(this.highlighted-=1,this.highlighted<0&&(this.highlighted=this.suggestions.length-1),e.preventDefault()):this.highlighted=0},cycleForward:function(e){var t=this.suggestions.length||0;t>1?(this.highlighted+=1,this.highlighted>=t&&(this.highlighted=0),e.preventDefault()):this.highlighted=0},scrollIntoView:function(){var e=this,t=this.$refs.picker.$el,n=this.$el.closest(".sidebar-scroller")||this.$el.closest(".post-form-modal-view")||window,r=n===window?n.scrollY:n.scrollTop,o=r+(n===window?n.innerHeight:n.offsetHeight),i=t.offsetHeight+(0,fe.y)(t,n).top,s=r+Math.max(0,i-o);n===window?n.scroll(0,s):n.scrollTop=s,this.$nextTick((function(){var t=e.input.offsetHeight,n=e.$refs.picker;n.$el.getBoundingClientRect().bottom>window.innerHeight&&(n.$el.style.top="auto",n.$el.style.bottom=t+"px")}))},onPickerShown:function(){this.pickerShown=!0},onPickerClosed:function(){this.pickerShown=!1},onBlur:function(e){var t=this;this.blurTimeout=setTimeout((function(){t.focused=!1,t.setCaret(e)}),200)},onClick:function(e,t){this.replaceText(e,t)},onFocus:function(e){this.blurTimeout&&(clearTimeout(this.blurTimeout),this.blurTimeout=null),this.focused=!0,this.setCaret(e),this.temporarilyHideSuggestions=!1},onKeyUp:function(e){var t=e.key;this.setCaret(e),this.temporarilyHideSuggestions="Escape"===t},onPaste:function(e){this.setCaret(e)},onKeyDown:function(e){var t=this,n=e.ctrlKey,r=e.shiftKey,o=e.key;this.newlineOnCtrlEnter&&n&&"Enter"===o&&(this.insert({insertion:"\n",surroundingSpace:!1}),e.stopPropagation(),e.preventDefault(),this.$nextTick((function(){t.input.blur(),t.input.focus()}))),this.temporarilyHideSuggestions||("Tab"===o&&(r?this.cycleBackward(e):this.cycleForward(e)),"ArrowUp"===o?this.cycleBackward(e):"ArrowDown"===o&&this.cycleForward(e),"Enter"===o&&(n||this.replaceText(e))),"Escape"===o&&(this.temporarilyHideSuggestions||this.input.focus())},onInput:function(e){this.setCaret(e),this.$emit("update:modelValue",e.target.value)},onStickerUploaded:function(e){this.$emit("sticker-uploaded",e)},onStickerUploadFailed:function(e){this.$emit("sticker-upload-Failed",e)},setCaret:function(e){var t=this,n=e.target.selectionStart;this.caret=n,this.$nextTick((function(){t.$refs.suggestorPopover.updateStyles()}))},resize:function(){}}},ke=(0,de.Z)(_e,[["render",function(e,t,n,g,v,w){var b=(0,r.up)("FAIcon"),y=(0,r.up)("EmojiPicker"),_=(0,r.up)("UnicodeDomainIndicator"),k=(0,r.up)("Popover");return(0,r.wg)(),(0,r.iD)("div",{ref:"root",class:(0,o.C_)(["emoji-input",{"with-picker":!e.hideEmojiButton}])},[(0,r.WI)(e.$slots,"default"),(0,r._)("div",{ref:"hiddenOverlay",class:"hidden-overlay",style:(0,o.j5)(e.overlayStyle)},[(0,r._)("span",null,(0,o.zw)(e.preText),1),(0,r._)("span",s,"x",512),(0,r._)("span",null,(0,o.zw)(e.postText),1)],4),e.enableEmojiPicker?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.hideEmojiButton?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-unstyled emoji-picker-icon",type:"button",onClick:t[0]||(t[0]=(0,i.iM)((function(){return e.togglePicker&&e.togglePicker.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(b,{icon:["far","smile-beam"]})])),e.enableEmojiPicker?((0,r.wg)(),(0,r.j4)(y,{key:1,ref:"picker","enable-sticker-picker":e.enableStickerPicker,class:"emoji-picker-panel",onEmoji:e.insert,onStickerUploaded:e.onStickerUploaded,onStickerUploadFailed:e.onStickerUploadFailed,onShow:e.onPickerShown,onClose:e.onPickerClosed},null,8,["enable-sticker-picker","onEmoji","onStickerUploaded","onStickerUploadFailed","onShow","onClose"])):(0,r.kq)("",!0)],64)):(0,r.kq)("",!0),(0,r.Wm)(k,{ref:"suggestorPopover",class:"autocomplete-panel",placement:"bottom"},{content:(0,r.w5)((function(){return[(0,r._)("div",a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.suggestions,(function(t,n){return(0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,o.C_)(["autocomplete-item",{highlighted:n===e.highlighted}]),onClick:(0,i.iM)((function(n){return e.onClick(n,t)}),["stop","prevent"])},[(0,r._)("span",l,[t.img?((0,r.wg)(),(0,r.iD)("img",{key:0,src:t.img},null,8,u)):((0,r.wg)(),(0,r.iD)("span",d,(0,o.zw)(t.replacement),1))]),(0,r._)("div",p,[t.user?((0,r.wg)(),(0,r.iD)("span",h,[(0,r.Uk)((0,o.zw)(t.displayText),1),(0,r.Wm)(_,{user:t.user,at:!1},null,8,["user"])])):(0,r.kq)("",!0),t.user?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",m,(0,o.zw)(e.maybeLocalizedEmojiName(t)),1)),(0,r._)("span",f,(0,o.zw)(t.detailText),1)])],10,c)})),128))],512)]})),_:1},512)],2)}]])},12394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r,o=n(66252),i=n(3577),s={class:"Flash"},a={key:0,class:"label"},c={key:1,class:"label"},l={key:2,class:"label"};const u=(r=null,{getRuffle:function(){return new Promise((function(e,t){if(r)e(r);else{window.RufflePlayer={},window.RufflePlayer.config={polyfills:!1,publicPath:"/static/ruffle"};var n=document.createElement("script");n.src="/static/ruffle/ruffle.js",n.type="text/javascript",n.onerror=function(e){t(e)},n.onabort=function(e){t(e)},n.oncancel=function(e){t(e)},n.onload=function(){r=window.RufflePlayer,e(r)},document.body.appendChild(n)}}))}});var d=n(9382),p=n(84131);d.vI.add(p.Bg$,p.eHv);const h={props:["src"],data:function(){return{player:!1,loaded:!1,ruffleInstance:null}},methods:{openPlayer:function(){var e=this;this.player||(this.player="hidden",u.getRuffle().then((function(t){var n=t.newest().createPlayer();n.config={letterbox:"on"},e.$refs.container.appendChild(n),n.style.width="100%",n.style.height="100%",n.load(e.src).then((function(){e.player=!0})).catch((function(t){console.error("Error loading ruffle",t),e.player="error"})),e.ruffleInstance=n,e.$emit("playerOpened")})))},closePlayer:function(){this.ruffleInstance&&this.ruffleInstance.remove(),this.player=!1,this.$emit("playerClosed")}}},m=(0,n(83744).Z)(h,[["render",function(e,t,n,r,u,d){var p=(0,o.up)("FAIcon");return(0,o.wg)(),(0,o.iD)("div",s,[!0===e.player||"hidden"===e.player?((0,o.wg)(),(0,o.iD)("div",{key:0,ref:"container",class:(0,i.C_)(["player",{hidden:"hidden"===e.player}])},null,2)):(0,o.kq)("",!0),!0!==e.player?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"button-unstyled placeholder",onClick:t[0]||(t[0]=function(){return e.openPlayer&&e.openPlayer.apply(e,arguments)})},["hidden"===e.player?((0,o.wg)(),(0,o.iD)("span",a,(0,i.zw)(e.$t("general.loading")),1)):(0,o.kq)("",!0),"error"===e.player?((0,o.wg)(),(0,o.iD)("span",c,(0,i.zw)(e.$t("general.flash_fail")),1)):((0,o.wg)(),(0,o.iD)("span",l,[(0,o._)("p",null,(0,i.zw)(e.$t("general.flash_content")),1),(0,o._)("p",null,[(0,o.Wm)(p,{icon:"exclamation-triangle"}),(0,o.Uk)(" "+(0,i.zw)(e.$t("general.flash_security")),1)])]))])):(0,o.kq)("",!0)])}]])},13046:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(66252),o=n(3577),i=["disabled","title"],s=n(29439),a=function e(t,n,r){return new Promise((function(e,o){setTimeout((function(){r.state.api.backendInteractor.fetchUserRelationship({id:n}).then((function(e){return r.commit("updateUserRelationship",[e]),e})).then((function(n){return e([n.following,n.requested,n.locked,t])})).catch((function(e){return o(e)}))}),500)})).then((function(t){var o=(0,s.Z)(t,4),i=o[0],a=o[1],c=o[2],l=o[3];i||c&&a||!(l<=3)||e(++l,n,r)}))},c=function(e,t){return new Promise((function(n,r){t.state.api.backendInteractor.followUser({id:e}).then((function(e){if(t.commit("updateUserRelationship",[e]),!(e.following||e.locked&&e.requested))return a(1,e,t).then((function(){n()}));n()}))}))};const l={props:["relationship","user","labelFollowing","buttonClass"],data:function(){return{inProgress:!1}},computed:{isPressed:function(){return this.inProgress||this.relationship.following},title:function(){return this.inProgress||this.relationship.following?this.$t("user_card.follow_unfollow"):this.relationship.requested?this.$t("user_card.follow_cancel"):this.$t("user_card.follow")},label:function(){return this.inProgress?this.$t("user_card.follow_progress"):this.relationship.following?this.labelFollowing||this.$t("user_card.following"):this.relationship.requested?this.$t("user_card.follow_sent"):this.$t("user_card.follow")},disabled:function(){return this.inProgress||this.user.deactivated}},methods:{onClick:function(){this.relationship.following||this.relationship.requested?this.unfollow():this.follow()},follow:function(){var e=this;this.inProgress=!0,c(this.relationship.id,this.$store).then((function(){e.inProgress=!1}))},unfollow:function(){var e=this,t=this.$store;this.inProgress=!0,function(e,t){return new Promise((function(n,r){t.state.api.backendInteractor.unfollowUser({id:e}).then((function(e){t.commit("updateUserRelationship",[e]),n({updated:e})}))}))}(this.relationship.id,t).then((function(){e.inProgress=!1,t.commit("removeStatus",{timeline:"friends",userId:e.relationship.id})}))}}},u=(0,n(83744).Z)(l,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("button",{class:(0,o.C_)(["btn button-default follow-button",{toggled:e.isPressed}]),disabled:e.disabled,title:e.title,onClick:t[0]||(t[0]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},(0,o.zw)(e.label),11,i)}]])},99822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(66252),o=n(3577),i={class:"gallery-rows"},s={key:0,class:"many-attachments"},a={class:"many-attachments-text"},c={class:"many-attachments-buttons"},l={key:0,class:"many-attachments-button"},u={key:1,class:"many-attachments-button"},d={key:2,class:"many-attachments-button"},p=n(93433),h=n(36968),m=n.n(h),f=n(73303),g=n.n(f);const v={props:["attachments","limitRows","descriptions","limit","nsfw","setMedia","size","editable","removeAttachment","shiftUpAttachment","shiftDnAttachment","editAttachment","grid"],data:function(){return{sizes:{},hidingLong:!0}},components:{Attachment:n(74722).Z},computed:{rows:function(){var e=this;if(!this.attachments)return[];var t=this.limit>0?this.attachments.slice(0,this.limit):this.attachments;return"hide"===this.size?t.map((function(e){return{minimal:!0,items:[e]}})):this.grid?[{grid:!0,items:t}]:t.reduce((function(t,n,r){if(n.mimetype.includes("audio"))return[].concat((0,p.Z)(t),[{audio:!0,items:[n]},{items:[]}]);if(!(n.mimetype.includes("image")||n.mimetype.includes("video")||n.mimetype.includes("flash")))return[].concat((0,p.Z)(t),[{minimal:!0,items:[n]},{items:[]}]);var o=e.attachments.length-r+1,i=t[t.length-1].items;return i.push(n),i.length>=3&&o>3?[].concat((0,p.Z)(t),[{items:[]}]):t}),[{items:[]}]).filter((function(e){return e.items.length>0}))},attachmentsDimensionalScore:function(){return this.rows.reduce((function(e,t){var n=0;return t.minimal?n+=1/8:t.audio?n+=1/4:n+=1/(t.items.length+.6),e+n}),0)},tooManyAttachments:function(){return!this.editable&&"small"!==this.size&&("hide"===this.size?this.attachments.length>8:this.attachmentsDimensionalScore>1)}},methods:{onNaturalSizeLoad:function(e){var t=e.id,n=e.width,r=e.height;m()(this.sizes,t,{width:n,height:r})},rowStyle:function(e){return e.audio?{"padding-bottom":"25%"}:e.minimal||e.grid?void 0:{"padding-bottom":"".concat(100/(e.items.length+.6),"%")}},itemStyle:function(e,t){var n=this,r=g()(t,(function(e){return n.getAspectRatio(e.id)}));return{flex:"".concat(this.getAspectRatio(e)/r," 1 0%")}},getAspectRatio:function(e){var t=this.sizes[e];return t?t.width/t.height:1},toggleHidingLong:function(e){this.hidingLong=e},openGallery:function(){this.$store.dispatch("setMedia",this.attachments),this.$store.dispatch("setCurrentMedia",this.attachments[0])},onMedia:function(){this.$store.dispatch("setMedia",this.attachments)}}},w=(0,n(83744).Z)(v,[["render",function(e,t,n,p,h,m){var f=(0,r.up)("Attachment");return(0,r.wg)(),(0,r.iD)("div",{ref:"galleryContainer",class:(0,o.C_)(["Gallery",{"-long":e.tooManyAttachments&&e.hidingLong}])},[(0,r._)("div",i,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.rows,(function(t,n){return(0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,o.C_)(["gallery-row",{"-audio":t.audio,"-minimal":t.minimal,"-grid":e.grid}]),style:(0,o.j5)(e.rowStyle(t))},[(0,r._)("div",{class:(0,o.C_)(["gallery-row-inner",{"-grid":e.grid}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.items,(function(i,s){return(0,r.wg)(),(0,r.j4)(f,{key:i.id,class:"gallery-item",nsfw:e.nsfw,attachment:i,size:e.size,editable:e.editable,remove:e.removeAttachment,"shift-up":!(0===s&&0===n)&&e.shiftUpAttachment,"shift-dn":!(s===t.items.length-1&&n===e.rows.length-1)&&e.shiftDnAttachment,edit:e.editAttachment,description:e.descriptions&&e.descriptions[i.id],"hide-description":"small"===e.size||e.tooManyAttachments&&e.hidingLong,style:(0,o.j5)(e.itemStyle(i.id,t.items)),onSetMedia:e.onMedia,onNaturalSizeLoad:e.onNaturalSizeLoad},null,8,["nsfw","attachment","size","editable","remove","shift-up","shift-dn","edit","description","hide-description","style","onSetMedia","onNaturalSizeLoad"])})),128))],2)],6)})),128))]),e.tooManyAttachments?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",a,(0,o.zw)(e.$t("status.many_attachments",{number:e.attachments.length})),1),(0,r._)("div",c,[e.hidingLong?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",l,[(0,r._)("button",{class:"button-unstyled -link",onClick:t[0]||(t[0]=function(t){return e.toggleHidingLong(!0)})},(0,o.zw)(e.$t("status.collapse_attachments")),1)])),e.hidingLong?((0,r.wg)(),(0,r.iD)("span",u,[(0,r._)("button",{class:"button-unstyled -link",onClick:t[1]||(t[1]=function(t){return e.toggleHidingLong(!1)})},(0,o.zw)(e.$t("status.show_all_attachments")),1)])):(0,r.kq)("",!0),e.hidingLong?((0,r.wg)(),(0,r.iD)("span",d,[(0,r._)("button",{class:"button-unstyled -link",onClick:t[2]||(t[2]=function(){return e.openGallery&&e.openGallery.apply(e,arguments)})},(0,o.zw)(e.$t("status.open_gallery")),1)])):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)],2)}]])},80034:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(66252),o=n(3577),i={for:"interface-language-switcher"},s=["value"],a=n(39776);const c={components:{Select:n(44313).Z},props:{promptText:{type:String,required:!0},language:{type:String,required:!0},setLanguage:{type:Function,required:!0}},computed:{languages:function(){return a.Z.languages},controlledLanguage:{get:function(){return this.language},set:function(e){this.setLanguage(e)}}},methods:{getLanguageName:function(e){return a.Z.getLanguageName(e)}}},l=(0,n(83744).Z)(c,[["render",function(e,t,n,a,c,l){var u=(0,r.up)("Select");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("label",i,(0,o.zw)(n.promptText),1),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r.Wm)(u,{id:"interface-language-switcher",modelValue:l.controlledLanguage,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.controlledLanguage=e})},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.languages,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e.code,value:e.code},(0,o.zw)(e.name),9,s)})),128))]})),_:1},8,["modelValue"])])}]])},87887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(66252),o=n(3577),i=["href"],s={key:0,class:"card-image"},a=["src"],c={class:"card-content"},l={class:"card-host faint"},u={key:0,class:"nsfw-alert alert warning"},d={class:"card-title"},p={key:0,class:"card-description"},h=n(4942);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const f={name:"LinkPreview",props:["card","size","nsfw"],data:function(){return{imageLoaded:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({useImage:function(){return this.card.image&&!this.censored&&"hide"!==this.size},censored:function(){return this.nsfw&&this.hideNsfwConfig},useDescription:function(){return this.card.description&&/\S/.test(this.card.description)},hideNsfwConfig:function(){return this.mergedConfig.hideNsfw}},(0,n(989).Se)(["mergedConfig"])),created:function(){var e=this;if(this.useImage){var t=new Image;t.onload=function(){e.imageLoaded=!0},t.src=this.card.image}}},g=(0,n(83744).Z)(f,[["render",function(e,t,n,h,m,f){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("a",{class:"link-preview-card",href:e.card.url,target:"_blank",rel:"noopener"},[e.useImage&&e.imageLoaded?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("img",{src:e.card.image},null,8,a)])):(0,r.kq)("",!0),(0,r._)("div",c,[(0,r._)("span",l,[e.censored?((0,r.wg)(),(0,r.iD)("span",u,(0,o.zw)(e.$t("status.nsfw")),1)):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(e.card.provider_name),1)]),(0,r._)("h4",d,(0,o.zw)(e.card.title),1),e.useDescription?((0,r.wg)(),(0,r.iD)("p",p,(0,o.zw)(e.card.description),1)):(0,r.kq)("",!0)])],8,i)])}]])},83293:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(66252),o={class:"list"},i={key:0,class:"list-empty-content faint"};const s={props:{items:{type:Array,default:function(){return[]}},getKey:{type:Function,default:function(e){return e.id}}}},a=(0,n(83744).Z)(s,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.items,(function(t){return(0,r.wg)(),(0,r.iD)("div",{key:n.getKey(t),class:"list-item"},[(0,r.WI)(e.$slots,"item",{item:t})])})),128)),0===n.items.length&&e.$slots.empty?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.WI)(e.$slots,"empty")])):(0,r.kq)("",!0)])}]])},20460:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var r=n(66252),o=n(3577),i=n(49963),s={class:"MentionLink"},a=["href","innerHTML"],c=["href"],l={class:"shortName"},u=["innerHTML"],d=["innerHTML"],p={ref:"full",class:"full"},h=["innerHTML"],m=["innerHTML"],f=n(44925),g=n(4942),v=n(4493),w=n(989),b=n(95052),y=n(62312),_=n(42262),k=n(9382),S=n(84131),j=["backgroundColor","backgroundPosition","backgroundImage"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}k.vI.add(S.IBq);const P={name:"MentionLink",components:{UserAvatar:y.default,UnicodeDomainIndicator:_.Z,UserPopover:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,78873))}))},props:{url:{required:!0,type:String},content:{required:!0,type:String},userId:{required:!1,type:String},userScreenName:{required:!1,type:String}},data:function(){return{hasSelection:!1}},methods:{onClick:function(){if(!this.shouldShowTooltip){var e=(0,v.Z)(this.userId||this.user.id,this.userScreenName||this.user.screen_name);this.$router.push(e)}},handleSelection:function(){this.hasSelection=document.getSelection().containsNode(this.$refs.full,!0)}},mounted:function(){document.addEventListener("selectionchange",this.handleSelection)},unmounted:function(){document.removeEventListener("selectionchange",this.handleSelection)},computed:C(C({user:function(){return this.url&&this.$store&&this.$store.getters.findUserByUrl(this.url)},isYou:function(){return this.user&&this.user.id===this.currentUser.id},userName:function(){return this.user&&this.userNameFullUi.split("@")[0]},serverName:function(){return this.user&&(this.userNameFullUi.split("@")[1]||this.$store.getters.instanceDomain)},userNameFull:function(){return this.user&&this.user.screen_name},userNameFullUi:function(){return this.user&&this.user.screen_name_ui},highlight:function(){return this.user&&this.mergedConfig.highlight[this.user.screen_name]},highlightType:function(){return this.highlight&&"-"+this.highlight.type},highlightClass:function(){if(this.highlight)return(0,b.M)(this.user)},style:function(){if(this.highlight){var e=(0,b.q)(this.highlight);return e.backgroundColor,e.backgroundPosition,e.backgroundImage,(0,f.Z)(e,j)}},classnames:function(){return[{"-you":this.isYou&&this.shouldBoldenYou,"-highlighted":this.highlight,"-has-selection":this.hasSelection},this.highlightType]},useAtIcon:function(){return this.mergedConfig.useAtIcon},isRemote:function(){return this.userName!==this.userNameFull},shouldShowFullUserName:function(){var e=this.mergedConfig.mentionLinkDisplay;return"short"!==e&&("full"===e||this.isRemote)},shouldShowTooltip:function(){return this.mergedConfig.mentionLinkShowTooltip},shouldShowAvatar:function(){return this.mergedConfig.mentionLinkShowAvatar},shouldShowYous:function(){return this.mergedConfig.mentionLinkShowYous},shouldBoldenYou:function(){return this.mergedConfig.mentionLinkBoldenYou},shouldFadeDomain:function(){return this.mergedConfig.mentionLinkFadeDomain}},(0,w.Se)(["mergedConfig"])),(0,w.rn)({currentUser:function(e){return e.users.currentUser}}))},z=(0,n(83744).Z)(P,[["render",function(e,t,n,f,g,v){var w=(0,r.up)("UserAvatar"),b=(0,r.up)("FAIcon"),y=(0,r.up)("UnicodeDomainIndicator"),_=(0,r.up)("UserPopover");return(0,r.wg)(),(0,r.iD)("span",s,[e.user?((0,r.wg)(),(0,r.j4)(_,{key:1,"user-id":e.user.id,disabled:!e.shouldShowTooltip},{default:(0,r.w5)((function(){return[e.user?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,o.C_)(["new",e.classnames]),style:(0,o.j5)(e.style)},[(0,r._)("a",{class:(0,o.C_)(["short button-unstyled",{"-with-tooltip":e.shouldShowTooltip}]),href:e.url,onClick:t[0]||(t[0]=(0,i.iM)((function(){return e.onClick&&e.onClick.apply(e,arguments)}),["prevent"]))},[e.shouldShowAvatar?((0,r.wg)(),(0,r.j4)(w,{key:0,class:"mention-avatar",user:e.user},null,8,["user"])):(0,r.kq)("",!0),(0,r._)("span",l,[e.useAtIcon?((0,r.wg)(),(0,r.j4)(b,{key:0,size:"sm",icon:"at",class:"at"})):(0,r.kq)("",!0),(0,r.Uk)((0,o.zw)(e.useAtIcon?"":"@"),1),(0,r._)("span",{class:"userName",innerHTML:e.userName},null,8,u),e.shouldShowFullUserName?((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,o.C_)(["serverName",{"-faded":e.shouldFadeDomain}]),innerHTML:"@"+e.serverName},null,10,d)):(0,r.kq)("",!0),e.shouldShowFullUserName?((0,r.wg)(),(0,r.j4)(y,{key:2,user:e.user},null,8,["user"])):(0,r.kq)("",!0)]),e.isYou&&e.shouldShowYous?((0,r.wg)(),(0,r.iD)("span",{key:1,class:(0,o.C_)({"-you":e.shouldBoldenYou})},(0,o.zw)(" "+e.$t("status.you")),3)):(0,r.kq)("",!0)],10,c),(0,r._)("span",p,[(0,r.Uk)(" @"),(0,r._)("span",{innerHTML:e.userName},null,8,h),(0,r._)("span",{innerHTML:"@"+e.serverName},null,8,m)],512)],6)):(0,r.kq)("",!0)]})),_:1},8,["user-id","disabled"])):((0,r.wg)(),(0,r.iD)("a",{key:0,href:e.url,class:"original",target:"_blank",innerHTML:e.content},null,8,a))])}]])},21268:(e,t,n)=>{"use strict";n.d(t,{d:()=>p,Z:()=>m});var r=n(66252),o=n(3577),i={class:"MentionsLine"},s={key:0,class:"extraMentions"},a={key:0,class:"fullExtraMentions"},c=n(4942),l=n(20460),u=n(989);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=5;const h={name:"MentionsLine",props:{mentions:{required:!0,type:Array}},data:function(){return{expanded:!1}},components:{MentionLink:l.Z},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mentionsComputed:function(){return this.mentions.slice(0,p)},extraMentions:function(){return this.mentions.slice(p)},manyMentions:function(){return this.extraMentions.length>0}},(0,u.Se)(["mergedConfig"])),methods:{toggleShowMore:function(){this.expanded=!this.expanded}}},m=(0,n(83744).Z)(h,[["render",function(e,t,n,c,l,u){var d=(0,r.up)("MentionLink");return(0,r.wg)(),(0,r.iD)("span",i,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mentionsComputed,(function(e){return(0,r.wg)(),(0,r.j4)(d,{key:e.index,class:"mention-link",content:e.content,url:e.url},null,8,["content","url"])})),128)),e.manyMentions?((0,r.wg)(),(0,r.iD)("span",s,[e.expanded?((0,r.wg)(),(0,r.iD)("span",a,[(0,r.Uk)((0,o.zw)(" ")),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.extraMentions,(function(e){return(0,r.wg)(),(0,r.j4)(d,{key:e.index,class:"mention-link",content:e.content,url:e.url},null,8,["content","url"])})),128))])):(0,r.kq)("",!0),e.expanded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-unstyled showMoreLess",onClick:t[0]||(t[0]=function(){return e.toggleShowMore&&e.toggleShowMore.apply(e,arguments)})},(0,o.zw)(e.$t("status.plus_more",{number:e.extraMentions.length})),1)),e.expanded?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-unstyled showMoreLess",onClick:t[1]||(t[1]=function(){return e.toggleShowMore&&e.toggleShowMore.apply(e,arguments)})},(0,o.zw)(e.$t("general.show_less")),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])}]])},58312:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(66252),o=n(3577),i=n(49963);const s={provide:{popoversZLayer:"modals"},props:{isOpen:{type:Boolean,default:!0},noBackground:{type:Boolean,default:!1}},computed:{classes:function(){return{"modal-background":!this.noBackground,open:this.isOpen}}}},a=(0,n(83744).Z)(s,[["render",function(e,t,n,s,a,c){var l=(0,r.Q2)("body-scroll-lock");return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["modal-view",c.classes]),onClick:t[0]||(t[0]=(0,i.iM)((function(t){return e.$emit("backdropClicked")}),["self"]))},[(0,r.WI)(e.$slots,"default")],2)),[[i.F8,n.isOpen],[l,n.isOpen&&!n.noBackground]])}]])},2302:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Me});var r=n(66252),o=n(3577),i=n(49963),s={key:0,class:"notifications-heading panel-heading -sticky"},a={class:"title"},c={key:0,class:"badge badge-notification unseen-count"},l={key:0,class:"rightside-button"},u=["title"],d={class:"panel-body",role:"feed"},p=(0,r._)("div",{class:"notification-overlay"},null,-1),h={class:"panel-footer"},m={key:0,class:"new-status-notification text-center faint"},f={class:"new-status-notification text-center"},g={key:2,class:"new-status-notification text-center"},v=n(4942),w=n(989),b={key:0},y={key:1},_={key:0,class:"Notification container -muted"},k=["href"],S={class:"notification-right"},j={class:"notification-details"},O={class:"name-and-action"},C={key:0},P=["title"],z={key:2},I={key:3},D={key:4},x={key:5},T={key:6},$={key:7},U={class:"emoji-reaction-emoji"},M={key:8},A={key:9},L={key:0,class:"timeago"},E=["title","aria-expanded"],F={key:1,class:"timeago"},R={class:"faint"},N=["title","aria-expanded"],q={key:0,class:"follow-text"},Z={key:0,style:{"white-space":"nowrap"}},W=["title"],B=["title"],H={key:1,class:"move-text"},V=n(33288),K=n(87482),G=n(62312),Y=n(27073),J=n(1840),Q={class:"Report"},X={class:"reported-user"},ee={class:"reporter"},te={class:"report-state"},ne=["value"],re={key:0},oe={class:"reported-status-heading"},ie={class:"reported-status-name"},se={key:1},ae=n(44313),ce=n(4493);const le={props:["reportId"],components:{Select:ae.Z,StatusContent:V.Z,Timeago:J.Z},computed:{report:function(){return this.$store.state.reports.reports[this.reportId]||{}},state:{get:function(){return this.report.state},set:function(e){this.setReportState(e)}}},methods:{generateUserProfileLink:function(e){return(0,ce.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)},setReportState:function(e){return this.$store.dispatch("setReportState",{id:this.report.id,state:e})}}};var ue=n(83744);const de=(0,ue.Z)(le,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("router-link"),l=(0,r.up)("Select"),u=(0,r.up)("RichContent"),d=(0,r.up)("Timeago"),p=(0,r.up)("status-content");return(0,r.wg)(),(0,r.iD)("div",Q,[(0,r._)("div",X,[(0,r._)("span",null,(0,o.zw)(e.$t("report.reported_user")),1),(0,r.Wm)(c,{to:e.generateUserProfileLink(e.report.acct)},{default:(0,r.w5)((function(){return[(0,r.Uk)(" @"+(0,o.zw)(e.report.acct.screen_name),1)]})),_:1},8,["to"])]),(0,r._)("div",ee,[(0,r._)("span",null,(0,o.zw)(e.$t("report.reporter")),1),(0,r.Wm)(c,{to:e.generateUserProfileLink(e.report.actor)},{default:(0,r.w5)((function(){return[(0,r.Uk)(" @"+(0,o.zw)(e.report.actor.screen_name),1)]})),_:1},8,["to"])]),(0,r._)("div",te,[(0,r._)("span",null,(0,o.zw)(e.$t("report.state")),1),(0,r.Wm)(l,{id:e.report-e.state,modelValue:e.state,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.state=t}),class:"form-control"},{default:(0,r.w5)((function(){return[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["open","closed","resolved"],(function(t){return(0,r._)("option",{key:t,value:t},(0,o.zw)(e.$t("report.state_"+t)),9,ne)})),64))]})),_:1},8,["id","modelValue"])]),(0,r.Wm)(u,{class:"report-content",html:e.report.content,emoji:[]},null,8,["html"]),e.report.statuses.length?((0,r.wg)(),(0,r.iD)("div",re,[(0,r._)("small",null,(0,o.zw)(e.$t("report.reported_statuses")),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.report.statuses,(function(e){return(0,r.wg)(),(0,r.j4)(c,{key:e.id,to:{name:"conversation",params:{id:e.id}},class:"reported-status"},{default:(0,r.w5)((function(){return[(0,r._)("div",oe,[(0,r._)("span",ie,(0,o.zw)(e.user.name),1),(0,r.Wm)(d,{time:e.created_at,"auto-update":240,class:"faint"},null,8,["time"])]),(0,r.Wm)(p,{status:e},null,8,["status"])]})),_:2},1032,["to"])})),128))])):(0,r.kq)("",!0),e.report.notes.length?((0,r.wg)(),(0,r.iD)("div",se,[(0,r._)("small",null,(0,o.zw)(e.$t("report.notes")),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.report.notes,(function(e){return(0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"note"},[(0,r._)("span",null,(0,o.zw)(e.content),1),(0,r.Wm)(d,{time:e.created_at,"auto-update":240,class:"faint"},null,8,["time"])])})),128))])):(0,r.kq)("",!0)])}]]);var pe=n(12061),he=n(92820),me=n(78873),fe=n(52230),ge=n(95052),ve=n(9382),we=n(84131);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ve.vI.add(we.LEp,we.NBC,we.Tab,we.x5v,we.FKd,we.ILF,we.Aq,we.gmr,we.TTL,we.V9$);var ye={data:function(){return{statusExpanded:!1,betterShadow:this.$store.state.interface.browserSupport.cssFilter,unmuted:!1}},props:["notification"],components:{StatusContent:V.Z,UserAvatar:G.default,UserCard:Y.Z,Timeago:J.Z,Status:K.default,Report:de,RichContent:he.Z,UserPopover:me.default,UserLink:pe.Z},methods:{toggleStatusExpanded:function(){this.statusExpanded=!this.statusExpanded},generateUserProfileLink:function(e){return(0,ce.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)},getUser:function(e){return this.$store.state.users.usersObject[e.from_profile.id]},toggleMute:function(){this.unmuted=!this.unmuted},approveUser:function(){this.$store.state.api.backendInteractor.approveUser({id:this.user.id}),this.$store.dispatch("removeFollowRequest",this.user),this.$store.dispatch("markSingleNotificationAsSeen",{id:this.notification.id}),this.$store.dispatch("updateNotification",{id:this.notification.id,updater:function(e){e.type="follow"}})},denyUser:function(){var e=this;this.$store.state.api.backendInteractor.denyUser({id:this.user.id}).then((function(){e.$store.dispatch("dismissNotificationLocal",{id:e.notification.id}),e.$store.dispatch("removeFollowRequest",e.user)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userClass:function(){return(0,ge.M)(this.notification.from_profile)},userStyle:function(){var e=this.$store.getters.mergedConfig.highlight,t=this.notification.from_profile;return(0,ge.q)(e[t.screen_name])},user:function(){return this.$store.getters.findUser(this.notification.from_profile.id)},userProfileLink:function(){return this.generateUserProfileLink(this.user)},targetUser:function(){return this.$store.getters.findUser(this.notification.target.id)},targetUserProfileLink:function(){return this.generateUserProfileLink(this.targetUser)},needMute:function(){return this.$store.getters.relationship(this.user.id).muting},isStatusNotification:function(){return(0,fe.Gr)(this.notification.type)}},(0,w.rn)({currentUser:function(e){return e.users.currentUser}}))};const _e=ye,ke=(0,ue.Z)(_e,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("Status"),u=(0,r.up)("user-link"),d=(0,r.up)("FAIcon"),p=(0,r.up)("UserAvatar"),h=(0,r.up)("UserPopover"),m=(0,r.up)("RichContent"),f=(0,r.up)("i18n-t"),g=(0,r.up)("Timeago"),v=(0,r.up)("router-link"),w=(0,r.up)("Report"),V=(0,r.up)("StatusContent");return"mention"===e.notification.type?((0,r.wg)(),(0,r.iD)("article",b,[(0,r.Wm)(l,{class:"Notification",compact:!0,statusoid:e.notification.status},null,8,["statusoid"])])):((0,r.wg)(),(0,r.iD)("article",y,[e.needMute&&!e.unmuted?((0,r.wg)(),(0,r.iD)("div",_,[(0,r._)("small",null,[(0,r.Wm)(u,{user:e.notification.from_profile,at:!1},null,8,["user"])]),(0,r._)("button",{class:"button-unstyled unmute",onClick:t[0]||(t[0]=(0,i.iM)((function(){return e.toggleMute&&e.toggleMute.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(d,{class:"fa-scale-110 fa-old-padding",icon:"eye-slash"})])])):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,o.C_)(["Notification non-mention",[e.userClass,{highlighted:e.userStyle},"-type--"+e.notification.type]]),style:(0,o.j5)([e.userStyle])},[(0,r._)("a",{class:"avatar-container",href:e.$router.resolve(e.userProfileLink).href,onClick:t[1]||(t[1]=(0,i.iM)((function(){}),["prevent"]))},[(0,r.Wm)(h,{"user-id":e.notification.from_profile.id,"overlay-centers":!0},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{class:"post-avatar",bot:e.botIndicator,compact:!0,"better-shadow":e.betterShadow,user:e.notification.from_profile},null,8,["bot","better-shadow","user"])]})),_:1},8,["user-id"])],8,k),(0,r._)("div",S,[(0,r._)("span",j,[(0,r._)("div",O,[e.notification.from_profile.name_html?((0,r.wg)(),(0,r.iD)("bdi",C,[(0,r.Wm)(m,{class:"username",title:"@"+e.notification.from_profile.screen_name_ui,html:e.notification.from_profile.name_html,emoji:e.notification.from_profile.emoji},null,8,["title","html","emoji"])])):((0,r.wg)(),(0,r.iD)("span",{key:1,class:"username",title:"@"+e.notification.from_profile.screen_name_ui},(0,o.zw)(e.notification.from_profile.name),9,P)),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),"like"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",z,[(0,r.Wm)(d,{class:"type-icon",icon:"star"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.favorited_you")),1)])):(0,r.kq)("",!0),"repeat"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",I,[(0,r.Wm)(d,{class:"type-icon",icon:"retweet",title:e.$t("tool_tip.repeat")},null,8,["title"]),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.repeated_you")),1)])):(0,r.kq)("",!0),"follow"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",D,[(0,r.Wm)(d,{class:"type-icon",icon:"user-plus"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.followed_you")),1)])):(0,r.kq)("",!0),"follow_request"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",x,[(0,r.Wm)(d,{class:"type-icon",icon:"user"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.follow_request")),1)])):(0,r.kq)("",!0),"move"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",T,[(0,r.Wm)(d,{class:"type-icon",icon:"suitcase-rolling"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.migrated_to")),1)])):(0,r.kq)("",!0),"pleroma:emoji_reaction"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",$,[(0,r._)("small",null,[(0,r.Wm)(f,{scope:"global",keypath:"notifications.reacted_with"},{default:(0,r.w5)((function(){return[(0,r._)("span",U,(0,o.zw)(e.notification.emoji),1)]})),_:1})])])):(0,r.kq)("",!0),"pleroma:report"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",M,[(0,r._)("small",null,(0,o.zw)(e.$t("notifications.submitted_report")),1)])):(0,r.kq)("",!0),"poll"===e.notification.type?((0,r.wg)(),(0,r.iD)("span",A,[(0,r.Wm)(d,{class:"type-icon",icon:"poll-h"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("small",null,(0,o.zw)(e.$t("notifications.poll_ended")),1)])):(0,r.kq)("",!0)]),e.isStatusNotification?((0,r.wg)(),(0,r.iD)("div",L,[e.notification.status?((0,r.wg)(),(0,r.j4)(v,{key:0,to:{name:"conversation",params:{id:e.notification.status.id}},class:"timeago-link faint-link"},{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{time:e.notification.created_at,"auto-update":240},null,8,["time"])]})),_:1},8,["to"])):(0,r.kq)("",!0),(0,r._)("button",{class:"button-unstyled expand-icon",onClick:t[2]||(t[2]=(0,i.iM)((function(){return e.toggleStatusExpanded&&e.toggleStatusExpanded.apply(e,arguments)}),["prevent"])),title:e.$t("tool_tip.toggle_expand"),"aria-expanded":e.statusExpanded},[(0,r.Wm)(d,{class:"fa-scale-110","fixed-width":"",icon:e.statusExpanded?"compress-alt":"expand-alt"},null,8,["icon"])],8,E)])):((0,r.wg)(),(0,r.iD)("div",F,[(0,r._)("span",R,[(0,r.Wm)(g,{time:e.notification.created_at,"auto-update":240},null,8,["time"])])])),e.needMute?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-unstyled",title:e.$t("tool_tip.toggle_mute"),"aria-expanded":!e.unmuted,onClick:t[3]||(t[3]=(0,i.iM)((function(){return e.toggleMute&&e.toggleMute.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(d,{class:"fa-scale-110 fa-old-padding",icon:"eye-slash"})],8,N)):(0,r.kq)("",!0)]),"follow"===e.notification.type||"follow_request"===e.notification.type?((0,r.wg)(),(0,r.iD)("div",q,[(0,r.Wm)(u,{class:"follow-name",user:e.notification.from_profile},null,8,["user"]),"follow_request"===e.notification.type?((0,r.wg)(),(0,r.iD)("div",Z,[(0,r._)("button",{class:"button-unstyled",title:e.$t("tool_tip.accept_follow_request"),onClick:t[4]||(t[4]=function(t){return e.approveUser()})},[(0,r.Wm)(d,{icon:"check",class:"fa-scale-110 fa-old-padding follow-request-accept"})],8,W),(0,r._)("button",{class:"button-unstyled",title:e.$t("tool_tip.reject_follow_request"),onClick:t[5]||(t[5]=function(t){return e.denyUser()})},[(0,r.Wm)(d,{icon:"times",class:"fa-scale-110 fa-old-padding follow-request-reject"})],8,B)])):(0,r.kq)("",!0)])):"move"===e.notification.type?((0,r.wg)(),(0,r.iD)("div",H,[(0,r.Wm)(u,{user:e.notification.target},null,8,["user"])])):"pleroma:report"===e.notification.type?((0,r.wg)(),(0,r.j4)(w,{key:2,"report-id":e.notification.report.id},null,8,["report-id"])):((0,r.wg)(),(0,r.j4)(V,{key:3,class:(0,o.C_)({faint:!e.statusExpanded}),compact:!e.statusExpanded,status:e.notification.action},null,8,["class","compact","status"]))])],6))]))}]]);var Se={class:"dropdown-menu"},je={class:"filter-trigger-button button-unstyled"},Oe=n(49874);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ve.vI.add(we.G_j);const ze={components:{Popover:Oe.default},computed:{filters:function(){return this.$store.getters.mergedConfig.notificationVisibility}},methods:{toggleNotificationFilter:function(e){this.$store.dispatch("setOption",{name:"notificationVisibility",value:Pe(Pe({},this.filters),{},(0,v.Z)({},e,!this.filters[e]))})}}},Ie=(0,ue.Z)(ze,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("FAIcon"),l=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(l,{trigger:"click",class:"NotificationFilters",placement:"bottom","bound-to":{x:"container"}},{content:(0,r.w5)((function(){return[(0,r._)("div",Se,[(0,r._)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=function(e){return a.toggleNotificationFilter("likes")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.likes}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_likes")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=function(e){return a.toggleNotificationFilter("repeats")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.repeats}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_repeats")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[2]||(t[2]=function(e){return a.toggleNotificationFilter("follows")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.follows}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_follows")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[3]||(t[3]=function(e){return a.toggleNotificationFilter("mentions")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.mentions}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_mentions")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=function(e){return a.toggleNotificationFilter("emojiReactions")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.emojiReactions}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_emoji_reactions")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=function(e){return a.toggleNotificationFilter("moves")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.moves}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_moves")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[6]||(t[6]=function(e){return a.toggleNotificationFilter("polls")})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":a.filters.polls}])},null,2),(0,r.Uk)((0,o.zw)(e.$t("settings.notification_visibility_polls")),1)])])]})),trigger:(0,r.w5)((function(){return[(0,r._)("button",je,[(0,r.Wm)(c,{icon:"filter"})])]})),_:1})}]]);var De=n(15568),xe=n(49753);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ve.vI.add(we.IJ7,we.FPD,we.Kl4);const $e={components:{Notification:ke,NotificationFilters:Ie},props:{minimalMode:Boolean,filterMode:Array,disableTeleport:Boolean},data:function(){return{showScrollTop:!1,bottomedOut:!1,seenToDisplayCount:30}},provide:function(){var e=this;return{popoversZLayer:(0,r.Fl)((function(){return e.popoversZLayer}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mainClass:function(){return this.minimalMode?"":"panel panel-default"},notifications:function(){return(0,fe.Bt)(this.$store)},error:function(){return this.$store.state.statuses.notifications.error},unseenNotifications:function(){return(0,fe.Km)(this.$store)},filteredNotifications:function(){return(0,fe.G2)(this.$store,this.filterMode)},unseenCount:function(){return this.unseenNotifications.length},unseenCountTitle:function(){return this.unseenCount+this.unreadChatCount+this.unreadAnnouncementCount},loading:function(){return this.$store.state.statuses.notifications.loading},noHeading:function(){var e=this.$store.state.interface.layoutType;return this.minimalMode||"mobile"===e},teleportTarget:function(){return{wide:"#notifs-column",mobile:"#mobile-notifications"}[this.$store.state.interface.layoutType]||"#notifs-sidebar"},popoversZLayer:function(){return"mobile"===this.$store.state.interface.layoutType?"navbar":null},notificationsToDisplay:function(){return this.filteredNotifications.slice(0,this.unseenCount+this.seenToDisplayCount)},noSticky:function(){return this.$store.getters.mergedConfig.disableStickyHeaders}},(0,w.Se)(["unreadChatCount","unreadAnnouncementCount"])),mounted:function(){this.scrollerRef=this.$refs.root.closest(".column.-scrollable"),this.scrollerRef||(this.scrollerRef=this.$refs.root.closest(".mobile-notifications")),this.scrollerRef||(this.scrollerRef=this.$refs.root.closest(".column.main")),this.scrollerRef.addEventListener("scroll",this.updateScrollPosition)},unmounted:function(){this.scrollerRef&&this.scrollerRef.removeEventListener("scroll",this.updateScrollPosition)},watch:{unseenCountTitle:function(e){e>0?(xe.Z.drawFaviconBadge(),this.$store.dispatch("setPageTitle","(".concat(e,")"))):(xe.Z.clearFaviconBadge(),this.$store.dispatch("setPageTitle",""))},teleportTarget:function(){var e=this;this.$nextTick((function(){e.scrollerRef.removeEventListener("scroll",e.updateScrollPosition),e.scrollerRef=e.$refs.root.closest(".column.-scrollable"),e.scrollerRef||(e.scrollerRef=e.$refs.root.closest(".mobile-notifications")),e.scrollerRef.addEventListener("scroll",e.updateScrollPosition),e.updateScrollPosition()}))}},methods:{scrollToTop:function(){this.scrollerRef.scrollTo({top:this.$refs.root.offsetTop})},updateScrollPosition:function(){this.showScrollTop=this.$refs.root.offsetTop<this.scrollerRef.scrollTop},markAsSeen:function(){this.$store.dispatch("markNotificationsAsSeen"),this.seenToDisplayCount=30},fetchOlderNotifications:function(){var e=this;if(!this.loading){var t=this.filteredNotifications.length-this.unseenCount;if(this.seenToDisplayCount<t)this.seenToDisplayCount=Math.min(this.seenToDisplayCount+20,t);else{this.seenToDisplayCount>t&&(this.seenToDisplayCount=t);var n=this.$store,r=n.state.users.currentUser.credentials;n.commit("setNotificationsLoading",{value:!0}),De.Z.fetchAndUpdate({store:n,credentials:r,older:!0}).then((function(t){n.commit("setNotificationsLoading",{value:!1}),0===t.length&&(e.bottomedOut=!0),e.seenToDisplayCount+=t.length}))}}}}},Ue=(0,ue.Z)($e,[["render",function(e,t,n,v,w,b){var y=(0,r.up)("FAIcon"),_=(0,r.up)("FALayers"),k=(0,r.up)("NotificationFilters"),S=(0,r.up)("notification");return(0,r.wg)(),(0,r.j4)(r.lR,{disabled:e.minimalMode||e.disableTeleport,to:e.teleportTarget},[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.noHeading?"div":"aside"),{ref:"root",class:(0,o.C_)([{minimal:e.minimalMode},"Notifications"])},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,o.C_)(e.mainClass)},[e.noHeading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",a,[(0,r.Uk)((0,o.zw)(e.$t("notifications.notifications"))+" ",1),e.unseenCount?((0,r.wg)(),(0,r.iD)("span",c,(0,o.zw)(e.unseenCount),1)):(0,r.kq)("",!0)]),e.showScrollTop?((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("button",{class:"button-unstyled scroll-to-top-button",type:"button",title:e.$t("general.scroll_to_top"),onClick:t[0]||(t[0]=function(){return e.scrollToTop&&e.scrollToTop.apply(e,arguments)})},[(0,r.Wm)(_,{class:"fa-scale-110 fa-old-padding-layer"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{icon:"arrow-up"}),(0,r.Wm)(y,{icon:"minus",transform:"up-7"})]})),_:1})],8,u)])):(0,r.kq)("",!0),e.unseenCount?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-default read-button",type:"button",onClick:t[1]||(t[1]=(0,i.iM)((function(){return e.markAsSeen&&e.markAsSeen.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.$t("notifications.read")),1)):(0,r.kq)("",!0),(0,r.Wm)(k,{class:"rightside-button"})])),(0,r._)("div",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.notificationsToDisplay,(function(t){return(0,r.wg)(),(0,r.iD)("div",{key:t.id,role:"listitem",class:(0,o.C_)(["notification",{unseen:!e.minimalMode&&!t.seen}])},[p,(0,r.Wm)(S,{notification:t},null,8,["notification"])],2)})),128))]),(0,r._)("div",h,[e.bottomedOut?((0,r.wg)(),(0,r.iD)("div",m,(0,o.zw)(e.$t("notifications.no_more_notifications")),1)):e.loading?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(y,{icon:"circle-notch",spin:"",size:"lg"})])):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-unstyled -link -fullwidth",onClick:t[2]||(t[2]=(0,i.iM)((function(t){return e.fetchOlderNotifications()}),["prevent"]))},[(0,r._)("div",f,(0,o.zw)(e.minimalMode?e.$t("interactions.load_older"):e.$t("notifications.load_older")),1)]))])],2)]})),_:1},8,["class"]))],8,["disabled","to"])}]]),Me=Ue},96786:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(66252),o=n(3577),i={class:"panel-loading"},s={class:"loading-text"},a=n(9382),c=n(84131);a.vI.add(c.IJ7);const l={},u=(0,n(83744).Z)(l,[["render",function(e,t,n,a,c,l){var u=(0,r.up)("FAIcon");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("span",s,[(0,r.Wm)(u,{icon:"circle-notch",spin:"",size:"3x"}),(0,r.Uk)(" "+(0,o.zw)(e.$t("general.loading")),1)])])}]])},49874:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(66252),o=n(49963),i=n(3577);const s={name:"Popover",props:{trigger:String,placement:String,boundTo:Object,boundToSelector:String,margin:Object,offset:Object,popoverClass:String,removePadding:Boolean,disabled:Boolean,overlayCenters:Boolean,overlayCentersSelector:String,stayOnClick:Boolean,triggerAttrs:{type:Object,default:{}}},inject:["popoversZLayer"],data:function(){return{anchorEl:null,teleport:!1,lockReEntry:!1,hidden:!0,styles:{},oldSize:{width:0,height:0},scrollable:null,graceTimeout:null,parentPopover:null,disableClickOutside:!1,childrenShown:new Set}},methods:{setAnchorEl:function(e){this.anchorEl=e,this.updateStyles()},containerBoundingClientRect:function(){return(this.boundToSelector?this.$el.closest(this.boundToSelector):this.$el.offsetParent).getBoundingClientRect()},updateStyles:function(){if(this.hidden)this.styles={};else{var e=this.anchorEl||this.$refs.trigger&&this.$refs.trigger.children[0]||this.$el,t=e.offsetHeight||e.clientHeight,n=e.offsetWidth||e.clientWidth,r=e.getBoundingClientRect(),o=getComputedStyle(e),i=parseFloat(o.paddingTop),s=parseFloat(o.paddingBottom),a=parseFloat(o.paddingRight),c=parseFloat(o.paddingLeft),l=r.left+.5*n,u=r.top+.5*t,d=this.$refs.content,p=this.overlayCenters?this.$refs.content.querySelector(this.overlayCentersSelector):null,h=this.boundTo&&("container"===this.boundTo.x||"container"===this.boundTo.y)&&this.containerBoundingClientRect(),m=this.margin||{},f=this.boundTo&&"container"===this.boundTo.x?{min:h.left+(m.left||0),max:h.right-(m.right||0)}:{min:0+(m.left||10),max:window.innerWidth-(m.right||10)},g=this.boundTo&&"container"===this.boundTo.y?{min:h.top+(m.top||0),max:h.bottom-(m.bottom||0)}:{min:0+(m.top||50),max:window.innerHeight-(m.bottom||5)},v=0,w=0;if(p){var b=d.getBoundingClientRect(),y=p.getBoundingClientRect(),_=y.left-b.left,k=y.top-b.top;v=-_-.5*p.offsetWidth,w=-k-.5*p.offsetHeight}else v=-.5*d.offsetWidth,w=-.5*d.offsetHeight;var S=l+v,j=S+d.offsetWidth,O=u+w,C=O+d.offsetHeight;S<f.min&&(v+=f.min-S),j>f.max&&(v-=j-f.max),O<g.min&&(w+=g.min-O),C>g.max&&(w-=C-g.max);var P=0,z=0;if(p)P=l+v,z=u+w;else if("right"!==this.placement&&"left"!==this.placement){var I="bottom"!==this.placement,D=u-.5*t+(this.removePadding?i:0),x=u+.5*t-(this.removePadding?s:0);x+d.offsetHeight>g.max&&(I=!0),D-d.offsetHeight<g.min&&(I=!1);var T=this.offset&&this.offset.y||0;z=I?D-T-d.offsetHeight:x+T,P=l+v+(this.offset&&this.offset.x||0)}else{var $="left"!==this.placement,U=l-.5*n+(this.removePadding?a:0),M=l+.5*n-(this.removePadding?c:0);M+d.offsetWidth>f.max&&($=!0),U-d.offsetWidth<f.min&&($=!1);var A=this.offset&&this.offset.x||0;P=$?U-A-d.offsetWidth:M+A,z=u+w+(this.offset&&this.offset.y||0)}this.styles={left:"".concat(Math.round(P),"px"),top:"".concat(Math.round(z),"px")},this.popoversZLayer&&(this.styles["--ZI_popover_override"]="var(--ZI_".concat(this.popoversZLayer,"_popovers)")),h&&(this.styles.maxWidth="".concat(Math.round(h.width),"px"))}},showPopover:function(){var e=this;if(!this.disabled){this.disableClickOutside=!0,setTimeout((function(){e.disableClickOutside=!1}),0);var t=this.hidden;this.hidden=!1,this.parentPopover&&this.parentPopover.onChildPopoverState(this,!0),("click"===this.trigger||this.stayOnClick)&&document.addEventListener("click",this.onClickOutside),this.scrollable.addEventListener("scroll",this.onScroll),this.scrollable.addEventListener("resize",this.onResize),this.$nextTick((function(){t&&e.$emit("show"),e.updateStyles()}))}},hidePopover:function(){this.disabled||(this.hidden||this.$emit("close"),this.hidden=!0,this.parentPopover&&this.parentPopover.onChildPopoverState(this,!1),"click"===this.trigger&&document.removeEventListener("click",this.onClickOutside),this.scrollable.removeEventListener("scroll",this.onScroll),this.scrollable.removeEventListener("resize",this.onResize))},onMouseenter:function(e){"hover"===this.trigger&&(this.lockReEntry=!1,clearTimeout(this.graceTimeout),this.graceTimeout=null,this.showPopover())},onMouseleave:function(e){var t=this;"hover"===this.trigger&&0===this.childrenShown.size&&(this.graceTimeout=setTimeout((function(){return t.hidePopover()}),1))},onMouseenterContent:function(e){"hover"!==this.trigger||this.lockReEntry||(this.lockReEntry=!0,clearTimeout(this.graceTimeout),this.graceTimeout=null,this.showPopover())},onMouseleaveContent:function(e){var t=this;"hover"===this.trigger&&0===this.childrenShown.size&&(this.graceTimeout=setTimeout((function(){return t.hidePopover()}),1))},onClick:function(e){"click"===this.trigger&&(this.hidden?this.showPopover():this.hidePopover())},onClickOutside:function(e){this.disableClickOutside||this.hidden||this.$refs.content&&this.$refs.content.contains(e.target)||this.$el.contains(e.target)||this.childrenShown.size>0||(this.hidePopover(),this.parentPopover&&this.parentPopover.onClickOutside(e))},onScroll:function(e){this.updateStyles()},onResize:function(e){this.updateStyles()},onChildPopoverState:function(e,t){t?this.childrenShown.add(e):this.childrenShown.delete(e)}},updated:function(){var e=this.$refs.content;e&&(this.oldSize.width===e.offsetWidth&&this.oldSize.height===e.offsetHeight||(this.updateStyles(),this.oldSize={width:e.offsetWidth,height:e.offsetHeight}))},mounted:function(){this.teleport=!0;var e=this.$refs.trigger.closest(".column.-scrollable")||this.$refs.trigger.closest(".mobile-notifications");e||(e=window),this.scrollable=e;for(var t=this.$parent;t&&"Popover"!==t.$.type.name;)t=t.$parent;this.parentPopover=t},beforeUnmount:function(){this.hidePopover()}},a=(0,n(83744).Z)(s,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("span",{onMouseenter:t[4]||(t[4]=function(){return e.onMouseenter&&e.onMouseenter.apply(e,arguments)}),onMouseleave:t[5]||(t[5]=function(){return e.onMouseleave&&e.onMouseleave.apply(e,arguments)})},[(0,r._)("button",(0,r.dG)({ref:"trigger",class:"button-unstyled popover-trigger-button",type:"button"},e.triggerAttrs,{onClick:t[0]||(t[0]=function(){return e.onClick&&e.onClick.apply(e,arguments)})}),[(0,r.WI)(e.$slots,"trigger")],16),((0,r.wg)(),(0,r.j4)(r.lR,{disabled:!e.teleport,to:"#popovers"},[(0,r.Wm)(o.uT,{name:"fade"},{default:(0,r.w5)((function(){return[e.hidden?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,ref:"content",style:(0,i.j5)(e.styles),class:(0,i.C_)(["popover",e.popoverClass||"popover-default"]),onMouseenter:t[1]||(t[1]=function(){return e.onMouseenterContent&&e.onMouseenterContent.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.onMouseleaveContent&&e.onMouseleaveContent.apply(e,arguments)}),onClick:t[3]||(t[3]=function(){return e.onClickContent&&e.onClickContent.apply(e,arguments)})},[(0,r.WI)(e.$slots,"content",{class:"popover-inner",close:e.hidePopover})],38))]})),_:3})],8,["disabled"]))],32)}]])},33580:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ae});var r=n(66252),o=n(49963),i=n(3577),s={ref:"form",class:"post-status-form"},a={class:"form-group"},c={key:1,class:"visibility-notice notice-dismissible"},l={key:2,class:"visibility-notice notice-dismissible"},u={key:3,class:"visibility-notice notice-dismissible"},d={key:4,class:"visibility-notice"},p={key:0},h={key:1},m={key:5,class:"visibility-notice edit-warning"},f={key:6,class:"preview-heading faint"},g={class:"preview-spinner"},v={key:7,class:"preview-container"},w={key:0,class:"preview-status"},b={key:1,class:"preview-status preview-error"},y=["placeholder","disabled"],_=["placeholder","disabled"],k={key:9,class:"visibility-tray"},S={key:1,class:"text-format"},j=["value"],O={key:2,class:"text-format"},C={class:"only-format"},P={ref:"bottom",class:"form-bottom"},z={class:"form-bottom-left"},I=["title"],D=["title"],x={key:0,disabled:"",class:"btn button-default"},T={key:1,disabled:"",class:"btn button-default"},$=["disabled"],U={key:1,class:"alert error"},M={key:3,class:"upload_settings"},A=n(15861),L=n(4942),E=n(93433),F=n(23279),R=n.n(F),N=n(45578),q=n.n(N),Z=n(35161),W=n.n(Z),B=n(43063),H=n.n(B),V=n(64687),K=n.n(V),G=n(7257),Y=["title"],J=["disabled"],Q=n(65079),X=n(9382),ee=n(84131);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}X.vI.add(ee.cf$,ee.IJ7);const ne={data:function(){return{uploadCount:0,uploadReady:!0}},computed:{uploading:function(){return this.uploadCount>0}},methods:{uploadFile:function(e){var t=this,n=this.$store;if(e.size>n.state.instance.uploadlimit){var r=Q.Z.fileSizeFormat(e.size),o=Q.Z.fileSizeFormat(n.state.instance.uploadlimit);t.$emit("upload-failed","file_too_big",{filesize:r.num,filesizeunit:r.unit,allowedsize:o.num,allowedsizeunit:o.unit})}else{var i=new FormData;i.append("file",e),t.$emit("uploading"),t.uploadCount++,G.Z.uploadMedia({store:n,formData:i}).then((function(e){t.$emit("uploaded",e),t.decreaseUploadCount()}),(function(e){console.error("Error uploading file",e),t.$emit("upload-failed","default"),t.decreaseUploadCount()}))}},decreaseUploadCount:function(){this.uploadCount--,0===this.uploadCount&&this.$emit("all-uploaded")},clearFile:function(){var e=this;this.uploadReady=!1,this.$nextTick((function(){e.uploadReady=!0}))},multiUpload:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.uploadFile(r)}}catch(e){n.e(e)}finally{n.f()}},change:function(e){var t=e.target;this.multiUpload(t.files)}},props:["dropFiles","disabled"],watch:{dropFiles:function(e){this.uploading||this.multiUpload(e)}}};var re=n(83744);const oe=(0,re.Z)(ne,[["render",function(e,t,n,o,s,a){var c=(0,r.up)("FAIcon");return(0,r.wg)(),(0,r.iD)("label",{class:(0,i.C_)(["media-upload",{disabled:e.disabled}]),title:e.$t("tool_tip.media_upload")},[e.uploading?((0,r.wg)(),(0,r.j4)(c,{key:0,class:"progress-icon",icon:"circle-notch",spin:""})):(0,r.kq)("",!0),e.uploading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:1,class:"new-icon",icon:"upload"})),e.uploadReady?((0,r.wg)(),(0,r.iD)("input",{key:2,class:"hidden-input-file",disabled:e.disabled,type:"file",multiple:"true",onChange:t[0]||(t[0]=function(){return e.change&&e.change.apply(e,arguments)})},null,40,J)):(0,r.kq)("",!0)],10,Y)}]]);var ie=n(4078),se=n(38658),ae={key:0,class:"poll-form"},ce={class:"input-container"},le=["id","onUpdate:modelValue","placeholder","maxlength","onKeydown"],ue=["onClick"],de={class:"poll-type-expiry"},pe=["title"],he={value:"single"},me={value:"multiple"},fe=["title"],ge=["min","max"],ve=["value"],we=n(44908),be=n.n(we),ye=n(27483),_e=n(44313);X.vI.add(ee.NBC,ee.r8p);const ke={components:{Select:_e.Z},name:"PollForm",props:["visible"],data:function(){return{pollType:"single",options:["",""],expiryAmount:10,expiryUnit:"minutes"}},computed:{pollLimits:function(){return this.$store.state.instance.pollLimits},maxOptions:function(){return this.pollLimits.max_options},maxLength:function(){return this.pollLimits.max_option_chars},expiryUnits:function(){var e=this,t=this.convertExpiryFromUnit;return["minutes","hours","days"].filter((function(n){return e.pollLimits.max_expiration>=t(n,1)}))},minExpirationInCurrentUnit:function(){return Math.ceil(this.convertExpiryToUnit(this.expiryUnit,this.pollLimits.min_expiration))},maxExpirationInCurrentUnit:function(){return Math.floor(this.convertExpiryToUnit(this.expiryUnit,this.pollLimits.max_expiration))}},methods:{clear:function(){this.pollType="single",this.options=["",""],this.expiryAmount=10,this.expiryUnit="minutes"},nextOption:function(e){var t=this.$el.querySelector("#poll-".concat(e+1));t?t.focus():this.addOption()&&this.$nextTick((function(){this.nextOption(e)}))},addOption:function(){return this.options.length<this.maxOptions&&(this.options.push(""),!0)},deleteOption:function(e,t){this.options.length>2&&(this.options.splice(e,1),this.updatePollToParent())},convertExpiryToUnit:function(e,t){switch(e){case"minutes":return 1e3*t/ye.EB;case"hours":return 1e3*t/ye.kr;case"days":return 1e3*t/ye.x4}},convertExpiryFromUnit:function(e,t){switch(e){case"minutes":return.001*t*ye.EB;case"hours":return.001*t*ye.kr;case"days":return.001*t*ye.x4}},expiryAmountChange:function(){this.expiryAmount=Math.max(this.minExpirationInCurrentUnit,this.expiryAmount),this.expiryAmount=Math.min(this.maxExpirationInCurrentUnit,this.expiryAmount),this.updatePollToParent()},updatePollToParent:function(){var e=this.convertExpiryFromUnit(this.expiryUnit,this.expiryAmount),t=be()(this.options.filter((function(e){return""!==e})));t.length<2?this.$emit("update-poll",{error:this.$t("polls.not_enough_options")}):this.$emit("update-poll",{options:t,multiple:"multiple"===this.pollType,expiresIn:e})}}},Se=(0,re.Z)(ke,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("Select");return e.visible?((0,r.wg)(),(0,r.iD)("div",ae,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(n,i){return(0,r.wg)(),(0,r.iD)("div",{key:i,class:"poll-option"},[(0,r._)("div",ce,[(0,r.wy)((0,r._)("input",{id:"poll-".concat(i),"onUpdate:modelValue":function(t){return e.options[i]=t},size:"1",class:"poll-option-input",type:"text",placeholder:e.$t("polls.option"),maxlength:e.maxLength,onChange:t[0]||(t[0]=function(){return e.updatePollToParent&&e.updatePollToParent.apply(e,arguments)}),onKeydown:(0,o.D2)((0,o.iM)((function(t){return e.nextOption(i)}),["stop","prevent"]),["enter"])},null,40,le),[[o.nr,e.options[i]]])]),e.options.length>2?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"delete-option button-unstyled -hover-highlight",onClick:function(t){return e.deleteOption(i)}},[(0,r.Wm)(l,{icon:"times"})],8,ue)):(0,r.kq)("",!0)])})),128)),e.options.length<e.maxOptions?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"add-option faint button-unstyled -hover-highlight",onClick:t[1]||(t[1]=function(){return e.addOption&&e.addOption.apply(e,arguments)})},[(0,r.Wm)(l,{icon:"plus",size:"sm"}),(0,r.Uk)(" "+(0,i.zw)(e.$t("polls.add_option")),1)])):(0,r.kq)("",!0),(0,r._)("div",de,[(0,r._)("div",{class:"poll-type",title:e.$t("polls.type")},[(0,r.Wm)(u,{modelValue:e.pollType,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.pollType=t}),class:"poll-type-select",unstyled:"true",onChange:e.updatePollToParent},{default:(0,r.w5)((function(){return[(0,r._)("option",he,(0,i.zw)(e.$t("polls.single_choice")),1),(0,r._)("option",me,(0,i.zw)(e.$t("polls.multiple_choices")),1)]})),_:1},8,["modelValue","onChange"])],8,pe),(0,r._)("div",{class:"poll-expiry",title:e.$t("polls.expiry")},[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.expiryAmount=t}),type:"number",class:"expiry-amount hide-number-spinner",min:e.minExpirationInCurrentUnit,max:e.maxExpirationInCurrentUnit,onChange:t[4]||(t[4]=function(){return e.expiryAmountChange&&e.expiryAmountChange.apply(e,arguments)})},null,40,ge),[[o.nr,e.expiryAmount]]),(0,r.Uk)(" "+(0,i.zw)(" ")+" "),(0,r.Wm)(u,{modelValue:e.expiryUnit,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.expiryUnit=t}),unstyled:"true",class:"expiry-unit",onChange:e.expiryAmountChange},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.expiryUnits,(function(t){return(0,r.wg)(),(0,r.iD)("option",{key:t,value:t},(0,i.zw)(e.$tc("time.unit.".concat(t,"_short"),e.expiryAmount,[""])),9,ve)})),128))]})),_:1},8,["modelValue","onChange"])],8,fe)])])):(0,r.kq)("",!0)}]]);var je=n(74722),Oe=n(99822),Ce=n(33288),Pe=n(58394),ze=n(67952),Ie=n(19003),De=n(989),xe=n(40151);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,L.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}X.vI.add(ee.RKn,ee.Mm7,ee.cf$,ee.gPx,ee.NBC,ee.IJ7);var Ue=function(e){return Number(e.substring(0,e.length-2))};const Me={props:["statusId","statusText","statusIsSensitive","statusPoll","statusFiles","statusMediaDescriptions","statusScope","statusContentType","replyTo","repliedUser","attentions","copyMessageScope","subject","disableSubject","disableScopeSelector","disableVisibilitySelector","disableNotice","disableLockWarning","disablePolls","disableSensitivityCheckbox","disableSubmit","disablePreview","placeholder","maxHeight","postHandler","preserveFocus","autoFocus","fileLimit","submitOnEnter","emojiPickerPlacement","optimisticPosting"],emits:["posted","resize","mediaplay","mediapause"],components:{MediaUpload:oe,EmojiInput:se.Z,PollForm:Se,ScopeSelector:ie.Z,Checkbox:xe.Z,Select:_e.Z,Attachment:je.Z,StatusContent:Ce.Z,Gallery:Oe.Z},mounted:function(){if(this.updateIdempotencyKey(),this.resize(this.$refs.textarea),this.replyTo){var e=this.$refs.textarea.value.length;this.$refs.textarea.setSelectionRange(e,e)}(this.replyTo||this.autoFocus)&&this.$refs.textarea.focus()},data:function(){var e=this.$route.query.message||"",t=this.$store.getters.mergedConfig.scopeCopy;if(this.replyTo){var n=this.$store.state.users.currentUser;e=function(e,t){var n=e.user,r=e.attentions,o=void 0===r?[]:r,i=(0,E.Z)(o);i.unshift(n),i=q()(i,"id"),i=H()(i,{id:t.id});var s=W()(i,(function(e){return"@".concat(e.screen_name)}));return s.length>0?s.join(" ")+" ":""}({user:this.repliedUser,attentions:this.attentions},n)}var r=this.copyMessageScope&&t||"direct"===this.copyMessageScope?this.copyMessageScope:this.$store.state.users.currentUser.default_scope,o=this.$store.getters.mergedConfig,i=o.postContentType,s=o.sensitiveByDefault,a={spoilerText:this.subject||"",status:e,nsfw:!!s,files:[],poll:{},mediaDescriptions:{},visibility:r,contentType:i};if(this.statusId){var c=this.statusContentType||i;a={spoilerText:this.subject||"",status:this.statusText||"",nsfw:this.statusIsSensitive||!!s,files:this.statusFiles||[],poll:this.statusPoll||{},mediaDescriptions:this.statusMediaDescriptions||{},visibility:this.statusScope||r,contentType:c}}return{dropFiles:[],uploadingFiles:!1,error:null,posting:!1,highlighted:0,newStatus:a,caret:0,pollFormVisible:!1,showDropIcon:"hide",dropStopTimeout:null,preview:null,previewLoading:!1,emojiInputShown:!1,idempotencyKey:""}},computed:$e($e({users:function(){return this.$store.state.users.users},userDefaultScope:function(){return this.$store.state.users.currentUser.default_scope},showAllScopes:function(){return!this.mergedConfig.minimalScopesMode},emojiUserSuggestor:function(){return(0,Ie.ZP)({emoji:[].concat((0,E.Z)(this.$store.getters.standardEmojiList),(0,E.Z)(this.$store.state.instance.customEmoji)),store:this.$store})},emojiSuggestor:function(){return(0,Ie.ZP)({emoji:[].concat((0,E.Z)(this.$store.getters.standardEmojiList),(0,E.Z)(this.$store.state.instance.customEmoji))})},emoji:function(){return this.$store.getters.standardEmojiList||[]},customEmoji:function(){return this.$store.state.instance.customEmoji||[]},statusLength:function(){return this.newStatus.status.length},spoilerTextLength:function(){return this.newStatus.spoilerText.length},statusLengthLimit:function(){return this.$store.state.instance.textlimit},hasStatusLengthLimit:function(){return this.statusLengthLimit>0},charactersLeft:function(){return this.statusLengthLimit-(this.statusLength+this.spoilerTextLength)},isOverLengthLimit:function(){return this.hasStatusLengthLimit&&this.charactersLeft<0},minimalScopesMode:function(){return this.$store.state.instance.minimalScopesMode},alwaysShowSubject:function(){return this.mergedConfig.alwaysShowSubjectInput},postFormats:function(){return this.$store.state.instance.postFormats||[]},safeDMEnabled:function(){return this.$store.state.instance.safeDM},pollsAvailable:function(){return this.$store.state.instance.pollsAvailable&&this.$store.state.instance.pollLimits.max_options>=2&&!0!==this.disablePolls},hideScopeNotice:function(){return this.disableNotice||this.$store.getters.mergedConfig.hideScopeNotice},pollContentError:function(){return this.pollFormVisible&&this.newStatus.poll&&this.newStatus.poll.error},showPreview:function(){return!this.disablePreview&&(!!this.preview||this.previewLoading)},emptyStatus:function(){return""===this.newStatus.status.trim()&&0===this.newStatus.files.length},uploadFileLimitReached:function(){return this.newStatus.files.length>=this.fileLimit},isEdit:function(){return void 0!==this.statusId&&""!==this.statusId.trim()}},(0,De.Se)(["mergedConfig"])),(0,De.rn)({mobileLayout:function(e){return e.interface.mobileLayout}})),watch:{newStatus:{deep:!0,handler:function(){this.statusChanged()}}},methods:{statusChanged:function(){this.autoPreview(),this.updateIdempotencyKey()},clearStatus:function(){var e=this,t=this.newStatus;this.newStatus={status:"",spoilerText:"",files:[],visibility:t.visibility,contentType:t.contentType,poll:{},mediaDescriptions:{}},this.pollFormVisible=!1,this.$refs.mediaUpload&&this.$refs.mediaUpload.clearFile(),this.clearPollForm(),this.preserveFocus&&this.$nextTick((function(){e.$refs.textarea.focus()}));var n=this.$el.querySelector("textarea");n.style.height="auto",n.style.height=void 0,this.error=null,this.preview&&this.previewStatus()},postStatus:function(e,t){var n=arguments,r=this;return(0,A.Z)(K().mark((function o(){var i,s;return K().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.length>2&&void 0!==n[2]&&n[2],!r.posting||r.optimisticPosting){o.next=3;break}return o.abrupt("return");case 3:if(!r.disableSubmit){o.next=5;break}return o.abrupt("return");case 5:if(!r.emojiInputShown){o.next=7;break}return o.abrupt("return");case 7:if(r.submitOnEnter&&(e.stopPropagation(),e.preventDefault()),!r.optimisticPosting||!r.emptyStatus&&!r.isOverLengthLimit){o.next=10;break}return o.abrupt("return");case 10:if(!r.emptyStatus){o.next=13;break}return r.error=r.$t("post_status.empty_status_error"),o.abrupt("return");case 13:if(i=r.pollFormVisible?r.newStatus.poll:{},!r.pollContentError){o.next=17;break}return r.error=r.pollContentError,o.abrupt("return");case 17:return r.posting=!0,o.prev=18,o.next=21,r.setAllMediaDescriptions();case 21:o.next=28;break;case 23:return o.prev=23,o.t0=o.catch(18),r.error=r.$t("post_status.media_description_error"),r.posting=!1,o.abrupt("return");case 28:s={status:t.status,spoilerText:t.spoilerText||null,visibility:t.visibility,sensitive:t.nsfw,media:t.files,store:r.$store,inReplyToStatusId:r.replyTo,contentType:t.contentType,poll:i,idempotencyKey:r.idempotencyKey},(r.postHandler?r.postHandler:G.Z.postStatus)(s).then((function(e){e.error?r.error=e.error:(r.clearStatus(),r.$emit("posted",e)),r.posting=!1}));case 31:case"end":return o.stop()}}),o,null,[[18,23]])})))()},previewStatus:function(){var e=this;if(this.emptyStatus&&""===this.newStatus.spoilerText.trim())return this.preview={error:this.$t("post_status.preview_empty")},void(this.previewLoading=!1);var t=this.newStatus;this.previewLoading=!0,G.Z.postStatus({status:t.status,spoilerText:t.spoilerText||null,visibility:t.visibility,sensitive:t.nsfw,media:[],store:this.$store,inReplyToStatusId:this.replyTo,contentType:t.contentType,poll:{},preview:!0}).then((function(t){e.previewLoading&&(t.error?e.preview={error:t.error}:e.preview=t)})).catch((function(t){e.preview={error:t}})).finally((function(){e.previewLoading=!1}))},debouncePreviewStatus:R()((function(){this.previewStatus()}),500),autoPreview:function(){this.preview&&(this.previewLoading=!0,this.debouncePreviewStatus())},closePreview:function(){this.preview=null,this.previewLoading=!1},togglePreview:function(){this.showPreview?this.closePreview():this.previewStatus()},addMediaFile:function(e){this.newStatus.files.push(e),this.$emit("resize",{delayed:!0})},removeMediaFile:function(e){var t=this.newStatus.files.indexOf(e);this.newStatus.files.splice(t,1),this.$emit("resize")},editAttachment:function(e,t){this.newStatus.mediaDescriptions[e.id]=t},shiftUpMediaFile:function(e){var t=this.newStatus.files,n=this.newStatus.files.indexOf(e);t.splice(n,1),t.splice(n-1,0,e)},shiftDnMediaFile:function(e){var t=this.newStatus.files,n=this.newStatus.files.indexOf(e);t.splice(n,1),t.splice(n+1,0,e)},uploadFailed:function(e,t){t=t||{},this.error=this.$t("upload.error.base")+" "+this.$t("upload.error."+e,t)},startedUploadingFiles:function(){this.uploadingFiles=!0},finishedUploadingFiles:function(){this.$emit("resize"),this.uploadingFiles=!1},type:function(e){return Pe.Z.fileType(e.mimetype)},paste:function(e){this.autoPreview(),this.resize(e),e.clipboardData.files.length>0&&(e.preventDefault(),this.dropFiles=[e.clipboardData.files[0]])},fileDrop:function(e){e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(e.preventDefault(),this.dropFiles=e.dataTransfer.files,clearTimeout(this.dropStopTimeout),this.showDropIcon="hide")},fileDragStop:function(e){var t=this;clearTimeout(this.dropStopTimeout),this.showDropIcon="fade",this.dropStopTimeout=setTimeout((function(){return t.showDropIcon="hide"}),500)},fileDrag:function(e){e.dataTransfer.dropEffect=this.uploadFileLimitReached?"none":"copy",e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(clearTimeout(this.dropStopTimeout),this.showDropIcon="show")},onEmojiInputInput:function(e){var t=this;this.$nextTick((function(){t.resize(t.$refs.textarea)}))},resize:function(e){var t=e.target||e;if(t instanceof window.Element){if(""===t.value)return t.style.height=null,void this.$emit("resize");var n=this.$refs.form,r=this.$refs.bottom,o=window.getComputedStyle(r)["padding-bottom"],i=Ue(o),s=this.$el.closest(".column.-scrollable")||this.$el.closest(".post-form-modal-view")||window,a=window.getComputedStyle(t)["padding-top"],c=window.getComputedStyle(t)["padding-bottom"],l=Ue(a)+Ue(c),u=Ue(t.style.height),d=s===window?s.scrollY:s.scrollTop,p=s===window?s.innerHeight:s.offsetHeight,h=d+p;t.style.height="auto";var m=Math.floor(t.scrollHeight-l),f=this.maxHeight?Math.min(m,this.maxHeight):m;Math.abs(f-u)<=1&&(f=u),t.style.height="".concat(f,"px"),this.$emit("resize",f);var g=r.offsetHeight+(0,ze.y)(r,s).top+i,v=h<g,w=p<n.offsetHeight,b=g-h,y=!v||w&&this.$refs.textarea.selectionStart!==this.$refs.textarea.value.length?0:b,_=Math.round(d+y);s===window?s.scroll(0,_):s.scrollTop=_}},showEmojiPicker:function(){this.$refs.textarea.focus(),this.$refs["emoji-input"].triggerShowPicker()},clearError:function(){this.error=null},changeVis:function(e){this.newStatus.visibility=e},togglePollForm:function(){this.pollFormVisible=!this.pollFormVisible},setPoll:function(e){this.newStatus.poll=e},clearPollForm:function(){this.$refs.pollForm&&this.$refs.pollForm.clear()},dismissScopeNotice:function(){this.$store.dispatch("setOption",{name:"hideScopeNotice",value:!0})},setMediaDescription:function(e){var t=this.newStatus.mediaDescriptions[e];if(t&&""!==t.trim())return G.Z.setMediaDescription({store:this.$store,id:e,description:t})},setAllMediaDescriptions:function(){var e=this,t=this.newStatus.files.map((function(e){return e.id}));return Promise.all(t.map((function(t){return e.setMediaDescription(t)})))},handleEmojiInputShow:function(e){this.emojiInputShown=e},updateIdempotencyKey:function(){this.idempotencyKey=Date.now().toString()},openProfileTab:function(){this.$store.dispatch("openSettingsModalTab","profile")}}},Ae=(0,re.Z)(Me,[["render",function(e,t,n,A,L,E){var F=(0,r.up)("i18n-t"),R=(0,r.up)("FAIcon"),N=(0,r.up)("StatusContent"),q=(0,r.up)("EmojiInput"),Z=(0,r.up)("scope-selector"),W=(0,r.up)("Select"),B=(0,r.up)("poll-form"),H=(0,r.up)("media-upload"),V=(0,r.up)("gallery"),K=(0,r.up)("Checkbox");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("form",{autocomplete:"off",onSubmit:t[26]||(t[26]=(0,o.iM)((function(){}),["prevent"])),onDragover:t[27]||(t[27]=(0,o.iM)((function(){return e.fileDrag&&e.fileDrag.apply(e,arguments)}),["prevent"]))},[(0,r._)("div",a,[e.$store.state.users.currentUser.locked||"private"!=e.newStatus.visibility||e.disableLockWarning?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(F,{key:0,keypath:"post_status.account_not_locked_warning",tag:"p",class:"visibility-notice",scope:"global"},{default:(0,r.w5)((function(){return[(0,r._)("button",{class:"button-unstyled -link",onClick:t[0]||(t[0]=function(){return e.openProfileTab&&e.openProfileTab.apply(e,arguments)})},(0,i.zw)(e.$t("post_status.account_not_locked_warning_link")),1)]})),_:1})),e.hideScopeNotice||"public"!==e.newStatus.visibility?e.hideScopeNotice||"unlisted"!==e.newStatus.visibility?!e.hideScopeNotice&&"private"===e.newStatus.visibility&&e.$store.state.users.currentUser.locked?((0,r.wg)(),(0,r.iD)("p",u,[(0,r._)("span",null,(0,i.zw)(e.$t("post_status.scope_notice.private")),1),(0,r._)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[3]||(t[3]=(0,o.iM)((function(t){return e.dismissScopeNotice()}),["prevent"]))},[(0,r.Wm)(R,{icon:"times"})])])):"direct"===e.newStatus.visibility?((0,r.wg)(),(0,r.iD)("p",d,[e.safeDMEnabled?((0,r.wg)(),(0,r.iD)("span",p,(0,i.zw)(e.$t("post_status.direct_warning_to_first_only")),1)):((0,r.wg)(),(0,r.iD)("span",h,(0,i.zw)(e.$t("post_status.direct_warning_to_all")),1))])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",l,[(0,r._)("span",null,(0,i.zw)(e.$t("post_status.scope_notice.unlisted")),1),(0,r._)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[2]||(t[2]=(0,o.iM)((function(t){return e.dismissScopeNotice()}),["prevent"]))},[(0,r.Wm)(R,{icon:"times"})])])):((0,r.wg)(),(0,r.iD)("p",c,[(0,r._)("span",null,(0,i.zw)(e.$t("post_status.scope_notice.public")),1),(0,r._)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[1]||(t[1]=(0,o.iM)((function(t){return e.dismissScopeNotice()}),["prevent"]))},[(0,r.Wm)(R,{icon:"times"})])])),e.isEdit?((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("p",null,(0,i.zw)(e.$t("post_status.edit_remote_warning")),1),(0,r._)("p",null,(0,i.zw)(e.$t("post_status.edit_unsupported_warning")),1)])):(0,r.kq)("",!0),e.disablePreview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("a",{class:"preview-toggle faint",onClick:t[4]||(t[4]=(0,o.iM)((function(){return e.togglePreview&&e.togglePreview.apply(e,arguments)}),["stop","prevent"]))},[(0,r.Uk)((0,i.zw)(e.$t("post_status.preview"))+" ",1),(0,r.Wm)(R,{icon:e.showPreview?"chevron-left":"chevron-right"},null,8,["icon"])]),(0,r.wy)((0,r._)("div",g,[(0,r.Wm)(R,{class:"fa-old-padding",spin:"",icon:"circle-notch"})],512),[[o.F8,e.previewLoading]])])),e.showPreview?((0,r.wg)(),(0,r.iD)("div",v,[e.preview?e.preview.error?((0,r.wg)(),(0,r.iD)("div",b,(0,i.zw)(e.preview.error),1)):((0,r.wg)(),(0,r.j4)(N,{key:2,status:e.preview,class:"preview-status"},null,8,["status"])):((0,r.wg)(),(0,r.iD)("div",w,(0,i.zw)(e.$t("general.loading")),1))])):(0,r.kq)("",!0),e.disableSubject||!e.newStatus.spoilerText&&!e.alwaysShowSubject?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(q,{key:8,modelValue:e.newStatus.spoilerText,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.newStatus.spoilerText=t}),"enable-emoji-picker":"",suggest:e.emojiSuggestor,class:"form-control"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.newStatus.spoilerText=t}),type:"text",placeholder:e.$t("post_status.content_warning"),disabled:e.posting&&!e.optimisticPosting,size:"1",class:"form-post-subject"},null,8,y),[[o.nr,e.newStatus.spoilerText]])]})),_:1},8,["modelValue","suggest"])),(0,r.Wm)(q,{ref:"emoji-input",modelValue:e.newStatus.status,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.newStatus.status=t}),suggest:e.emojiUserSuggestor,placement:e.emojiPickerPlacement,class:"form-control main-input","enable-emoji-picker":"","hide-emoji-button":"","newline-on-ctrl-enter":e.submitOnEnter,"enable-sticker-picker":"",onInput:e.onEmojiInputInput,onStickerUploaded:e.addMediaFile,onStickerUploadFailed:e.uploadFailed,onShown:e.handleEmojiInputShow},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r._)("textarea",{ref:"textarea","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.newStatus.status=t}),placeholder:e.placeholder||e.$t("post_status.default"),rows:"1",cols:"1",disabled:e.posting&&!e.optimisticPosting,class:(0,i.C_)(["form-post-body",{"scrollable-form":!!e.maxHeight}]),onKeydown:[t[8]||(t[8]=(0,o.D2)((0,o.iM)((function(t){return e.submitOnEnter&&e.postStatus(t,e.newStatus)}),["exact"]),["enter"])),t[9]||(t[9]=(0,o.D2)((0,o.iM)((function(t){return e.postStatus(t,e.newStatus)}),["meta"]),["enter"])),t[10]||(t[10]=(0,o.D2)((0,o.iM)((function(t){return!e.submitOnEnter&&e.postStatus(t,e.newStatus)}),["ctrl"]),["enter"]))],onInput:t[11]||(t[11]=function(){return e.resize&&e.resize.apply(e,arguments)}),onCompositionupdate:t[12]||(t[12]=function(){return e.resize&&e.resize.apply(e,arguments)}),onPaste:t[13]||(t[13]=function(){return e.paste&&e.paste.apply(e,arguments)})},null,42,_),[[o.nr,e.newStatus.status]]),e.hasStatusLengthLimit?((0,r.wg)(),(0,r.iD)("p",{key:0,class:(0,i.C_)(["character-counter faint",{error:e.isOverLengthLimit}])},(0,i.zw)(e.charactersLeft),3)):(0,r.kq)("",!0)]})),_:1},8,["modelValue","suggest","placement","newline-on-ctrl-enter","onInput","onStickerUploaded","onStickerUploadFailed","onShown"]),e.disableScopeSelector?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",k,[e.disableVisibilitySelector?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(Z,{key:0,"show-all":e.showAllScopes,"user-default":e.userDefaultScope,"original-scope":e.copyMessageScope,"initial-scope":e.newStatus.visibility,"on-scope-change":e.changeVis},null,8,["show-all","user-default","original-scope","initial-scope","on-scope-change"])),e.postFormats.length>1?((0,r.wg)(),(0,r.iD)("div",S,[(0,r.Wm)(W,{id:"post-content-type",modelValue:e.newStatus.contentType,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.newStatus.contentType=t}),class:"form-control"},{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.postFormats,(function(t){return(0,r.wg)(),(0,r.iD)("option",{key:t,value:t},(0,i.zw)(e.$t('post_status.content_type["'.concat(t,'"]'))),9,j)})),128))]})),_:1},8,["modelValue"])])):(0,r.kq)("",!0),1===e.postFormats.length&&"text/plain"!==e.postFormats[0]?((0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("span",C,(0,i.zw)(e.$t('post_status.content_type["'.concat(e.postFormats[0],'"]'))),1)])):(0,r.kq)("",!0)]))]),e.pollsAvailable?((0,r.wg)(),(0,r.j4)(B,{key:0,ref:"pollForm",visible:e.pollFormVisible,onUpdatePoll:e.setPoll},null,8,["visible","onUpdatePoll"])):(0,r.kq)("",!0),(0,r._)("div",P,[(0,r._)("div",z,[(0,r.Wm)(H,{ref:"mediaUpload",class:"media-upload-icon","drop-files":e.dropFiles,disabled:e.uploadFileLimitReached,onUploading:e.startedUploadingFiles,onUploaded:e.addMediaFile,onUploadFailed:e.uploadFailed,onAllUploaded:e.finishedUploadingFiles},null,8,["drop-files","disabled","onUploading","onUploaded","onUploadFailed","onAllUploaded"]),(0,r._)("button",{class:"emoji-icon button-unstyled",title:e.$t("emoji.add_emoji"),onClick:t[16]||(t[16]=function(){return e.showEmojiPicker&&e.showEmojiPicker.apply(e,arguments)})},[(0,r.Wm)(R,{icon:"smile-beam"})],8,I),e.pollsAvailable?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,i.C_)(["poll-icon button-unstyled",{selected:e.pollFormVisible}]),title:e.$t("polls.add_poll"),onClick:t[17]||(t[17]=function(){return e.togglePollForm&&e.togglePollForm.apply(e,arguments)})},[(0,r.Wm)(R,{icon:"poll-h"})],10,D)):(0,r.kq)("",!0)]),e.posting?((0,r.wg)(),(0,r.iD)("button",x,(0,i.zw)(e.$t("post_status.posting")),1)):e.isOverLengthLimit?((0,r.wg)(),(0,r.iD)("button",T,(0,i.zw)(e.$t("post_status.post")),1)):((0,r.wg)(),(0,r.iD)("button",{key:2,disabled:e.uploadingFiles||e.disableSubmit,class:"btn button-default",onTouchstart:t[18]||(t[18]=(0,o.iM)((function(t){return e.postStatus(t,e.newStatus)}),["stop","prevent"])),onClick:t[19]||(t[19]=(0,o.iM)((function(t){return e.postStatus(t,e.newStatus)}),["stop","prevent"]))},(0,i.zw)(e.$t("post_status.post")),41,$))],512),(0,r.wy)((0,r._)("div",{style:(0,i.j5)({animation:"show"===e.showDropIcon?"fade-in 0.25s":"fade-out 0.5s"}),class:"drop-indicator",onDragleave:t[20]||(t[20]=function(){return e.fileDragStop&&e.fileDragStop.apply(e,arguments)}),onDrop:t[21]||(t[21]=(0,o.iM)((function(){return e.fileDrop&&e.fileDrop.apply(e,arguments)}),["stop"]))},[(0,r.Wm)(R,{icon:e.uploadFileLimitReached?"ban":"upload"},null,8,["icon"])],36),[[o.F8,"hide"!==e.showDropIcon]]),e.error?((0,r.wg)(),(0,r.iD)("div",U,[(0,r.Uk)(" Error: "+(0,i.zw)(e.error)+" ",1),(0,r._)("button",{class:"button-unstyled",onClick:t[22]||(t[22]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,r.Wm)(R,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])):(0,r.kq)("",!0),e.newStatus.files&&e.newStatus.files.length>0?((0,r.wg)(),(0,r.j4)(V,{key:2,class:"attachments",grid:!0,nsfw:!1,attachments:e.newStatus.files,descriptions:e.newStatus.mediaDescriptions,"set-media":function(){return e.$store.dispatch("setMedia",e.newStatus.files)},editable:!0,"edit-attachment":e.editAttachment,"remove-attachment":e.removeMediaFile,"shift-up-attachment":e.newStatus.files.length>1&&e.shiftUpMediaFile,"shift-dn-attachment":e.newStatus.files.length>1&&e.shiftDnMediaFile,onPlay:t[23]||(t[23]=function(t){return e.$emit("mediaplay",e.attachment.id)}),onPause:t[24]||(t[24]=function(t){return e.$emit("mediapause",e.attachment.id)})},null,8,["attachments","descriptions","set-media","edit-attachment","remove-attachment","shift-up-attachment","shift-dn-attachment"])):(0,r.kq)("",!0),e.newStatus.files.length>0&&!e.disableSensitivityCheckbox?((0,r.wg)(),(0,r.iD)("div",M,[(0,r.Wm)(K,{modelValue:e.newStatus.nsfw,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.newStatus.nsfw=t})},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,i.zw)(e.$t("post_status.attachments_sensitive")),1)]})),_:1},8,["modelValue"])])):(0,r.kq)("",!0)],32)],512)}]])},99507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(66252),o=["disabled"];const i={props:{disabled:{type:Boolean},click:{type:Function,default:function(){return Promise.resolve()}}},data:function(){return{progress:!1}},methods:{onClick:function(){var e=this;this.progress=!0,this.click().then((function(){e.progress=!1}))}}},s=(0,n(83744).Z)(i,[["render",function(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("button",{disabled:s.progress||n.disabled,onClick:t[0]||(t[0]=function(){return a.onClick&&a.onClick.apply(a,arguments)})},[s.progress&&e.$slots.progress?(0,r.WI)(e.$slots,"progress",{key:0}):(0,r.WI)(e.$slots,"default",{key:1})],8,o)}]])},72895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(66252),o=n(3577),i={class:"remote-follow"},s=["action"],a=["value"],c=(0,r._)("input",{type:"hidden",name:"profile",value:""},null,-1),l={click:"submit",class:"button-default remote-button"};const u={props:["user"],computed:{subscribeUrl:function(){var e=new URL(this.user.statusnet_profile_url);return"".concat(e.protocol,"//").concat(e.host,"/main/ostatus")}}},d=(0,n(83744).Z)(u,[["render",function(e,t,n,u,d,p){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("form",{method:"POST",action:e.subscribeUrl},[(0,r._)("input",{type:"hidden",name:"nickname",value:e.user.screen_name},null,8,a),c,(0,r._)("button",l,(0,o.zw)(e.$t("user_card.remote_follow")),1)],8,s)])}]])},4078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(66252),o=n(3577),i={key:0,class:"ScopeSelector"},s=["title"],a=["title"],c=["title"],l=["title"],u=n(9382),d=n(84131);u.vI.add(d.FU$,d.g4A,d.byT,d._1N);const p={props:["showAll","userDefault","originalScope","initialScope","onScopeChange"],data:function(){return{currentScope:this.initialScope}},computed:{showNothing:function(){return!(this.showPublic||this.showUnlisted||this.showPrivate||this.showDirect)},showPublic:function(){return"direct"!==this.originalScope&&this.shouldShow("public")},showUnlisted:function(){return"direct"!==this.originalScope&&this.shouldShow("unlisted")},showPrivate:function(){return"direct"!==this.originalScope&&this.shouldShow("private")},showDirect:function(){return this.shouldShow("direct")},css:function(){return{public:{selected:"public"===this.currentScope},unlisted:{selected:"unlisted"===this.currentScope},private:{selected:"private"===this.currentScope},direct:{selected:"direct"===this.currentScope}}}},methods:{shouldShow:function(e){return this.showAll||this.currentScope===e||this.originalScope===e||this.userDefault===e||"direct"===e},changeVis:function(e){this.currentScope=e,this.onScopeChange&&this.onScopeChange(e)}}},h=(0,n(83744).Z)(p,[["render",function(e,t,n,u,d,p){var h=(0,r.up)("FAIcon");return e.showNothing?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i,[e.showDirect?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,o.C_)(["button-unstyled scope",e.css.direct]),title:e.$t("post_status.scope.direct"),type:"button",onClick:t[0]||(t[0]=function(t){return e.changeVis("direct")})},[(0,r.Wm)(h,{icon:"envelope",class:"fa-scale-110 fa-old-padding"})],10,s)):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),e.showPrivate?((0,r.wg)(),(0,r.iD)("button",{key:1,class:(0,o.C_)(["button-unstyled scope",e.css.private]),title:e.$t("post_status.scope.private"),type:"button",onClick:t[1]||(t[1]=function(t){return e.changeVis("private")})},[(0,r.Wm)(h,{icon:"lock",class:"fa-scale-110 fa-old-padding"})],10,a)):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),e.showUnlisted?((0,r.wg)(),(0,r.iD)("button",{key:2,class:(0,o.C_)(["button-unstyled scope",e.css.unlisted]),title:e.$t("post_status.scope.unlisted"),type:"button",onClick:t[2]||(t[2]=function(t){return e.changeVis("unlisted")})},[(0,r.Wm)(h,{icon:"lock-open",class:"fa-scale-110 fa-old-padding"})],10,c)):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),e.showPublic?((0,r.wg)(),(0,r.iD)("button",{key:3,class:(0,o.C_)(["button-unstyled scope",e.css.public]),title:e.$t("post_status.scope.public"),type:"button",onClick:t[3]||(t[3]=function(t){return e.changeVis("public")})},[(0,r.Wm)(h,{icon:"globe",class:"fa-scale-110 fa-old-padding"})],10,l)):(0,r.kq)("",!0)]))}]])},44313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(66252),o=n(3577),i=["disabled","value"],s=n(9382),a=n(84131);s.vI.add(a.ptq);const c={emits:["update:modelValue"],props:["modelValue","disabled","unstyled","kind"]},l=(0,n(83744).Z)(c,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon");return(0,r.wg)(),(0,r.iD)("label",{class:(0,o.C_)(["Select input",{disabled:e.disabled,unstyled:e.unstyled}])},[(0,r._)("select",{disabled:e.disabled,value:e.modelValue,onChange:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value)})},[(0,r.WI)(e.$slots,"default")],40,i),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r.Wm)(l,{class:"select-down-icon",icon:"chevron-down"})],2)}]])},87482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Qt});var r=n(66252),o=n(3577),i=n(49963),s={key:0,class:"alert error"},a={key:1,class:"status-container muted"},c={class:"status-username"},l={key:0,class:"mute-thread"},u={key:1,class:"mute-thread"},d=["title"],p={key:0,class:"pin"},h={class:"faint"},m={class:"right-side faint"},f=["title"],g=["data-tags"],v={key:0,class:"left-side"},w=["href"],b={class:"right-side"},y={key:0,class:"status-heading"},_={class:"heading-name-row"},k={class:"heading-left"},S=["title"],j=["title"],O=["src"],C={class:"heading-right"},P=["title"],z=["title"],I=["title","aria-expanded"],D=["title"],x={key:0,class:"heading-reply-row"},T={key:0,class:"glued-label reply-glued-label"},$=["aria-label"],U={class:"reply-to-text"},M={key:1,class:"reply-to-no-popover"},A={class:"reply-to-text"},L={key:1,class:"glued-label"},E=["aria-label"],F={class:"mentions-text"},R={key:1,class:"heading-edited-row"},N={key:1,class:"replies"},q=["title"],Z={key:1,class:"faint"},W=["onClick"],B={key:0,class:"favs-repeated-users"},H={class:"stats"},V={class:"stat-count"},K={class:"stat-title"},G={class:"stat-number"},Y={class:"stat-count"},J={class:"stat-title"},Q={class:"stat-number"},X={class:"avatar-row"},ee={key:3,class:"status-actions"},te={key:3,class:"gravestone"},ne={class:"left-side"},re={class:"right-side"},oe={class:"deleted-text"},ie={key:4,class:"status-container reply-form"},se=n(4942),ae=n(45578),ce=n.n(ae),le=n(27955),ue=n.n(le),de={class:"ReplyButton"},pe=["title"],he=["href"],me={key:2,class:"action-counter"},fe=n(9382),ge=n(84131);fe.vI.add(ge.Lh7,ge.r8p,ge.NBC);const ve={name:"ReplyButton",props:["status","replying"],computed:{loggedIn:function(){return!!this.$store.state.users.currentUser},remoteInteractionLink:function(){return this.$store.getters.remoteInteractionLink({statusId:this.status.id})}}};var we=n(83744);const be=(0,we.Z)(ve,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("FALayers");return(0,r.wg)(),(0,r.iD)("div",de,[e.loggedIn?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,o.C_)(["button-unstyled interactive",{"-active":e.replying}]),title:e.$t("tool_tip.reply"),onClick:t[0]||(t[0]=(0,i.iM)((function(t){return e.$emit("toggle")}),["prevent"]))},[(0,r.Wm)(u,{class:"fa-old-padding-layer"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{class:"fa-scale-110",icon:"reply"}),e.replying?((0,r.wg)(),(0,r.j4)(l,{key:1,class:"focus-marker",transform:"shrink-6 up-8 right-11",icon:"times"})):((0,r.wg)(),(0,r.j4)(l,{key:0,class:"focus-marker",transform:"shrink-6 up-8 right-11",icon:"plus"}))]})),_:1})],10,pe)):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"button-unstyled interactive",target:"_blank",role:"button",href:e.remoteInteractionLink},[(0,r.Wm)(l,{icon:"reply",class:"fa-scale-110 fa-old-padding",title:e.$t("tool_tip.reply")},null,8,["title"])],8,he)),e.status.replies_count>0?((0,r.wg)(),(0,r.iD)("span",me,(0,o.zw)(e.status.replies_count),1)):(0,r.kq)("",!0)])}]]);var ye={class:"FavoriteButton"},_e=["title"],ke=["href"],Se={key:2,class:"action-counter"},je=n(989),Oe=n(5737);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,se.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fe.vI.add(ge.Tab,Oe.Tab,ge.r8p,ge.Kl4,ge.LEp);const ze={props:["status","loggedIn"],data:function(){return{animated:!1}},methods:{favorite:function(){var e=this;this.status.favorited?this.$store.dispatch("unfavorite",{id:this.status.id}):this.$store.dispatch("favorite",{id:this.status.id}),this.animated=!0,setTimeout((function(){e.animated=!1}),500)}},computed:Pe(Pe({},(0,je.Se)(["mergedConfig"])),{},{remoteInteractionLink:function(){return this.$store.getters.remoteInteractionLink({statusId:this.status.id})}})},Ie=(0,we.Z)(ze,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("FALayers");return(0,r.wg)(),(0,r.iD)("div",ye,[e.loggedIn?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,o.C_)(["button-unstyled interactive",e.status.favorited&&"-favorited"]),title:e.$t("tool_tip.favorite"),onClick:t[0]||(t[0]=(0,i.iM)((function(t){return e.favorite()}),["prevent"]))},[(0,r.Wm)(u,{class:"fa-scale-110 fa-old-padding-layer"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{class:"fa-scale-110",icon:[e.status.favorited?"fas":"far","star"],spin:e.animated},null,8,["icon","spin"]),e.status.favorited?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"active-marker",transform:"shrink-6 up-9 right-12",icon:"check"})):(0,r.kq)("",!0),e.status.favorited?((0,r.wg)(),(0,r.j4)(l,{key:2,class:"focus-marker",transform:"shrink-6 up-9 right-12",icon:"minus"})):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"focus-marker",transform:"shrink-6 up-9 right-12",icon:"plus"}))]})),_:1})],10,_e)):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"button-unstyled interactive",target:"_blank",role:"button",href:e.remoteInteractionLink},[(0,r.Wm)(l,{class:"fa-scale-110 fa-old-padding",title:e.$t("tool_tip.favorite"),icon:["far","star"]},null,8,["title"])],8,ke)),!e.mergedConfig.hidePostStats&&e.status.fave_num>0?((0,r.wg)(),(0,r.iD)("span",Se,(0,o.zw)(e.status.fave_num),1)):(0,r.kq)("",!0)])}]]);var De={class:"reaction-picker-filter"},xe=["placeholder"],Te={class:"reaction-picker"},$e=["title","onClick"],Ue=(0,r._)("div",{class:"reaction-picker-divider"},null,-1),Me=["title","onClick"],Ae=(0,r._)("div",{class:"reaction-bottom-fader"},null,-1),Le=["title"],Ee=n(71002),Fe=n(93433),Re=n(92742),Ne=n.n(Re),qe=n(49874),Ze=n(8312);function We(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fe.vI.add(ge.r8p,ge.NBC,Oe.RKn);const He={props:["status"],data:function(){return{filterWord:"",expanded:!1}},components:{Popover:qe.default},methods:{addReaction:function(e,t,n){var r=this.status.emoji_reactions.find((function(e){return e.name===t}));r&&r.me?this.$store.dispatch("unreactWithEmoji",{id:this.status.id,emoji:t}):this.$store.dispatch("reactWithEmoji",{id:this.status.id,emoji:t}),n()},onShow:function(){this.expanded=!0,this.focusInput()},onClose:function(){this.expanded=!1},focusInput:function(){var e=this;this.$nextTick((function(){var t=e.$el.querySelector("input");t&&t.focus()}))},maybeLocalizedEmojiNamesAndKeywords:function(e){var t=[e.displayText],n=[];return e.displayTextI18n&&t.push(this.$t(e.displayTextI18n.key,e.displayTextI18n.args)),e.annotations&&this.languages.forEach((function(r){var o,i;t.push(null===(o=e.annotations[r])||void 0===o?void 0:o.name),n.push.apply(n,(0,Fe.Z)((null===(i=e.annotations[r])||void 0===i?void 0:i.keywords)||[]))})),{names:t.filter((function(e){return e})),keywords:n.filter((function(e){return e}))}},maybeLocalizedEmojiName:function(e){if(!e.annotations)return e.displayText;if(e.displayTextI18n)return this.$t(e.displayTextI18n.key,e.displayTextI18n.args);var t,n=We(this.languages);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;if(null!==(r=e.annotations[o])&&void 0!==r&&r.name)return e.annotations[o].name}}catch(e){n.e(e)}finally{n.f()}return e.displayText}},computed:{commonEmojis:function(){var e=new Set(["👍","😠","👀","😂","🔥"]);return this.$store.getters.standardEmojiList.filter((function(t){return e.has(t.replacement)}))},languages:function(){return(0,Ze.ensureFinalFallback)(this.$store.getters.mergedConfig.interfaceLanguage)},emojis:function(){var e=this;if(""!==this.filterWord){var t=function(){var t,n=Ne()(e.filterWord.toLowerCase()),r=[],o=We(e.$store.getters.standardEmojiList);try{for(o.s();!(t=o.n()).done;){var i=t.value,s=e.maybeLocalizedEmojiNamesAndKeywords(i).keywords.map((function(e){return e.toLowerCase().indexOf(n)})).filter((function(e){return e>-1})),a=s.length?Math.min.apply(Math,(0,Fe.Z)(s)):-1;a>-1&&(Array.isArray(r[a])||(r[a]=[]),r[a].push(i))}}catch(e){o.e(e)}finally{o.f()}return{v:r.flat()}}();if("object"===(0,Ee.Z)(t))return t.v}return this.$store.getters.standardEmojiList||[]},mergedConfig:function(){return this.$store.getters.mergedConfig}}},Ve=(0,we.Z)(He,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("FALayers"),d=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(d,{trigger:"click",class:"ReactButton",placement:"top",offset:{y:5},"bound-to":{x:"container"},"remove-padding":"","popover-class":"ReactButton popover-default",onShow:e.onShow,onClose:e.onClose},{content:(0,r.w5)((function(n){var s=n.close;return[(0,r._)("div",De,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filterWord=t}),size:"1",placeholder:e.$t("emoji.search_emoji"),onInput:t[1]||(t[1]=function(e){return e.target.composing=!1})},null,40,xe),[[i.nr,e.filterWord]])]),(0,r._)("div",Te,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.commonEmojis,(function(t){return(0,r.wg)(),(0,r.iD)("span",{key:t.replacement,class:"emoji-button",title:e.maybeLocalizedEmojiName(t),onClick:function(n){return e.addReaction(n,t.replacement,s)}},(0,o.zw)(t.replacement),9,$e)})),128)),Ue,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.emojis,(function(t,n){return(0,r.wg)(),(0,r.iD)("span",{key:n,class:"emoji-button",title:e.maybeLocalizedEmojiName(t),onClick:function(n){return e.addReaction(n,t.replacement,s)}},(0,o.zw)(t.replacement),9,Me)})),128)),Ae])]})),trigger:(0,r.w5)((function(){return[(0,r._)("span",{class:"button-unstyled popover-trigger",title:e.$t("tool_tip.add_reaction")},[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{class:"fa-scale-110 fa-old-padding",icon:["far","smile-beam"]}),(0,r.wy)((0,r.Wm)(l,{class:"focus-marker",transform:"shrink-6 up-9 right-17",icon:"plus"},null,512),[[i.F8,!e.expanded]]),(0,r.wy)((0,r.Wm)(l,{class:"focus-marker",transform:"shrink-6 up-9 right-17",icon:"times"},null,512),[[i.F8,e.expanded]])]})),_:1})],8,Le)]})),_:1},8,["onShow","onClose"])}]]);var Ke={class:"RetweetButton"},Ge=["title"],Ye={key:1},Je=["href"],Qe={key:3,class:"no-event"};fe.vI.add(ge.x5v,ge.r8p,ge.Kl4,ge.LEp);const Xe={props:["status","loggedIn","visibility"],data:function(){return{animated:!1}},methods:{retweet:function(){var e=this;this.status.repeated?this.$store.dispatch("unretweet",{id:this.status.id}):this.$store.dispatch("retweet",{id:this.status.id}),this.animated=!0,setTimeout((function(){e.animated=!1}),500)}},computed:{mergedConfig:function(){return this.$store.getters.mergedConfig},remoteInteractionLink:function(){return this.$store.getters.remoteInteractionLink({statusId:this.status.id})}}},et=(0,we.Z)(Xe,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("FALayers");return(0,r.wg)(),(0,r.iD)("div",Ke,["private"!==e.visibility&&"direct"!==e.visibility&&e.loggedIn?((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,o.C_)(["button-unstyled interactive",e.status.repeated&&"-repeated"]),title:e.$t("tool_tip.repeat"),onClick:t[0]||(t[0]=(0,i.iM)((function(t){return e.retweet()}),["prevent"]))},[(0,r.Wm)(u,{class:"fa-old-padding-layer"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{class:"fa-scale-110",icon:"retweet",spin:e.animated},null,8,["spin"]),e.status.repeated?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"active-marker",transform:"shrink-6 up-9 right-12",icon:"check"})):(0,r.kq)("",!0),e.status.repeated?((0,r.wg)(),(0,r.j4)(l,{key:2,class:"focus-marker",transform:"shrink-6 up-9 right-12",icon:"minus"})):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"focus-marker",transform:"shrink-6 up-9 right-12",icon:"plus"}))]})),_:1})],10,Ge)):e.loggedIn?((0,r.wg)(),(0,r.iD)("span",Ye,[(0,r.Wm)(l,{class:"fa-scale-110 fa-old-padding",icon:"lock",title:e.$t("timeline.no_retweet_hint")},null,8,["title"])])):((0,r.wg)(),(0,r.iD)("a",{key:2,class:"button-unstyled interactive",target:"_blank",role:"button",href:e.remoteInteractionLink},[(0,r.Wm)(l,{class:"fa-scale-110 fa-old-padding",icon:"retweet",title:e.$t("tool_tip.repeat")},null,8,["title"])],8,Je)),!e.mergedConfig.hidePostStats&&e.status.repeat_num>0?((0,r.wg)(),(0,r.iD)("span",Qe,(0,o.zw)(e.status.repeat_num),1)):(0,r.kq)("",!0)])}]]);var tt={class:"dropdown-menu"},nt=["onClick"],rt=["onClick"],ot=["onClick"],it=["onClick"],st=["onClick"],at=["onClick"],ct=["onClick"],lt=["onClick"],ut=["href"],dt=["onClick"],pt={class:"button-unstyled popover-trigger"};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}fe.vI.add(ge.cNd,ge.xVw,Oe.xVw,ge.Aq,ge.RP7,ge.EfQ,ge.Xjp,Oe.RrC,ge.qO$,ge.r8p,ge.NBC);const mt={props:["status"],components:{Popover:qe.default},data:function(){return{expanded:!1}},methods:{onShow:function(){this.expanded=!0},onClose:function(){this.expanded=!1},deleteStatus:function(){window.confirm(this.$t("status.delete_confirm"))&&this.$store.dispatch("deleteStatus",{id:this.status.id})},pinStatus:function(){var e=this;this.$store.dispatch("pinStatus",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unpinStatus:function(){var e=this;this.$store.dispatch("unpinStatus",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},muteConversation:function(){var e=this;this.$store.dispatch("muteConversation",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unmuteConversation:function(){var e=this;this.$store.dispatch("unmuteConversation",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},copyLink:function(){var e=this;navigator.clipboard.writeText(this.statusLink).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},bookmarkStatus:function(){var e=this;this.$store.dispatch("bookmark",{id:this.status.id}).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unbookmarkStatus:function(){var e=this;this.$store.dispatch("unbookmark",{id:this.status.id}).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},reportStatus:function(){this.$store.dispatch("openUserReportingModal",{userId:this.status.user.id,statusIds:[this.status.id]})},editStatus:function(){var e=this;this.$store.dispatch("fetchStatusSource",{id:this.status.id}).then((function(t){return e.$store.dispatch("openEditStatusModal",{statusId:e.status.id,subject:t.spoiler_text,statusText:t.text,statusIsSensitive:e.status.nsfw,statusPoll:e.status.poll,statusFiles:(0,Fe.Z)(e.status.attachments),visibility:e.status.visibility,statusContentType:t.content_type})}))},showStatusHistory:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,se.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.status);["attachments","created_at","emojis","text","raw_html","nsfw","poll","summary","summary_raw_html"].forEach((function(t){return delete e[t]})),this.$store.dispatch("openStatusHistoryModal",e)}},computed:{currentUser:function(){return this.$store.state.users.currentUser},canDelete:function(){if(this.currentUser)return this.currentUser.privileges.includes("messages_delete")||this.status.user.id===this.currentUser.id},ownStatus:function(){return this.status.user.id===this.currentUser.id},canPin:function(){return this.ownStatus&&("public"===this.status.visibility||"unlisted"===this.status.visibility)},canMute:function(){return!!this.currentUser},canBookmark:function(){return!!this.currentUser},statusLink:function(){return"".concat(this.$store.state.instance.server).concat(this.$router.resolve({name:"conversation",params:{id:this.status.id}}).href)},isEdited:function(){return null!==this.status.edited_at},editingAvailable:function(){return this.$store.state.instance.editingAvailable}}},ft=(0,we.Z)(mt,[["render",function(e,t,n,s,a,c){var l=(0,r.up)("FAIcon"),u=(0,r.up)("FALayers"),d=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(d,{class:"ExtraButtons",trigger:"click",placement:"top",offset:{y:5},"bound-to":{x:"container"},"remove-padding":"",onShow:e.onShow,onClose:e.onClose},{content:(0,r.w5)((function(n){var s=n.close;return[(0,r._)("div",tt,[e.canMute&&!e.status.thread_muted?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-default dropdown-item dropdown-item-icon",onClick:t[0]||(t[0]=(0,i.iM)((function(){return e.muteConversation&&e.muteConversation.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(l,{"fixed-width":"",icon:"eye-slash"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.mute_conversation")),1)])):(0,r.kq)("",!0),e.canMute&&e.status.thread_muted?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-default dropdown-item dropdown-item-icon",onClick:t[1]||(t[1]=(0,i.iM)((function(){return e.unmuteConversation&&e.unmuteConversation.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(l,{"fixed-width":"",icon:"eye-slash"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.unmute_conversation")),1)])):(0,r.kq)("",!0),!e.status.pinned&&e.canPin?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[2]||(t[2]=(0,i.iM)((function(){return e.pinStatus&&e.pinStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"thumbtack"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.pin")),1)],8,nt)):(0,r.kq)("",!0),e.status.pinned&&e.canPin?((0,r.wg)(),(0,r.iD)("button",{key:3,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[3]||(t[3]=(0,i.iM)((function(){return e.unpinStatus&&e.unpinStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"thumbtack"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.unpin")),1)],8,rt)):(0,r.kq)("",!0),e.canBookmark?((0,r.wg)(),(0,r.iD)(r.HY,{key:4},[e.status.bookmarked?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[4]||(t[4]=(0,i.iM)((function(){return e.bookmarkStatus&&e.bookmarkStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:["far","bookmark"]}),(0,r._)("span",null,(0,o.zw)(e.$t("status.bookmark")),1)],8,ot)),e.status.bookmarked?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[5]||(t[5]=(0,i.iM)((function(){return e.unbookmarkStatus&&e.unbookmarkStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"bookmark"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.unbookmark")),1)],8,it)):(0,r.kq)("",!0)],64)):(0,r.kq)("",!0),e.ownStatus&&e.editingAvailable?((0,r.wg)(),(0,r.iD)("button",{key:5,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[6]||(t[6]=(0,i.iM)((function(){return e.editStatus&&e.editStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"pen"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.edit")),1)],8,st)):(0,r.kq)("",!0),e.isEdited&&e.editingAvailable?((0,r.wg)(),(0,r.iD)("button",{key:6,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[7]||(t[7]=(0,i.iM)((function(){return e.showStatusHistory&&e.showStatusHistory.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"history"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.status_history")),1)],8,at)):(0,r.kq)("",!0),e.canDelete?((0,r.wg)(),(0,r.iD)("button",{key:7,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[8]||(t[8]=(0,i.iM)((function(){return e.deleteStatus&&e.deleteStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"times"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.delete")),1)],8,ct)):(0,r.kq)("",!0),(0,r._)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[9]||(t[9]=(0,i.iM)((function(){return e.copyLink&&e.copyLink.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:"share-alt"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.copy_link")),1)],8,lt),e.status.is_local?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("a",{key:8,class:"button-default dropdown-item dropdown-item-icon",title:"Source",href:e.status.external_url,target:"_blank"},[(0,r.Wm)(l,{"fixed-width":"",icon:"external-link-alt"}),(0,r._)("span",null,(0,o.zw)(e.$t("status.external_source")),1)],8,ut)),(0,r._)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[10]||(t[10]=(0,i.iM)((function(){return e.reportStatus&&e.reportStatus.apply(e,arguments)}),["prevent"])),s]},[(0,r.Wm)(l,{"fixed-width":"",icon:["far","flag"]}),(0,r._)("span",null,(0,o.zw)(e.$t("user_card.report")),1)],8,dt)])]})),trigger:(0,r.w5)((function(){return[(0,r._)("span",pt,[(0,r.Wm)(u,{class:"fa-old-padding-layer"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{class:"fa-scale-110",icon:"ellipsis-h"}),(0,r.wy)((0,r.Wm)(l,{class:"focus-marker",transform:"shrink-6 up-8 right-16",icon:"plus"},null,512),[[i.F8,!e.expanded]]),(0,r.wy)((0,r.Wm)(l,{class:"focus-marker",transform:"shrink-6 up-8 right-16",icon:"times"},null,512),[[i.F8,e.expanded]])]})),_:1})])]})),_:1},8,["onShow","onClose"])}]]);var gt=n(33580),vt=n(62312),wt=n(55432),bt=n(1840),yt=n(33288),_t=n(92820),kt={key:1,class:"status-preview-no-content faint"},St={key:2,class:"status-preview-no-content"},jt=n(13311),Ot=n.n(jt);fe.vI.add(ge.IJ7);const Ct={name:"StatusPopover",props:["statusId"],data:function(){return{error:!1}},computed:{status:function(){return Ot()(this.$store.state.statuses.allStatuses,{id:this.statusId})}},components:{Status:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,87482))})),Popover:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,49874))}))},methods:{enter:function(){var e=this;if(!this.status){if(!this.statusId)return void(this.error=!0);this.$store.dispatch("fetchStatus",this.statusId).then((function(t){return e.error=!1})).catch((function(t){return e.error=!0}))}}},watch:{status:function(e,t){var n=this;e!==t&&this.$nextTick((function(){return n.$refs.popover.updateStyles()}))}}},Pt=(0,we.Z)(Ct,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("Status"),l=(0,r.up)("FAIcon"),u=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(u,{ref:"popover",trigger:"hover","stay-on-click":!0,"popover-class":"popover-default status-popover","bound-to":{x:"container"},onShow:e.enter},{trigger:(0,r.w5)((function(){return[(0,r.WI)(e.$slots,"default")]})),content:(0,r.w5)((function(){return[e.status?((0,r.wg)(),(0,r.j4)(c,{key:0,"is-preview":!0,statusoid:e.status,compact:!0},null,8,["statusoid"])):e.error?((0,r.wg)(),(0,r.iD)("div",kt,(0,o.zw)(e.$t("status.status_unavailable")),1)):((0,r.wg)(),(0,r.iD)("div",St,[(0,r.Wm)(l,{icon:"circle-notch",spin:"",size:"2x"})]))]})),_:3},8,["onShow"])}]]);var zt=n(78873),It={class:"user-list-popover"},Dt={class:"user-list-names"},xt={class:"user-list-screen-name"},Tt=n(42262);fe.vI.add(ge.IJ7);const $t={name:"UserListPopover",props:["users"],components:{RichContent:_t.Z,UnicodeDomainIndicator:Tt.Z,Popover:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,49874))})),UserAvatar:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,62312))}))},computed:{usersCapped:function(){return this.users.slice(0,16)}}},Ut=(0,we.Z)($t,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("UserAvatar"),l=(0,r.up)("RichContent"),u=(0,r.up)("UnicodeDomainIndicator"),d=(0,r.up)("FAIcon"),p=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(p,{trigger:"hover",placement:"top",offset:{y:5}},{trigger:(0,r.w5)((function(){return[(0,r.WI)(e.$slots,"default")]})),content:(0,r.w5)((function(){return[(0,r._)("div",It,[e.users.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.usersCapped,(function(e){return(0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"user-list-row"},[(0,r.Wm)(c,{user:e,class:"avatar-small",compact:!0},null,8,["user"]),(0,r._)("div",Dt,[(0,r.Wm)(l,{class:"username",title:"@"+e.screen_name_ui,html:e.name_html,emoji:e.emoji},null,8,["title","html","emoji"]),(0,r._)("span",xt,(0,o.zw)(e.screen_name_ui),1),(0,r.Wm)(u,{user:e},null,8,["user"])])])})),128)):((0,r.wg)(),(0,r.j4)(d,{key:1,icon:"circle-notch",spin:"",size:"3x"}))])]})),_:3})}]]);var Mt={class:"EmojiReactions"},At=["onClick"],Lt={class:"reaction-emoji"};const Et={name:"EmojiReactions",components:{UserAvatar:vt.default,UserListPopover:Ut},props:["status"],data:function(){return{showAll:!1}},computed:{tooManyReactions:function(){return this.status.emoji_reactions.length>12},emojiReactions:function(){return this.showAll?this.status.emoji_reactions:this.status.emoji_reactions.slice(0,12)},showMoreString:function(){return"+".concat(this.status.emoji_reactions.length-12)},accountsForEmoji:function(){return this.status.emoji_reactions.reduce((function(e,t){return e[t.name]=t.accounts||[],e}),{})},loggedIn:function(){return!!this.$store.state.users.currentUser}},methods:{toggleShowAll:function(){this.showAll=!this.showAll},reactedWith:function(e){return this.status.emoji_reactions.find((function(t){return t.name===e})).me},fetchEmojiReactionsByIfMissing:function(){this.status.emoji_reactions.find((function(e){return!e.accounts}))&&this.$store.dispatch("fetchEmojiReactionsBy",this.status.id)},reactWith:function(e){this.$store.dispatch("reactWithEmoji",{id:this.status.id,emoji:e})},unreact:function(e){this.$store.dispatch("unreactWithEmoji",{id:this.status.id,emoji:e})},emojiOnClick:function(e,t){this.loggedIn&&(this.reactedWith(e)?this.unreact(e):this.reactWith(e))}}},Ft=(0,we.Z)(Et,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("UserListPopover");return(0,r.wg)(),(0,r.iD)("div",Mt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.emojiReactions,(function(n){return(0,r.wg)(),(0,r.j4)(c,{key:n.name,users:e.accountsForEmoji[n.name]},{default:(0,r.w5)((function(){return[(0,r._)("button",{class:(0,o.C_)(["emoji-reaction btn button-default",{"-picked-reaction":e.reactedWith(n.name),"not-clickable":!e.loggedIn}]),onClick:function(t){return e.emojiOnClick(n.name,t)},onMouseenter:t[0]||(t[0]=function(t){return e.fetchEmojiReactionsByIfMissing()})},[(0,r._)("span",Lt,(0,o.zw)(n.name),1),(0,r._)("span",null,(0,o.zw)(n.count),1)],42,At)]})),_:2},1032,["users"])})),128)),e.tooManyReactions?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"emoji-reaction-expand faint",href:"javascript:void(0)",onClick:t[1]||(t[1]=function(){return e.toggleShowAll&&e.toggleShowAll.apply(e,arguments)})},(0,o.zw)(e.showAll?e.$t("general.show_less"):e.showMoreString),1)):(0,r.kq)("",!0)])}]]);var Rt=n(12061),Nt=n(21268),qt=n(20460),Zt=n(4493),Wt=n(95052),Bt=n(67828);function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,se.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fe.vI.add(ge.FU$,ge.g4A,ge.byT,ge._1N,ge.NBC,ge.x5v,ge.Lh7,ge.CPW,ge.Tab,ge.RKn,ge.cNd,ge.Aq,ge.Mdf,ge.RP7,ge.mTx,ge.ptq,ge.cLY);var Kt,Gt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yt=function(e,t,n){var r=Gt(t),o="controlledSet".concat(r),i="uncontrolled".concat(r);e[o]?e[o](n):e[i]=n};const Jt={name:"Status",components:{ReplyButton:be,FavoriteButton:Ie,ReactButton:Ve,RetweetButton:et,ExtraButtons:ft,PostStatusForm:gt.Z,UserAvatar:vt.default,AvatarList:wt.Z,Timeago:bt.Z,StatusPopover:Pt,UserListPopover:Ut,EmojiReactions:Ft,StatusContent:yt.Z,RichContent:_t.Z,MentionLink:qt.Z,MentionsLine:Nt.Z,UserPopover:zt.default,UserLink:Rt.Z},props:["statusoid","expandable","inConversation","focused","highlight","compact","replies","isPreview","noHeading","inlineExpanded","showPinned","inProfile","profileUserId","simpleTree","controlledThreadDisplayStatus","controlledToggleThreadDisplay","showOtherRepliesAsButton","controlledShowingTall","controlledToggleShowingTall","controlledExpandingSubject","controlledToggleExpandingSubject","controlledShowingLongSubject","controlledToggleShowingLongSubject","controlledReplying","controlledToggleReplying","controlledMediaPlaying","controlledSetMediaPlaying","dive"],data:function(){return{uncontrolledReplying:!1,unmuted:!1,userExpanded:!1,uncontrolledMediaPlaying:[],suspendable:!0,error:null,headTailLinks:null}},computed:Vt(Vt({},(Kt=["replying","mediaPlaying"],Kt.reduce((function(e,t){var n=Gt(t),r="controlledToggle".concat(n),o="controlled".concat(n),i="uncontrolled".concat(n);return e[t]=function(){return void 0===this.$data[r]&&void 0===this.$props[r]||!this[r]?this[i]:this[o]},e}),{}))),{},{muteWords:function(){return this.mergedConfig.muteWords},showReasonMutedThread:function(){return(this.status.thread_muted||this.status.reblog&&this.status.reblog.thread_muted)&&!this.inConversation},repeaterClass:function(){var e=this.statusoid.user;return(0,Wt.M)(e)},userClass:function(){var e=this.retweet?this.statusoid.retweeted_status.user:this.statusoid.user;return(0,Wt.M)(e)},deleted:function(){return this.statusoid.deleted},repeaterStyle:function(){var e=this.statusoid.user,t=this.mergedConfig.highlight;return(0,Wt.q)(t[e.screen_name])},userStyle:function(){if(!this.noHeading){var e=this.retweet?this.statusoid.retweeted_status.user:this.statusoid.user,t=this.mergedConfig.highlight;return(0,Wt.q)(t[e.screen_name])}},userProfileLink:function(){return this.generateUserProfileLink(this.status.user.id,this.status.user.screen_name)},replyProfileLink:function(){if(this.isReply){var e=this.$store.getters.findUser(this.status.in_reply_to_user_id);return e?e.statusnet_profile_url:"NOT_FOUND"}},retweet:function(){return!!this.statusoid.retweeted_status},retweeterUser:function(){return this.statusoid.user},retweeter:function(){return this.statusoid.user.name||this.statusoid.user.screen_name_ui},retweeterHtml:function(){return this.statusoid.user.name},retweeterProfileLink:function(){return this.generateUserProfileLink(this.statusoid.user.id,this.statusoid.user.screen_name)},status:function(){return this.retweet?this.statusoid.retweeted_status:this.statusoid},statusFromGlobalRepository:function(){return this.$store.state.statuses.allStatusesObject[this.status.id]},loggedIn:function(){return!!this.currentUser},muteWordHits:function(){return(0,Bt.u)(this.status,this.muteWords)},rtBotStatus:function(){return this.statusoid.user.bot},botStatus:function(){return this.status.user.bot},botIndicator:function(){return this.botStatus&&!this.hideBotIndication},rtBotIndicator:function(){return this.rtBotStatus&&!this.hideBotIndication},mentionsLine:function(){var e=this;if(!this.headTailLinks)return[];var t=new Set(this.headTailLinks.writtenMentions.map((function(e){return e.url})));return this.status.attentions.filter((function(n){return n.id!==e.status.in_reply_to_user_id&&n.statusnet_profile_url!==e.status.user.statusnet_profile_url&&!t.has(n.statusnet_profile_url)})).map((function(e){return{url:e.statusnet_profile_url,content:e.screen_name,userId:e.id}}))},hasMentionsLine:function(){return this.mentionsLine.length>0},muted:function(){if(this.statusoid.user.id===this.currentUser.id)return!1;var e=this.userIsMuted||status.thread_muted||this.muteWordHits.length>0||this.muteBotStatuses&&this.botStatus&&!this.compact;return!this.unmuted&&!this.shouldNotMute&&e},userIsMuted:function(){if(this.statusoid.user.id===this.currentUser.id)return!1;var e=this.status,t=e.reblog,n=this.$store.getters.relationship(e.user.id),r=t&&this.$store.getters.relationship(t.user.id);return e.muted||t&&t.muted||n.muting||r&&r.muting},shouldNotMute:function(){var e=this.status,t=e.reblog;return(this.inProfile&&(!t&&e.user.id===this.profileUserId||t&&t.user.id===this.profileUserId)||this.inConversation&&e.thread_muted)&&!this.muteWordHits.length>0},hideMutedUsers:function(){return this.mergedConfig.hideMutedPosts},hideMutedThreads:function(){return this.mergedConfig.hideMutedThreads},hideFilteredStatuses:function(){return this.mergedConfig.hideFilteredStatuses},hideWordFilteredPosts:function(){return this.mergedConfig.hideWordFilteredPosts},hideStatus:function(){return!this.shouldNotMute&&(this.muted&&this.hideFilteredStatuses||this.userIsMuted&&this.hideMutedUsers||this.status.thread_muted&&this.hideMutedThreads||this.muteWordHits.length>0&&this.hideWordFilteredPosts)},isFocused:function(){return!!this.focused||!!this.inConversation&&this.status.id===this.highlight},isReply:function(){return!(!this.status.in_reply_to_status_id||!this.status.in_reply_to_user_id)},replyToName:function(){if(this.status.in_reply_to_screen_name)return this.status.in_reply_to_screen_name;var e=this.$store.getters.findUser(this.status.in_reply_to_user_id);return e&&e.screen_name_ui},replySubject:function(){if(!this.status.summary)return"";var e=ue()(this.status.summary),t=this.mergedConfig.subjectLineBehavior,n=e.match(/^re[: ]/i);return"noop"!==t&&n||"masto"===t?e:"email"===t?"re: ".concat(e):"noop"===t?"":void 0},combinedFavsAndRepeatsUsers:function(){var e=[].concat(this.statusFromGlobalRepository.favoritedBy,this.statusFromGlobalRepository.rebloggedBy);return ce()(e,"id")},tags:function(){return this.status.tags.filter((function(e){return e.hasOwnProperty("name")})).map((function(e){return e.name})).join(" ")},hidePostStats:function(){return this.mergedConfig.hidePostStats},muteBotStatuses:function(){return this.mergedConfig.muteBotStatuses},hideBotIndication:function(){return this.mergedConfig.hideBotIndication},currentUser:function(){return this.$store.state.users.currentUser},betterShadow:function(){return this.$store.state.interface.browserSupport.cssFilter},mergedConfig:function(){return this.$store.getters.mergedConfig},isSuspendable:function(){return!this.replying&&0===this.mediaPlaying.length},inThreadForest:function(){return!!this.controlledThreadDisplayStatus},threadShowing:function(){return"showing"===this.controlledThreadDisplayStatus},visibilityLocalized:function(){return this.$i18n.t("general.scope_in_timeline."+this.status.visibility)},isEdited:function(){return null!==this.status.edited_at},editingAvailable:function(){return this.$store.state.instance.editingAvailable}}),methods:{visibilityIcon:function(e){switch(e){case"private":return"lock";case"unlisted":return"lock-open";case"direct":return"envelope";default:return"globe"}},showError:function(e){this.error=e},clearError:function(){this.error=void 0},toggleReplying:function(){var e,t,n,r;e=this,t=Gt("replying"),n="controlledToggle".concat(t),r="uncontrolled".concat(t),e[n]?e[n]():e[r]=!e[r]},gotoOriginal:function(e){this.inConversation&&this.$emit("goto",e)},toggleExpanded:function(){this.$emit("toggleExpanded")},toggleMute:function(){this.unmuted=!this.unmuted},toggleUserExpanded:function(){this.userExpanded=!this.userExpanded},generateUserProfileLink:function(e,t){return(0,Zt.Z)(e,t,this.$store.state.instance.restrictedNicknames)},addMediaPlaying:function(e){Yt(this,"mediaPlaying",this.mediaPlaying.concat(e))},removeMediaPlaying:function(e){Yt(this,"mediaPlaying",this.mediaPlaying.filter((function(t){return t!==e})))},setHeadTailLinks:function(e){this.headTailLinks=e},toggleThreadDisplay:function(){this.controlledToggleThreadDisplay()},scrollIfHighlighted:function(e){var t=e;if(this.status.id===t){var n=this.$el.getBoundingClientRect();n.top<100||n.height>=window.innerHeight-50?window.scrollBy(0,n.top-100):n.bottom>window.innerHeight-50&&window.scrollBy(0,n.bottom-window.innerHeight+50)}}},watch:{highlight:function(e){this.scrollIfHighlighted(e)},"status.repeat_num":function(e){this.isFocused&&this.statusFromGlobalRepository.rebloggedBy&&this.statusFromGlobalRepository.rebloggedBy.length!==e&&this.$store.dispatch("fetchRepeats",this.status.id)},"status.fave_num":function(e){this.isFocused&&this.statusFromGlobalRepository.favoritedBy&&this.statusFromGlobalRepository.favoritedBy.length!==e&&this.$store.dispatch("fetchFavs",this.status.id)},isSuspendable:function(e){this.suspendable=e}}},Qt=(0,we.Z)(Jt,[["render",function(e,t,n,se,ae,ce){var le=(0,r.up)("FAIcon"),ue=(0,r.up)("user-link"),de=(0,r.up)("UserAvatar"),pe=(0,r.up)("RichContent"),he=(0,r.up)("router-link"),me=(0,r.up)("UserPopover"),fe=(0,r.up)("Timeago"),ge=(0,r.up)("StatusPopover"),ve=(0,r.up)("MentionLink"),we=(0,r.up)("MentionsLine"),be=(0,r.up)("i18n-t"),ye=(0,r.up)("StatusContent"),_e=(0,r.up)("UserListPopover"),ke=(0,r.up)("AvatarList"),Se=(0,r.up)("EmojiReactions"),je=(0,r.up)("reply-button"),Oe=(0,r.up)("retweet-button"),Ce=(0,r.up)("favorite-button"),Pe=(0,r.up)("ReactButton"),ze=(0,r.up)("extra-buttons"),Ie=(0,r.up)("PostStatusForm");return e.hideStatus?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,ref:"root",class:(0,o.C_)(["Status",[{"-focused":e.isFocused},{"-conversation":e.inlineExpanded}]])},[e.error?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Uk)((0,o.zw)(e.error)+" ",1),(0,r._)("span",{class:"fa-scale-110 fa-old-padding",onClick:t[0]||(t[0]=function(){return e.clearError&&e.clearError.apply(e,arguments)})},[(0,r.Wm)(le,{icon:"times"})])])):(0,r.kq)("",!0),e.muted&&!e.isPreview?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("small",c,[e.muted&&e.retweet?((0,r.wg)(),(0,r.j4)(le,{key:0,class:"fa-scale-110 fa-old-padding repeat-icon",icon:"retweet"})):(0,r.kq)("",!0),(0,r.Wm)(ue,{user:e.status.user,at:!1},null,8,["user"])]),e.showReasonMutedThread?((0,r.wg)(),(0,r.iD)("small",l,(0,o.zw)(e.$t("status.thread_muted")),1)):(0,r.kq)("",!0),e.showReasonMutedThread&&e.muteWordHits.length>0?((0,r.wg)(),(0,r.iD)("small",u,(0,o.zw)(e.$t("status.thread_muted_and_words")),1)):(0,r.kq)("",!0),(0,r._)("small",{class:"mute-words",title:e.muteWordHits.join(", ")},(0,o.zw)(e.muteWordHits.join(", ")),9,d),(0,r._)("button",{class:"unmute button-unstyled",onClick:t[1]||(t[1]=(0,i.iM)((function(){return e.toggleMute&&e.toggleMute.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(le,{icon:"eye-slash",class:"fa-scale-110 fa-old-padding"})])])):((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[e.showPinned?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(le,{icon:"thumbtack",class:"faint"}),(0,r._)("span",h,(0,o.zw)(e.$t("status.pinned")),1)])):(0,r.kq)("",!0),!e.retweet||e.noHeading||e.inConversation?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,o.C_)([[e.repeaterClass,{highlighted:e.repeaterStyle}],"status-container repeat-info"]),style:(0,o.j5)([e.repeaterStyle])},[e.retweet?((0,r.wg)(),(0,r.j4)(de,{key:0,class:"left-side repeater-avatar",bot:e.rtBotIndicator,"better-shadow":e.betterShadow,user:e.statusoid.user},null,8,["bot","better-shadow","user"])):(0,r.kq)("",!0),(0,r._)("div",m,[(0,r._)("span",{class:"status-username repeater-name",title:e.retweeter},[e.retweeterHtml?((0,r.wg)(),(0,r.j4)(he,{key:0,to:e.retweeterProfileLink},{default:(0,r.w5)((function(){return[(0,r.Wm)(pe,{html:e.retweeterHtml,emoji:e.retweeterUser.emoji},null,8,["html","emoji"])]})),_:1},8,["to"])):((0,r.wg)(),(0,r.j4)(he,{key:1,to:e.retweeterProfileLink},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.retweeter),1)]})),_:1},8,["to"]))],8,f),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r.Wm)(le,{icon:"retweet",class:"repeat-icon",title:e.$t("tool_tip.repeat")},null,8,["title"]),(0,r.Uk)(" "+(0,o.zw)(e.$t("timeline.repeated")),1)])],6)),e.deleted?((0,r.wg)(),(0,r.iD)("div",te,[(0,r._)("div",ne,[(0,r.Wm)(de,{class:"post-avatar",compact:e.compact,bot:e.botIndicator},null,8,["compact","bot"])]),(0,r._)("div",re,[(0,r._)("div",oe,(0,o.zw)(e.$t("status.status_deleted")),1),e.replying?((0,r.wg)(),(0,r.j4)(je,{key:0,replying:e.replying,status:e.status,onToggle:e.toggleReplying},null,8,["replying","status","onToggle"])):(0,r.kq)("",!0)])])):((0,r.wg)(),(0,r.iD)("div",{key:2,class:(0,o.C_)([[e.userClass,{highlighted:e.userStyle,"-repeat":e.retweet&&!e.inConversation}],"status-container"]),style:(0,o.j5)([e.userStyle]),"data-tags":e.tags},[e.noHeading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("a",{href:e.$router.resolve(e.userProfileLink).href,onClick:t[2]||(t[2]=(0,i.iM)((function(){}),["prevent"]))},[(0,r.Wm)(me,{"user-id":e.status.user.id,"overlay-centers":!0},{default:(0,r.w5)((function(){return[(0,r.Wm)(de,{class:"post-avatar",bot:e.botIndicator,compact:e.compact,"better-shadow":e.betterShadow,user:e.status.user},null,8,["bot","compact","better-shadow","user"])]})),_:1},8,["user-id"])],8,w)])),(0,r._)("div",b,[e.noHeading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",_,[(0,r._)("div",k,[e.status.user.name_html?((0,r.wg)(),(0,r.iD)("h4",{key:0,class:"status-username",title:e.status.user.name},[(0,r.Wm)(pe,{html:e.status.user.name,emoji:e.status.user.emoji},null,8,["html","emoji"])],8,S)):((0,r.wg)(),(0,r.iD)("h4",{key:1,class:"status-username",title:e.status.user.name},(0,o.zw)(e.status.user.name),9,j)),(0,r.Wm)(ue,{class:"account-name",title:e.status.user.screen_name_ui,user:e.status.user,at:!1},null,8,["title","user"]),e.status.user&&e.status.user.favicon?((0,r.wg)(),(0,r.iD)("img",{key:2,class:"status-favicon",src:e.status.user.favicon},null,8,O)):(0,r.kq)("",!0)]),(0,r._)("span",C,[(0,r.Wm)(he,{class:"timeago faint-link",to:{name:"conversation",params:{id:e.status.id}}},{default:(0,r.w5)((function(){return[(0,r.Wm)(fe,{time:e.status.created_at,"auto-update":60},null,8,["time"])]})),_:1},8,["to"]),e.status.visibility?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"visibility-icon",title:e.visibilityLocalized},[(0,r.Wm)(le,{"fixed-width":"",class:"fa-scale-110",icon:e.visibilityIcon(e.status.visibility)},null,8,["icon"])],8,P)):(0,r.kq)("",!0),e.expandable&&!e.isPreview?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-unstyled",title:e.$t("status.expand"),onClick:t[3]||(t[3]=(0,i.iM)((function(){return e.toggleExpanded&&e.toggleExpanded.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(le,{"fixed-width":"",class:"fa-scale-110",icon:"plus-square"})],8,z)):(0,r.kq)("",!0),e.unmuted?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-unstyled",onClick:t[4]||(t[4]=(0,i.iM)((function(){return e.toggleMute&&e.toggleMute.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(le,{"fixed-width":"",icon:"eye-slash",class:"fa-scale-110"})])):(0,r.kq)("",!0),e.inThreadForest&&e.replies&&e.replies.length&&!e.simpleTree?((0,r.wg)(),(0,r.iD)("button",{key:3,class:"button-unstyled",title:e.threadShowing?e.$t("status.thread_hide"):e.$t("status.thread_show"),"aria-expanded":e.threadShowing?"true":"false",onClick:t[5]||(t[5]=(0,i.iM)((function(){return e.toggleThreadDisplay&&e.toggleThreadDisplay.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(le,{"fixed-width":"",class:"fa-scale-110",icon:e.threadShowing?"chevron-up":"chevron-down"},null,8,["icon"])],8,I)):(0,r.kq)("",!0),e.dive&&!e.simpleTree?((0,r.wg)(),(0,r.iD)("button",{key:4,class:"button-unstyled",title:e.$t("status.show_only_conversation_under_this"),onClick:t[6]||(t[6]=(0,i.iM)((function(){return e.dive&&e.dive.apply(e,arguments)}),["prevent"]))},[(0,r.Wm)(le,{"fixed-width":"",class:"fa-scale-110",icon:"angle-double-right"})],8,D)):(0,r.kq)("",!0)])]),e.isReply||e.hasMentionsLine?((0,r.wg)(),(0,r.iD)("div",x,[e.isReply?((0,r.wg)(),(0,r.iD)("span",T,[e.isPreview?((0,r.wg)(),(0,r.iD)("span",M,[(0,r._)("span",A,(0,o.zw)(e.$t("status.reply_to")),1)])):((0,r.wg)(),(0,r.j4)(ge,{key:0,"status-id":e.status.parent_visible&&e.status.in_reply_to_status_id,class:(0,o.C_)(["reply-to-popover",{"-strikethrough":!e.status.parent_visible}]),style:{"min-width":"0"}},{default:(0,r.w5)((function(){return[(0,r._)("button",{class:"button-unstyled reply-to","aria-label":e.$t("tool_tip.reply"),onClick:t[7]||(t[7]=(0,i.iM)((function(t){return e.gotoOriginal(e.status.in_reply_to_status_id)}),["prevent"]))},[(0,r.Wm)(le,{class:"fa-scale-110 fa-old-padding",icon:"reply",flip:"horizontal"}),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r._)("span",U,(0,o.zw)(e.$t("status.reply_to")),1)],8,$)]})),_:1},8,["status-id","class"])),(0,r.Wm)(ve,{content:e.replyToName,url:e.replyProfileLink,"user-id":e.status.in_reply_to_user_id,"user-screen-name":e.status.in_reply_to_screen_name},null,8,["content","url","user-id","user-screen-name"])])):(0,r.kq)("",!0),e.hasMentionsLine?((0,r.wg)(),(0,r.iD)("span",L,[(0,r._)("span",{class:"mentions","aria-label":e.$t("tool_tip.mentions"),onClick:t[8]||(t[8]=(0,i.iM)((function(t){return e.gotoOriginal(e.status.in_reply_to_status_id)}),["prevent"]))},[(0,r._)("span",F,(0,o.zw)(e.$t("status.mentions")),1)],8,E),e.hasMentionsLine?((0,r.wg)(),(0,r.j4)(we,{key:0,mentions:e.mentionsLine.slice(0,1),class:"mentions-line-first"},null,8,["mentions"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),e.hasMentionsLine?((0,r.wg)(),(0,r.j4)(we,{key:2,mentions:e.mentionsLine.slice(1),class:"mentions-line"},null,8,["mentions"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.isEdited&&e.editingAvailable&&!e.isPreview?((0,r.wg)(),(0,r.iD)("div",R,[(0,r.Wm)(be,{keypath:"status.edited_at",tag:"span"},{time:(0,r.w5)((function(){return[(0,r.Wm)(fe,{"template-key":"time.in_past",time:e.status.edited_at,"auto-update":60,"long-format":!0},null,8,["time"])]})),_:1})])):(0,r.kq)("",!0)])),(0,r.Wm)(ye,{ref:"content",status:e.status,"no-heading":e.noHeading,highlight:e.highlight,focused:e.isFocused,"controlled-showing-tall":e.controlledShowingTall,"controlled-expanding-subject":e.controlledExpandingSubject,"controlled-showing-long-subject":e.controlledShowingLongSubject,"controlled-toggle-showing-tall":e.controlledToggleShowingTall,"controlled-toggle-expanding-subject":e.controlledToggleExpandingSubject,"controlled-toggle-showing-long-subject":e.controlledToggleShowingLongSubject,onMediaplay:t[9]||(t[9]=function(t){return e.addMediaPlaying(t)}),onMediapause:t[10]||(t[10]=function(t){return e.removeMediaPlaying(t)}),onParseReady:e.setHeadTailLinks},null,8,["status","no-heading","highlight","focused","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","onParseReady"]),e.inConversation&&!e.isPreview&&e.replies&&e.replies.length?((0,r.wg)(),(0,r.iD)("div",N,[e.showOtherRepliesAsButton&&e.replies.length>1?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-unstyled -link faint",title:e.$tc("status.ancestor_follow",e.replies.length-1,{numReplies:e.replies.length-1}),onClick:t[11]||(t[11]=(0,i.iM)((function(){return e.dive&&e.dive.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.$tc("status.replies_list_with_others",e.replies.length-1,{numReplies:e.replies.length-1})),9,q)):((0,r.wg)(),(0,r.iD)("span",Z,(0,o.zw)(e.$t("status.replies_list")),1)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.replies,(function(t){return(0,r.wg)(),(0,r.j4)(ge,{key:t.id,"status-id":t.id},{default:(0,r.w5)((function(){return[(0,r._)("button",{class:"button-unstyled -link reply-link",onClick:(0,i.iM)((function(n){return e.gotoOriginal(t.id)}),["prevent"])},(0,o.zw)(t.name),9,W)]})),_:2},1032,["status-id"])})),128))])):(0,r.kq)("",!0),(0,r.Wm)(i.uT,{name:"fade"},{default:(0,r.w5)((function(){return[!e.hidePostStats&&e.isFocused&&e.combinedFavsAndRepeatsUsers.length>0?((0,r.wg)(),(0,r.iD)("div",B,[(0,r._)("div",H,[e.statusFromGlobalRepository.rebloggedBy&&e.statusFromGlobalRepository.rebloggedBy.length>0?((0,r.wg)(),(0,r.j4)(_e,{key:0,users:e.statusFromGlobalRepository.rebloggedBy},{default:(0,r.w5)((function(){return[(0,r._)("div",V,[(0,r._)("a",K,(0,o.zw)(e.$t("status.repeats")),1),(0,r._)("div",G,(0,o.zw)(e.statusFromGlobalRepository.rebloggedBy.length),1)])]})),_:1},8,["users"])):(0,r.kq)("",!0),e.statusFromGlobalRepository.favoritedBy&&e.statusFromGlobalRepository.favoritedBy.length>0?((0,r.wg)(),(0,r.j4)(_e,{key:1,users:e.statusFromGlobalRepository.favoritedBy},{default:(0,r.w5)((function(){return[(0,r._)("div",Y,[(0,r._)("a",J,(0,o.zw)(e.$t("status.favorites")),1),(0,r._)("div",Q,(0,o.zw)(e.statusFromGlobalRepository.favoritedBy.length),1)])]})),_:1},8,["users"])):(0,r.kq)("",!0),(0,r._)("div",X,[(0,r.Wm)(ke,{users:e.combinedFavsAndRepeatsUsers},null,8,["users"])])])])):(0,r.kq)("",!0)]})),_:1}),!e.mergedConfig.emojiReactionsOnTimeline&&!e.isFocused||e.noHeading||e.isPreview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(Se,{key:2,status:e.status},null,8,["status"])),e.noHeading||e.isPreview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ee,[(0,r.Wm)(je,{replying:e.replying,status:e.status,onToggle:e.toggleReplying},null,8,["replying","status","onToggle"]),(0,r.Wm)(Oe,{visibility:e.status.visibility,"logged-in":e.loggedIn,status:e.status},null,8,["visibility","logged-in","status"]),(0,r.Wm)(Ce,{"logged-in":e.loggedIn,status:e.status},null,8,["logged-in","status"]),e.loggedIn?((0,r.wg)(),(0,r.j4)(Pe,{key:0,status:e.status},null,8,["status"])):(0,r.kq)("",!0),(0,r.Wm)(ze,{status:e.status,onOnError:e.showError,onOnSuccess:e.clearError},null,8,["status","onOnError","onOnSuccess"])]))])],14,g)),e.replying?((0,r.wg)(),(0,r.iD)("div",ie,[(0,r.Wm)(Ie,{class:"reply-body","reply-to":e.status.id,attentions:e.status.attentions,"replied-user":e.status.user,"copy-message-scope":e.status.visibility,subject:e.replySubject,onPosted:e.toggleReplying},null,8,["reply-to","attentions","replied-user","copy-message-scope","subject","onPosted"])])):(0,r.kq)("",!0)],64))],2))}]])},33288:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var r=n(66252),o=n(3577),i={key:0},s={key:1},a={key:3,class:"link-preview media-body"},c=n(4942),l=n(74722),u=["title"],d={class:"option-result-label"},p={class:"result-percentage"},h=["onClick"],m=["disabled","value"],f=["disabled","value"],g={class:"option-vote"},v={class:"footer faint"},w=["disabled"],b={class:"total"},y=n(35161),_=n.n(y),k=n(84486),S=n.n(k),j=n(1840),O=n(92820);const C={name:"Poll",props:["basePoll","emoji"],components:{Timeago:j.Z,RichContent:O.Z},data:function(){return{loading:!1,choices:[]}},created:function(){this.$store.state.polls.pollsObject[this.pollId]||this.$store.dispatch("mergeOrAddPoll",this.basePoll),this.$store.dispatch("trackPoll",this.pollId)},unmounted:function(){this.$store.dispatch("untrackPoll",this.pollId)},computed:{pollId:function(){return this.basePoll.id},poll:function(){return this.$store.state.polls.pollsObject[this.pollId]||{}},options:function(){return this.poll&&this.poll.options||[]},expiresAt:function(){return this.poll&&this.poll.expires_at||0},expired:function(){return this.poll&&this.poll.expired||!1},loggedIn:function(){return this.$store.state.users.currentUser},showResults:function(){return this.poll.voted||this.expired||!this.loggedIn},totalVotesCount:function(){return this.poll.votes_count},containerClass:function(){return{loading:this.loading}},choiceIndices:function(){return this.choices.map((function(e,t){return e&&t})).filter((function(e){return"number"==typeof e}))},isDisabled:function(){var e=0===this.choiceIndices.length;return this.loading||e}},methods:{percentageForOption:function(e){return 0===this.totalVotesCount?0:Math.round(e/this.totalVotesCount*100)},resultTitle:function(e){return"".concat(e.votes_count,"/").concat(this.totalVotesCount," ").concat(this.$t("polls.votes"))},fetchPoll:function(){this.$store.dispatch("refreshPoll",{id:this.statusId,pollId:this.poll.id})},activateOption:function(e){var t=this.$el.querySelectorAll("input"),n=this.$el.querySelector('input[value="'.concat(e,'"]'));this.poll.multiple?n.checked=!n.checked:(S()(t,(function(e){e.checked=!1})),n.checked=!0),this.choices=_()(t,(function(e){return e.checked}))},optionId:function(e){return"poll".concat(this.poll.id,"-").concat(e)},vote:function(){var e=this;0!==this.choiceIndices.length&&(this.loading=!0,this.$store.dispatch("votePoll",{id:this.statusId,pollId:this.poll.id,choices:this.choiceIndices}).then((function(t){e.loading=!1})))}}};var P=n(83744);const z=(0,P.Z)(C,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("RichContent"),l=(0,r.up)("Timeago"),y=(0,r.up)("i18n-t");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["poll",e.containerClass])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(function(t,n){return(0,r.wg)(),(0,r.iD)("div",{key:n,class:"poll-option"},[e.showResults?((0,r.wg)(),(0,r.iD)("div",{key:0,title:e.resultTitle(t),class:"option-result"},[(0,r._)("div",d,[(0,r._)("span",p,(0,o.zw)(e.percentageForOption(t.votes_count))+"% ",1),(0,r.Wm)(c,{html:t.title_html,"handle-links":!1,emoji:e.emoji},null,8,["html","emoji"])]),(0,r._)("div",{class:"result-fill",style:(0,o.j5)({width:"".concat(e.percentageForOption(t.votes_count),"%")})},null,4)],8,u)):((0,r.wg)(),(0,r.iD)("div",{key:1,onClick:function(t){return e.activateOption(n)}},[e.poll.multiple?((0,r.wg)(),(0,r.iD)("input",{key:0,type:"checkbox",disabled:e.loading,value:n},null,8,m)):((0,r.wg)(),(0,r.iD)("input",{key:1,type:"radio",disabled:e.loading,value:n},null,8,f)),(0,r._)("label",g,[(0,r.Wm)(c,{html:t.title_html,"handle-links":!1,emoji:e.emoji},null,8,["html","emoji"])])],8,h))])})),128)),(0,r._)("div",v,[e.showResults?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn button-default poll-vote-button",type:"button",disabled:e.isDisabled,onClick:t[0]||(t[0]=function(){return e.vote&&e.vote.apply(e,arguments)})},(0,o.zw)(e.$t("polls.vote")),9,w)),(0,r._)("div",b,["number"==typeof e.poll.voters_count?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)((0,o.zw)(e.$tc("polls.people_voted_count",e.poll.voters_count,{count:e.poll.voters_count}))+" ·  ",1)],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(e.$tc("polls.votes_count",e.poll.votes_count,{count:e.poll.votes_count}))+" ·  ",1)],64))]),(0,r._)("span",null,[(0,r.Wm)(y,{scope:"global",keypath:e.expired?"polls.expired":"polls.expires_in"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{time:e.expiresAt,"auto-update":60,"now-threshold":0},null,8,["time"])]})),_:1},8,["keypath"])])])],2)}]]);var I=n(99822),D=n(49963),x={class:"body"},T=n(58394),$=n(989),U=n(9382),M=n(84131);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}U.vI.add(M.gMD,M.Xig,M.VmB,M.nNP,M.Mm7);const L={name:"StatusContent",props:["compact","status","focused","noHeading","fullContent","singleLine","showingTall","expandingSubject","showingLongSubject","toggleShowingTall","toggleExpandingSubject","toggleShowingLongSubject"],data:function(){return{postLength:this.status.text.length,parseReadyDone:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({localCollapseSubjectDefault:function(){return this.mergedConfig.collapseMessageWithSubject},tallStatus:function(){return!this.singleLine&&!this.compact&&this.status.raw_html.split(/<p|<br/).length+this.postLength/80>20},longSubject:function(){return this.status.summary.length>240},mightHideBecauseSubject:function(){return!!this.status.summary&&this.localCollapseSubjectDefault},mightHideBecauseTall:function(){return this.tallStatus&&!(this.status.summary&&this.localCollapseSubjectDefault)},hideSubjectStatus:function(){return this.mightHideBecauseSubject&&!this.expandingSubject},hideTallStatus:function(){return this.mightHideBecauseTall&&!this.showingTall},showingMore:function(){return this.mightHideBecauseTall&&this.showingTall||this.mightHideBecauseSubject&&this.expandingSubject},attachmentTypes:function(){return this.status.attachments.map((function(e){return T.Z.fileType(e.mimetype)}))}},(0,$.Se)(["mergedConfig"])),components:{RichContent:O.Z},mounted:function(){var e=this;this.status.attentions&&this.status.attentions.forEach((function(t){var n=t.id;e.$store.dispatch("fetchUserIfMissing",n)}))},methods:{onParseReady:function(e){var t=this;if(!this.parseReadyDone){this.parseReadyDone=!0,this.$emit("parseReady",e);var n=e.writtenMentions,r=e.invisibleMentions;n.filter((function(e){return!e.notifying})).forEach((function(e){var n=e.content,r=e.url,o=n.replace(/<[^>]+?>/gi,"");if(o.startsWith("@")){var i=o.slice(1),s=r.replace(/^https?:\/\//,"").replace(/\/.+?$/,"");t.$store.dispatch("fetchUserIfMissing","".concat(i,"@").concat(s))}})),this.postLength=r.reduce((function(e,t){return e-t.textContent.length-1}),this.postLength)}},toggleShowMore:function(){this.mightHideBecauseTall?this.toggleShowingTall():this.mightHideBecauseSubject&&this.toggleExpandingSubject()},generateTagLink:function(e){return"/tag/".concat(e)}}},E=(0,P.Z)(L,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("RichContent"),l=(0,r.up)("FAIcon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["StatusBody",{"-compact":e.compact}])},[(0,r._)("div",x,[e.status.summary_raw_html?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,o.C_)(["summary-wrapper",{"-tall":e.longSubject&&!e.showingLongSubject}])},[(0,r.Wm)(c,{class:"media-body summary",html:e.status.summary_raw_html,emoji:e.status.emojis},null,8,["html","emoji"]),(0,r.wy)((0,r._)("button",{class:"button-unstyled -link tall-subject-hider",onClick:t[0]||(t[0]=(0,D.iM)((function(){return e.toggleShowingLongSubject&&e.toggleShowingLongSubject.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.$t("status.hide_full_subject")),513),[[D.F8,e.longSubject&&e.showingLongSubject]]),(0,r.wy)((0,r._)("button",{class:"button-unstyled -link tall-subject-hider",onClick:t[1]||(t[1]=(0,D.iM)((function(){return e.toggleShowingLongSubject&&e.toggleShowingLongSubject.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.$t("status.show_full_subject")),513),[[D.F8,e.longSubject&&!e.showingLongSubject]])],2)):(0,r.kq)("",!0),(0,r._)("div",{class:(0,o.C_)([{"-tall-status":e.hideTallStatus},"text-wrapper"])},[(0,r.wy)((0,r._)("button",{class:(0,o.C_)(["button-unstyled -link tall-status-hider",{"-focused":e.focused}]),onClick:t[2]||(t[2]=(0,D.iM)((function(){return e.toggleShowMore&&e.toggleShowMore.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.$t("general.show_more")),3),[[D.F8,e.hideTallStatus]]),e.hideSubjectStatus||e.singleLine&&e.status.summary_raw_html?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0,class:(0,o.C_)([{"-single-line":e.singleLine},"text media-body"]),html:e.status.raw_html,emoji:e.status.emojis,"handle-links":!0,greentext:e.mergedConfig.greentext,attentions:e.status.attentions,onParseReady:e.onParseReady},null,8,["class","html","emoji","greentext","attentions","onParseReady"])),(0,r.wy)((0,r._)("button",{class:"button-unstyled -link cw-status-hider",onClick:t[3]||(t[3]=(0,D.iM)((function(){return e.toggleShowMore&&e.toggleShowMore.apply(e,arguments)}),["prevent"]))},[(0,r.Uk)((0,o.zw)(e.$t("status.show_content"))+" ",1),e.attachmentTypes.includes("image")?((0,r.wg)(),(0,r.j4)(l,{key:0,icon:"image"})):(0,r.kq)("",!0),e.attachmentTypes.includes("video")?((0,r.wg)(),(0,r.j4)(l,{key:1,icon:"video"})):(0,r.kq)("",!0),e.attachmentTypes.includes("audio")?((0,r.wg)(),(0,r.j4)(l,{key:2,icon:"music"})):(0,r.kq)("",!0),e.attachmentTypes.includes("unknown")?((0,r.wg)(),(0,r.j4)(l,{key:3,icon:"file"})):(0,r.kq)("",!0),e.status.poll&&e.status.poll.options?((0,r.wg)(),(0,r.j4)(l,{key:4,icon:"poll-h"})):(0,r.kq)("",!0),e.status.card?((0,r.wg)(),(0,r.j4)(l,{key:5,icon:"link"})):(0,r.kq)("",!0)],512),[[D.F8,e.hideSubjectStatus]]),(0,r.wy)((0,r._)("button",{class:"button-unstyled -link status-unhider",onClick:t[4]||(t[4]=(0,D.iM)((function(){return e.toggleShowMore&&e.toggleShowMore.apply(e,arguments)}),["prevent"]))},(0,o.zw)(e.tallStatus?e.$t("general.show_less"):e.$t("status.hide_content")),513),[[D.F8,e.showingMore&&!e.fullContent]])],2)]),e.hideSubjectStatus?(0,r.kq)("",!0):(0,r.WI)(e.$slots,"default",{key:0})],2)}]]);var F=n(87887);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}U.vI.add(M.IJ7,M.gMD,M.Xig,M.VmB,M.nNP,M.Mm7);var q,Z=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},W=function(e,t){var n=Z(t),r="controlledToggle".concat(n),o="uncontrolled".concat(n);e[r]?e[r]():e[o]=!e[o]};const B={name:"StatusContent",props:["status","compact","focused","noHeading","fullContent","singleLine","controlledShowingTall","controlledExpandingSubject","controlledToggleShowingTall","controlledToggleExpandingSubject","controlledShowingLongSubject","controlledToggleShowingLongSubject"],data:function(){return{uncontrolledShowingTall:this.fullContent||this.inConversation&&this.focused,uncontrolledShowingLongSubject:!1,uncontrolledExpandingSubject:!this.$store.getters.mergedConfig.collapseMessageWithSubject}},computed:N(N(N({},(q=["showingTall","expandingSubject","showingLongSubject"],q.reduce((function(e,t){var n=Z(t),r="controlledToggle".concat(n),o="controlled".concat(n),i="uncontrolled".concat(n);return e[t]=function(){return void 0===this.$data[r]&&void 0===this.$props[r]||!this[r]?this[i]:this[o]},e}),{}))),{},{hideAttachments:function(){return this.mergedConfig.hideAttachments&&!this.inConversation||this.mergedConfig.hideAttachmentsInConv&&this.inConversation},nsfwClickthrough:function(){return!(!this.status.nsfw||this.status.summary&&this.localCollapseSubjectDefault)},attachmentSize:function(){return this.compact?"small":this.mergedConfig.hideAttachments&&!this.inConversation||this.mergedConfig.hideAttachmentsInConv&&this.inConversation||this.status.attachments.length>this.maxThumbnails?"hide":"normal"},maxThumbnails:function(){return this.mergedConfig.maxThumbnails}},(0,$.Se)(["mergedConfig"])),(0,$.rn)({currentUser:function(e){return e.users.currentUser}})),components:{Attachment:l.Z,Poll:z,Gallery:I.Z,LinkPreview:F.Z,StatusBody:E},methods:{toggleShowingTall:function(){W(this,"showingTall")},toggleExpandingSubject:function(){W(this,"expandingSubject")},toggleShowingLongSubject:function(){W(this,"showingLongSubject")},setMedia:function(){var e=this,t="hide"===this.attachmentSize?this.status.attachments:this.galleryAttachments;return function(){return e.$store.dispatch("setMedia",t)}}}},H=(0,P.Z)(B,[["render",function(e,t,n,c,l,u){var d=(0,r.up)("Poll"),p=(0,r.up)("FAIcon"),h=(0,r.up)("gallery"),m=(0,r.up)("link-preview"),f=(0,r.up)("StatusBody");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["StatusContent",{"-compact":e.compact}])},[(0,r.WI)(e.$slots,"header"),(0,r.Wm)(f,{status:e.status,compact:e.compact,"single-line":e.singleLine,"showing-tall":e.showingTall,"expanding-subject":e.expandingSubject,"showing-long-subject":e.showingLongSubject,"toggle-showing-tall":e.toggleShowingTall,"toggle-expanding-subject":e.toggleExpandingSubject,"toggle-showing-long-subject":e.toggleShowingLongSubject,onParseReady:t[2]||(t[2]=function(t){return e.$emit("parseReady",t)})},{default:(0,r.w5)((function(){return[e.status.poll&&e.status.poll.options&&!e.compact?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(d,{"base-poll":e.status.poll,emoji:e.status.emojis},null,8,["base-poll","emoji"])])):e.status.poll&&e.status.poll.options&&e.compact?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(p,{icon:"poll-h",size:"2x"})])):(0,r.kq)("",!0),0!==e.status.attachments.length?((0,r.wg)(),(0,r.j4)(h,{key:2,class:"attachments media-body",nsfw:e.nsfwClickthrough,attachments:e.status.attachments,limit:e.compact?1:0,size:e.attachmentSize,onPlay:t[0]||(t[0]=function(t){return e.$emit("mediaplay",e.attachment.id)}),onPause:t[1]||(t[1]=function(t){return e.$emit("mediapause",e.attachment.id)})},null,8,["nsfw","attachments","limit","size"])):(0,r.kq)("",!0),!e.status.card||e.noHeading||e.compact?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(m,{card:e.status.card,size:e.attachmentSize,nsfw:e.nsfwClickthrough},null,8,["card","size","nsfw"])]))]})),_:1},8,["status","compact","single-line","showing-tall","expanding-subject","showing-long-subject","toggle-showing-tall","toggle-expanding-subject","toggle-showing-long-subject"]),(0,r.WI)(e.$slots,"footer")],2)}]])},19236:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(66252),o=n(3577),i={key:0,ref:"canvas"},s=["alt","title","data-src","src","referrerpolicy"];const a={props:["src","referrerpolicy","mimetype","imageLoadError","imageLoadHandler","alt","height","width","dataSrc"],data:function(){return{realSrc:this.src,stopGifs:this.$store.getters.mergedConfig.stopGifs}},computed:{animated:function(){return!!this.realSrc&&this.stopGifs&&("image/gif"===this.mimetype||this.realSrc.endsWith(".gif"))},style:function(){var e=function(e){return/\d$/.test(e)?e+"px":e};return{height:this.height?e(this.height):null,width:this.width?e(this.width):null}}},methods:{loadLazy:function(){this.dataSrc&&(this.realSrc=this.dataSrc)},onLoad:function(){if(this.realSrc){var e=this.$refs.src;if(e){this.imageLoadHandler&&this.imageLoadHandler(e);var t=this.$refs.canvas;if(t){var n=e.naturalWidth,r=e.naturalHeight;t.width=n,t.height=r,t.getContext("2d").drawImage(e,0,0,n,r)}}}},onError:function(){this.imageLoadError&&this.imageLoadError()}},watch:{src:function(){this.realSrc=this.src},dataSrc:function(){this.$el.removeAttribute("data-loaded")}}},c=(0,n(83744).Z)(a,[["render",function(e,t,n,a,c,l){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["still-image",{animated:e.animated}]),style:(0,o.j5)(e.style)},[e.animated?((0,r.wg)(),(0,r.iD)("canvas",i,null,512)):(0,r.kq)("",!0),((0,r.wg)(),(0,r.iD)("img",{ref:"src",key:e.realSrc,alt:e.alt,title:e.alt,"data-src":e.dataSrc,src:e.realSrc,referrerpolicy:e.referrerpolicy,onLoad:t[0]||(t[0]=function(){return e.onLoad&&e.onLoad.apply(e,arguments)}),onError:t[1]||(t[1]=function(){return e.onError&&e.onError.apply(e,arguments)})},null,40,s)),(0,r.WI)(e.$slots,"default")],6)}]])},1840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(66252),o=n(3577),i=["datetime","title"],s=n(27483),a=n(39776);const c={name:"Timeago",props:["time","autoUpdate","longFormat","nowThreshold","templateKey"],data:function(){return{relativeTime:{key:"time.now",num:0},interval:null}},computed:{localeDateString:function(){var e=a.Z.internalToBrowserLocale(this.$i18n.locale);return"string"==typeof this.time?new Date(Date.parse(this.time)).toLocaleString(e):this.time.toLocaleString(e)},relativeTimeString:function(){var e=this.$i18n.tc(this.relativeTime.key,this.relativeTime.num,[this.relativeTime.num]);return"string"==typeof this.templateKey&&"time.now"!==this.relativeTime.key?this.$i18n.t(this.templateKey,[e]):e}},watch:{time:function(e,t){t!==e&&(clearTimeout(this.interval),this.refreshRelativeTimeObject())}},created:function(){this.refreshRelativeTimeObject()},unmounted:function(){clearTimeout(this.interval)},methods:{refreshRelativeTimeObject:function(){var e="number"==typeof this.nowThreshold?this.nowThreshold:1;this.relativeTime=this.longFormat?s.GV(this.time,e):s._F(this.time,e),this.autoUpdate&&(this.interval=setTimeout(this.refreshRelativeTimeObject,1e3*this.autoUpdate))}}},l=(0,n(83744).Z)(c,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("time",{datetime:n.time,title:c.localeDateString},(0,o.zw)(c.relativeTimeString),9,i)}]])},42262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(66252),o=n(9382),i=n(84131);o.vI.add(i.dT$);const s={props:{user:Object}},a=(0,n(83744).Z)(s,[["render",function(e,t,n,o,i,s){var a=(0,r.up)("FAIcon");return e.user&&e.user.screen_name_ui_contains_non_ascii?((0,r.wg)(),(0,r.j4)(a,{key:0,icon:"code",title:e.$t("unicode_domain_indicator.tooltip")},null,8,["title"])):(0,r.kq)("",!0)}]])},62312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(66252),o=n(3577),i=n(19236),s=n(9382),a=n(84131);s.vI.add(a.VE0);const c={props:["user","betterShadow","compact","bot"],data:function(){return{showPlaceholder:!1,defaultAvatar:"".concat(this.$store.state.instance.server+this.$store.state.instance.defaultAvatar)}},components:{StillImage:i.Z},methods:{imgSrc:function(e){return!e||this.showPlaceholder?this.defaultAvatar:e},imageLoadError:function(){this.showPlaceholder=!0}}},l=(0,n(83744).Z)(c,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("StillImage"),l=(0,r.up)("FAIcon");return(0,r.wg)(),(0,r.iD)("span",{class:(0,o.C_)(["Avatar",{"-compact":e.compact}])},[e.user?((0,r.wg)(),(0,r.j4)(c,{key:0,class:(0,o.C_)(["avatar",{"-compact":e.compact,"-better-shadow":e.betterShadow}]),alt:e.user.screen_name_ui,title:e.user.screen_name_ui,src:e.imgSrc(e.user.profile_image_url_original),"image-load-error":e.imageLoadError},null,8,["alt","title","src","image-load-error","class"])):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,o.C_)(["avatar -placeholder",{"-compact":e.compact}])},null,2)),e.bot?((0,r.wg)(),(0,r.j4)(l,{key:2,icon:"robot",class:"bot-indicator"})):(0,r.kq)("",!0)],2)}]])},27073:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ue});var r=n(66252),o=n(3577),i=n(49963),s={class:"user-info"},a={class:"container"},c={class:"user-info-avatar -link -overlay"},l={class:"user-summary"},u={class:"top-line"},d=["href"],p={class:"bottom-line"},h={key:0,class:"alert user-role"},m={key:1,class:"alert user-role"},f={key:2,class:"alert user-role"},g={key:1},v={key:2,class:"dailyAvg"},w={class:"user-meta"},b={key:0,class:"following"},y={key:1,class:"highlighter"},_=["id"],k=["id"],S={value:"disabled"},j={value:"solid"},O={value:"striped"},C={value:"side"},P={key:0,class:"user-interactions"},z={class:"btn-group"},I=["disabled"],D=["disabled"],x=["disabled"],T={key:1,class:"user-interactions"},$={key:0,class:"panel-body"},U={key:0,class:"user-counts"},M=(0,r._)("br",null,null,-1),A=n(4942),L=n(62312),E=n(72895),F=n(99507),R=n(13046),N={class:"dropdown-menu"},q={key:0},Z={key:0,role:"separator",class:"dropdown-divider"},W={key:3,role:"separator",class:"dropdown-divider"},B={key:4},H=n(9382),V=n(84131),K={class:"panel-heading dialog-modal-heading"},G={class:"title"},Y={class:"dialog-modal-content"},J={class:"dialog-modal-footer user-interactions panel-footer"};const Q={props:{darkOverlay:{default:!0,type:Boolean},onCancel:{default:function(){},type:Function}}};var X=n(83744);const ee=(0,X.Z)(Q,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("span",{class:(0,o.C_)({"dark-overlay":e.darkOverlay}),onClick:t[1]||(t[1]=(0,i.iM)((function(t){return e.onCancel()}),["self","stop"]))},[(0,r._)("div",{class:"dialog-modal panel panel-default",onClick:t[0]||(t[0]=(0,i.iM)((function(){}),["stop"]))},[(0,r._)("div",K,[(0,r._)("div",G,[(0,r.WI)(e.$slots,"header")])]),(0,r._)("div",Y,[(0,r.WI)(e.$slots,"default")]),(0,r._)("div",J,[(0,r.WI)(e.$slots,"footer")])])],2)}]]);var te=n(49874);H.vI.add(V.ptq);const ne={props:["user"],data:function(){return{tags:{FORCE_NSFW:"mrf_tag:media-force-nsfw",STRIP_MEDIA:"mrf_tag:media-strip",FORCE_UNLISTED:"mrf_tag:force-unlisted",DISABLE_REMOTE_SUBSCRIPTION:"mrf_tag:disable-remote-subscription",DISABLE_ANY_SUBSCRIPTION:"mrf_tag:disable-any-subscription",SANDBOX:"mrf_tag:sandbox",QUARANTINE:"mrf_tag:quarantine"},showDeleteUserDialog:!1,toggled:!1}},components:{DialogModal:ee,Popover:te.default},computed:{tagsSet:function(){return new Set(this.user.tags)},canGrantRole:function(){return this.user.is_local&&!this.user.deactivated&&"admin"===this.$store.state.users.currentUser.role},canChangeActivationState:function(){return this.privileged("users_manage_activation_state")},canDeleteAccount:function(){return this.privileged("users_delete")},canUseTagPolicy:function(){return this.$store.state.instance.tagPolicyAvailable&&this.privileged("users_manage_tags")}},methods:{hasTag:function(e){return this.tagsSet.has(e)},privileged:function(e){return this.$store.state.users.currentUser.privileges.includes(e)},toggleTag:function(e){var t=this,n=this.$store;this.tagsSet.has(e)?n.state.api.backendInteractor.untagUser({user:this.user,tag:e}).then((function(r){r.ok&&n.commit("untagUser",{user:t.user,tag:e})})):n.state.api.backendInteractor.tagUser({user:this.user,tag:e}).then((function(r){r.ok&&n.commit("tagUser",{user:t.user,tag:e})}))},toggleRight:function(e){var t=this,n=this.$store;this.user.rights[e]?n.state.api.backendInteractor.deleteRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!1})})):n.state.api.backendInteractor.addRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!0})}))},toggleActivationStatus:function(){this.$store.dispatch("toggleActivationStatus",{user:this.user})},deleteUserDialog:function(e){this.showDeleteUserDialog=e},deleteUser:function(){var e=this,t=this.$store,n=this.user,r=n.id,o=n.name;t.state.api.backendInteractor.deleteUser({user:n}).then((function(t){e.$store.dispatch("markStatusesAsDeleted",(function(e){return n.id===e.user.id}));var i="external-user-profile"===e.$route.name||"user-profile"===e.$route.name,s=e.$route.params.name===o||e.$route.params.id===r;i&&s&&window.history.back()}))},setToggled:function(e){this.toggled=e}}},re=(0,X.Z)(ne,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("FAIcon"),l=(0,r.up)("Popover"),u=(0,r.up)("DialogModal");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{trigger:"click",class:"moderation-tools-popover",placement:"bottom",offset:{y:5},onShow:t[11]||(t[11]=function(t){return e.setToggled(!0)}),onClose:t[12]||(t[12]=function(t){return e.setToggled(!1)})},{content:(0,r.w5)((function(){return[(0,r._)("div",N,[e.canGrantRole?((0,r.wg)(),(0,r.iD)("span",q,[(0,r._)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=function(t){return e.toggleRight("admin")})},(0,o.zw)(e.$t(e.user.rights.admin?"user_card.admin_menu.revoke_admin":"user_card.admin_menu.grant_admin")),1),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=function(t){return e.toggleRight("moderator")})},(0,o.zw)(e.$t(e.user.rights.moderator?"user_card.admin_menu.revoke_moderator":"user_card.admin_menu.grant_moderator")),1),e.canChangeActivationState||e.canDeleteAccount?((0,r.wg)(),(0,r.iD)("div",Z)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.canChangeActivationState?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-default dropdown-item",onClick:t[2]||(t[2]=function(t){return e.toggleActivationStatus()})},(0,o.zw)(e.$t(e.user.deactivated?"user_card.admin_menu.activate_account":"user_card.admin_menu.deactivate_account")),1)):(0,r.kq)("",!0),e.canDeleteAccount?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-default dropdown-item",onClick:t[3]||(t[3]=function(t){return e.deleteUserDialog(!0)})},(0,o.zw)(e.$t("user_card.admin_menu.delete_account")),1)):(0,r.kq)("",!0),e.canUseTagPolicy?((0,r.wg)(),(0,r.iD)("div",W)):(0,r.kq)("",!0),e.canUseTagPolicy?((0,r.wg)(),(0,r.iD)("span",B,[(0,r._)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=function(t){return e.toggleTag(e.tags.FORCE_NSFW)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.FORCE_NSFW)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.force_nsfw")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=function(t){return e.toggleTag(e.tags.STRIP_MEDIA)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.STRIP_MEDIA)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.strip_media")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[6]||(t[6]=function(t){return e.toggleTag(e.tags.FORCE_UNLISTED)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.FORCE_UNLISTED)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.force_unlisted")),1)]),(0,r._)("button",{class:"button-default dropdown-item",onClick:t[7]||(t[7]=function(t){return e.toggleTag(e.tags.SANDBOX)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.SANDBOX)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.sandbox")),1)]),e.user.is_local?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-default dropdown-item",onClick:t[8]||(t[8]=function(t){return e.toggleTag(e.tags.DISABLE_REMOTE_SUBSCRIPTION)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.DISABLE_REMOTE_SUBSCRIPTION)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.disable_remote_subscription")),1)])):(0,r.kq)("",!0),e.user.is_local?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button-default dropdown-item",onClick:t[9]||(t[9]=function(t){return e.toggleTag(e.tags.DISABLE_ANY_SUBSCRIPTION)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.DISABLE_ANY_SUBSCRIPTION)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.disable_any_subscription")),1)])):(0,r.kq)("",!0),e.user.is_local?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"button-default dropdown-item",onClick:t[10]||(t[10]=function(t){return e.toggleTag(e.tags.QUARANTINE)})},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.QUARANTINE)}])},null,2),(0,r.Uk)(" "+(0,o.zw)(e.$t("user_card.admin_menu.quarantine")),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])]})),trigger:(0,r.w5)((function(){return[(0,r._)("button",{class:(0,o.C_)(["btn button-default btn-block moderation-tools-button",{toggled:e.toggled}])},[(0,r.Uk)((0,o.zw)(e.$t("user_card.admin_menu.moderation"))+" ",1),(0,r.Wm)(c,{icon:"chevron-down"})],2)]})),_:1}),((0,r.wg)(),(0,r.j4)(r.lR,{to:"#modal"},[e.showDeleteUserDialog?((0,r.wg)(),(0,r.j4)(u,{key:0,"on-cancel":e.deleteUserDialog.bind(this,!1)},{header:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.$t("user_card.admin_menu.delete_user")),1)]})),footer:(0,r.w5)((function(){return[(0,r._)("button",{class:"btn button-default",onClick:t[13]||(t[13]=function(t){return e.deleteUserDialog(!1)})},(0,o.zw)(e.$t("general.cancel")),1),(0,r._)("button",{class:"btn button-default danger",onClick:t[14]||(t[14]=function(t){return e.deleteUser()})},(0,o.zw)(e.$t("user_card.admin_menu.delete_user")),1)]})),default:(0,r.w5)((function(){return[(0,r._)("p",null,(0,o.zw)(e.$t("user_card.admin_menu.delete_user_confirmation")),1)]})),_:1},8,["on-cancel"])):(0,r.kq)("",!0)]))])}]]);var oe={class:"AccountActions"},ie={class:"dropdown-menu"},se=(0,r._)("div",{role:"separator",class:"dropdown-divider"},null,-1),ae={class:"button-unstyled ellipsis-button"},ce=n(989),le={class:"UserListMenu"},ue={class:"dropdown-menu"},de=["onClick"],pe={class:"btn button-default dropdown-item -has-submenu"};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,A.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.vI.add(V._tD);const fe={props:["user"],data:function(){return{}},components:{DialogModal:ee,Popover:te.default},created:function(){this.$store.dispatch("fetchUserInLists",this.user.id)},computed:me(me({},(0,ce.rn)({allLists:function(e){return e.lists.allLists}})),{},{inListsSet:function(){return new Set(this.user.inLists.map((function(e){return e.id})))},lists:function(){var e=this;return this.user.inLists?this.allLists.map((function(t){return me(me({},t),{},{inList:e.inListsSet.has(t.id)})})):[]}}),methods:{toggleList:function(e){var t=this;this.inListsSet.has(e)?this.$store.dispatch("removeListAccount",{accountId:this.user.id,listId:e}).then((function(e){e.ok&&t.$store.dispatch("fetchUserInLists",t.user.id)})):this.$store.dispatch("addListAccount",{accountId:this.user.id,listId:e}).then((function(e){e.ok&&t.$store.dispatch("fetchUserInLists",t.user.id)}))},toggleRight:function(e){var t=this,n=this.$store;this.user.rights[e]?n.state.api.backendInteractor.deleteRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!1})})):n.state.api.backendInteractor.addRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!0})}))},toggleActivationStatus:function(){this.$store.dispatch("toggleActivationStatus",{user:this.user})},deleteUserDialog:function(e){this.showDeleteUserDialog=e},deleteUser:function(){var e=this,t=this.$store,n=this.user,r=n.id,o=n.name;t.state.api.backendInteractor.deleteUser({user:n}).then((function(t){e.$store.dispatch("markStatusesAsDeleted",(function(e){return n.id===e.user.id}));var i="external-user-profile"===e.$route.name||"user-profile"===e.$route.name,s=e.$route.params.name===o||e.$route.params.id===r;i&&s&&window.history.back()}))},setToggled:function(e){this.toggled=e}}},ge=(0,X.Z)(fe,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("FAIcon"),l=(0,r.up)("Popover");return(0,r.wg)(),(0,r.iD)("div",le,[(0,r.Wm)(l,{trigger:"hover",placement:"left","remove-padding":""},{content:(0,r.w5)((function(){return[(0,r._)("div",ue,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.lists,(function(t){return(0,r.wg)(),(0,r.iD)("button",{key:t.id,class:"button-default dropdown-item",onClick:function(n){return e.toggleList(t.id)}},[(0,r._)("span",{class:(0,o.C_)(["menu-checkbox",{"menu-checkbox-checked":t.inList}])},null,2),(0,r.Uk)(" "+(0,o.zw)(t.title),1)],8,de)})),128))])]})),trigger:(0,r.w5)((function(){return[(0,r._)("button",pe,[(0,r.Uk)((0,o.zw)(e.$t("lists.manage_lists"))+" ",1),(0,r.Wm)(c,{class:"chevron-icon",size:"lg",icon:"chevron-right"})])]})),_:1})])}]]);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}H.vI.add(V.iV1);const we={props:["user","relationship"],data:function(){return{}},components:{ProgressButton:F.Z,Popover:te.default,UserListMenu:ge},methods:{showRepeats:function(){this.$store.dispatch("showReblogs",this.user.id)},hideRepeats:function(){this.$store.dispatch("hideReblogs",this.user.id)},blockUser:function(){this.$store.dispatch("blockUser",this.user.id)},unblockUser:function(){this.$store.dispatch("unblockUser",this.user.id)},removeUserFromFollowers:function(){this.$store.dispatch("removeUserFromFollowers",this.user.id)},reportUser:function(){this.$store.dispatch("openUserReportingModal",{userId:this.user.id})},openChat:function(){this.$router.push({name:"chat",params:{username:this.$store.state.users.currentUser.screen_name,recipient_id:this.user.id}})}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,A.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,ce.rn)({pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable}}))},be=(0,X.Z)(we,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("UserListMenu"),l=(0,r.up)("FAIcon"),u=(0,r.up)("Popover");return(0,r.wg)(),(0,r.iD)("div",oe,[(0,r.Wm)(u,{trigger:"click",placement:"bottom","bound-to":{x:"container"},"remove-padding":""},{content:(0,r.w5)((function(){return[(0,r._)("div",ie,[e.relationship.following?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.relationship.showing_reblogs?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn button-default dropdown-item",onClick:t[0]||(t[0]=function(){return e.hideRepeats&&e.hideRepeats.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.hide_repeats")),1)):(0,r.kq)("",!0),e.relationship.showing_reblogs?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn button-default dropdown-item",onClick:t[1]||(t[1]=function(){return e.showRepeats&&e.showRepeats.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.show_repeats")),1)),se],64)):(0,r.kq)("",!0),(0,r.Wm)(c,{user:e.user},null,8,["user"]),e.relationship.followed_by?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn button-default btn-block dropdown-item",onClick:t[2]||(t[2]=function(){return e.removeUserFromFollowers&&e.removeUserFromFollowers.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.remove_follower")),1)):(0,r.kq)("",!0),e.relationship.blocking?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"btn button-default btn-block dropdown-item",onClick:t[3]||(t[3]=function(){return e.unblockUser&&e.unblockUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.unblock")),1)):((0,r.wg)(),(0,r.iD)("button",{key:3,class:"btn button-default btn-block dropdown-item",onClick:t[4]||(t[4]=function(){return e.blockUser&&e.blockUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.block")),1)),(0,r._)("button",{class:"btn button-default btn-block dropdown-item",onClick:t[5]||(t[5]=function(){return e.reportUser&&e.reportUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.report")),1),e.pleromaChatMessagesAvailable?((0,r.wg)(),(0,r.iD)("button",{key:4,class:"btn button-default btn-block dropdown-item",onClick:t[6]||(t[6]=function(){return e.openChat&&e.openChat.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.message")),1)):(0,r.kq)("",!0)])]})),trigger:(0,r.w5)((function(){return[(0,r._)("button",ae,[(0,r.Wm)(l,{class:"icon",icon:"ellipsis-v"})])]})),_:1})])}]]);var ye={class:"user-note"},_e={class:"heading"},ke={class:"buttons"},Se=["disabled"],je=["disabled"];const Oe={props:{user:Object,relationship:Object,editable:Boolean},data:function(){return{localNote:"",editing:!1,frozen:!1}},computed:{shouldShow:function(){return this.relationship.note||this.editing}},methods:{startEditing:function(){this.localNote=this.relationship.note,this.editing=!0},cancelEditing:function(){this.editing=!1},finalizeEditing:function(){var e=this;this.frozen=!0,this.$store.dispatch("editUserNote",{id:this.user.id,comment:this.localNote}).then((function(){e.frozen=!1,e.editing=!1})).catch((function(){e.frozen=!1}))}}},Ce=(0,X.Z)(Oe,[["render",function(e,t,n,s,a,c){return(0,r.wg)(),(0,r.iD)("div",ye,[(0,r._)("div",_e,[(0,r._)("span",null,(0,o.zw)(e.$t("user_card.note")),1),(0,r._)("div",ke,[(0,r.wy)((0,r._)("button",{class:"button-default btn",onClick:t[0]||(t[0]=function(){return e.startEditing&&e.startEditing.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.edit_note")),513),[[i.F8,!e.editing&&e.editable]]),(0,r.wy)((0,r._)("button",{class:"button-default btn",disabled:e.frozen,onClick:t[1]||(t[1]=function(){return e.finalizeEditing&&e.finalizeEditing.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.edit_note_apply")),9,Se),[[i.F8,e.editing]]),(0,r.wy)((0,r._)("button",{class:"button-default btn",disabled:e.frozen,onClick:t[2]||(t[2]=function(){return e.cancelEditing&&e.cancelEditing.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.edit_note_cancel")),9,je),[[i.F8,e.editing]])])]),(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.localNote=t}),class:"note-text"},null,512),[[i.F8,e.editing],[i.nr,e.localNote]]),(0,r.wy)((0,r._)("span",{class:(0,o.C_)(["note-text",{"-blank":!e.relationship.note}])},(0,o.zw)(e.relationship.note||e.$t("user_card.note_blank")),3),[[i.F8,!e.editing]])])}]]);var Pe=n(44313),ze=n(12061),Ie=n(92820),De=n(4493);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,A.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.vI.add(V.Fwd,V.qmU,V.N7g,V.Xjp,V.Xcf,V.NBC,V.TTL);const $e={props:["userId","switcher","selected","hideBio","rounded","bordered","avatarAction","onClose","hasNoteEditor"],data:function(){return{followRequestInProgress:!1,betterShadow:this.$store.state.interface.browserSupport.cssFilter}},created:function(){this.$store.dispatch("fetchUserRelationship",this.user.id)},computed:Te({user:function(){return this.$store.getters.findUser(this.userId)},relationship:function(){return this.$store.getters.relationship(this.userId)},classes:function(){return[{"-rounded-t":"top"===this.rounded,"-rounded":!0===this.rounded,"-bordered":!0===this.bordered,"-popover":!!this.onClose}]},style:function(){return{backgroundImage:["linear-gradient(to bottom, var(--profileTint), var(--profileTint))","url(".concat(this.user.cover_photo,")")].join(", ")}},isOtherUser:function(){return this.user.id!==this.$store.state.users.currentUser.id},subscribeUrl:function(){var e=new URL(this.user.statusnet_profile_url);return"".concat(e.protocol,"//").concat(e.host,"/main/ostatus")},loggedIn:function(){return this.$store.state.users.currentUser},dailyAvg:function(){var e=Math.ceil((new Date-new Date(this.user.created_at))/864e5);return Math.round(this.user.statuses_count/e)},userHighlightType:Te({get:function(){var e=this.$store.getters.mergedConfig.highlight[this.user.screen_name];return e&&e.type||"disabled"},set:function(e){var t=this.$store.getters.mergedConfig.highlight[this.user.screen_name];"disabled"!==e?this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:t&&t.color||"#FFFFFF",type:e}):this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:void 0})}},(0,ce.Se)(["mergedConfig"])),userHighlightColor:{get:function(){var e=this.$store.getters.mergedConfig.highlight[this.user.screen_name];return e&&e.color},set:function(e){this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:e})}},visibleRole:function(){var e=this.user.rights;if(e){var t=e.admin||e.moderator,n=e.admin?"admin":"moderator";return t&&n}},hideFollowsCount:function(){return this.isOtherUser&&this.user.hide_follows_count},hideFollowersCount:function(){return this.isOtherUser&&this.user.hide_followers_count},showModerationMenu:function(){var e=this.loggedIn.privileges;return"admin"===this.loggedIn.role||e.includes("users_manage_activation_state")||e.includes("users_delete")||e.includes("users_manage_tags")},hasNote:function(){return this.relationship.note},supportsNote:function(){return"note"in this.relationship}},(0,ce.Se)(["mergedConfig"])),components:{UserAvatar:L.default,RemoteFollow:E.Z,ModerationTools:re,AccountActions:be,ProgressButton:F.Z,FollowButton:R.Z,Select:Pe.Z,RichContent:Ie.Z,UserLink:ze.Z,UserNote:Ce},methods:{muteUser:function(){this.$store.dispatch("muteUser",this.user.id)},unmuteUser:function(){this.$store.dispatch("unmuteUser",this.user.id)},subscribeUser:function(){return this.$store.dispatch("subscribeUser",this.user.id)},unsubscribeUser:function(){return this.$store.dispatch("unsubscribeUser",this.user.id)},setProfileView:function(e){this.switcher&&this.$store.commit("setProfileView",{v:e})},linkClicked:function(e){var t=e.target;"SPAN"===t.tagName&&(t=t.parentNode),"A"===t.tagName&&window.open(t.href,"_blank")},userProfileLink:function(e){return(0,De.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)},openProfileTab:function(){this.$store.dispatch("openSettingsModalTab","profile")},zoomAvatar:function(){var e={url:this.user.profile_image_url_original,mimetype:"image"};this.$store.dispatch("setMedia",[e]),this.$store.dispatch("setCurrentMedia",e)},mentionUser:function(){this.$store.dispatch("openPostStatusModal",{replyTo:!0,repliedUser:this.user})},onAvatarClickHandler:function(e){this.onAvatarClick&&(e.preventDefault(),this.onAvatarClick())}}},Ue=(0,X.Z)($e,[["render",function(e,t,n,A,L,E){var F=(0,r.up)("UserAvatar"),R=(0,r.up)("FAIcon"),N=(0,r.up)("router-link"),q=(0,r.up)("RichContent"),Z=(0,r.up)("AccountActions"),W=(0,r.up)("user-link"),B=(0,r.up)("Select"),H=(0,r.up)("FollowButton"),V=(0,r.up)("ProgressButton"),K=(0,r.up)("FALayers"),G=(0,r.up)("ModerationTools"),Y=(0,r.up)("RemoteFollow"),J=(0,r.up)("UserNote");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["user-card",e.classes])},[(0,r._)("div",{class:(0,o.C_)([{"hide-bio":e.hideBio},"background-image"]),style:(0,o.j5)(e.style)},null,6),(0,r._)("div",{class:(0,o.C_)(e.onClose?"":e.panel-e.heading-e.flexible-e.height)},[(0,r._)("div",s,[(0,r._)("div",a,["zoom"===e.avatarAction?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"user-info-avatar -link",onClick:t[0]||(t[0]=function(){return e.zoomAvatar&&e.zoomAvatar.apply(e,arguments)})},[(0,r.Wm)(F,{"better-shadow":e.betterShadow,user:e.user},null,8,["better-shadow","user"]),(0,r._)("div",c,[(0,r.Wm)(R,{class:"fa-scale-110 fa-old-padding",icon:"search-plus"})])])):"function"==typeof e.avatarAction?((0,r.wg)(),(0,r.j4)(F,{key:1,class:"user-info-avatar","better-shadow":e.betterShadow,user:e.user,onClick:e.avatarAction},null,8,["better-shadow","user","onClick"])):((0,r.wg)(),(0,r.j4)(N,{key:2,to:e.userProfileLink(e.user)},{default:(0,r.w5)((function(){return[(0,r.Wm)(F,{"better-shadow":e.betterShadow,user:e.user},null,8,["better-shadow","user"])]})),_:1},8,["to"])),(0,r._)("div",l,[(0,r._)("div",u,[(0,r.Wm)(N,{to:e.userProfileLink(e.user),class:"user-name"},{default:(0,r.w5)((function(){return[(0,r.Wm)(q,{title:e.user.name,html:e.user.name,emoji:e.user.emoji},null,8,["title","html","emoji"])]})),_:1},8,["to"]),!e.isOtherUser&&e.user.is_local?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"button-unstyled edit-profile-button",onClick:t[1]||(t[1]=(0,i.iM)((function(){return e.openProfileTab&&e.openProfileTab.apply(e,arguments)}),["stop"]))},[(0,r.Wm)(R,{"fixed-width":"",class:"icon",icon:"edit",title:e.$t("user_card.edit_profile")},null,8,["title"])])):(0,r.kq)("",!0),e.isOtherUser&&!e.user.is_local?((0,r.wg)(),(0,r.iD)("a",{key:1,href:e.user.statusnet_profile_url,target:"_blank",class:"button-unstyled external-link-button"},[(0,r.Wm)(R,{class:"icon",icon:"external-link-alt"})],8,d)):(0,r.kq)("",!0),e.isOtherUser&&e.loggedIn?((0,r.wg)(),(0,r.j4)(Z,{key:2,user:e.user,relationship:e.relationship},null,8,["user","relationship"])):(0,r.kq)("",!0),e.onClose?((0,r.wg)(),(0,r.j4)(N,{key:3,to:e.userProfileLink(e.user),class:"button-unstyled external-link-button",onClick:e.onClose},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{class:"icon",icon:"expand-alt"})]})),_:1},8,["to","onClick"])):(0,r.kq)("",!0),e.onClose?((0,r.wg)(),(0,r.iD)("button",{key:4,class:"button-unstyled external-link-button",onClick:t[2]||(t[2]=function(){return e.onClose&&e.onClose.apply(e,arguments)})},[(0,r.Wm)(R,{class:"icon",icon:"times"})])):(0,r.kq)("",!0)]),(0,r._)("div",p,[(0,r.Wm)(W,{class:"user-screen-name",user:e.user},null,8,["user"]),e.hideBio?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.user.deactivated?((0,r.wg)(),(0,r.iD)("span",h,(0,o.zw)(e.$t("user_card.deactivated")),1)):(0,r.kq)("",!0),e.visibleRole?((0,r.wg)(),(0,r.iD)("span",m,(0,o.zw)(e.$t("general.role.".concat(e.visibleRole))),1)):(0,r.kq)("",!0),e.user.bot?((0,r.wg)(),(0,r.iD)("span",f,(0,o.zw)(e.$t("user_card.bot")),1)):(0,r.kq)("",!0)],64)),e.user.locked?((0,r.wg)(),(0,r.iD)("span",g,[(0,r.Wm)(R,{class:"lock-icon",icon:"lock",size:"sm"})])):(0,r.kq)("",!0),e.mergedConfig.hideUserStats||e.hideBio?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",v,(0,o.zw)(e.dailyAvg)+" "+(0,o.zw)(e.$t("user_card.per_day")),1))])])]),(0,r._)("div",w,[e.relationship.followed_by&&e.loggedIn&&e.isOtherUser?((0,r.wg)(),(0,r.iD)("div",b,(0,o.zw)(e.$t("user_card.follows_you")),1)):(0,r.kq)("",!0),!e.isOtherUser||!e.loggedIn&&e.switcher?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",y,["disabled"!==e.userHighlightType?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,id:"userHighlightColorTx"+e.user.id,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userHighlightColor=t}),class:"userHighlightText",type:"text"},null,8,_)),[[i.nr,e.userHighlightColor]]):(0,r.kq)("",!0),"disabled"!==e.userHighlightType?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,id:"userHighlightColor"+e.user.id,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.userHighlightColor=t}),class:"userHighlightCl",type:"color"},null,8,k)),[[i.nr,e.userHighlightColor]]):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,o.zw)(" ")+" "),(0,r.Wm)(B,{id:"userHighlightSel"+e.user.id,modelValue:e.userHighlightType,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userHighlightType=t}),class:"userHighlightSel"},{default:(0,r.w5)((function(){return[(0,r._)("option",S,(0,o.zw)(e.$t("user_card.highlight.disabled")),1),(0,r._)("option",j,(0,o.zw)(e.$t("user_card.highlight.solid")),1),(0,r._)("option",O,(0,o.zw)(e.$t("user_card.highlight.striped")),1),(0,r._)("option",C,(0,o.zw)(e.$t("user_card.highlight.side")),1)]})),_:1},8,["id","modelValue"])]))]),e.loggedIn&&e.isOtherUser?((0,r.wg)(),(0,r.iD)("div",P,[(0,r._)("div",z,[(0,r.Wm)(H,{relationship:e.relationship,user:e.user},null,8,["relationship","user"]),e.relationship.following?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.relationship.subscribing?((0,r.wg)(),(0,r.j4)(V,{key:1,class:"btn button-default toggled",click:e.unsubscribeUser,title:e.$t("user_card.unsubscribe")},{default:(0,r.w5)((function(){return[(0,r.Wm)(K,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{icon:"rss",transform:"left-5 shrink-6 up-3 rotate-20",flip:"horizontal"}),(0,r.Wm)(R,{icon:"rss",transform:"right-5 shrink-6 up-3 rotate-20"}),(0,r.Wm)(R,{icon:"bell"})]})),_:1})]})),_:1},8,["click","title"])):((0,r.wg)(),(0,r.j4)(V,{key:0,class:"btn button-default",click:e.subscribeUser,title:e.$t("user_card.subscribe")},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{icon:"bell"})]})),_:1},8,["click","title"]))],64)):(0,r.kq)("",!0)]),(0,r._)("div",null,[e.relationship.muting?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn button-default btn-block toggled",disabled:e.user.deactivated,onClick:t[6]||(t[6]=function(){return e.unmuteUser&&e.unmuteUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.muted")),9,I)):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn button-default btn-block",disabled:e.user.deactivated,onClick:t[7]||(t[7]=function(){return e.muteUser&&e.muteUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.mute")),9,D))]),(0,r._)("div",null,[(0,r._)("button",{class:"btn button-default btn-block",disabled:e.user.deactivated,onClick:t[8]||(t[8]=function(){return e.mentionUser&&e.mentionUser.apply(e,arguments)})},(0,o.zw)(e.$t("user_card.mention")),9,x)]),e.showModerationMenu?((0,r.wg)(),(0,r.j4)(G,{key:0,user:e.user},null,8,["user"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),!e.loggedIn&&e.user.is_local?((0,r.wg)(),(0,r.iD)("div",T,[(0,r.Wm)(Y,{user:e.user},null,8,["user"])])):(0,r.kq)("",!0),e.loggedIn&&e.isOtherUser&&(e.hasNote||e.hasNoteEditor&&e.supportsNote)?((0,r.wg)(),(0,r.j4)(J,{key:2,user:e.user,relationship:e.relationship,editable:e.hasNoteEditor},null,8,["user","relationship","editable"])):(0,r.kq)("",!0)])],2),e.hideBio?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",$,[!e.mergedConfig.hideUserStats&&e.switcher?((0,r.wg)(),(0,r.iD)("div",U,[(0,r._)("div",{class:"user-count",onClick:t[9]||(t[9]=(0,i.iM)((function(t){return e.setProfileView("statuses")}),["prevent"]))},[(0,r._)("h5",null,(0,o.zw)(e.$t("user_card.statuses")),1),(0,r._)("span",null,[(0,r.Uk)((0,o.zw)(e.user.statuses_count)+" ",1),M])]),(0,r._)("div",{class:"user-count",onClick:t[10]||(t[10]=(0,i.iM)((function(t){return e.setProfileView("friends")}),["prevent"]))},[(0,r._)("h5",null,(0,o.zw)(e.$t("user_card.followees")),1),(0,r._)("span",null,(0,o.zw)(e.hideFollowsCount?e.$t("user_card.hidden"):e.user.friends_count),1)]),(0,r._)("div",{class:"user-count",onClick:t[11]||(t[11]=(0,i.iM)((function(t){return e.setProfileView("followers")}),["prevent"]))},[(0,r._)("h5",null,(0,o.zw)(e.$t("user_card.followers")),1),(0,r._)("span",null,(0,o.zw)(e.hideFollowersCount?e.$t("user_card.hidden"):e.user.followers_count),1)])])):(0,r.kq)("",!0),e.hideBio?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(q,{key:1,class:"user-card-bio",html:e.user.description_html,emoji:e.user.emoji,"handle-links":!0},null,8,["html","emoji"]))]))],2)}]])},12061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(66252),o=n(3577),i=n(42262),s=n(4493);const a={props:{user:Object,at:{type:Boolean,default:!0}},components:{UnicodeDomainIndicator:i.Z},methods:{userProfileLink:function(e){return(0,s.Z)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)}}},c=(0,n(83744).Z)(a,[["render",function(e,t,n,i,s,a){var c=(0,r.up)("UnicodeDomainIndicator"),l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.j4)(l,{title:e.user.screen_name_ui,to:e.userProfileLink(e.user)},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.at?"@":"")+(0,o.zw)(e.user.screen_name_ui),1),(0,r.Wm)(c,{user:e.user},null,8,["user"])]})),_:1},8,["title","to"])}]])},78873:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(66252);const o={name:"UserPopover",props:["userId","overlayCenters","disabled","overlayCentersSelector"],components:{UserCard:n(27073).Z,Popover:(0,r.RC)((function(){return Promise.resolve().then(n.bind(n,49874))}))},computed:{userPopoverAvatarAction:function(){return this.$store.getters.mergedConfig.userPopoverAvatarAction},userPopoverOverlay:function(){return this.$store.getters.mergedConfig.userPopoverOverlay}}},i=(0,n(83744).Z)(o,[["render",function(e,t,n,o,i,s){var a=(0,r.up)("UserCard"),c=(0,r.up)("Popover");return(0,r.wg)(),(0,r.j4)(c,{trigger:"click","popover-class":"popover-default user-popover","overlay-centers-selector":e.overlayCentersSelector||".user-info .Avatar","overlay-centers":e.overlayCenters&&e.userPopoverOverlay,disabled:e.disabled},{trigger:(0,r.w5)((function(){return[(0,r.WI)(e.$slots,"default")]})),content:(0,r.w5)((function(t){var n=t.close;return[(0,r.Wm)(a,{class:"user-popover","user-id":e.userId,"hide-bio":!0,"avatar-action":"close"==e.userPopoverAvatarAction?n:e.userPopoverAvatarAction,"on-close":n},null,8,["user-id","avatar-action","on-close"])]})),_:3},8,["overlay-centers-selector","overlay-centers","disabled"])}]])},34133:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(66252),o=["src","loop","controls","alt","title"];const i={props:["attachment","controls"],data:function(){return{blocksSuspend:!1,hasAudio:!0}},computed:{loopVideo:function(){return this.$store.getters.mergedConfig.loopVideoSilentOnly?!this.hasAudio:this.$store.getters.mergedConfig.loopVideo}},methods:{onPlaying:function(e){this.setHasAudio(e),this.loopVideo?this.$emit("play",{looping:!0}):this.$emit("play")},onPaused:function(e){this.$emit("pause")},setHasAudio:function(e){var t=e.srcElement||e.target;this.hasAudio&&(void 0!==t.webkitAudioDecodedByteCount&&t.webkitAudioDecodedByteCount>0||void 0!==t.mozHasAudio&&t.mozHasAudio||void 0!==t.audioTracks&&t.audioTracks.length>0||(this.hasAudio=!1))}}},s=(0,n(83744).Z)(i,[["render",function(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("video",{class:"video",preload:"metadata",src:e.attachment.url,loop:e.loopVideo,controls:e.controls,alt:e.attachment.description,title:e.attachment.description,playsinline:"",onPlaying:t[0]||(t[0]=function(){return e.onPlaying&&e.onPlaying.apply(e,arguments)}),onPause:t[1]||(t[1]=function(){return e.onPaused&&e.onPaused.apply(e,arguments)})},null,40,o)}]])},27650:(e,t,n)=>{var r={"./ar.json":[36224,7808],"./ca.json":[49394,6234],"./cs.json":[87436,7433],"./de.json":[25195,9459],"./en.json":[88797],"./eo.json":[97898,4646],"./es.json":[98559,3968],"./et.json":[13230,4451],"./eu.json":[84826,4542],"./fa.json":[52006,2953],"./fi.json":[70823,9738],"./fr.json":[61341,3746],"./ga.json":[41647,830],"./he.json":[92215,379],"./hu.json":[95028,5494],"./id.json":[62263,2513],"./it.json":[2533,1159],"./ja_easy.json":[8439,8714],"./ja_pedantic.json":[22838,325],"./ko.json":[10707,9670],"./nb.json":[72358,7845],"./nl.json":[49922,6256],"./oc.json":[47297,617],"./pl.json":[82098,5571],"./pt.json":[94465,4047],"./ro.json":[64367,6342],"./ru.json":[73289,5964],"./sk.json":[31478,1547],"./te.json":[32781,2044],"./uk.json":[8411,5253],"./vi.json":[6294,4975],"./zh.json":[4425,5929],"./zh_Hant.json":[37644,6544]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(o)))}o.keys=()=>Object.keys(r),o.id=27650,e.exports=o},31934:(e,t,n)=>{"use strict";e.exports=n.p+"static/img/pleromatan_apology.f9d5180.png"},95326:(e,t,n)=>{"use strict";e.exports=n.p+"static/img/pleromatan_apology_fox.038b0bb.png"},68789:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACvCAQAAAChxLOoAAAK0klEQVR42u2de3BU1R3HP7tJeGd5RCAqiGIECUiB1qACllpbn2DUEUalM7U+sPbhWB1UdKrWccbiTDtqrcVaGVuttZaKYnVQEBEkiihRUJQhQkSxaJ7EvLP77R9Jl93s69695969cfjdP5K7uefcfPf8fuf3OL/zOwHxzaAgh4EcBtJngAxntPdAAi4I++8o5rJvApAvOIKT+Ch6P5KfU8mzLiOR6etcRSTdLkQ7KtfNalREpcLdy3yX90uSKoXQkeqmVk1yG4h5YS8B4FtMJZ8/9Hw2gEqW0c9Nzso33mNXz8/zmcVF0U/7cSMjuBr5HshBQmM5m0mc0PPBRUzpNdFfSSRyTdDnwl6mdUpOnTG/h7VCs/wr7MfqKYVTwIjEAemmj7VMMxUwC8S5HrmM5QzJghE+YRUTWUCrH1irQEsUkROau90HrBXUMw5hSB16VGNzC2Sg7pMZ+lpLlJcrICXaJZO0zakRk12zS1Un09SiGxT0Esj52iq36A2N9wbIUXpJrXKTGjT/ZdeBXKwDjmepzBTWra4B+QDN0Bp1egCjm8pdABJBx+tZeUVd2qBrs5mMM5koRdzLlQRcd7kPsI1tVLBxR8MUF3z2W7gtCzvKOnWwlkoq2coeN22ti11mo5X6VIO9cHW30OYqO9Uz35jtmxbIPhZR5SKQn3AS/b2KawWYyenM5nsMIUzQuNiHOcg+mrmAr7zxR4bqbscTq1J6kQs8Cwfd38gch99YXooISguX80/PgtgziAmBZs3GCZ+0s5qZPOVl7LeErQw1Lu67uibmezBrddNAjuQi1vbAqDEKZEL+MO8CdFN5kImEgL2sZi3PGYUyjgavgLxVVXYcASBMPiwyzFxNHoZMj499dLzBEGcAUZuTpbflMDv6bzgHAh/RmBMgi49nLgDNBjR8EHg1N4uhAf5IAbCF66OLB9bH5qW4b7+71ZO5icb/VpK0R8UaqXabBkqn7tXmqEmyQk9IqjYZyLb6YJGWS5I2a4zoQCuztrm+0lL107WS7vI8Gn+A0XcxjvVsiOzt4cU5vO6ADR6ijgXMNCfq2Ufj87RNktSUdej0JrMrJNk3naFWSWGdrC+i/1ytWvS1WixCeVEhP6zqvstVhAlSxBzei1qzR/GA5XnsHDZylD/WEJeoXQ8roEH6mXZKCusRddhisPc1yAdriCvRWaro5vUuVKTrYtjMKv3eZ5kPjegKNWe1zDPUV5kPoek8zKAsGg7mcs9trTQ0gsezDu1c5aWrm54G8RxnOmhfzAF/jMidjmDAJb5grYcPeSnZ0mn+YK3R7KPAUQ81FBPOPWuVOYQBISb4QUZOM8DgM/0AZLiBEMh+PwCJGOijxg9Aig308X0/ACky0Mfseh8AMbH4UzbcB0DyjLDnSd8MYYfyHAMJk5XxnkhnOuRvAybKTMpp4C6HK7QdDI6JX3rss8deDzpOIBjnj9z49Qb0uw88RNjqeNFmmD+AfMp2hz2U+gMI/Mdh+6l+AfIvh/plgl+A7GJ33H0Fq2y1H+sXILAx7m4Wd/OhjdbjO30DZE2v+4UspMVy68ICJ9l6RndxDOu1JPdZlz1FWeoHhQjQwCtx90fnTWCdjfZn+IW1SEhYWmwrhvhjv7AWKlJbHLNUKmQr7bnUH6zFiloei/tgEvm8aaODa3JpxsfTUD6MW1BbzDiWWm7dxFT2+kFGoJHb4+5/aSuRqZCnO3wyIlDAJ4yJuX+XMYyy0X6yLTXq2ohAJwvpjDMGR9lq/0N/sBbQvjnOgMzPOHH2BjLAJ0D6JxorduJi53CANdzCdFsRM5f2l89KuenVDlXpJo28Nkcb87uvgB41tKehQ6/pvOacAUFHaKfBLRp/zZQh4V5dlDrnax4x9CN2Me9Tr4W9h7L3LpLpxJGsPGZ5miCga6z1Kxf2KDbrLY1xaz97Kv97ByHjvYaBOhbxsnesNZc8DjrwLZJTHnmMZHWyBIOAa2UxglRQlmXbrrTWgGjnlGiym+vC3s9BnKorbRZegAH8vffavntATnAQy+2fMQ+ilJu9Yq0JfIyb1MrY2C0CeXe69aJaRhOJ80tMez3/jXWiA64W0zubl1zsfX1s+Mjd0m1zXe3927Fzm7tAjnO191BsFoy7QCa52nskWnDJDpA3gTqbgQ2DG5mSq9wS6/50tNEp05gzYjxDKAAOUEsnO9ka+TLNN3Eqg10ekQJ7QE7nes5Irt6Cn/MClexhC/UJdlEZuDwiX1sHks893Jgm2+RoFvf8VkM1nVTTSiFjCFHiQYGFTqt6pJCnOA//UhlvWxmRUp5mCn6mfVZG5GReM5Quk60oZ5pR62JT3lI9fCKrcgrDimLYkfnxYbxicK+NW1SRCUg+G120Ws3RvzMB+YXPRbyb9h+asZIDKeU2+gK9GO8OJwJ5wkH6q5eVwh9LPzcsZbqDzgPejUdbRTqfvYhqlw09U/56ae8l0/gRua5PwIA7Eld+Y0ekPx9xbB+AsZ0ZifmosSNyZ5+A0cTCZGm1h0akgL19QJu3c27yAgvBGCOx2PcwOliQqk7EISDTjQYi3NAoLZRHnk/tAf6fJhp9qXmNUscFbApaMJYLfc1UOziZTdas/jyjLw4b7e0RyvgkU3DBHWYwJ2+f81NW23lhxJcysoJSKzDcKIBvjj5j0cENIdssUOM7IO+wIZQFL1f5Dsjg1qyEcpPvgGigjYejMtL5fsHu2Oi2Bd1dxRa+pAv4jDZmMZ3JPULeZUT27HmqMWkQSy0nU1TqEoXaeiVRdKChOkcPaK+RXC1pt52iPLE3w9VgqdTzbzJUEw9omREgNeqXXQJzvYUKlk2cxa8z6BwZykIZYSe/KF4Dp6/7E6aROay10OsoI0ACHJklkIodPJ7yyU6CXNo7A8QFIIox20dnJ+zdVWT3pOTZzZZrb33pKIfxUNXZq7JP8m+kPGV6UrXF72YaIx2MSEEMaxVnKyMA73FBiu1E37EYLJqNKSp1AgReY27SorglvB7l2nxSq11zIXAb6/SpVqz6cwVLkmQuNLOKDymknvtSznDvMMMQkBobTJpWaOdrfdL9OM9oQJoNY50Gz1kImisUNlnPx3Tdphc0O+3z5xnNLJ1gFUhm4+4D5nMc05hHkFdZlTHlcp4DDdKVULxnqFMZyZ6qHGSghBNCIAutFv42nR003lEiTTDJpENugEw2HLIYlBMga+Bq2g12WB+/lp7t9Gv/Gqva6HTdrHccnSDToAc1wvq7zYaDhrOaY2ikmk28yZNJWKWVzylMadWKANDJ3/gzW2xG2lzaqxDSsrTjkcwZblNEYf1DJf44M5QWFNI9WbBVhzr03e3+2KsLMHAQV3Nr0qDpk6xMa8AXMHmKsZnbuYN6IfcmgbGfyw8u6lVypCXOYRBvZ0xDD3glIwGdrqYk3H+HBgrN63UKSb261KQuVetP+oGOdVKT2TSQ8b1KS0dUpb9oqhCapNqEg+q6YU50/mbT0fhQdPDreYZXeIMvon97iBG9xQmIcLeRfQ3GZ62HJB3UDQn7BsuTzlQf61SfHtncgSYnOZ2qv3YngGjXMlOFpN3cGRp/LU04YGidTtvn60O0k10n9jpFcaeu0HAn51HmBkhe9FSF7in3Ho01fTywN0DOiIGxTtOU3zfOZ0+8Rmm/JOldXakhbr0l4Eka4lAupIYKcwfZeBF8yBEFOQzkMJDDQNLR/wB7JNbnLtPZmwAAAABJRU5ErkJggg=="},43011:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACvCAQAAAChxLOoAAAJBUlEQVR42u2da3CUVxnHf7vZJCSBTcI1tIR7AwkXEUeYctEOFi0dGCnWUkudKUMpHXS0VacqMtMytTOVD3U0Itaq1amMl8poRbSdFjtahbYWRKmlZaiAULADKSSEpLns/v2QNWR3E7rvnvPuOe3wvB+y75uc581vz3POec5zbhHx3pAol0Eug7xrQKoZVXiQSAiF/SFquOW9AHKK4czg1d77EXyW/fw6ZBLZvq5XUtJGITrQcn1ZzUqqQYR72Vf5LUnSfiE0Wj3SrvqwQewX9skAvI+ZxPhO6tkg9rOZkjAtK2ZdY3fq51Lms6L3aQlfZChrkfcgLcRruY56rko9WMH0jIp+DcnkHVHPC/sc7VL/0tXnc0JLfS4j4/kZe1g0wPeUVtmzxN+W/RYOcPOAeiJpxhuhqPdzDXexgzI/ykgxd/MgkQApzgEl3Mg6FhAFKml3X0aielxJBZGElulOHe+9b1XUfYMY0dcVVM7rQtr9TueFfS/cy9cCJxtMeVoV8Dv3TuNidlJs+O4EkzjmttYq4SFjDHiy+Zjr6vcLGa12frXMxkrHLXu13papJLXuSbdufBN6xBijS9evt+yiBC/sYzhiwdVczY9duyiNVjzm26i0CxI0C6cqIRuSVKNb7/dGS33KCGuodWdaMT5l7c1lbHQHchNTLb57LZ+258YHqbWiHKDBchFN0MJxLvBxTheuP7LICCPRp1N1UYqopoqbTTGCmdY9Rm8qGiCC0sYqflnI6neV7Mvb+q2mF7Zln8xL1pswONQ9JVawWquM0azgmRTGGasgdbGqwgUfZtLIFOLAUXbwDE9YRRnHuUKBvPD6nAlEgAQxuNWycZ0vYDhoUt8/nWjRyYsgmpy07A/Dgn4jiPmBwKs0OwFZN4lrALgQKCg38Jv/6MbXivBdioEX+Xzv4EHuefOHtG+/J9U2N/2Rb0iSjqhGI9QRuHP7oHb39kUe1U8lHVOk8H32YXpYkrRbY0Qn2p53a35aG1SiOyVtKnif/U1GbWIcz/Kn5NGULS7kzwZmsIW3uIm59op6/kHsIv09Fc09lGfOfMmmYZkEsWerXVJCH9Sp3n+uSW1qVVuOKL9X3IcRq33cToIow1jIP1LPOriCb+dcjy3hOa5wbVo91z3q0FZFVK7P6KCkhL6vzkAG9k+VezBhYDv6mPb02Ho3Gqb1fcwsV/mmZzMfmtHqjGGc3KRVlV7NfIi/n62pYZxgUsEqd8MK2TKUn1CaZ9rbCx0OGljKeYJrDdLX8KYfOXKfEQZ80gvT2nqxl5KvzPPDtEZx3HBE8Qw1JNyb1hzjgdE4dT6UkXkWDHyuDyDVFkIgJ30ASVrQccYHkBoLOj7iA8gwCzoWnPUAJGJBx5xqD0CKrJjnjPdGYYfljkES5OW8Z8u1hvZtwUWZy3LOsSlvN75HOqnoE78scJ+979VoPBA3zo+58c9aaN896CHCS8aDNlV+gPyHA4YaGvwAgZ2G6Wf6AvIrw/alzheQQxxOu9/DbwKlr/UFBJ5Lu5vP/bwSIPXELm9Ansq4X8lK2nJOPaR4sA8NIkJVGUNyJ7qDNZQNviwWO8fTafdXFtWxK0D6Rb6YFlkTltYFiiHe5otpoWEZs7T3Kx5ojUmDH6bFo038KO1BPTGeD6DgDpdufLpU8kragNo6xrEh59TnmclRH8oINGdMg/1coIlMQ/hFpyc5AsX8mzF97vcxhpEB0k8L1IyGliPQxUq60pzBkYHSf9QP0wI6dqc5kLF3rDjTZWE+AaZQQEqznZUgcbEl+Wy1ENYa4MMGQaIyGvMoJCEtAo7oB0aLMsa6X5j//+/nK312fQga8Isw3BfTgrfyHvNooTX44FGYG7zk27uoos0nkLuYY+DmBE4bCWkThlpeJm5QwhJM4IQPOXINRbQYpI+lJuY6B3mMeN61FiSApb6UkRKDOFU34gOdnoBcZRDLLSXB+JJBfoB0GKSNECMWLEfDAznEVl4w0jDKDxBYz31G6af4AkLQKjSjLRnrD8gEo3Iy3h+QesN4jCcgEcOFTNW+gFxNhVH6Cl9Axph2A7o8AZllmP7K4jI/QCYYpo8y2g+Q2caVxXUegCRNJ6QlgU+47yFClFbjjRBaGeLetIYzyFhHWe5fRXggUy1MESzK3d8KD2SWFS0V7kFmWNEScwySNG9FeiTnMeHwaq0mhloJYXS5Na0ogy1oeYMu12VknJVNcQ+6b9mHWNGy1z1InRUtB9yDxK1oOeIeJGJFy7/cg9iY+J8IMgE3LJApFnScCDIyHBaIjUMJuoMYaFgg/7Wgoxm5B6mzUkZwD9JlQcdZH0DGW9DR5hwkcXELqIK1RaGARDEMlqZ6h+2uQSKlVvSqzHkZqSn8Qs1wQOz01yvdN4h2+utVQdbJhwMyzYqWoUG6y+GAjLRTZ7iPxpuAqE+DOMotSJGRp3VxdWhZkDHIMEBmMcIgdXEf06pxC7LAmqYGtyDTrWmqdwsy25qmAOPC9mO/VZy2dqhUkuJc++32c2S+xUO+oqlzypyALDNoQbr68becgSw2aMmj+XtttkEmGk2kyf5vSl2BmLmL2W57uROQp2Ct0aTMTDnLywFKmMWrVk29yycvaG/A47rS5ZwaNTT3d9s9D7GaHYylmWP8hefZ1o+ptPMGQwb0akUE6OIxHuHFgGuCQlrRE9fmS+ZHot99/ZNK6Oea7MeZobShuB7Iw6w61akPH/DmzFDKylnLV/sNHGxj+yUd+GKmTbdWc5t3UG/o92jBk6xquTVjVLAtLSwq/sZrgSvokMpIRB/S+X6s/16VCS1Td9rzs+rWeXXrmL6nxRpvsiezbZCJGVtLJ/W6fqiZQqheTRmAbSnMKeZvtn0cbbw388/yOE/zV071/m5L1qSOMiDJ/e9oUE6q3y2SWnR31s7Ky/utqV7T1Z4e2dyJpqki63mpDmdBdGizrY2kFVqDmHltyFrEukvzjnt9iHb/B6u1p2Ec1GpV2zv4tFAgRb2nKvRUuQ+o1u7m94UCWdQHY5dmKfbuOJ89+xqpk5KkfVqjwWG9JbypgOkhhBs4wx57B9kUIq7lSKJcBrkMchnkUvI/OFy4hX3mBzYAAAAASUVORK5CYII="}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=a,e=[],l.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],s=!0,a=0;a<n.length;a++)(!1&o||i>=o)&&Object.keys(l.O).every((e=>l.O[e](n[a])))?n.splice(a--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);l.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,l.d(o,i),o},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>"static/js/"+({50:"emoji-annotations/en_GB-json",227:"emoji-annotations/ha-json",278:"emoji-annotations/kn-json",313:"emoji-annotations/tg-json",325:"i18n/ja_pedantic-json",346:"emoji-annotations/rw-json",379:"i18n/he-json",420:"emoji-annotations/fi-json",457:"emoji-annotations/zh-json",577:"emoji-annotations/en_001-json",617:"i18n/oc-json",625:"emoji-annotations/so-json",678:"emoji-annotations/ps-json",786:"emoji-annotations/xh-json",830:"i18n/ga-json",1012:"emoji-annotations/or-json",1044:"emoji-annotations/zh_Hant_HK-json",1056:"emoji-annotations/uz-json",1095:"emoji-annotations/pl-json",1159:"i18n/it-json",1162:"emoji-annotations/ccp-json",1236:"emoji-annotations/fil-json",1290:"emoji-annotations/ja-json",1404:"emoji-annotations/km-json",1452:"emoji-annotations/yue-json",1546:"emoji-annotations/pt_PT-json",1547:"i18n/sk-json",1553:"emoji-annotations/sl-json",1584:"emoji-annotations/to-json",1596:"emoji-annotations/da-json",1613:"emoji-annotations/mai-json",1780:"emoji-annotations/tk-json",1790:"emoji-annotations/dsb-json",1821:"emoji-annotations/fr_CA-json",1911:"emoji-annotations/mr-json",1959:"emoji-annotations/su-json",2044:"i18n/te-json",2223:"emoji-annotations/fr-json",2243:"emoji-annotations/sa-json",2342:"emoji-annotations/az-json",2350:"emoji-annotations/sk-json",2397:"emoji-annotations/kl-json",2479:"emoji-annotations/jv-json",2513:"i18n/id-json",2569:"emoji-annotations/tt-json",2599:"emoji-annotations/kok-json",2656:"emoji-annotations/ckb-json",2685:"emoji-annotations/ml-json",2699:"emoji-annotations/es_MX-json",2767:"emoji-annotations/zh_Hant-json",2861:"emoji-annotations/hr-json",2873:"emoji-annotations/kk-json",2874:"emoji-annotations/sc-json",2883:"emoji-annotations/ku-json",2953:"i18n/fa-json",2966:"emoji-annotations/ko-json",2992:"emoji-annotations/eu-json",3056:"emoji-annotations/hi_Latn-json",3241:"emoji-annotations/sv-json",3276:"emoji-annotations/et-json",3313:"emoji-annotations/es_US-json",3377:"emoji-annotations/as-json",3568:"emoji-annotations/ti-json",3687:"emoji",3746:"i18n/fr-json",3887:"emoji-annotations/sr-json",3951:"emoji-annotations/th-json",3968:"i18n/es-json",3974:"emoji-annotations/bg-json",3994:"emoji-annotations/sw_KE-json",4047:"i18n/pt-json",4209:"emoji-annotations/doi-json",4354:"emoji-annotations/si-json",4368:"emoji-annotations/sq-json",4424:"emoji-annotations/yue_Hans-json",4451:"i18n/et-json",4542:"i18n/eu-json",4571:"emoji-annotations/ga-json",4646:"i18n/eo-json",4691:"emoji-annotations/ca-json",4710:"emoji-annotations/cs-json",4718:"emoji-annotations/mn-json",4770:"emoji-annotations/lb-json",4785:"emoji-annotations/ky-json",4786:"emoji-annotations/te-json",4879:"emoji-annotations/en_CA-json",4902:"emoji-annotations/hu-json",4975:"i18n/vi-json",5041:"emoji-annotations/pt-json",5104:"emoji-annotations/pcm-json",5115:"emoji-annotations/sr_Latn_BA-json",5119:"emoji-annotations/am-json",5224:"emoji-annotations/vi-json",5253:"i18n/uk-json",5304:"emoji-annotations/ha_NE-json",5401:"emoji-annotations/mni-json",5494:"i18n/hu-json",5521:"emoji-annotations/fa-json",5548:"emoji-annotations/he-json",5571:"i18n/pl-json",5728:"emoji-annotations/en-json",5887:"emoji-annotations/rm-json",5929:"i18n/zh-json",5964:"i18n/ru-json",5968:"emoji-annotations/hi-json",6060:"emoji-annotations/sr_Cyrl_BA-json",6068:"emoji-annotations/ka-json",6116:"emoji-annotations/gd-json",6126:"emoji-annotations/gl-json",6148:"emoji-annotations/br-json",6226:"emoji-annotations/de-json",6234:"i18n/ca-json",6256:"i18n/nl-json",6272:"emoji-annotations/cy-json",6342:"i18n/ro-json",6344:"emoji-annotations/hy-json",6355:"emoji-annotations/af-json",6544:"i18n/zh_Hant-json",6701:"emoji-annotations/mi-json",6773:"emoji-annotations/nl-json",6790:"emoji-annotations/my-json",6797:"emoji-annotations/ur-json",6826:"emoji-annotations/sd-json",6831:"emoji-annotations/es-json",6869:"emoji-annotations/chr-json",6936:"emoji-annotations/ia-json",6946:"emoji-annotations/pa-json",7164:"emoji-annotations/de_CH-json",7169:"emoji-annotations/lt-json",7261:"emoji-annotations/gu-json",7300:"emoji-annotations/is-json",7303:"emoji-annotations/wo-json",7304:"emoji-annotations/be-json",7360:"emoji-annotations/ar_SA-json",7433:"i18n/cs-json",7464:"emoji-annotations/lo-json",7569:"emoji-annotations/ast-json",7585:"emoji-annotations/sw-json",7808:"i18n/ar-json",7845:"i18n/nb-json",7855:"emoji-annotations/sat-json",7879:"emoji-annotations/el-json",7897:"emoji-annotations/ta-json",8015:"emoji-annotations/hsb-json",8031:"emoji-annotations/qu-json",8134:"emoji-annotations/bs-json",8395:"emoji-annotations/ru-json",8681:"emoji-annotations/sr_Latn-json",8714:"i18n/ja_easy-json",8732:"emoji-annotations/yo-json",8873:"emoji-annotations/es_419-json",8898:"emoji-annotations/lv-json",8970:"emoji-annotations/it-json",8988:"emoji-annotations/en_IN-json",8995:"emoji-annotations/fo-json",9064:"emoji-annotations/bn-json",9319:"emoji-annotations/zu-json",9360:"emoji-annotations/en_AU-json",9377:"emoji-annotations/ne-json",9399:"emoji-annotations/mt-json",9414:"emoji-annotations/nn-json",9459:"i18n/de-json",9465:"emoji-annotations/id-json",9670:"i18n/ko-json",9738:"i18n/fi-json",9757:"emoji-annotations/ug-json",9780:"emoji-annotations/kab-json",9790:"emoji-annotations/ceb-json",9864:"emoji-annotations/ro-json",9871:"emoji-annotations/uk-json",9873:"emoji-annotations/ar-json",9895:"emoji-annotations/ig-json",9921:"emoji-annotations/mk-json",9924:"emoji-annotations/ms-json",9926:"emoji-annotations/yo_BJ-json",9978:"emoji-annotations/tr-json",9979:"emoji-annotations/no-json",9994:"emoji-annotations/pa_Arab-json"}[e]||e)+"."+{50:"bd687f904492facc81d1",227:"2a08912b38925c10f970",278:"efdac8ac0cb00991ba1e",313:"9647f559a4477d7d8e96",325:"b52fa70f0bf89ae01cfb",346:"031838c5374676191131",379:"03c5d271a4034de06e6f",420:"0f254bb4b0faaba4abcc",457:"e42a28127d5c1aff6c85",577:"72d8c47269350f59aa9f",617:"4f52bf1b6e3213acc33c",625:"f75abd16637c8924c075",678:"a0d9eea5b81bcad11e64",786:"21e88c05ad3113dfc7f2",830:"3f1981817977a16f1d7e",1012:"b007c2f6f92dcc95efac",1044:"7eee03c705347a21c612",1056:"ac43f4c54d4587324a20",1095:"e9e8f1ed84dc6c169516",1159:"99a21d5c98376af17141",1162:"02836537ffe2b02291cb",1236:"4fca833f178d1b889b69",1264:"1e16af28a0b44d4d17d0",1290:"0bd51f8c40c106355b0e",1325:"d1e5fcff4166acac7f06",1404:"9bc922b2e0faa64b4c53",1452:"15102c0ddfdf19bdfb4c",1546:"c381b13e323f91b0e6b3",1547:"d8d0eba80f94e6f55145",1553:"a40c5548da34fce6f1d0",1584:"50ac37d101caaf592c94",1596:"8d074e27df71edafc543",1613:"302386b3358f4d34f9c8",1780:"23a9a6229829921704ad",1790:"7635686ffd8d62264466",1821:"59ed6b59e2ca68707292",1911:"cb0a87d9aabf8a52161d",1959:"daff15251020cbecea7d",2044:"ce6db28261b2f824064f",2223:"da49ed0d1a6622fe1c67",2243:"21b06234a08c7469ccb4",2342:"9a32f2941d9c4d1f834c",2350:"5d96bdb4da82655d0314",2397:"87ab8661b4bdecd09faf",2479:"1c8d5ffcff22b46b6214",2513:"3e42564ce7a3a847ecb0",2569:"4c089389ba9983ec8ef7",2599:"116e4f72db3bfb846233",2656:"13dc83db1e15aa76051a",2677:"45ff400a54f2f4c858f2",2685:"3f2902a84240faff1b48",2699:"ee359d4b611fdb1aeb33",2767:"9cbb765c181d443828a9",2861:"fe847ade1f18a60e513c",2873:"a20b59d47bdfe99786ad",2874:"c84c9c47d2e104c43e4c",2883:"2173ed87f8d7372ee209",2953:"a19100f6a5a9431e2adb",2966:"d175900fe48f48ce87c8",2992:"931b429f5fcc141549a5",3056:"3cb73c456f31261f1908",3241:"8b0374cbca3a77519876",3276:"c42e3f186a55ecb061cd",3313:"280bdb036dfd651d079a",3377:"34cf67edc1cecd195738",3568:"5b173bd33bb960be805b",3687:"33eab91b64f59431137d",3746:"36ef21ccb1203d3e65ae",3887:"e29a20e59a708df0c6a8",3951:"34709bae223bb9d2587c",3968:"4a302899a65e1f67d8a2",3974:"7c69c52572a7bf87e1db",3994:"f3563cbeac1c158563d5",4047:"3fc5593e030268bcd291",4209:"7841c3f3ceb4e3da0bd1",4354:"841b356da03623c10dbf",4368:"bcf154ed8a6138aa089c",4424:"cc60bb10d32fab3d8207",4451:"580b101d6bb83a8aee75",4542:"d2eab39b0427995fc314",4571:"cb3f9e613a8c445aea23",4646:"8b17b5b5653ed558d931",4691:"ce029e860b10b242c6a5",4710:"48d8bba230dc9fe6b3dc",4718:"764169f1168d0432640f",4770:"499c526f3a653618ea9b",4785:"310bda579c819eda9472",4786:"8a69a10f62cdf626244e",4879:"5de965778a6b8a5a4bb4",4902:"1faf52040deda872b416",4975:"703c1e731be6e857bbf3",5041:"2b2512ee44291bdb2ae7",5104:"eac3a5ad0b4b5b33289d",5115:"72933405032b81344754",5119:"94388548f7c18233fec3",5224:"f6a364b2add7f8c8bc67",5253:"c33e4c72a2dfe9a9d143",5304:"e4855d92aaccfdd6ba57",5401:"7db7f76ab1ce34e3683d",5494:"0487899ca7a7a8505ed8",5521:"819c7f263c8594ccf4fa",5548:"a3d7631f32182b0955a2",5571:"c963247822381b05579b",5728:"6c3947f7c49c3952084d",5887:"985d4934f386fd05a75c",5929:"de02aa4e82fcb1ec557c",5964:"b913eb7f7e9f0c642438",5968:"04bc5f73dc2169def97e",6060:"83c7c64b9696ae2339f2",6068:"567e7b051d90a37003f3",6116:"e3d0aea3725be774ad81",6126:"ce89036f0ae72224c994",6148:"c7175423d8965ed10bae",6226:"e1443c01a191af1665e1",6234:"1eb24bc001efa3c0627f",6256:"3fb9758b10c29434b613",6272:"e09dd13da5ad56530ead",6342:"3fd9977ed1c1413059ae",6344:"2d819f7faabfeba8457f",6355:"96c988285a6a2cce6246",6464:"2ababce187697ee8b1e9",6544:"eedcc6a7effd11514fe4",6701:"9efe6f146ecd8987f80a",6773:"52f4b93b8fa5e22cb585",6790:"8e7dd1485813d15bba7e",6797:"983c02109444c883a18f",6826:"8f2a6a06dc3cf185f79d",6831:"f593b0dc2367a9d7fb30",6869:"e7e542ab5a74167dec10",6936:"8e8365e2bf41779e2beb",6946:"7d60d69762a108270669",7164:"b4a5891ea2f38d616ec0",7169:"ced4d5e70edc60127df6",7261:"8a899f364cf260376905",7300:"62e220c65215b034533d",7303:"e0d689e22cda0dd77e9a",7304:"f92f80669873a4100c69",7360:"4a6f4402931a867070f0",7433:"5eedbe9f7084c349fbe8",7464:"ecb06d61465a355b8157",7569:"7e4da8cb7e539c19a9b9",7585:"d5f350641b9cbcc0e126",7808:"d09609af3224232857d6",7845:"a54af3b1f47d576ad4aa",7855:"71e92700b2aaca8e021c",7879:"b36610f2ea16d56c2314",7897:"675cc6c7607449d4a91b",8015:"438721731b4171bc6fc3",8031:"55f4df57e71076dbad9f",8134:"48ef42da1c7976cf083c",8395:"a81d0df34460837ccacc",8532:"290194af65a2e3a4120e",8681:"ff27d1f455bf2afb8d70",8714:"79705c1ec254307d2224",8732:"ea1150d6bc360dd86f2e",8873:"d81991295392b6ed83bb",8898:"5600c2eb6d59fa0aa2e2",8970:"9c1758f4fd3391f7f61a",8988:"002faa48c09121928fca",8995:"9b060e8009b3a8be4597",9064:"657aac057f36ad06c58d",9319:"e0cb7cd3890583fd0f6d",9360:"33aac9bbd887273a34b1",9377:"a0118dca2096a101b8e8",9399:"3ddf7dbc114adf90c500",9414:"7293cd5d7205681cf48c",9459:"bfa48615ac92f87ff37a",9465:"55f83c46d753b0b69330",9670:"4bd28b26a7390a09afc2",9738:"d1934c18f12d80493ab1",9757:"bf768bd32e9ff02b0a8a",9780:"1a2de4774f4ddc2b51dd",9790:"9db0336f168aa77ee395",9864:"cb62f86ce78c94d1e813",9871:"af110c8eef232638fc4d",9873:"5527466d349f2954d49b",9895:"f19fa5fe3582463ba73c",9921:"a254cabb8570419cc426",9924:"272ee4735aabc37015dd",9926:"650318c25fe4da92bad8",9978:"6462e8cfd5006cf5b6cf",9979:"22bdbbc77cc3c14ada58",9994:"5ae021308b1c5f6dd8a7"}[e]+".js",l.miniCssF=e=>"static/css/"+e+"."+{1264:"177d0bf6917b317388ae",1325:"715a7f40cdd53f460ef4",6464:"2fa2e5f1fa93842c62b1",8532:"88b90ac86f3060a3144e"}[e]+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="pleroma_fe:",l.l=(e,t,n,i)=>{if(r[e])r[e].push(t);else{var s,a;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){s=d;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.setAttribute("data-webpack",o+n),s.src=e),r[e]=[t];var p=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var o=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),a&&document.head.appendChild(s)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.p="/",i=e=>new Promise(((t,n)=>{var r=l.miniCssF(e),o=l.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=(s=n[r]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===e||o===t))return s}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var s;if((o=(s=i[r]).getAttribute("data-href"))===e||o===t)return s}})(r,o))return t();((e,t,n,r)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=i=>{if(o.onerror=o.onload=null,"load"===i.type)n();else{var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,o.parentNode.removeChild(o),r(c)}},o.href=t,document.head.appendChild(o)})(e,o,t,n)})),s={2143:0},l.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{1264:1,1325:1,6464:1,8532:1}[e]&&t.push(s[e]=i(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))},(()=>{var e={2143:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=l.p+l.u(t),s=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,a]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(a)var u=a(l)}for(t&&t(n);c<i.length;c++)o=i[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},n=self.webpackChunkpleroma_fe=self.webpackChunkpleroma_fe||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var u=l.O(void 0,[9169],(()=>l(78892)));u=l.O(u)})();
//# sourceMappingURL=app.4c23e08cf351a54f4177.js.map