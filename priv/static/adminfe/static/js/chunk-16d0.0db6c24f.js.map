{"version":3,"sources":["webpack:///./src/services/pleromaAuth.js","webpack:///./src/views/login/pleroma.vue?2dbc","webpack:///./src/views/login/pleroma.vue?5ee7","webpack:///src/views/login/pleroma.vue","webpack:///./src/views/login/pleroma.vue"],"names":["authenticateWithPleromaFE","_ref","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","mark","_callee","store","pleromaFEState","token","wrap","_context","prev","next","localforage","getItem","sent","undefined","_","get","Error","dispatch","stop","_x","apply","this","arguments","login_pleromavue_type_script_lang_js_","name","mounted","_this","asyncToGenerator_default","regenerator_default","loadingInstance","Loading","fullscreen","t0","$message","error","lang","t","$router","push","path","success","component","Object","componentNormalizer","_c","_self","__webpack_exports__"],"mappings":"8NAQaA,EAAyB,eAAAC,EAAAC,IAAAC,EAAAC,EAAAC,KAAG,SAAAC,EAAMC,GAAN,IAAAC,EAAAC,EAAA,OAAAN,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVC,IAAYC,QAHjB,WAEe,UACjCP,EADiCG,EAAAK,UAIzBC,KAFRR,EAAQS,IAAEC,IAAIX,EAAgB,oBAFG,CAAAG,EAAAE,KAAA,cAK/B,IAAIO,MAAM,6BALqB,cAAAT,EAAAE,KAAA,EAQjCN,EAAMc,SAAS,oBAAsBZ,UARJ,wBAAAE,EAAAW,SAAAhB,MAAH,gBAAAiB,GAAA,OAAAtB,EAAAuB,MAAAC,KAAAC,YAAA,6CCRtC,kFCA4MC,GCe5MC,oBACAC,QAFA,WAEA,IAAAC,EAAAL,KAAA,OAAAM,IAAAC,EAAA5B,EAAAC,KAAA,SAAAC,IAAA,IAAA2B,EAAA,OAAAD,EAAA5B,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACAoB,EAAAC,mBAAAC,gBADAxB,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAIAb,sBAJA,OAAAW,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAyB,GAAAzB,EAAA,SAMAmB,EAAAO,SAAAC,MAAAC,EAAA,EAAAC,EAAA,+BANA,OASAP,UACAH,EAAAW,QAAAC,MAAAC,sBACAb,EAAAO,SAAAO,QAAAL,EAAA,EAAAC,EAAA,gCAXA,yBAAA7B,EAAAW,SAAAhB,EAAA,gBAAAyB,iBCTAc,EAAgBC,OAAAC,EAAA,EAAAD,CACdnB,EHRF,WAA4D,OAAAqB,EAA7BvB,KAAAwB,MAAAD,IAA6B,YGW5D,EACA,KACA,KACA,MAIeE,EAAA,QAAAL","file":"static/js/chunk-16d0.0db6c24f.js","sourcesContent":["// SPDX-FileCopyrightText: 2019-2022 Pleroma Authors <https://pleroma.social>\n// SPDX-License-Identifier: AGPL-3.0-only\n\nimport localforage from 'localforage'\nimport _ from 'lodash'\n\nconst pleromaFEStateKey = 'vuex-lz'\n\nexport const authenticateWithPleromaFE = async(store) => {\n  const pleromaFEState = await localforage.getItem(pleromaFEStateKey)\n  const token = _.get(pleromaFEState, 'oauth.userToken')\n\n  if (token === undefined) {\n    throw new Error('PleromaFE token not found')\n  }\n\n  await store.dispatch('LoginByPleromaFE', { token })\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pleroma.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pleroma.vue?vue&type=script&lang=js&\"","<!--\nSPDX-FileCopyrightText: 2019-2022 Pleroma Authors <https://pleroma.social>\nSPDX-License-Identifier: AGPL-3.0-only\n-->\n\n<template>\n  <div />\n</template>\n\n<script>\nimport { Loading } from 'element-ui'\nimport { authenticateWithPleromaFE } from '@/services/pleromaAuth'\nimport i18n from '@/lang'\n\nexport default {\n  name: 'LoginPleroma',\n  async mounted() {\n    const loadingInstance = Loading.service({ fullscreen: true })\n\n    try {\n      await authenticateWithPleromaFE(this.$store)\n    } catch (error) {\n      this.$message.error(i18n.t('login.pleromaFELoginFailed'))\n    }\n\n    loadingInstance.close()\n    this.$router.push({ path: '/users/index' })\n    this.$message.success(i18n.t('login.pleromaFELoginSucceed'))\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./pleroma.vue?vue&type=template&id=aacc463a&\"\nimport script from \"./pleroma.vue?vue&type=script&lang=js&\"\nexport * from \"./pleroma.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}